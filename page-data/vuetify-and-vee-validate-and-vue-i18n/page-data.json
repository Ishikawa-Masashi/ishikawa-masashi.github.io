{"componentChunkName":"component---src-templates-blog-post-template-tsx","path":"/vuetify-and-vee-validate-and-vue-i18n/","result":{"data":{"post":{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://vuetifyjs.com/ja/\">Vuetify</a> + <a href=\"https://baianat.github.io/vee-validate/\">VeeValidate</a>で入力チェックする際に、<a href=\"https://kazupon.github.io/vue-i18n/\">VueI18n</a>を使ってエラーメッセージを多言語対応・共通化する方法について紹介します。</p>\n<h2 id=\"定義方法\" style=\"position:relative;\"><a href=\"#%E5%AE%9A%E7%BE%A9%E6%96%B9%E6%B3%95\" aria-label=\"定義方法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>定義方法</h2>\n<h3 id=\"veevalidate\" style=\"position:relative;\"><a href=\"#veevalidate\" aria-label=\"veevalidate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VeeValidate</h3>\n<p>VeeValidateであらかじめ言語毎にエラーメッセージを用意しているので、そちらを使います。\n※<code class=\"language-text\">i18nRootKey</code>については後述の<a href=\"#vuei18n%E3%81%AE%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB\">vuei18nのメッセージファイル</a>で詳細を説明します。</p>\n<div class=\"gatsby-code-title\">VeeValidateの定義</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> VeeValidate <span class=\"token keyword\">from</span> <span class=\"token string\">'vee-validate'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// VeeValidateで用意されている日本語版入力チェックエラーメッセージを使う</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> ja <span class=\"token keyword\">from</span> <span class=\"token string\">'vee-validate/dist/locale/ja'</span><span class=\"token punctuation\">;</span></span><span class=\"token comment\">// VeeValidateで用意されている英語語版入力チェックエラーメッセージを使う</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> en <span class=\"token keyword\">from</span> <span class=\"token string\">'vee-validate/dist/locale/en'</span><span class=\"token punctuation\">;</span></span><span class=\"token comment\">// VueI18nオブジェクトをインポートする</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> i18n <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./i18n'</span><span class=\"token punctuation\">;</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>VeeValidate<span class=\"token punctuation\">,</span> \n  <span class=\"token comment\">// オプションでi18nを指定する</span>\n  <span class=\"token punctuation\">{</span>\n    i18n<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">i18nRootKey</span><span class=\"token operator\">:</span> <span class=\"token string\">'validations'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">dictionary</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> ja<span class=\"token punctuation\">,</span> en <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"vuei18n\" style=\"position:relative;\"><a href=\"#vuei18n\" aria-label=\"vuei18n permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VueI18n</h3>\n<p>こちらは以前<a href=\"vue-i18n-in-script-tag#%E4%BD%BF%E3%81%84%E6%96%B9\">「VueI18nをscriptタグやJSファイル内で使う方法」</a>で紹介したものと同様です。</p>\n<div class=\"gatsby-code-title\">VueI18nの定義</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> VueI18n <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-i18n'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// メッセージ定義はjsonファイルから読み込む</span>\n<span class=\"token keyword\">const</span> messages <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./i18n.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>VueI18n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ブラウザ言語を取得</span>\n<span class=\"token keyword\">const</span> language <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span>\n    window<span class=\"token punctuation\">.</span>navigator<span class=\"token punctuation\">.</span>languages\n    <span class=\"token operator\">&amp;&amp;</span> window<span class=\"token punctuation\">.</span>navigator<span class=\"token punctuation\">.</span>languages<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>navigator<span class=\"token punctuation\">.</span>language\n  <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>navigator<span class=\"token punctuation\">.</span>userLanguage\n  <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>navigator<span class=\"token punctuation\">.</span>browserLanguage\n  <span class=\"token operator\">||</span> <span class=\"token string\">'ja'</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> locale <span class=\"token operator\">=</span> language<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">'ja'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'ja'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// VueI18nで使う言語はブラウザ言語とする</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> i18n <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VueI18n</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  locale<span class=\"token punctuation\">,</span>\n  messages<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"vuei18nのメッセージファイル\" style=\"position:relative;\"><a href=\"#vuei18n%E3%81%AE%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB\" aria-label=\"vuei18nのメッセージファイル permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VueI18nのメッセージファイル</h3>\n<p>VeeValidateの定義で<code class=\"language-text\">i18nRootKey: 'validations',</code>と指定したので、\nメッセージファイルでは、言語別に<code class=\"language-text\">validations</code>というプロパティを定義します。\nその中の<code class=\"language-text\">attributes</code>でエラー項目名を指定できます。</p>\n<div class=\"gatsby-code-title\">VueI18nのメッセージファイル(JSONファイル)</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"ja\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token property\">\"validations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token property\">\"attributes\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span>        <span class=\"token property\">\"contractName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"契約名\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"en\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token property\">\"validations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token property\">\"attributes\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span>        <span class=\"token property\">\"contractName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ContractName\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"vueファイルでの使い方\" style=\"position:relative;\"><a href=\"#vue%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A7%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\" aria-label=\"vueファイルでの使い方 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vueファイルでの使い方</h2>\n<p>Vuetifyの<code class=\"language-text\">v-text-field</code>タグの場合、以下のように実装します。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-text-field</span>\n    <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>editedItem.name<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">&lt;!--</span> <span class=\"token attr-name\">VeeValidateでの項目名を定義</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">&lt;!-- ※i18nのメッセージファイルで定義している項目名と合わせる --></span></span><span class=\"gatsby-highlight-code-line\">    data-vv-name=\"contractName\"</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">&lt;!-- data-vv-nameで定義した名前でエラーメッセージを取得する --></span></span><span class=\"gatsby-highlight-code-line\">    :error-messages=\"errors.collect('contractName')\"</span>    >\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>v-text-field</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>validate<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>入力チェック<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">editedItem</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">validate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> valid <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$validator<span class=\"token punctuation\">.</span><span class=\"token function\">validateAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>valid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'入力チェックNGです！！！'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>以上です🍅</p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://baianat.github.io/vee-validate/guide/localization.html#vuei18n-integration\">Localization | VeeValidate</a></li>\n</ul>","excerpt":"なにこれ Vuetify + VeeValidateで入力チェックする際に、VueI18nを使ってエラーメッセージを多言語対応・共通化する方法について紹介します。 定義方法 VeeValidate VeeValidate…","frontmatter":{"slug":"/vuetify-and-vee-validate-and-vue-i18n","title":"Vuetify + VeeValidate + VueI18nでエラーメッセージ共通化","date":"2019-03-02T12:30:00.000+09:00","tags":["Vue.js","Vuetify","VeeValidate","VueI18n"],"keywords":["Vue.js"],"thumbnail":"thumbnail/2019/03/vuetify-and-vee-validate-and-vue-i18n.png"},"headingsDetail":[{"id":"なにこれ","value":"なにこれ","depth":2,"parents":[]},{"id":"定義方法","value":"定義方法","depth":2,"parents":[]},{"id":"veevalidate","value":"VeeValidate","depth":3,"parents":[{"id":"定義方法","value":"定義方法","depth":2}]},{"id":"vuei18n","value":"VueI18n","depth":3,"parents":[{"id":"定義方法","value":"定義方法","depth":2}]},{"id":"vuei18nのメッセージファイル","value":"VueI18nのメッセージファイル","depth":3,"parents":[{"id":"定義方法","value":"定義方法","depth":2}]},{"id":"vueファイルでの使い方","value":"Vueファイルでの使い方","depth":2,"parents":[]},{"id":"参考","value":"参考","depth":2,"parents":[]}]}},"pageContext":{"thumbnail":{"node":{"relativePath":"thumbnail/2019/03/vuetify-and-vee-validate-and-vue-i18n.png","name":"vuetify-and-vee-validate-and-vue-i18n","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/18af245281fd367cb3237396a26d6152/2d11e/vuetify-and-vee-validate-and-vue-i18n.png","srcSet":"/static/18af245281fd367cb3237396a26d6152/1df15/vuetify-and-vee-validate-and-vue-i18n.png 300w,\n/static/18af245281fd367cb3237396a26d6152/ae865/vuetify-and-vee-validate-and-vue-i18n.png 600w,\n/static/18af245281fd367cb3237396a26d6152/2d11e/vuetify-and-vee-validate-and-vue-i18n.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/18af245281fd367cb3237396a26d6152/91542/vuetify-and-vee-validate-and-vue-i18n.webp 300w,\n/static/18af245281fd367cb3237396a26d6152/86b42/vuetify-and-vee-validate-and-vue-i18n.webp 600w,\n/static/18af245281fd367cb3237396a26d6152/c4678/vuetify-and-vee-validate-and-vue-i18n.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":630}}}},"siteMetadata":{"title":"Masashi Ishikawa's portfolio","author":"Masashi Ishikawa"},"slug":"/vuetify-and-vee-validate-and-vue-i18n","relatedPosts":[{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://vuetifyjs.com/ja/\">Vuetify</a> + <a href=\"https://baianat.github.io/vee-validate/\">VeeValidate</a>で入力チェックする際に、<a href=\"https://kazupon.github.io/vue-i18n/\">VueI18n</a>を使ってエラーメッセージを多言語対応・共通化する場合に、カスタムバリデーションのエラーメッセージをロケールごとに設定する方法について紹介します。</p>\n<h2 id=\"実装方法\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95\" aria-label=\"実装方法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装方法</h2>\n<p>以前の記事<a href=\"https://takumon.com/vuetify-and-vee-validate-and-vue-i18n\">「Vuetify + VeeValidate + VueI18nでエラーメッセージ共通化」</a>\nをベースにして、VeeValidateの定義方法を以下のようにします。\n例ではMACアドレスのチェックを定義しています。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> VeeValidate <span class=\"token keyword\">from</span> <span class=\"token string\">'vee-validate'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ja <span class=\"token keyword\">from</span> <span class=\"token string\">'vee-validate/dist/locale/ja'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> en <span class=\"token keyword\">from</span> <span class=\"token string\">'vee-validate/dist/locale/en'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> i18n <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./i18n'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// マックアドレスチェック</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token constant\">MAC_ADDRESS</span> <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^([0-9A-Fa-f]{2}[:-]){5}[0-9A-Fa-f]{2}$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">VeeValidate<span class=\"token punctuation\">.</span>Validator<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token string\">'macaddress'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token constant\">MAC_ADDRESS</span><span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"gatsby-highlight-code-line\">ja<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">macaddress</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">field</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>field<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">の形式が正しくありません。</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">en<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">macaddress</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">field</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">format of </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>field<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is not collect.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span>\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>VeeValidate<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  i18n<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">i18nRootKey</span><span class=\"token operator\">:</span> <span class=\"token string\">'validations'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">dictionary</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    ja<span class=\"token punctuation\">,</span>\n    en<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>重要なのはこの部分です。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> ja <span class=\"token keyword\">from</span> <span class=\"token string\">'vee-validate/dist/locale/ja'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> en <span class=\"token keyword\">from</span> <span class=\"token string\">'vee-validate/dist/locale/en'</span><span class=\"token punctuation\">;</span>\n\nja<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">macaddress</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">field</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>field<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">の形式が正しくありません。</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\nen<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">macaddress</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">field</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">format of </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>field<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is not collect.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>VeeValidateのカスタムバリデーションのメッセージは通常<code class=\"language-text\">getMessage</code>で定義します。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">VeeValidate<span class=\"token punctuation\">.</span>Validator<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token string\">'macaddress'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">getMessage</span><span class=\"token operator\">:</span> <span class=\"token parameter\">field</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>field<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">の形式が正しくありません。</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token constant\">MAC_ADDRESS</span><span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>ただVuetifyとi18nと合わせて使う場合は、<code class=\"language-text\">getMessage</code>ではなく、<code class=\"language-text\">dictionary</code>に登録するロケールごとのメッセージ集に追加してあげることでメッセージが有効になります。<br/>\n以上です🍅</p>","excerpt":"なにこれ Vuetify + VeeValidateで入力チェックする際に、VueI18nを使ってエラーメッセージを多言語対応・共通化する場合に、カスタムバリデーションのエラーメッセージをロケールごとに設定する方法について紹介します。 実装方法 以前の記事「Vuetify…","frontmatter":{"slug":"/vee-validate-custom-validation-locale-message","title":"Vuetify + VeeValidate + VueI18nでカスタムバリデーション作成時にロケールごとのエラーメッセージを設定する方法","date":"2019-04-07T14:10:00.000+09:00","tags":["Vue.js","Vuetify","VeeValidate","VueI18n"],"keywords":["Vue.js"],"thumbnail":"thumbnail/2019/04/vee-validate-custom-validation-locale-message.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>VuetifyのDataTableとPaginationを使った検索一覧画面でページングの状態を、ルーティングをまたいで保存しておきたい。という要望を満たすため、ページングの状態をVuexで管理する方法をメモします。\nDataTableだけだとすんなりできますが、Paginationもあわせて使う場合は少し雑な実装になってしまいます。</p>\n<h2 id=\"やり方\" style=\"position:relative;\"><a href=\"#%E3%82%84%E3%82%8A%E6%96%B9\" aria-label=\"やり方 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>やり方</h2>\n<p>まずはストアに以下のように定義します。\nアクションには「ページングオブジェクト保存」と「ページングオブジェクトのページのみ保存」の2種類を用意します。</p>\n<div class=\"gatsby-code-title\">サンプル実装（Vuex側）</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vuex<span class=\"token punctuation\">.</span>Store</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">pagination</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">page</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">rowsPerPage</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">sortBy</span><span class=\"token operator\">:</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">descending</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">getter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">getPagination</span><span class=\"token operator\">:</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">actions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">SAVE_PAGINATION</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> commit <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> payload</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n        page<span class=\"token punctuation\">,</span>\n        rowsPerPage<span class=\"token punctuation\">,</span>\n        sortBy<span class=\"token punctuation\">,</span>\n        descending<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> payload<span class=\"token punctuation\">;</span>\n\n      <span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'savePagination'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        page<span class=\"token punctuation\">,</span>\n        rowsPerPage<span class=\"token punctuation\">,</span>\n        sortBy<span class=\"token punctuation\">,</span>\n        descending<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token constant\">SAVE_PAGINATION_PAGE</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> commit <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> payload</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> page <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> payload<span class=\"token punctuation\">;</span>\n      <span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'savePaginationPage'</span><span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">mutations</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">savePagination</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> pagination</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>pagination <span class=\"token operator\">=</span> pagination<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">savePaginationPage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> page</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">.</span>page <span class=\"token operator\">=</span> page<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>次にコンポーネント側です。\n<code class=\"language-text\">v-data-table</code>,<code class=\"language-text\">v-pagination</code>ともにVuexのページングオブジェクトを参照し、UIで変更があればVuexのアクションを呼び出します。それぞれのタグで微妙にやり方が違います。\nもう少しスマートにしたかったのですが、実際動かしてみた感じだとどうしてもスマートにはできませんでした。</p>\n<div class=\"gatsby-code-title\">サンプル実装（コンポーネント側）</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>\n      ページングはpaginationに任せるのでhide<span class=\"token operator\">-</span>actionsを指定している\n      pagination<span class=\"token punctuation\">.</span>syncにはgetterとsetterを持たせたpaginationを指定\n    <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>v<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>table\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">:</span>pagination<span class=\"token punctuation\">.</span>sync<span class=\"token operator\">=</span><span class=\"token string\">\"pagination\"</span></span>      <span class=\"token operator\">:</span>items<span class=\"token operator\">=</span><span class=\"token string\">\"items\"</span>\n      hide<span class=\"token operator\">-</span>actions\n    <span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブルの中身 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>v<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>table<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>\n      valueでVuexのページングオブジェクトを参照して\n      <span class=\"token constant\">UI</span>側からの変更は@inputでVuexのアクションを呼び出す\n    <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>v<span class=\"token operator\">-</span>pagination\n      <span class=\"token operator\">:</span>length<span class=\"token operator\">=</span><span class=\"token string\">\"pages\"</span>\n      v<span class=\"token operator\">-</span><span class=\"token keyword\">if</span><span class=\"token operator\">=</span><span class=\"token string\">\"pages >= 2\"</span>\n      <span class=\"token operator\">:</span>total<span class=\"token operator\">-</span>visible<span class=\"token operator\">=</span><span class=\"token string\">\"7\"</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">:</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"paginationPage\"</span></span><span class=\"gatsby-highlight-code-line\">      @input<span class=\"token operator\">=</span><span class=\"token string\">\"savePaginationPageInStore({ page: $event })\"</span></span>    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> mapActions<span class=\"token punctuation\">,</span> mapGetters <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n\n\n  <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">items</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n\n  <span class=\"token literal-property property\">computed</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token function\">mapGetters</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">paginationInStore</span><span class=\"token operator\">:</span> <span class=\"token string\">'getPagination'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token literal-property property\">pagination</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// Vuexのページングオブジェクトを参照</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>paginationInStore<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// UI側から変更があった場合はSetter経由でVuexのアクションを呼び出す</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>pagination<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">savePaginationInStore</span><span class=\"token punctuation\">(</span>pagination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span>\n    <span class=\"token comment\">// ページネーション参照用</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">paginationPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>paginationInStore<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\"></span>    <span class=\"token comment\">// ページネーション用ページ数算出メソッド</span>\n    <span class=\"token function\">pages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">.</span>rowsPerPage <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">/</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">.</span>rowsPerPage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token function\">mapActions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">savePaginationInStore</span><span class=\"token operator\">:</span> <span class=\"token string\">'SAVE_PAGINATION'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">savePaginationPageInStore</span><span class=\"token operator\">:</span> <span class=\"token string\">'SAVE_PAGINATION_PAGE'</span><span class=\"token punctuation\">,</span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>これでルーティングをまたいでページングオブジェクトを保持できるようになりました。\n実用の場面では、検索条件もVuexに持たせて、ページングオブジェクトと連動させて使います。<br/>\n以上です🍅</p>","excerpt":"なにこれ VuetifyのDataTableとPaginationを使った検索一覧画面でページングの状態を、ルーティングをまたいで保存しておきたい。という要望を満たすため、ページングの状態をVuexで管理する方法をメモします。\nDataTable…","frontmatter":{"slug":"/vuetify-datatable-and-pagination-with-vuex","title":"VuetifyのDataTableとPaginationの状態をVuexで管理する","date":"2019-04-28T20:30:00.000+09:00","tags":["Vue.js","Vuetify","Vuex"],"keywords":["Vue.js"],"thumbnail":"thumbnail/2019/04/vuetify-datatable-and-pagination-with-vuex.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>VuetifyのSnackbarはメッセージを1つしか表示できません。こちらGitHubでもissueになっています。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://github.com/vuetifyjs/vuetify/issues/2384\" data-iframely-url=\"//cdn.iframe.ly/vKsahN0\"></a></div></div>\n<br/>\n<p>ただUIとしてはメッセージを複数表示できたほうが便利なので、今回はVuetifyのSnackbarをベースにメッセージを複数表示できるようにカスタムしてみました。\n※Snackbarはアプリ共通で呼び出すことが多いので、今回のサンプル実装でもSnackbarのメッセージはVuexで管理しています。</p>\n<h2 id=\"見た目\" style=\"position:relative;\"><a href=\"#%E8%A6%8B%E3%81%9F%E7%9B%AE\" aria-label=\"見た目 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>見た目</h2>\n<p>1つでもメッセージがあるとSnackbarが表示され、\n複数同時に追加可能で、あとから追加することもできます。\nメッセージの表示時間は個別で管理できるようにしています。\nたとえばINFOメッセージはしばらくたったら自動で削除されますが、\nエラーメッセージは×ボタンを押さないかぎり削除されないなどの制御が可能です。</p>\n<p><img src=\"/5fcfe01c4dfae99c0bac9e8d1838bfa9/multi-message-snackbar.gif\" alt=\"\"></p>\n<h2 id=\"仕様\" style=\"position:relative;\"><a href=\"#%E4%BB%95%E6%A7%98\" aria-label=\"仕様 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>仕様</h2>\n<p>ざっくり登場人物とその責務を...</p>\n<h3 id=\"ストア\" style=\"position:relative;\"><a href=\"#%E3%82%B9%E3%83%88%E3%82%A2\" aria-label=\"ストア permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ストア</h3>\n<ul>\n<li>Snackbarに表示するメッセージ配列を管理します。</li>\n<li>メッセージ配列の要素は、メッセージテキスト以外にも以下のような情報を保持します。\n<ul>\n<li>メッセージテキスト</li>\n<li>メッセージカラー\n<ul>\n<li>error, info, warn, successなど ※VuetifyのSnackbarの仕様に沿ったものです。</li>\n</ul>\n</li>\n<li>メッセージ表示時間\n<ul>\n<li>必須ではないです。</li>\n<li>指定しない場合、×ボタンを押さない限りずーっと表示し続けます。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"複数メッセージ表示用コンポーネント\" style=\"position:relative;\"><a href=\"#%E8%A4%87%E6%95%B0%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E8%A1%A8%E7%A4%BA%E7%94%A8%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88\" aria-label=\"複数メッセージ表示用コンポーネント permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>複数メッセージ表示用コンポーネント</h3>\n<ul>\n<li>VuetifyのSnackbarをラップしたコンポーネントです。</li>\n<li>VuetifyのSnackbarのメッセージ領域に、無理やり複数メッセージをねじ込むようなDOM構造＆スタイルを実装しています。</li>\n<li>個々のメッセージの識別と削除、Snackbar自体の表示制御を担います。</li>\n<li>個々のメッセージ表示は子コンポーネントに任せます。</li>\n</ul>\n<h3 id=\"メッセージ表示用コンポーネント\" style=\"position:relative;\"><a href=\"#%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E8%A1%A8%E7%A4%BA%E7%94%A8%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88\" aria-label=\"メッセージ表示用コンポーネント permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>メッセージ表示用コンポーネント</h3>\n<ul>\n<li>削除タイミングの管理（表示時間の管理、削除ボタン）を担います。</li>\n<li>メッセージの削除自体は親コンポーネントに委譲しています。</li>\n</ul>\n<h2 id=\"実装\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-label=\"実装 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h2>\n<p>最初にストアの実装です。<br/></p>\n<div class=\"gatsby-code-title\">ストア</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Vuex <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 個々のメッセージ識別するためのid採番用に使う</span>\n<span class=\"token keyword\">import</span> uuidv4 <span class=\"token keyword\">from</span> <span class=\"token string\">'uuid/v4'</span><span class=\"token punctuation\">;</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>Vuex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vuex<span class=\"token punctuation\">.</span>Store</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\n  <span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">messages</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">getters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// メッセージが1つもない場合はSnackbarを表示しない</span>\n    <span class=\"token function-variable function\">isShow</span><span class=\"token operator\">:</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span>legth <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getMessages</span><span class=\"token operator\">:</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">actions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * Snackbarにメッセージ(複数指定可)を表示する\n     */</span>\n    <span class=\"token constant\">ADD_MESSAGES</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> commit <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> payload</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'addMessages'</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">/**\n     * 指定したメッセージをSnackbarから削除する\n     */</span>\n    <span class=\"token constant\">REMOVE_MESSAGE</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> state<span class=\"token punctuation\">,</span> commit <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> payload</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'removeMessage'</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">mutations</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token function\">addMessages</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> payload</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// メッセージをストアに加える際に、個々のメッセージが識別できるようにidを加える</span>\n      state<span class=\"token punctuation\">.</span>messages <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>payload<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">m</span> <span class=\"token operator\">=></span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token function\">uuidv4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">removeMessage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> payload</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> payload<span class=\"token punctuation\">;</span>\n      state<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          state<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<br/>\n<p>次に、複数メッセージの受け皿となるコンポーネントです。\n個々のメッセージコンポーネントの生成、削除、Snackbarの表示制御を担います。</p>\n<div class=\"gatsby-code-title\">複数メッセージ表示用コンポーネント</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token comment\">&lt;!--\n    タイムアウトの管理は、大枠ではせずメッセージ毎に行う\n    全てのメッセージが消えたら大枠を消す\n    大枠を消す処理はStoreに実装する\n  --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-snackbar</span>\n    <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>isShow<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>white<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">:timeout</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">top</span>\n    <span class=\"token attr-name\">auto-height</span>\n  <span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- メッセージを縦並びにするためdivタグでラップする --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> -14px auto<span class=\"token punctuation\">;</span> <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0 -24px</span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span> <span class=\"token attr-name\">v-for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(message, index) in getMessages<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>snackbarMessage</span>\n            <span class=\"token attr-name\">:key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>message.id<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">@remove</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>removeMessage({ id: message.id })<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">:message</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>message<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token punctuation\">/></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n            <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span>1px 0<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span>\n            <span class=\"token attr-name\">v-if</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>index != lastIndex<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">:key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>`${message.id}-divider`<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>v-snackbar</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> mapGetters<span class=\"token punctuation\">,</span> mapActions <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// メッセージ表示用コンポーネント</span>\n<span class=\"token keyword\">import</span> snackbarMessage <span class=\"token keyword\">from</span> <span class=\"token string\">'./snackbar-message.vue'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token literal-property property\">components</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    snackbarMessage<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">computed</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token function\">mapGetters</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'isShow'</span>\n      <span class=\"token string\">'getMessages'</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">lastIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token function\">mapActions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">removeMessage</span><span class=\"token operator\">:</span> actionType<span class=\"token punctuation\">.</span>snackbar<span class=\"token punctuation\">.</span><span class=\"token constant\">REMOVE_MESSAGE</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<br/>\n<p>最後に個々のメッセージ用コンポーネントです。\n削除タイミングの管理（表示時間の管理、削除ボタン）を担い、メッセージの削除自体は親に委譲しています。</p>\n<div class=\"gatsby-code-title\">メッセージ表示用コンポーネント</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-card</span>\n    <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 6px 12px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span>\n    <span class=\"token attr-name\">:color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>message.state.color<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span><span class=\"token property\">align-items</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>{{ message.text }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-spacer</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>v-spacer</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-btn</span>\n      <span class=\"token attr-name\">icon</span>\n      <span class=\"token attr-name\">depressed</span>\n      <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>remove()<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-icon</span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rgba(51, 51, 51, 0.3)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>cancel<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>v-icon</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>v-btn</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>v-card</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> Object<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">activeTimeout</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">mounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// メッセージコンポーネントがマウントされた時点からカウント開始</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>activeTimeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> timeout <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// タイムアウト時間が設定されている場合は</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timeout<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 指定時間後にremoveを呼び出す</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>activeTimeout <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> timeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 親コンポーネントにremoveを発火</span>\n    <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">$emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'remove'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回はVuetifyのSnackbarで複数メッセージが表示できるようにする方法をご紹介しました。\n現在だと、<a href=\"https://www.npmjs.com/package/@tozd/vue-snackbar-queue\">複数表示できるようにするための拡張ライブラリ</a>も出ているようです。\nライブラリを使ってもいいかもしれませんが、UIの細かな部分はシステムに依存すると思うので、カスタムで作る際は是非参考にしてみてください🍅</p>","excerpt":"なにこれ VuetifyのSnackbarはメッセージを1つしか表示できません。こちらGitHubでもissueになっています。 ただUIとしてはメッセージを複数表示できたほうが便利なので、今回はVuetifyのSnackbar…","frontmatter":{"slug":"/multi-message-snackbar-in-vuetify","title":"VuetifyのSnackbarで複数メッセージ表示する方法","date":"2019-04-21T21:30:00.000+09:00","tags":["Vuetify","Vue.js"],"keywords":["Vue.js"],"thumbnail":"thumbnail/2019/04/multi-message-snackbar-in-vuetify.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>最近Vue.jsのマテリアルデザインのUIフレームワーク<a href=\"https://vuetifyjs.com/\">「Vuetify」</a>を使っています。\nとても便利で、管理アプリのようにデザインにこだわる必要がなければ、CSSをほとんど書かずに済むくらいコンポーネントが充実しています。\nただSelectタグでlabelとvalueを出しわける際に初期値を設定する場合は少しだけ注意点があるので、この記事ではそちらを紹介します。</p>\n<h2 id=\"return-objectを使いましょう\" style=\"position:relative;\"><a href=\"#return-object%E3%82%92%E4%BD%BF%E3%81%84%E3%81%BE%E3%81%97%E3%82%87%E3%81%86\" aria-label=\"return objectを使いましょう permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>return-objectを使いましょう</h2>\n<p>Selectタグでlabelとvalueを出しわけるときに初期値を設定する場合、v-modelで設定します。\n以下のような実装です。</p>\n<div class=\"gatsby-code-title\">うまくいかない例</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    {{ selectedPlan }}\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-select</span>\n      <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectedPlan<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">item-text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>label<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">item-value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>value<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">:items</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>plans<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>旅行プラン<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 最初はドイツを選択済にする</span>\n      <span class=\"token literal-property property\">selectedPlan</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">'ドイツ'</span>   <span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'germany'</span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">plans</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">'ドイツ'</span>   <span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'germany'</span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">'スペイン'</span> <span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'spain'</span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">'フランス'</span> <span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'france'</span>   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>ただしこれだと、初期表示は以下のようになりますが、</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 424px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6eb81294e0265dc344f11638ecb6cbfc/1cfa9/select-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA8klEQVR42pWP2WrEIBiF87ot7ZOUbg80Q3o90zsTQparkIRsaqLiHouCJbcjfJxz/PHHkwAAXvZ9v0MILxjjNIIQSrdtC95rJM4JISljLHLhnN+yLHtKiqL4ds65ruv0uq5OKeUYYwGttRvH0c3z7Djnru/74KdpCvPjOPxTZ601XsuyfE+qqvowxrhlWQSE0FBKjVIqIKU0QgjDOQ/e6zmfkH5hXddvSdM0n/5XbdvKYRgspdRqra2UMqCUCpx9zPGOMab8wqZpwsIvHzjnWgjxX+ORY3zFWBkA8MoY+9227Yox/kEIPQyE8EoIued5/vwHgRC+CCAMHJ8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6eb81294e0265dc344f11638ecb6cbfc/ba381/select-1.webp 200w,\n/static/6eb81294e0265dc344f11638ecb6cbfc/7f61c/select-1.webp 400w,\n/static/6eb81294e0265dc344f11638ecb6cbfc/96b95/select-1.webp 424w\"\n              sizes=\"(max-width: 424px) 100vw, 424px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6eb81294e0265dc344f11638ecb6cbfc/772e8/select-1.png 200w,\n/static/6eb81294e0265dc344f11638ecb6cbfc/e17e5/select-1.png 400w,\n/static/6eb81294e0265dc344f11638ecb6cbfc/1cfa9/select-1.png 424w\"\n            sizes=\"(max-width: 424px) 100vw, 424px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6eb81294e0265dc344f11638ecb6cbfc/1cfa9/select-1.png\"\n            alt=\"select 1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>セレクトボックスで他を選択すると、以下のようにオブジェクトではなくvalueが<code class=\"language-text\">selectedPlan</code>に代入されてしまいます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 436px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b1ebc2d61e0daf4613cd63133093ab9a/8574c/select-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA1ElEQVR42p3QW26DMBAFUO80XVZj0s+kG7L4aSSwMZTSxvEDG79gIrcbKBnpaDQ/V1eDCCEHa+3FOoeVMSel1DOw1vpcshCl9AQAoKRMMUZ4ZrZty2U3TVOhgfOjCRuQa+fHm8nGhey932kJJbBt21c08K7yAPAxyNT/GJiEgZwipB188L8NGaMYMcZwOXjfh3H8Wj/HaTXzss7O/4tb/DrdbSwVOaNH1FFalUCdIM0ZwBRpHx3/fsgoxYgQ8qKVepfiu5Li9lZoKXZRUlRK3S91XR8eiUUHAK+llh0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/b1ebc2d61e0daf4613cd63133093ab9a/ba381/select-2.webp 200w,\n/static/b1ebc2d61e0daf4613cd63133093ab9a/7f61c/select-2.webp 400w,\n/static/b1ebc2d61e0daf4613cd63133093ab9a/bfa8c/select-2.webp 436w\"\n              sizes=\"(max-width: 436px) 100vw, 436px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/b1ebc2d61e0daf4613cd63133093ab9a/772e8/select-2.png 200w,\n/static/b1ebc2d61e0daf4613cd63133093ab9a/e17e5/select-2.png 400w,\n/static/b1ebc2d61e0daf4613cd63133093ab9a/8574c/select-2.png 436w\"\n            sizes=\"(max-width: 436px) 100vw, 436px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/b1ebc2d61e0daf4613cd63133093ab9a/8574c/select-2.png\"\n            alt=\"select 2\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>これを防ぐためには<strong>return-object</strong>を使いましょう。\n以下のように<code class=\"language-text\">v-select</code>タグに<code class=\"language-text\">return-object</code>属性を追加してあげます。</p>\n<div class=\"gatsby-code-title\">うまくいく例</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    {{ selectedPlan }}\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>v-select</span>\n      <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectedPlan<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">item-text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>label<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">item-value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>value<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">:items</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>plans<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>旅行プラン<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token attr-name\">return-object</span></span>    <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 最初はドイツを選択済にする</span>\n      <span class=\"token literal-property property\">selectedPlan</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">'ドイツ'</span>   <span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'germany'</span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">plans</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">'ドイツ'</span>   <span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'germany'</span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">'スペイン'</span> <span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'spain'</span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">'フランス'</span> <span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'france'</span>   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>こうすることで、セレクトタグで初期値から値を変えても<code class=\"language-text\">selectedPlan</code>にはオブジェクトが代入されるようになります。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 429px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/38fe65e9fc57c87517a404422aa3622c/3d026/select-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABIklEQVR42p2QwU7DMAyG+26IhwH2ShOHadoJnmHaqdKmiTMcEEJtByWN0yQkTrwYubAJrhw++bcc//qdylp7H0JcxBiWzrml9/6M9CGEZYzxrAXRxpgzALAAgLv1en1ZMTPrQRGAZqLMKaWJnDOXUth7z1prRkS21rIxZtLH41FWpzelFBJd1/WsisT89NLg82tHMDrSWtM4jgQA5Jyjvu+paRqy1lLXdRMyDyEQIp5AMdztdtcVZObH1lI7BD5oz0Q0JZUqKSWJ8FvL7HSJEBHpx/CmShj40Dbx0LX54/0te+dyzikj4h9Skhq/9alPmCljPsBnLMz8sN9fTX84xEKAzP9F9sVnu61nlTHjqldqrtRwq5T6F8Og5lrr1WazufgCVVcHIj2ydFgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/38fe65e9fc57c87517a404422aa3622c/ba381/select-3.webp 200w,\n/static/38fe65e9fc57c87517a404422aa3622c/7f61c/select-3.webp 400w,\n/static/38fe65e9fc57c87517a404422aa3622c/649fd/select-3.webp 429w\"\n              sizes=\"(max-width: 429px) 100vw, 429px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/38fe65e9fc57c87517a404422aa3622c/772e8/select-3.png 200w,\n/static/38fe65e9fc57c87517a404422aa3622c/e17e5/select-3.png 400w,\n/static/38fe65e9fc57c87517a404422aa3622c/3d026/select-3.png 429w\"\n            sizes=\"(max-width: 429px) 100vw, 429px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/38fe65e9fc57c87517a404422aa3622c/3d026/select-3.png\"\n            alt=\"select 3\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>以上です🍅</p>","excerpt":"なにこれ 最近Vue.jsのマテリアルデザインのUIフレームワーク「Vuetify」を使っています。\nとても便利で、管理アプリのようにデザインにこだわる必要がなければ、CSSをほとんど書かずに済むくらいコンポーネントが充実しています。\nただSelectタグでlabelとvalue…","frontmatter":{"slug":"/vuetify-select-tag","title":"VuetifyでSelectタグを使う時の注意点","date":"2019-03-24T23:55:00.000+09:00","tags":["Vue.js","Vuetify"],"keywords":["Vue.js"],"thumbnail":"thumbnail/2019/03/vuetify-select-tag.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://kazupon.github.io/vue-i18n/\"><strong>VueI18n</strong></a>はVue.jsの多言語対応ライブラリです。vueファイルのtemplateタグでは、<code class=\"language-text\">&lt;p>{{$t('message.hello')}}&lt;/p></code>のように使います。ただ<strong>vueファイルのscriptタグや、他のJavaScriptファイルでの使い方</strong>は<a href=\"https://kazupon.github.io/vue-i18n/guide/formatting.html\">ガイド</a>に明記されていません。今回はそのやり方についてご紹介します。</p>\n<h2 id=\"使い方\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-label=\"使い方 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h2>\n<p><a href=\"https://github.com/kazupon/vue-i18n/issues/149\">GitHubのIssue</a>に答えが載っています。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"https://github.com/kazupon/vue-i18n/issues/149\" data-iframely-url=\"//cdn.iframe.ly/GvV4JME\"></a></div></div>\n<br/>\n<p>まずVueI18nを以下のように定義します。</p>\n<div class=\"gatsby-code-title\">i18n.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span>\n<span class=\"token keyword\">import</span> VueI18n <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-i18n'</span>\n\n<span class=\"token keyword\">const</span> messages <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">en</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">hello</span><span class=\"token operator\">:</span> <span class=\"token string\">'hello world'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">ja</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">hello</span><span class=\"token operator\">:</span> <span class=\"token string\">'こんにちは、世界'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>VueI18n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> i18n <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VueI18n</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">locale</span><span class=\"token operator\">:</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span>\n  messages<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>vueファイルのscriptタグでは以下のようにします。\n<strong>VueI18nオブジェクトの<code class=\"language-text\">tc</code>メソッドを使います。</strong>\nこうすることでvueファイルのscriptやJavaScriptファイルなど、どこでも使えるようになります。</p>\n<div class=\"gatsby-code-title\">vueファイルのscriptタグ</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// i18nをインポートします</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> i18n <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'i18n.jsの相対パス'</span></span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* (中略) */</span>\n    <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">getHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">return</span> i18n<span class=\"token punctuation\">.</span><span class=\"token function\">tc</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message.hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>        <span class=\"token punctuation\">}</span>    \n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">/* (中略) */</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>以上です🍅</p>","excerpt":"なにこれ VueI18nはVue.jsの多言語対応ライブラリです。vueファイルのtemplateタグでは、のように使います。ただvueファイルのscriptタグや、他のJavaScript…","frontmatter":{"slug":"/vue-i18n-in-script-tag","title":"VueI18nをscriptタグやJSファイル内で使う方法","date":"2019-02-21T07:50:00.000+09:00","tags":["Vue.js","VueI18n"],"keywords":["Vue.js"],"thumbnail":"thumbnail/2019/02/vue-i18n-in-script-tag.png","category":null}}],"latestPosts":[{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Windowsでキーバインドをお気軽にいじれる<a href=\"https://www.autohotkey.com/\">AutoHotkey</a>の紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。</p>\n<h2 id=\"autohotkeyとは\" style=\"position:relative;\"><a href=\"#autohotkey%E3%81%A8%E3%81%AF\" aria-label=\"autohotkeyとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AutoHotkeyとは</h2>\n<p>Windows版で提供されているソフトウェアで、専用のプログラミング言語でキーバインドを定義すれば、任意のキー入力に対してスクリプトを実行できます。既存のキーに別のキーの割当てたり、複雑なショートカットコマンドの割当が可能です。</p>\n<h3 id=\"良い部分\" style=\"position:relative;\"><a href=\"#%E8%89%AF%E3%81%84%E9%83%A8%E5%88%86\" aria-label=\"良い部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>良い部分</h3>\n<p><strong>サクッと導入して合わなかったらサクッと廃止できます。</strong><br>\n同じようなものでWindowsの<a href=\"https://forest.watch.impress.co.jp/library/software/changekey/\">Change Key</a>やMacの<a href=\"https://karabiner-elements.pqrs.org/\">Karabiner Elements</a>がありますが、AutoHotkeyはアプリレイヤーで制御するので、アプリを終了すれば通常操作に戻れて、レジストリをいじったりしなくて良いという手軽さが魅力です。</p>\n<h3 id=\"イマイチな部分\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%9E%E3%82%A4%E3%83%81%E3%81%AA%E9%83%A8%E5%88%86\" aria-label=\"イマイチな部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>イマイチな部分</h3>\n<p><strong>独自言語で設定します。</strong><br>\n言語仕様はAutoHotkey公式リファレンスを見て学習が必要です。\n少し独特な言語で処理をどこでreturnするか分かりづらい気がします。</p>\n<p><strong>リモート接続PCでは効きません。</strong><br>\nリモート接続先のPCの操作に対してはAutHotkeyの設定は有効になりません。テレワークでリモートPC操作がメインの方だとイマイチかもしれません。これはChange KeyもKarabiner Elementsも同じですが...</p>\n<h2 id=\"実例紹介全体像\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E5%85%A8%E4%BD%93%E5%83%8F\" aria-label=\"実例紹介全体像 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：全体像</h2>\n<p>Windowsだと<code class=\"language-text\">Ctrl</code>+スクロールは拡大/縮小、<code class=\"language-text\">Shift</code>+スクロールは横スクロールになっています。\nこのノリを<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>にも拡張する感じでAutoHotkeyで設定します。<br>\n右手でマウススクロールしながら、左手で<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>を押下することで、目的のデスクトップ・アプリ・タブに素早く直感的に移動できます。</p>\n<p><img src=\"./overview.png\" alt=\"overview\"></p>\n<h2 id=\"実例紹介ソースコード\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89\" aria-label=\"実例紹介ソースコード permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：ソースコード</h2>\n<p>まずはソースコード全量を示します。</p>\n<div class=\"gatsby-code-title\">AutoHotkey設定ファイルの実例</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span> 仮想デスクトップ間移動\n~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span>\n\n<span class=\"token punctuation\">;</span> アプリ間移動\n~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab\n\n<span class=\"token punctuation\">;</span> Tabの修飾キー化\n<span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn\n\n<span class=\"token punctuation\">;</span> タブ間移動：VSCode\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span> タブ間移動：Chrome\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>以下で処理の塊ごとに説明します。</p>\n<h3 id=\"仮想デスクトップ間移動\" style=\"position:relative;\"><a href=\"#%E4%BB%AE%E6%83%B3%E3%83%87%E3%82%B9%E3%82%AF%E3%83%88%E3%83%83%E3%83%97%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"仮想デスクトップ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>仮想デスクトップ間移動</h3>\n<p><code class=\"language-text\">Win</code> + スクロール実行時に、<code class=\"language-text\">Win</code> + 左右矢印を発動するように設定します。\n<code class=\"language-text\">Left</code>,<code class=\"language-text\">Right</code>の向きは好みによって変えてください。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"アプリ間移動\" style=\"position:relative;\"><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"アプリ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アプリ間移動</h3>\n<p>同じように<code class=\"language-text\">Alt</code>+ スクロール実行時に、<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>を発動するように設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<br/>\n<p>※ちなみに<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>のアプローチは複数選択肢がありますが、<code class=\"language-text\">Alt</code>を押し続ける必要があり、１つのキーで代替するのは難しく皆さん実現に苦労されているようです。</p>\n<h3 id=\"タブ移動\" style=\"position:relative;\"><a href=\"#%E3%82%BF%E3%83%96%E7%A7%BB%E5%8B%95\" aria-label=\"タブ移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>タブ移動</h3>\n<p>Tabは修飾キー化が必要です。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  <span class=\"token punctuation\">;</span> 押し続けている限りリピートせず待機\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  <span class=\"token punctuation\">;</span> 押下中に他のホットキーが発動した場合は入力無し い\n  <span class=\"token punctuation\">;</span> 長押しの場合も入力無し\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>さらにアプリ毎にショートカットキーが異なるのでアプリ別に設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span>マウスホイールでタブ移動（VScode）\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span>マウスホイールでタブ移動（クローム）\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回紹介したのはスクロールとの組み合わせでしたが、AutoHotkeyは他にもさまざまな設定ができるので便利です。是非使ってみてください🍅</p>","excerpt":"なにこれ Windowsでキーバインドをお気軽にいじれるAutoHotkeyの紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。 AutoHotkeyとは Windows…","frontmatter":{"slug":"/autohotkey-mouse-scroll-combination","title":"AutoHotkey スクロールと修飾キーの組合せが便利","date":"2023-04-07T09:00:00.000+09:00","tags":["キーボード","AutoHotkey","作業効率化"],"keywords":["キーボード"],"thumbnail":"thumbnail/2023/04/autohotkey-mouse-scroll-combination.png","category":"game"}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Windowsでキーバインドをお気軽にいじれる<a href=\"https://www.autohotkey.com/\">AutoHotkey</a>の紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。</p>\n<h2 id=\"autohotkeyとは\" style=\"position:relative;\"><a href=\"#autohotkey%E3%81%A8%E3%81%AF\" aria-label=\"autohotkeyとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AutoHotkeyとは</h2>\n<p>Windows版で提供されているソフトウェアで、専用のプログラミング言語でキーバインドを定義すれば、任意のキー入力に対してスクリプトを実行できます。既存のキーに別のキーの割当てたり、複雑なショートカットコマンドの割当が可能です。</p>\n<h3 id=\"良い部分\" style=\"position:relative;\"><a href=\"#%E8%89%AF%E3%81%84%E9%83%A8%E5%88%86\" aria-label=\"良い部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>良い部分</h3>\n<p><strong>サクッと導入して合わなかったらサクッと廃止できます。</strong><br>\n同じようなものでWindowsの<a href=\"https://forest.watch.impress.co.jp/library/software/changekey/\">Change Key</a>やMacの<a href=\"https://karabiner-elements.pqrs.org/\">Karabiner Elements</a>がありますが、AutoHotkeyはアプリレイヤーで制御するので、アプリを終了すれば通常操作に戻れて、レジストリをいじったりしなくて良いという手軽さが魅力です。</p>\n<h3 id=\"イマイチな部分\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%9E%E3%82%A4%E3%83%81%E3%81%AA%E9%83%A8%E5%88%86\" aria-label=\"イマイチな部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>イマイチな部分</h3>\n<p><strong>独自言語で設定します。</strong><br>\n言語仕様はAutoHotkey公式リファレンスを見て学習が必要です。\n少し独特な言語で処理をどこでreturnするか分かりづらい気がします。</p>\n<p><strong>リモート接続PCでは効きません。</strong><br>\nリモート接続先のPCの操作に対してはAutHotkeyの設定は有効になりません。テレワークでリモートPC操作がメインの方だとイマイチかもしれません。これはChange KeyもKarabiner Elementsも同じですが...</p>\n<h2 id=\"実例紹介全体像\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E5%85%A8%E4%BD%93%E5%83%8F\" aria-label=\"実例紹介全体像 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：全体像</h2>\n<p>Windowsだと<code class=\"language-text\">Ctrl</code>+スクロールは拡大/縮小、<code class=\"language-text\">Shift</code>+スクロールは横スクロールになっています。\nこのノリを<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>にも拡張する感じでAutoHotkeyで設定します。<br>\n右手でマウススクロールしながら、左手で<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>を押下することで、目的のデスクトップ・アプリ・タブに素早く直感的に移動できます。</p>\n<p><img src=\"./overview.png\" alt=\"overview\"></p>\n<h2 id=\"実例紹介ソースコード\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89\" aria-label=\"実例紹介ソースコード permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：ソースコード</h2>\n<p>まずはソースコード全量を示します。</p>\n<div class=\"gatsby-code-title\">AutoHotkey設定ファイルの実例</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span> 仮想デスクトップ間移動\n~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span>\n\n<span class=\"token punctuation\">;</span> アプリ間移動\n~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab\n\n<span class=\"token punctuation\">;</span> Tabの修飾キー化\n<span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn\n\n<span class=\"token punctuation\">;</span> タブ間移動：VSCode\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span> タブ間移動：Chrome\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>以下で処理の塊ごとに説明します。</p>\n<h3 id=\"仮想デスクトップ間移動\" style=\"position:relative;\"><a href=\"#%E4%BB%AE%E6%83%B3%E3%83%87%E3%82%B9%E3%82%AF%E3%83%88%E3%83%83%E3%83%97%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"仮想デスクトップ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>仮想デスクトップ間移動</h3>\n<p><code class=\"language-text\">Win</code> + スクロール実行時に、<code class=\"language-text\">Win</code> + 左右矢印を発動するように設定します。\n<code class=\"language-text\">Left</code>,<code class=\"language-text\">Right</code>の向きは好みによって変えてください。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"アプリ間移動\" style=\"position:relative;\"><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"アプリ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アプリ間移動</h3>\n<p>同じように<code class=\"language-text\">Alt</code>+ スクロール実行時に、<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>を発動するように設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<br/>\n<p>※ちなみに<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>のアプローチは複数選択肢がありますが、<code class=\"language-text\">Alt</code>を押し続ける必要があり、１つのキーで代替するのは難しく皆さん実現に苦労されているようです。</p>\n<h3 id=\"タブ移動\" style=\"position:relative;\"><a href=\"#%E3%82%BF%E3%83%96%E7%A7%BB%E5%8B%95\" aria-label=\"タブ移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>タブ移動</h3>\n<p>Tabは修飾キー化が必要です。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  <span class=\"token punctuation\">;</span> 押し続けている限りリピートせず待機\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  <span class=\"token punctuation\">;</span> 押下中に他のホットキーが発動した場合は入力無し い\n  <span class=\"token punctuation\">;</span> 長押しの場合も入力無し\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>さらにアプリ毎にショートカットキーが異なるのでアプリ別に設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span>マウスホイールでタブ移動（VScode）\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span>マウスホイールでタブ移動（クローム）\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回紹介したのはスクロールとの組み合わせでしたが、AutoHotkeyは他にもさまざまな設定ができるので便利です。是非使ってみてください🍅</p>","excerpt":"なにこれ Windowsでキーバインドをお気軽にいじれるAutoHotkeyの紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。 AutoHotkeyとは Windows…","frontmatter":{"slug":"/autohotkey-mouse-scroll-combination","title":"AutoHotkey スクロールと修飾キーの組合せが便利","date":"2023-04-07T09:00:00.000+09:00","tags":["キーボード","AutoHotkey","作業効率化"],"keywords":["キーボード"],"thumbnail":"thumbnail/2023/04/autohotkey-mouse-scroll-combination.png","category":"game"}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Windowsでキーバインドをお気軽にいじれる<a href=\"https://www.autohotkey.com/\">AutoHotkey</a>の紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。</p>\n<h2 id=\"autohotkeyとは\" style=\"position:relative;\"><a href=\"#autohotkey%E3%81%A8%E3%81%AF\" aria-label=\"autohotkeyとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AutoHotkeyとは</h2>\n<p>Windows版で提供されているソフトウェアで、専用のプログラミング言語でキーバインドを定義すれば、任意のキー入力に対してスクリプトを実行できます。既存のキーに別のキーの割当てたり、複雑なショートカットコマンドの割当が可能です。</p>\n<h3 id=\"良い部分\" style=\"position:relative;\"><a href=\"#%E8%89%AF%E3%81%84%E9%83%A8%E5%88%86\" aria-label=\"良い部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>良い部分</h3>\n<p><strong>サクッと導入して合わなかったらサクッと廃止できます。</strong><br>\n同じようなものでWindowsの<a href=\"https://forest.watch.impress.co.jp/library/software/changekey/\">Change Key</a>やMacの<a href=\"https://karabiner-elements.pqrs.org/\">Karabiner Elements</a>がありますが、AutoHotkeyはアプリレイヤーで制御するので、アプリを終了すれば通常操作に戻れて、レジストリをいじったりしなくて良いという手軽さが魅力です。</p>\n<h3 id=\"イマイチな部分\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%9E%E3%82%A4%E3%83%81%E3%81%AA%E9%83%A8%E5%88%86\" aria-label=\"イマイチな部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>イマイチな部分</h3>\n<p><strong>独自言語で設定します。</strong><br>\n言語仕様はAutoHotkey公式リファレンスを見て学習が必要です。\n少し独特な言語で処理をどこでreturnするか分かりづらい気がします。</p>\n<p><strong>リモート接続PCでは効きません。</strong><br>\nリモート接続先のPCの操作に対してはAutHotkeyの設定は有効になりません。テレワークでリモートPC操作がメインの方だとイマイチかもしれません。これはChange KeyもKarabiner Elementsも同じですが...</p>\n<h2 id=\"実例紹介全体像\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E5%85%A8%E4%BD%93%E5%83%8F\" aria-label=\"実例紹介全体像 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：全体像</h2>\n<p>Windowsだと<code class=\"language-text\">Ctrl</code>+スクロールは拡大/縮小、<code class=\"language-text\">Shift</code>+スクロールは横スクロールになっています。\nこのノリを<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>にも拡張する感じでAutoHotkeyで設定します。<br>\n右手でマウススクロールしながら、左手で<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>を押下することで、目的のデスクトップ・アプリ・タブに素早く直感的に移動できます。</p>\n<p><img src=\"./overview.png\" alt=\"overview\"></p>\n<h2 id=\"実例紹介ソースコード\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89\" aria-label=\"実例紹介ソースコード permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：ソースコード</h2>\n<p>まずはソースコード全量を示します。</p>\n<div class=\"gatsby-code-title\">AutoHotkey設定ファイルの実例</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span> 仮想デスクトップ間移動\n~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span>\n\n<span class=\"token punctuation\">;</span> アプリ間移動\n~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab\n\n<span class=\"token punctuation\">;</span> Tabの修飾キー化\n<span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn\n\n<span class=\"token punctuation\">;</span> タブ間移動：VSCode\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span> タブ間移動：Chrome\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>以下で処理の塊ごとに説明します。</p>\n<h3 id=\"仮想デスクトップ間移動\" style=\"position:relative;\"><a href=\"#%E4%BB%AE%E6%83%B3%E3%83%87%E3%82%B9%E3%82%AF%E3%83%88%E3%83%83%E3%83%97%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"仮想デスクトップ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>仮想デスクトップ間移動</h3>\n<p><code class=\"language-text\">Win</code> + スクロール実行時に、<code class=\"language-text\">Win</code> + 左右矢印を発動するように設定します。\n<code class=\"language-text\">Left</code>,<code class=\"language-text\">Right</code>の向きは好みによって変えてください。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"アプリ間移動\" style=\"position:relative;\"><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"アプリ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アプリ間移動</h3>\n<p>同じように<code class=\"language-text\">Alt</code>+ スクロール実行時に、<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>を発動するように設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<br/>\n<p>※ちなみに<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>のアプローチは複数選択肢がありますが、<code class=\"language-text\">Alt</code>を押し続ける必要があり、１つのキーで代替するのは難しく皆さん実現に苦労されているようです。</p>\n<h3 id=\"タブ移動\" style=\"position:relative;\"><a href=\"#%E3%82%BF%E3%83%96%E7%A7%BB%E5%8B%95\" aria-label=\"タブ移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>タブ移動</h3>\n<p>Tabは修飾キー化が必要です。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  <span class=\"token punctuation\">;</span> 押し続けている限りリピートせず待機\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  <span class=\"token punctuation\">;</span> 押下中に他のホットキーが発動した場合は入力無し い\n  <span class=\"token punctuation\">;</span> 長押しの場合も入力無し\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>さらにアプリ毎にショートカットキーが異なるのでアプリ別に設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span>マウスホイールでタブ移動（VScode）\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span>マウスホイールでタブ移動（クローム）\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回紹介したのはスクロールとの組み合わせでしたが、AutoHotkeyは他にもさまざまな設定ができるので便利です。是非使ってみてください🍅</p>","excerpt":"なにこれ Windowsでキーバインドをお気軽にいじれるAutoHotkeyの紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。 AutoHotkeyとは Windows…","frontmatter":{"slug":"/autohotkey-mouse-scroll-combination","title":"AutoHotkey スクロールと修飾キーの組合せが便利","date":"2023-04-07T09:00:00.000+09:00","tags":["キーボード","AutoHotkey","作業効率化"],"keywords":["キーボード"],"thumbnail":"thumbnail/2023/04/autohotkey-mouse-scroll-combination.png","category":"game"}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Windowsでキーバインドをお気軽にいじれる<a href=\"https://www.autohotkey.com/\">AutoHotkey</a>の紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。</p>\n<h2 id=\"autohotkeyとは\" style=\"position:relative;\"><a href=\"#autohotkey%E3%81%A8%E3%81%AF\" aria-label=\"autohotkeyとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AutoHotkeyとは</h2>\n<p>Windows版で提供されているソフトウェアで、専用のプログラミング言語でキーバインドを定義すれば、任意のキー入力に対してスクリプトを実行できます。既存のキーに別のキーの割当てたり、複雑なショートカットコマンドの割当が可能です。</p>\n<h3 id=\"良い部分\" style=\"position:relative;\"><a href=\"#%E8%89%AF%E3%81%84%E9%83%A8%E5%88%86\" aria-label=\"良い部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>良い部分</h3>\n<p><strong>サクッと導入して合わなかったらサクッと廃止できます。</strong><br>\n同じようなものでWindowsの<a href=\"https://forest.watch.impress.co.jp/library/software/changekey/\">Change Key</a>やMacの<a href=\"https://karabiner-elements.pqrs.org/\">Karabiner Elements</a>がありますが、AutoHotkeyはアプリレイヤーで制御するので、アプリを終了すれば通常操作に戻れて、レジストリをいじったりしなくて良いという手軽さが魅力です。</p>\n<h3 id=\"イマイチな部分\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%9E%E3%82%A4%E3%83%81%E3%81%AA%E9%83%A8%E5%88%86\" aria-label=\"イマイチな部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>イマイチな部分</h3>\n<p><strong>独自言語で設定します。</strong><br>\n言語仕様はAutoHotkey公式リファレンスを見て学習が必要です。\n少し独特な言語で処理をどこでreturnするか分かりづらい気がします。</p>\n<p><strong>リモート接続PCでは効きません。</strong><br>\nリモート接続先のPCの操作に対してはAutHotkeyの設定は有効になりません。テレワークでリモートPC操作がメインの方だとイマイチかもしれません。これはChange KeyもKarabiner Elementsも同じですが...</p>\n<h2 id=\"実例紹介全体像\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E5%85%A8%E4%BD%93%E5%83%8F\" aria-label=\"実例紹介全体像 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：全体像</h2>\n<p>Windowsだと<code class=\"language-text\">Ctrl</code>+スクロールは拡大/縮小、<code class=\"language-text\">Shift</code>+スクロールは横スクロールになっています。\nこのノリを<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>にも拡張する感じでAutoHotkeyで設定します。<br>\n右手でマウススクロールしながら、左手で<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>を押下することで、目的のデスクトップ・アプリ・タブに素早く直感的に移動できます。</p>\n<p><img src=\"./overview.png\" alt=\"overview\"></p>\n<h2 id=\"実例紹介ソースコード\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89\" aria-label=\"実例紹介ソースコード permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：ソースコード</h2>\n<p>まずはソースコード全量を示します。</p>\n<div class=\"gatsby-code-title\">AutoHotkey設定ファイルの実例</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span> 仮想デスクトップ間移動\n~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span>\n\n<span class=\"token punctuation\">;</span> アプリ間移動\n~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab\n\n<span class=\"token punctuation\">;</span> Tabの修飾キー化\n<span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn\n\n<span class=\"token punctuation\">;</span> タブ間移動：VSCode\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span> タブ間移動：Chrome\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>以下で処理の塊ごとに説明します。</p>\n<h3 id=\"仮想デスクトップ間移動\" style=\"position:relative;\"><a href=\"#%E4%BB%AE%E6%83%B3%E3%83%87%E3%82%B9%E3%82%AF%E3%83%88%E3%83%83%E3%83%97%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"仮想デスクトップ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>仮想デスクトップ間移動</h3>\n<p><code class=\"language-text\">Win</code> + スクロール実行時に、<code class=\"language-text\">Win</code> + 左右矢印を発動するように設定します。\n<code class=\"language-text\">Left</code>,<code class=\"language-text\">Right</code>の向きは好みによって変えてください。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"アプリ間移動\" style=\"position:relative;\"><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"アプリ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アプリ間移動</h3>\n<p>同じように<code class=\"language-text\">Alt</code>+ スクロール実行時に、<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>を発動するように設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<br/>\n<p>※ちなみに<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>のアプローチは複数選択肢がありますが、<code class=\"language-text\">Alt</code>を押し続ける必要があり、１つのキーで代替するのは難しく皆さん実現に苦労されているようです。</p>\n<h3 id=\"タブ移動\" style=\"position:relative;\"><a href=\"#%E3%82%BF%E3%83%96%E7%A7%BB%E5%8B%95\" aria-label=\"タブ移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>タブ移動</h3>\n<p>Tabは修飾キー化が必要です。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  <span class=\"token punctuation\">;</span> 押し続けている限りリピートせず待機\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  <span class=\"token punctuation\">;</span> 押下中に他のホットキーが発動した場合は入力無し い\n  <span class=\"token punctuation\">;</span> 長押しの場合も入力無し\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>さらにアプリ毎にショートカットキーが異なるのでアプリ別に設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span>マウスホイールでタブ移動（VScode）\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span>マウスホイールでタブ移動（クローム）\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回紹介したのはスクロールとの組み合わせでしたが、AutoHotkeyは他にもさまざまな設定ができるので便利です。是非使ってみてください🍅</p>","excerpt":"なにこれ Windowsでキーバインドをお気軽にいじれるAutoHotkeyの紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。 AutoHotkeyとは Windows…","frontmatter":{"slug":"/autohotkey-mouse-scroll-combination","title":"AutoHotkey スクロールと修飾キーの組合せが便利","date":"2023-04-07T09:00:00.000+09:00","tags":["キーボード","AutoHotkey","作業効率化"],"keywords":["キーボード"],"thumbnail":"thumbnail/2023/04/autohotkey-mouse-scroll-combination.png","category":"game"}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Windowsでキーバインドをお気軽にいじれる<a href=\"https://www.autohotkey.com/\">AutoHotkey</a>の紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。</p>\n<h2 id=\"autohotkeyとは\" style=\"position:relative;\"><a href=\"#autohotkey%E3%81%A8%E3%81%AF\" aria-label=\"autohotkeyとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AutoHotkeyとは</h2>\n<p>Windows版で提供されているソフトウェアで、専用のプログラミング言語でキーバインドを定義すれば、任意のキー入力に対してスクリプトを実行できます。既存のキーに別のキーの割当てたり、複雑なショートカットコマンドの割当が可能です。</p>\n<h3 id=\"良い部分\" style=\"position:relative;\"><a href=\"#%E8%89%AF%E3%81%84%E9%83%A8%E5%88%86\" aria-label=\"良い部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>良い部分</h3>\n<p><strong>サクッと導入して合わなかったらサクッと廃止できます。</strong><br>\n同じようなものでWindowsの<a href=\"https://forest.watch.impress.co.jp/library/software/changekey/\">Change Key</a>やMacの<a href=\"https://karabiner-elements.pqrs.org/\">Karabiner Elements</a>がありますが、AutoHotkeyはアプリレイヤーで制御するので、アプリを終了すれば通常操作に戻れて、レジストリをいじったりしなくて良いという手軽さが魅力です。</p>\n<h3 id=\"イマイチな部分\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%9E%E3%82%A4%E3%83%81%E3%81%AA%E9%83%A8%E5%88%86\" aria-label=\"イマイチな部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>イマイチな部分</h3>\n<p><strong>独自言語で設定します。</strong><br>\n言語仕様はAutoHotkey公式リファレンスを見て学習が必要です。\n少し独特な言語で処理をどこでreturnするか分かりづらい気がします。</p>\n<p><strong>リモート接続PCでは効きません。</strong><br>\nリモート接続先のPCの操作に対してはAutHotkeyの設定は有効になりません。テレワークでリモートPC操作がメインの方だとイマイチかもしれません。これはChange KeyもKarabiner Elementsも同じですが...</p>\n<h2 id=\"実例紹介全体像\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E5%85%A8%E4%BD%93%E5%83%8F\" aria-label=\"実例紹介全体像 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：全体像</h2>\n<p>Windowsだと<code class=\"language-text\">Ctrl</code>+スクロールは拡大/縮小、<code class=\"language-text\">Shift</code>+スクロールは横スクロールになっています。\nこのノリを<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>にも拡張する感じでAutoHotkeyで設定します。<br>\n右手でマウススクロールしながら、左手で<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>を押下することで、目的のデスクトップ・アプリ・タブに素早く直感的に移動できます。</p>\n<p><img src=\"./overview.png\" alt=\"overview\"></p>\n<h2 id=\"実例紹介ソースコード\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89\" aria-label=\"実例紹介ソースコード permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：ソースコード</h2>\n<p>まずはソースコード全量を示します。</p>\n<div class=\"gatsby-code-title\">AutoHotkey設定ファイルの実例</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span> 仮想デスクトップ間移動\n~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span>\n\n<span class=\"token punctuation\">;</span> アプリ間移動\n~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab\n\n<span class=\"token punctuation\">;</span> Tabの修飾キー化\n<span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn\n\n<span class=\"token punctuation\">;</span> タブ間移動：VSCode\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span> タブ間移動：Chrome\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>以下で処理の塊ごとに説明します。</p>\n<h3 id=\"仮想デスクトップ間移動\" style=\"position:relative;\"><a href=\"#%E4%BB%AE%E6%83%B3%E3%83%87%E3%82%B9%E3%82%AF%E3%83%88%E3%83%83%E3%83%97%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"仮想デスクトップ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>仮想デスクトップ間移動</h3>\n<p><code class=\"language-text\">Win</code> + スクロール実行時に、<code class=\"language-text\">Win</code> + 左右矢印を発動するように設定します。\n<code class=\"language-text\">Left</code>,<code class=\"language-text\">Right</code>の向きは好みによって変えてください。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"アプリ間移動\" style=\"position:relative;\"><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"アプリ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アプリ間移動</h3>\n<p>同じように<code class=\"language-text\">Alt</code>+ スクロール実行時に、<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>を発動するように設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<br/>\n<p>※ちなみに<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>のアプローチは複数選択肢がありますが、<code class=\"language-text\">Alt</code>を押し続ける必要があり、１つのキーで代替するのは難しく皆さん実現に苦労されているようです。</p>\n<h3 id=\"タブ移動\" style=\"position:relative;\"><a href=\"#%E3%82%BF%E3%83%96%E7%A7%BB%E5%8B%95\" aria-label=\"タブ移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>タブ移動</h3>\n<p>Tabは修飾キー化が必要です。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  <span class=\"token punctuation\">;</span> 押し続けている限りリピートせず待機\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  <span class=\"token punctuation\">;</span> 押下中に他のホットキーが発動した場合は入力無し い\n  <span class=\"token punctuation\">;</span> 長押しの場合も入力無し\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>さらにアプリ毎にショートカットキーが異なるのでアプリ別に設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span>マウスホイールでタブ移動（VScode）\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span>マウスホイールでタブ移動（クローム）\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回紹介したのはスクロールとの組み合わせでしたが、AutoHotkeyは他にもさまざまな設定ができるので便利です。是非使ってみてください🍅</p>","excerpt":"なにこれ Windowsでキーバインドをお気軽にいじれるAutoHotkeyの紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。 AutoHotkeyとは Windows…","frontmatter":{"slug":"/mahjong-solitaire","title":"上海 (Mahjong Solitaire)","date":"2023-04-07T09:00:00.000+09:00","tags":["キーボード","AutoHotkey","作業効率化"],"keywords":["キーボード"],"thumbnail":"thumbnail/shanghai.png","category":"game"}}],"previous":{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>AppSyncのリゾルバーでDynamoDBのデータを更新する場合、更新処理の前に入力チェックは必ず実施すると思います。\nこの時、入力チェックエラーを見つけた時点で1つのエラーメッセージを返すより、\nすべてのチェック実施後にまとめてエラーメッセージを返してあげたほうが、AppSyncの呼び出し側としては助かります。\nただ、このやり方は調べてもあまり出てきませんでした。そのため本記事で紹介します。</p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>たとえば、人(ID、名前、組織名)を更新する場合</p>\n<div class=\"gatsby-code-title\">人(ID、名前、組織名)を更新するmutation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property-query property-mutation\">updatePerson</span> <span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">id</span>\n    <span class=\"token property\">name</span>\n    <span class=\"token property\">organizationName</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token object\">person</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">id</span>\n      <span class=\"token property\">name</span>\n      <span class=\"token property\">organizationName</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>以下のようにリクエストマッピングテンプレートのVTLを記述します。</p>\n<div class=\"gatsby-code-title\">複数エラーメッセージを返すVTL</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"velocity\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-velocity line-numbers\"><code class=\"language-velocity\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span></span><span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span></span><span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span></span><span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span></span><span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>outErrors<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#return</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>outErrors</span><span class=\"token punctuation\">)</span></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#end</span></span></span>\n{\n  \"operation\" : \"PutItem\",\n  \"key\" : {\n    \"id\" : { \"S\" : \"<span class=\"token variable\">$<span class=\"token punctuation\">{</span>ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span>\" }\n  },\n  \"condition\" : {\n    \"expression\" : \"attribute_exists(id)\"\n  },\n  \"attributeValues\" : <span class=\"token variable\">$util<span class=\"token punctuation\">.</span>dynamodb<span class=\"token punctuation\">.</span><span class=\"token function\">toMapValuesJson</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span></span>\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2 id=\"実際どのようなレスポンスが返ってくるか\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E9%9A%9B%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AA%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%81%8C%E8%BF%94%E3%81%A3%E3%81%A6%E3%81%8F%E3%82%8B%E3%81%8B\" aria-label=\"実際どのようなレスポンスが返ってくるか permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実際どのようなレスポンスが返ってくるか</h2>\n<p>以下のmutationを発行してみると...</p>\n<div class=\"gatsby-code-title\">複数の入力チェックエラーになるようなmutation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property-query property-mutation\">updatePerson</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token description string\">\"<span class=\"token language-markdown\">1234</span>\"</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token description string\">\"<span class=\"token language-markdown\">あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前</span>\"</span>\n    <span class=\"token attr-name\">organizationName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">person</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">id</span>\n      <span class=\"token property\">name</span>\n      <span class=\"token property\">organizationName</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>複数エラーメッセージを含むレスポンスが返ってきます！</p>\n<div class=\"gatsby-code-title\">複数エラーメッセージを含むレスポンス</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"updatePerson\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"person\"</span><span class=\"token punctuation\">:</span> <span class=\"token property\">null</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"errors\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"path\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token string\">\"updatePerson\"</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">:</span> <span class=\"token property\">null</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"errorType\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"errorInfo\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前あきらかに文字数オーバーの名前\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"locations\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"line\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"column\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"sourceName\"</span><span class=\"token punctuation\">:</span> <span class=\"token property\">null</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"message\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"名前は30文字以下で入力してください。\"</span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"path\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token string\">\"updatePerson\"</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">:</span> <span class=\"token property\">null</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"errorType\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"errorInfo\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名あきらかに文字数オーバーの組織名\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"locations\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"line\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"column\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token string\">\"sourceName\"</span><span class=\"token punctuation\">:</span> <span class=\"token property\">null</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">\"message\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span></span>    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2 id=\"結論に至るまでの試行錯誤\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96%E3%81%AB%E8%87%B3%E3%82%8B%E3%81%BE%E3%81%A7%E3%81%AE%E8%A9%A6%E8%A1%8C%E9%8C%AF%E8%AA%A4\" aria-label=\"結論に至るまでの試行錯誤 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論に至るまでの試行錯誤</h2>\n<p><a href=\"https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/resolver-util-reference.html\">AppSyncの公式ドキュメント</a>を見ると、<code class=\"language-text\">$util.appendError</code>が使えそうだと思ったのですが、いざ書こうとすると、以下2点につまづきました。</p>\n<ol>\n<li>「1つ以上入力チェックエラーがある」ことをどうやって判定するのか</li>\n<li>複数エラー情報をどうやってレスポンスとして返すのか</li>\n</ol>\n<h3 id=\"1-1つ以上入力チェックエラーがあることをどうやって判定するのか\" style=\"position:relative;\"><a href=\"#1-1%E3%81%A4%E4%BB%A5%E4%B8%8A%E5%85%A5%E5%8A%9B%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E3%81%82%E3%82%8B%E3%81%93%E3%81%A8%E3%82%92%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6%E5%88%A4%E5%AE%9A%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8B\" aria-label=\"1 1つ以上入力チェックエラーがあることをどうやって判定するのか permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 「1つ以上入力チェックエラーがある」ことをどうやって判定するのか</h3>\n<p>最初に考えたのは、<code class=\"language-text\">#set($valid=true)</code>のようにフラグで判断する方法です。</p>\n<div class=\"gatsby-code-title\">validフラグで判定する方法</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"velocity\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-velocity line-numbers\"><code class=\"language-velocity\"><span class=\"gatsby-highlight-code-line\"><span class=\"token velocity-comment comment\">## 事前にフラグを定義しておく</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token velocity-comment comment\">## チェックNGの場合はフラグを更新</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span><span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span></span>  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span><span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span></span>  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span><span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span></span>  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span><span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span></span>  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valid</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token velocity-comment comment\">## 異常時の処理</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#end</span></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>ただこれだと記述が冗長です。<br/>\nappendErrorしたエラーはどこに格納されているのか？<br/>\n<code class=\"language-text\">$util.error($util.toJson($context))</code>をして<code class=\"language-text\">$context</code>の中身を確認してみると、\nどうやら<code class=\"language-text\">$context.outErrors</code>に格納されているということがわかりました。<br/>\nそれを踏まえて処理を以下のようにリファクタリングしました。</p>\n<div class=\"gatsby-code-title\">validフラグを使わずに判定する方法</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"velocity\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-velocity line-numbers\"><code class=\"language-velocity\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"名前は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrBlank</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span> \n<span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>)\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">appendError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"組織名は30文字以下で入力してください。\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"organizationName\"</span><span class=\"token punctuation\">,</span> null<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>organizationName<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>outErrors<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token velocity-comment comment\">## 異常時の処理</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token directive\"><span class=\"token keyword\">#end</span></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"2-複数エラー情報をどうやってレスポンスとして返すのか\" style=\"position:relative;\"><a href=\"#2-%E8%A4%87%E6%95%B0%E3%82%A8%E3%83%A9%E3%83%BC%E6%83%85%E5%A0%B1%E3%82%92%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%81%A8%E3%81%97%E3%81%A6%E8%BF%94%E3%81%99%E3%81%AE%E3%81%8B\" aria-label=\"2 複数エラー情報をどうやってレスポンスとして返すのか permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 複数エラー情報をどうやってレスポンスとして返すのか</h3>\n<p><code class=\"language-text\">$util.appendError</code>はエラーを追加してくれるだけです。<code class=\"language-text\">$util.error</code>は1つのエラー情報しか返してくれません。<br/>\n試行錯誤した結果、<code class=\"language-text\">#return</code>で返せそうだということがわかりました。<br/>\n1の調査結果により<code class=\"language-text\">$util.appendError</code>で詰めたエラー情報は<code class=\"language-text\">$ctx.outErrors</code>に格納されていることがわかっていたので、\nそれら踏まえて以下のようにしました。</p>\n<div class=\"gatsby-code-title\">エラー時に複数エラーメッセージを返すにはreturnを使う</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-velocity line-numbers\"><code class=\"language-velocity\">  <span class=\"token directive\"><span class=\"token keyword\">#return</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>outErrors</span><span class=\"token punctuation\">)</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br/>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>VLTは結構めんどくさいですが、ちょっとずつ慣れてきました。\nググってもAppSyncのVTL系の情報は、まだあまり見かけません。そのため今後もノウハウがたまったら記事を書きます🍅</p>","excerpt":"なにこれ AppSyncのリゾルバーでDynamoDBのデータを更新する場合、更新処理の前に入力チェックは必ず実施すると思います。\nこの時、入力チェックエラーを見つけた時点で…","frontmatter":{"slug":"/mutliple-validation-errors-in-aws-appsync","title":"AWS AppSyncで入力チェックエラーを複数返す方法","date":"2019-02-26T07:30:00.000+09:00","tags":["AppSync","AWS","GraphQL"],"keywords":["AppSync"],"thumbnail":"thumbnail/2019/02/mutliple-validation-errors-in-aws-appsync.png","category":null}},"next":{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>AWSのGraphQLマネージドサービス「<a href=\"https://aws.amazon.com/jp/appsync/\">AppSync</a>」はGUIで簡単に設定ができて便利ですが、\n本格的に開発を進めていくとGUIポチポチでソースコードを管理するのはつらくなってきます。\n<strong><a href=\"https://serverless.com/\">Serverless Framework</a>というツールと<a href=\"https://github.com/sid88in/serverless-appsync-plugin\">serverless-appsync-plugin</a>（Serverless Frameworkのプラグイン）を使うと、AppSyncの設定をymlファイルで管理し、CLIでAWS上にデプロイできるので、GitHub等で構成管理が可能になります。</strong>\n今回はAppSyncからDynamoDBのユーザー情報を1件取得する場合を例にしてAppSync + Serverless Frameworkの使い方をご紹介します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/126ec4c638694a6d1c3141426792030b/29007/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABcRAAAXEQHKJvM/AAABUElEQVR42iWMP04bQRjF9wrpuAMnyC3ScQl6TgBnSJMmEhVKDYiOAimxsxSAYmytbWbs/T87u7NhZ/3NzPeQzZN+0u+94kVSynsAg/dehRB0CF4DOLB375221mrnnPb+sx9wTgNBJ1mnX6RW+w8hxH0khHgchgHGmKC1hrUWz88veJ0vMFgLIoeqUlCqwY4cXADIM/aRZYuvpz9wfHoV/qwMTFM+Ruv1Op5Op7i9vfGTyV/eFP95vsr5afbGiVAs0pJnrwtOkiXXTc953fM2b1imFcczwUffLvjLyXf/67eENXUcpWkW50WF65s7X1aKx53jtut4s025qmq2I/EmK3mblbwjz23Xc103LITkrh/4/PKBz35OvdQORZ7F0XyxnOieoLpxVO07mX4ghEAhgIBArXmnf8uCZqvy4PvNe08AqFSGElGTTNW4KQyWq/XkAyuXbTN/Za2QAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/126ec4c638694a6d1c3141426792030b/ba381/image.webp 200w,\n/static/126ec4c638694a6d1c3141426792030b/7f61c/image.webp 400w,\n/static/126ec4c638694a6d1c3141426792030b/d00b9/image.webp 800w,\n/static/126ec4c638694a6d1c3141426792030b/92f8c/image.webp 1200w,\n/static/126ec4c638694a6d1c3141426792030b/fad48/image.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/126ec4c638694a6d1c3141426792030b/772e8/image.png 200w,\n/static/126ec4c638694a6d1c3141426792030b/e17e5/image.png 400w,\n/static/126ec4c638694a6d1c3141426792030b/5a190/image.png 800w,\n/static/126ec4c638694a6d1c3141426792030b/c1b63/image.png 1200w,\n/static/126ec4c638694a6d1c3141426792030b/29007/image.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/126ec4c638694a6d1c3141426792030b/5a190/image.png\"\n            alt=\"image\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ol>\n<li><a href=\"#1-serverless-framework%E3%81%AE%E8%A8%AD%E5%AE%9A\">🔰 Serverless Frameworkの設定</a></li>\n<li><a href=\"#2-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E4%BD%9C%E6%88%90\">💪 プロジェクトのひな型作成</a></li>\n<li><a href=\"#3-%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E4%BD%9C%E6%88%90\">📝 設定ファイル作成</a></li>\n<li><a href=\"#4-%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E4%BD%9C%E6%88%90\">💖 リゾルバー作成</a></li>\n<li><a href=\"#5-%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E4%BD%9C%E6%88%90\">💎 スキーマ作成</a></li>\n<li><a href=\"#6-aws%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4\">🎊 AWSにデプロイ</a></li>\n</ol>\n<h2 id=\"1-serverless-frameworkの設定\" style=\"position:relative;\"><a href=\"#1-serverless-framework%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"1 serverless frameworkの設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Serverless Frameworkの設定</h2>\n<ul>\n<li>Serverless Frameworkはnpmで提供されるCLIツールです。まずはnpmでインストールします。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">npm i -g serverless</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>クレデンシャルを設定します（事前にIAMでユーザを作成しておいてください）</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">serverless config credentials --provider aws --key AKIAIOSFODNN7EXAMPLE --secret wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><small>※詳細：<a href=\"https://serverless.com/framework/docs/providers/aws/guide/credentials#using-aws-profiles\">Serverless Framework - AWS Lambda Guide - Credentials</a></small></p>\n<h2 id=\"2-プロジェクトのひな型作成\" style=\"position:relative;\"><a href=\"#2-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E4%BD%9C%E6%88%90\" aria-label=\"2 プロジェクトのひな型作成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. プロジェクトのひな型作成</h2>\n<p>プロジェクトのひな型を作ります。\nServerless FrameworkでAppSync資産を扱えるように、<a href=\"https://github.com/sid88in/serverless-appsync-plugin\">serverless-appsync-plugin</a>と<a href=\"https://github.com/aws/aws-sdk-js\">aws-sdk</a>をインストールします。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">mkdir appsync-sample-with-serverless\ncd appsync-sample-with-serverless\nnpm init -y\nnpm i serverless-appsync-plugin aws-sdk</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2 id=\"3-設定ファイル作成\" style=\"position:relative;\"><a href=\"#3-%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E4%BD%9C%E6%88%90\" aria-label=\"3 設定ファイル作成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 設定ファイル作成</h2>\n<p>プロジェクト直下にServerless Frameworkの設定ファイル<code class=\"language-text\">serverless.yml</code>を作ります。<br/>\n<small>※ここではserverless.ymlの全量を示して、次のセクションでブロックごとに詳細を説明します。</small></p>\n<div class=\"gatsby-code-title\">serverless.yml</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token comment\"># サービス名</span>\n<span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> appsync<span class=\"token punctuation\">-</span>sample<span class=\"token punctuation\">-</span>with<span class=\"token punctuation\">-</span>serverless\n<span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token comment\"># ステージ、デプロイ先を開発、運用などで分けたい場合はココを切り替えます</span>\n  <span class=\"token key atrule\">stage</span><span class=\"token punctuation\">:</span> production\n  <span class=\"token comment\"># デプロイ先のリージョンです</span>\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n<span class=\"token comment\"># AppSyncのプラグインを指定します</span>\n<span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> serverless<span class=\"token punctuation\">-</span>appsync<span class=\"token punctuation\">-</span>plugin\n<span class=\"token comment\"># プラグイン関連の設定はcustomで行います</span>\n<span class=\"token key atrule\">custom</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># ここでAppSyncの設定を行います</span>\n  <span class=\"token key atrule\">appSync</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># エンドポイントの名前を指定します</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> appsync<span class=\"token punctuation\">-</span>serverless<span class=\"token punctuation\">-</span>sample\n    <span class=\"token comment\"># AppSyncの認証方法を指定します</span>\n    <span class=\"token comment\"># ここではCognitoによる認証方法を指定しています</span>\n    <span class=\"token key atrule\">authenticationType</span><span class=\"token punctuation\">:</span> AMAZON_COGNITO_USER_POOLS\n    <span class=\"token comment\"># Cogtnitoによる認証方法の場合、Cognito側の情報を指定する必要があります</span>\n    <span class=\"token key atrule\">userPoolConfig</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># Cognitoが存在するリージョンを指定します</span>\n      <span class=\"token comment\"># デフォルトだとproviderのregionで指定した値になります</span>\n      <span class=\"token key atrule\">awsRegion</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n      <span class=\"token comment\"># CognitoのユーザープールのIDを指定します</span>\n      <span class=\"token key atrule\">userPoolId</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>1_U0e7zFRLQ\n      <span class=\"token comment\"># スキーマ定義で認証設定が記述されていない場合の挙動を指定します</span>\n      <span class=\"token comment\"># DENYを指定すると、認証されたいかなるユーザーも認可エラーに倒します</span>\n      <span class=\"token key atrule\">defaultAction</span><span class=\"token punctuation\">:</span> DENY\n    <span class=\"token comment\"># AppSyncのスキーマ定義ファイルのパスを指定します</span>\n    <span class=\"token comment\"># デフォルトだとschema.graphqlです</span>\n    <span class=\"token key atrule\">schema</span><span class=\"token punctuation\">:</span> schema.graphql\n    <span class=\"token comment\"># データソースを指定します(複数指定可能)</span>\n    <span class=\"token key atrule\">dataSources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># データソースの型を指定します</span>\n      <span class=\"token comment\"># 以下が指定できます</span>\n      <span class=\"token comment\"># AMAZON_DYNAMODB ・・・DynamoDB</span>\n      <span class=\"token comment\"># AMAZON_ELASTICSEARCH ・・・Elasticsearch</span>\n      <span class=\"token comment\"># AWS_LAMBDA ・・・Lambda関数</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> AMAZON_DYNAMODB\n        <span class=\"token comment\"># データソース名を指定します</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dynamo_user\n        <span class=\"token comment\"># DynamoDBのテーブルの説明を指定します</span>\n        <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ユーザー情報テーブル'</span>\n        <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n          <span class=\"token comment\"># 参照するテーブル名を指定します</span>\n          <span class=\"token key atrule\">tableName</span><span class=\"token punctuation\">:</span> dynamo_user\n          <span class=\"token comment\"># データソースのロールARNを指定します</span>\n          <span class=\"token key atrule\">serviceRoleArn</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>999999999999<span class=\"token punctuation\">:</span>role/sample_role_arn\n          <span class=\"token comment\"># データソースのリージョンを指定します</span>\n          <span class=\"token comment\"># デフォルトだとproviderのregionで指定した値になります</span>\n          <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n    <span class=\"token comment\"># マッピングテンプレートのVTLファイルの格納先を指定します</span>\n    <span class=\"token comment\"># デフォルトはmapping-templatesです</span>\n    <span class=\"token key atrule\">mappingTemplatesLocation</span><span class=\"token punctuation\">:</span> mapping<span class=\"token punctuation\">-</span>templates\n    <span class=\"token comment\"># リゾルバー定義を指定します</span>\n    <span class=\"token comment\"># ※ここではPipeline Resolverの例を示します</span>\n    <span class=\"token key atrule\">mappingTemplates</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># リゾルバーの方を指定します</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Query\n        <span class=\"token comment\"># リゾルバーを紐づけるスキーマ中のフィールド名を指定します</span>\n        <span class=\"token key atrule\">field</span><span class=\"token punctuation\">:</span> user\n        <span class=\"token comment\"># Pipeline Resolverを使い場合、以下を指定します</span>\n        <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PIPELINE\n        <span class=\"token comment\"># リクエストマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token comment\"># ファイルパスはmappingTemplatesLocationで指定したパスからの相対パスになります</span>\n        <span class=\"token key atrule\">request</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'start.vtl'</span>\n        <span class=\"token comment\"># レスポンスマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token key atrule\">response</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'end.vtl'</span>\n        <span class=\"token comment\"># リゾルバーで使う関数を実行順に指定します</span>\n        <span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> GetUser\n    <span class=\"token comment\"># 関数定義を指定します</span>\n    <span class=\"token key atrule\">functionConfigurations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># ユーザー一覧取得</span>\n        <span class=\"token comment\"># 関数で扱うデータソース名を指定します</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">dataSource</span><span class=\"token punctuation\">:</span> dynamo_user\n        <span class=\"token comment\"># 関数名を指定します</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser'</span>\n        <span class=\"token comment\"># 関数のリクエストマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token comment\"># ファイルパスはmappingTemplatesLocationで指定したパスからの相対パスになります</span>\n        <span class=\"token key atrule\">request</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser.req.vtl'</span>\n        <span class=\"token comment\"># 関数のレスポンスマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token key atrule\">response</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser.res.vtl'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>以下で、<code class=\"language-text\">serverless.yml</code>に定義したプロパティがAWSコンソール上のどの項目に紐づくかを説明します。</p>\n<h3 id=\"appsyncの基本設定\" style=\"position:relative;\"><a href=\"#appsync%E3%81%AE%E5%9F%BA%E6%9C%AC%E8%A8%AD%E5%AE%9A\" aria-label=\"appsyncの基本設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AppSyncの基本設定</h3>\n<div class=\"gatsby-code-title\">serverless.ymlからAppSyncの基本設定を抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">  <span class=\"token comment\"># ここでAppSyncの設定を行います</span>\n  <span class=\"token key atrule\">appSync</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># エンドポイントの名前を指定します</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> appsync<span class=\"token punctuation\">-</span>serverless<span class=\"token punctuation\">-</span>sample\n    <span class=\"token comment\"># AppSyncの認証方法を指定します</span>\n    <span class=\"token comment\"># ここではCognitoによる認証方法を指定しています</span>\n    <span class=\"token key atrule\">authenticationType</span><span class=\"token punctuation\">:</span> AMAZON_COGNITO_USER_POOLS\n    <span class=\"token comment\"># Cogtnitoによる認証方法の場合、Cognito側の情報を指定する必要があります</span>\n    <span class=\"token key atrule\">userPoolConfig</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># Cognitoが存在するリージョンを指定します</span>\n      <span class=\"token comment\"># デフォルトだとproviderのregionで指定した値になります</span>\n      <span class=\"token key atrule\">awsRegion</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n      <span class=\"token comment\"># CognitoのユーザープールのIDを指定します</span>\n      <span class=\"token key atrule\">userPoolId</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>1_U0e7zFRLQ\n      <span class=\"token comment\"># スキーマ定義で認証設定が記述されていない場合の挙動を指定します</span>\n      <span class=\"token comment\"># DENYを指定すると、認証されたいかなるユーザーも認可エラーに倒します</span>\n      <span class=\"token key atrule\">defaultAction</span><span class=\"token punctuation\">:</span> DENY</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>AWSコンソールのAppSyncの画面で、エンドポイント一覧が表示されます。\n<code class=\"language-text\">serverless.yml</code>で定義したエンドポイント名はココで確認できます。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dc9a6bf71f68717c1bd4eea704467e02/cd78c/appsync-gui-main-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABcRAAAXEQHKJvM/AAABrUlEQVR42n2S64rbMBCF86r90Rdp81Athgan0KXFCWYJ+bFtbsiK41vWsnyJ7ZFOkRJnd6m3Ax8jCXQ4I50JY+znfr+fcR66QghLnudukiQuD0P3EATunjH3wJgbcD4KPx6/sSBYzGazjxMAuFwu1BPhdSmtLbKqcM4F2r6/n/0D0Js76/V6Ornd74zG6yIiJctSbbdb9fvPxq6f81zlQozRKQDecvnZCmqt39q7nqGQ0pJmGURRoG6a97AOfd+fjgtqDa2UFTNCLOCQZYmu79/DCq5Wq+l/HYq6RlFWaJrGvPMbV82Yw8fHmyARGVcWpYCigD6dIA8HyOyMoroKi6qyfaCq6wEr+MvzRhwa0c0G2vNQPTygCji4qBHnJY7PEifbS4imu0+C2y8vl+YNzfictzqKSCcJ6TgmnaakkoREEFCdplRIaTHxsrQtmSBcsXm7GMHFYvFpYsd7eiLsdgBjwHZ77bsdtO9D5zk6IvTUm1zZ3JFSg7OhXnLY9P132XVfy7Z1yq5zhl60rROez06YZU4URU4YRc4xDO+YfRTHljhJvkRx/GM+n3/4CwzSPiUldFLzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/dc9a6bf71f68717c1bd4eea704467e02/ba381/appsync-gui-main-1.webp 200w,\n/static/dc9a6bf71f68717c1bd4eea704467e02/7f61c/appsync-gui-main-1.webp 400w,\n/static/dc9a6bf71f68717c1bd4eea704467e02/d00b9/appsync-gui-main-1.webp 800w,\n/static/dc9a6bf71f68717c1bd4eea704467e02/92f8c/appsync-gui-main-1.webp 1200w,\n/static/dc9a6bf71f68717c1bd4eea704467e02/5b1dd/appsync-gui-main-1.webp 1236w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/dc9a6bf71f68717c1bd4eea704467e02/772e8/appsync-gui-main-1.png 200w,\n/static/dc9a6bf71f68717c1bd4eea704467e02/e17e5/appsync-gui-main-1.png 400w,\n/static/dc9a6bf71f68717c1bd4eea704467e02/5a190/appsync-gui-main-1.png 800w,\n/static/dc9a6bf71f68717c1bd4eea704467e02/c1b63/appsync-gui-main-1.png 1200w,\n/static/dc9a6bf71f68717c1bd4eea704467e02/cd78c/appsync-gui-main-1.png 1236w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/dc9a6bf71f68717c1bd4eea704467e02/5a190/appsync-gui-main-1.png\"\n            alt=\"appsync gui main 1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>エンドポイントの画面を開き<code class=\"language-text\">Settings</code>を確認するとuserPoolConfigなどの詳細が確認できます。\nほぼ<code class=\"language-text\">serverless.yml</code>のプロパティ名と一致しているので、なんとなく紐づけがわかると思います。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d39b7402d2369dd7d4fb38d28e0b16c9/29c1d/appsync-gui-main-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABcRAAAXEQHKJvM/AAACpklEQVR42o1U227TQBTMx/PQB/4EnqBAlBKJPgCqqERoErsKKGl8i2+xvbZ31/ZeBu3iQKVSiqWRjyyf2XNmxp5cXl4+dxzno+veXsRxMo+vrubhi5fz3fv3c/fqav5tuZyv1+v53vPm3uO48H3/0/X19dnE9/0ZAGitpbmjaaDTFLooMFCKfhgwDAP+dZ164zh+M1mt11Pzes34ULatEoBSgKqFUIRSlR+PitS1YpwrIaWSSv0Nw0j4evLDdWds8x3UcaTa7aD3e+jtFmyzAfV8VHWNqiIoqwqUc3R9/wC86+yEXhCcT7ar1UxutxC7nUQQAL4PHYZgjoPq02fE+RFJkqAoSnDOwRh7AEqpJdzv9+cT3/N+aahGDU0NoOUclBBUpEbTtpZs1MtCKfUbUkrbG0XR+R9TzEOtTQe0UuZU1JQhzTI0TQNS16ib2tZd1/3VlCRJzh+6PE5hCIuGIU0zJGkKQmrr9mnCpwmNDuZkzqE5R0MIKG3BjG6jGbzrbE2NbvfQjhrurIa73QyeB+04EqsV4LrQqxWo66KIIsRpZrSB5/nW6UEIu3Lf97/RjS4HxmVLKAR0nks4DvD1qyU0sWnDEKRt/zQPgzXhtPY9g07BHgnNyoxJJInxHvruDszzUKcp4ixDnh8tGe97O6E0zt6DGF0Ow3AkNCc1jTTrYruF3mzAlkvQorDBNoYwxk0jNPQThCaHZuUvXyRub4GbG+jlEsy9RR0EiPMchBDUTWNNGcRgcvd4DoMgeGe9L8sOVSVAiFBlKdo8F1VRiLKqBO860Q+D6Pre1oMQQirzacsTbDB9P3z1aA4NzIonzf77b7NYLM7KsvyQJcnbLE2nWZZN0zie3u330yCKpofDwSKKoocwzw+HaXg4vD3E8eVisXj2EyzSAbS2ugbqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d39b7402d2369dd7d4fb38d28e0b16c9/ba381/appsync-gui-main-2.webp 200w,\n/static/d39b7402d2369dd7d4fb38d28e0b16c9/7f61c/appsync-gui-main-2.webp 400w,\n/static/d39b7402d2369dd7d4fb38d28e0b16c9/d00b9/appsync-gui-main-2.webp 800w,\n/static/d39b7402d2369dd7d4fb38d28e0b16c9/92f8c/appsync-gui-main-2.webp 1200w,\n/static/d39b7402d2369dd7d4fb38d28e0b16c9/fbb33/appsync-gui-main-2.webp 1375w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d39b7402d2369dd7d4fb38d28e0b16c9/772e8/appsync-gui-main-2.png 200w,\n/static/d39b7402d2369dd7d4fb38d28e0b16c9/e17e5/appsync-gui-main-2.png 400w,\n/static/d39b7402d2369dd7d4fb38d28e0b16c9/5a190/appsync-gui-main-2.png 800w,\n/static/d39b7402d2369dd7d4fb38d28e0b16c9/c1b63/appsync-gui-main-2.png 1200w,\n/static/d39b7402d2369dd7d4fb38d28e0b16c9/29c1d/appsync-gui-main-2.png 1375w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d39b7402d2369dd7d4fb38d28e0b16c9/5a190/appsync-gui-main-2.png\"\n            alt=\"appsync gui main 2\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n<br/></p>\n<h3 id=\"データソース定義\" style=\"position:relative;\"><a href=\"#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BD%E3%83%BC%E3%82%B9%E5%AE%9A%E7%BE%A9\" aria-label=\"データソース定義 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>データソース定義</h3>\n<div class=\"gatsby-code-title\">serverless.ymlからデータソース定義を抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">    <span class=\"token comment\"># データソースを指定します(複数指定可能)</span>\n    <span class=\"token key atrule\">dataSources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># データソースの型を指定します</span>\n      <span class=\"token comment\"># 以下が指定できます</span>\n      <span class=\"token comment\"># AMAZON_DYNAMODB ・・・DynamoDB</span>\n      <span class=\"token comment\"># AMAZON_ELASTICSEARCH ・・・Elasticsearch</span>\n      <span class=\"token comment\"># AWS_LAMBDA ・・・Lambda関数</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> AMAZON_DYNAMODB\n        <span class=\"token comment\"># データソース名を指定します</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dynamo_user\n        <span class=\"token comment\"># DynamoDBのテーブルの説明を指定します</span>\n        <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ユーザー情報テーブル'</span>\n        <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n          <span class=\"token comment\"># 参照するテーブル名を指定します</span>\n          <span class=\"token key atrule\">tableName</span><span class=\"token punctuation\">:</span> dynamo_user\n          <span class=\"token comment\"># データソースのロールARNを指定します</span>\n          <span class=\"token key atrule\">serviceRoleArn</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>999999999999<span class=\"token punctuation\">:</span>role/sample_role_arn\n          <span class=\"token comment\"># データソースのリージョンを指定します</span>\n          <span class=\"token comment\"># デフォルトだとproviderのregionで指定した値になります</span>\n          <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">1</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>エンドポイントの画面を開き<code class=\"language-text\">Data Sources</code>を確認すると\nデータソースが一覧表示されるので、一覧から今回<code class=\"language-text\">serverless.yml</code>に定義したデータソースを選択すると、以下のように詳細が確認できます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/718426cda1f692ec4858b194095db0d7/133ae/appsync-gui-datasource.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABcRAAAXEQHKJvM/AAACd0lEQVR42o2TaW7bMBSEff8j9E/7oycoDBS+QYAghp3Yaa14SWht1kJSFLVRpKYgbbVOgrQlMBAliB+H7w0nd3d3n4++70dR/LOuK0+UpZdT6vlR5K0OgbcPIm9PQm/vR97OigTengTe00vgBWHkRXFs9SNOkmi9Xn+abLfbGQBobbQxBuNoug5+nCLJGNIsB2UcXJTotYbS2j1HdUppuyaO4+nkcb3+3tQVZCmUlNIYrY3pe8MoNYQQE4Sh8YPQHP3AzQsh3qsolAUeCPk2Ic8H59D0513c3BiUTYOcUpxOCfI8R9/30MZAKfVObdu6tUEYTiebzWbWtR20UnqwX8MIZj5HNZ+jiCLknENK6YAOqrXT+G7VdZ0Dpmk6nTwTMru4OjusKpg4hoxjCCGQMQZelhBSggvxW6WUqOraqZTSrc2ybDo5LpcznE4wi4VG1wF9D3Nzg2q5BE8SJFkGxhiqqnalGHU9RjPO4fH+foY8h9ntNKQEigJms0G126HMc7BCoCgK52g88jXYqu/7K+Dh0pTzn9a3hUO+vICnCXLGIasKqu/RtK172uZcS70C7nYzDAOMEBq3t8BiAfPwgOrxEWWaghWF7aIDvXX2b4dNA7QtjJSQlILzAklOkTHu3A124/8GAm9yWIMWAmGaI6H8XEP9JzofN2UE2l2Ugu20aRqUnDtQfDrZnLkrdl23j4G+PwPn0Ou1HlYrDIsF9HwOuVpBRLHLoA22vhxv7PIYcCt1uctn4PH4OtiAq5U9WqN6lK1CPwz423jlcLvdflVKZXVdH5qmIU3bEllV5JQkJKWMZIyTjFJCGftQOaWHQgjmPT19+QX/DcD+SOdK2QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/718426cda1f692ec4858b194095db0d7/ba381/appsync-gui-datasource.webp 200w,\n/static/718426cda1f692ec4858b194095db0d7/7f61c/appsync-gui-datasource.webp 400w,\n/static/718426cda1f692ec4858b194095db0d7/d00b9/appsync-gui-datasource.webp 800w,\n/static/718426cda1f692ec4858b194095db0d7/92f8c/appsync-gui-datasource.webp 1200w,\n/static/718426cda1f692ec4858b194095db0d7/18291/appsync-gui-datasource.webp 1424w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/718426cda1f692ec4858b194095db0d7/772e8/appsync-gui-datasource.png 200w,\n/static/718426cda1f692ec4858b194095db0d7/e17e5/appsync-gui-datasource.png 400w,\n/static/718426cda1f692ec4858b194095db0d7/5a190/appsync-gui-datasource.png 800w,\n/static/718426cda1f692ec4858b194095db0d7/c1b63/appsync-gui-datasource.png 1200w,\n/static/718426cda1f692ec4858b194095db0d7/133ae/appsync-gui-datasource.png 1424w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/718426cda1f692ec4858b194095db0d7/5a190/appsync-gui-datasource.png\"\n            alt=\"appsync gui datasource\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n<br/></p>\n<h3 id=\"リゾルバー定義\" style=\"position:relative;\"><a href=\"#%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E5%AE%9A%E7%BE%A9\" aria-label=\"リゾルバー定義 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リゾルバー定義</h3>\n<div class=\"gatsby-code-title\">serverless.ymlからリゾルバー定義を抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">    <span class=\"token comment\"># リゾルバー定義を指定します</span>\n    <span class=\"token comment\"># ※ここではPipeline Resolverの例を示します</span>\n    <span class=\"token key atrule\">mappingTemplates</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># リゾルバーの方を指定します</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Query\n        <span class=\"token comment\"># リゾルバーを紐づけるスキーマ中のフィールド名を指定します</span>\n        <span class=\"token key atrule\">field</span><span class=\"token punctuation\">:</span> user\n        <span class=\"token comment\"># Pipeline Resolverを使い場合、以下を指定します</span>\n        <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PIPELINE\n        <span class=\"token comment\"># リクエストマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token comment\"># ファイルパスはmappingTemplatesLocationで指定したパスからの相対パスになります</span>\n        <span class=\"token key atrule\">request</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'start.vtl'</span>\n        <span class=\"token comment\"># レスポンスマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token key atrule\">response</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'end.vtl'</span>\n        <span class=\"token comment\"># リゾルバーで使う関数を実行順に指定します</span>\n        <span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> GetUser</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>リゾルバー定義は、エンドポイントの画面を開き<code class=\"language-text\">Schema</code>を確認します。\n今回は<code class=\"language-text\">user</code>というフィールド名のクエリに対してリゾルバーを割り当てているので、右側のペインで以下のように確認できます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b6caab106024863b2a89a0978e66b252/29007/appsync-gui-resolver.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACEklEQVR42o2T3W7bMAyF8/7PMWx7gF5sKIp1a26HAr1YYjeJ49hx5DiWElu/lukzyMlatEiBETiAQIkfKZGaPD09fWWs3NQ1nyulYiFEvN2xeJ7kcbIt4uV2Fz/nRbzKizjfbuOCsZiVZbxj7EUFY/Nyv89+Pz5+nqRJMgUAIqJhGMISxlqsNxmqwwGNUmiUhrYW1jl03kMqDaUNnPej33Udhbg0TX9OnuP5LyNPaJrWd+cNOp5OtMlyKnaM2H5PFefEBaddWdK+qqjmnA6HmjgX1EoZ5AMwXix+TJJk/TBcKgzOUGWrFI5CwEgB6u3o872H0hpSqrFSLsQo73tY68bYxXJ5P8my7AHvgVLCWQPyATa631g4I4RAWe4hpYS19hVYFMVVoFEKndUjlLx6A6RhQNNKGGOhnYO+vOHyGjBYAKoAdDqkuAiAUkBVgQ6HMWHf9/BZBr9eE4iQZNkHwLaFUhqdbTH09oWH9Rq4ucEwnaJep5DGwM9m0N+/UUi2SNOPK9RKo3cSA7lXYJYBd3cYbm+hqwq28+MYnYwZY5MkufKGF6D3Hle6AXQdyPvxFlIpWGOgtP0/4Djow/AWeGkc5xzOufMote25y4vF/STP8+n7K7t/sA8sdDk0JFhPFH7W609ZrVZf+r5PnXMz51wUVNd1JI7HqGnbqzo2TSSEiJqmiTjnEWPlTMp282c+//QXw+zeVBbZ/NkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/b6caab106024863b2a89a0978e66b252/ba381/appsync-gui-resolver.webp 200w,\n/static/b6caab106024863b2a89a0978e66b252/7f61c/appsync-gui-resolver.webp 400w,\n/static/b6caab106024863b2a89a0978e66b252/d00b9/appsync-gui-resolver.webp 800w,\n/static/b6caab106024863b2a89a0978e66b252/92f8c/appsync-gui-resolver.webp 1200w,\n/static/b6caab106024863b2a89a0978e66b252/fad48/appsync-gui-resolver.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/b6caab106024863b2a89a0978e66b252/772e8/appsync-gui-resolver.png 200w,\n/static/b6caab106024863b2a89a0978e66b252/e17e5/appsync-gui-resolver.png 400w,\n/static/b6caab106024863b2a89a0978e66b252/5a190/appsync-gui-resolver.png 800w,\n/static/b6caab106024863b2a89a0978e66b252/c1b63/appsync-gui-resolver.png 1200w,\n/static/b6caab106024863b2a89a0978e66b252/29007/appsync-gui-resolver.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/b6caab106024863b2a89a0978e66b252/5a190/appsync-gui-resolver.png\"\n            alt=\"appsync gui resolver\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>上記画面の<code class=\"language-text\">Pipeline</code>のリンクを開くとリゾルバーの詳細が確認できます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/62898f7e49ea89c06fa0c3fa4ead6944/29007/appsync-gui-resolver-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACKElEQVR42n2S2W7bMBRE/c996m8Uzq/0pW9NFSRpBdhJXKdNIlXUYu0LF1EUTU0h2qlbNMkFDq4oiMOrGS4IIXdZln3tus4tytINo8j94RPXDyP3iUTuYxC5P33iPgUHPJ+4XhC6nu+7nu+5YZK4UUmv47K9P7+4fL8AAGOMwbHGcUQYJ/CDEPEuRRBGKOsWUikIKW0f1AipBohBYRAU6vHLHuUdtqvLs4WWAh3jWmo9i5qu782j98sEATEBISYIAkNIaEgY2nWaZaasalPVtUmL0lRZbNr1x9F4DlYXn5YLbfbYU2qwWgHrNfrtFpRSpGmG3S5FnCQoqxrDMEDN0x27ZRwt0kz7+e9uN5vlYpoAcG6QpkCeg2cZGGOomwZVXaOqKvs8H9L3/QkpIYSAEBycsYPg7c3y4KHnGdzcAJs79Nvv2BFifaSUoe0oOkrRdh2apkU9U9cWLsTz1EfB2+V/ocwfcc5BGYPohe3z+vndTFGWlvkgzsU88duCFRXIOo6KSRS0tzRcWr8GpexN0FpjPKLG8eThS4LzJqU19pPB3hiYacJs9TRNYJxbwb9rmg6hbF4TnDdY39oWbdeil70Ve61eElQA9AzjQgvRa0rZH7gQWg6DHpTSw3BE/cNw9PDDKeX1Gri/x+T70ErZdG2iTWPv3lv1POHDw8PZQkr5jTN2zil1OGNOnudOmudOmMROGJ9IdjsnL4oXKcryc14Uq6urq3e/AVbB0z5onKo6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/62898f7e49ea89c06fa0c3fa4ead6944/ba381/appsync-gui-resolver-2.webp 200w,\n/static/62898f7e49ea89c06fa0c3fa4ead6944/7f61c/appsync-gui-resolver-2.webp 400w,\n/static/62898f7e49ea89c06fa0c3fa4ead6944/d00b9/appsync-gui-resolver-2.webp 800w,\n/static/62898f7e49ea89c06fa0c3fa4ead6944/92f8c/appsync-gui-resolver-2.webp 1200w,\n/static/62898f7e49ea89c06fa0c3fa4ead6944/fad48/appsync-gui-resolver-2.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/62898f7e49ea89c06fa0c3fa4ead6944/772e8/appsync-gui-resolver-2.png 200w,\n/static/62898f7e49ea89c06fa0c3fa4ead6944/e17e5/appsync-gui-resolver-2.png 400w,\n/static/62898f7e49ea89c06fa0c3fa4ead6944/5a190/appsync-gui-resolver-2.png 800w,\n/static/62898f7e49ea89c06fa0c3fa4ead6944/c1b63/appsync-gui-resolver-2.png 1200w,\n/static/62898f7e49ea89c06fa0c3fa4ead6944/29007/appsync-gui-resolver-2.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/62898f7e49ea89c06fa0c3fa4ead6944/5a190/appsync-gui-resolver-2.png\"\n            alt=\"appsync gui resolver 2\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n<br/></p>\n<h3 id=\"関数定義\" style=\"position:relative;\"><a href=\"#%E9%96%A2%E6%95%B0%E5%AE%9A%E7%BE%A9\" aria-label=\"関数定義 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>関数定義</h3>\n<div class=\"gatsby-code-title\">serverless.ymlから関数定義を抜粋</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">    <span class=\"token comment\"># 関数定義を指定します</span>\n    <span class=\"token key atrule\">functionConfigurations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># ユーザー一覧取得</span>\n        <span class=\"token comment\"># 関数で扱うデータソース名を指定します</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">dataSource</span><span class=\"token punctuation\">:</span> dynamo_user\n        <span class=\"token comment\"># 関数名を指定します</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser'</span>\n        <span class=\"token comment\"># 関数のリクエストマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token comment\"># ファイルパスはmappingTemplatesLocationで指定したパスからの相対パスになります</span>\n        <span class=\"token key atrule\">request</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser.req.vtl'</span>\n        <span class=\"token comment\"># 関数のレスポンスマッピングテンプレートのファイルパスを指定します</span>\n        <span class=\"token key atrule\">response</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'GetUser.res.vtl'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>関数定義は、エンドポイントの画面を開き<code class=\"language-text\">Functions</code>を確認します。\n関数が一覧表示されるので、一覧から今回<code class=\"language-text\">serverless.yml</code>に定義した関数を選択すると、以下のように詳細が確認できます。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7f900e0f07625e2cb895d3d98f3944c8/29007/appsync-gui-function.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABcRAAAXEQHKJvM/AAAC7klEQVR42oVS63KjNhj1+79KL9M/fYHdOPujzXQ6Sb2NbUFASDgJGAmQkJDE6Uh2dr1psqvhDKBBH+e2ur39+9e6rnnbtnulVCaEyDg/ZNu8ynLKsn1BM0J5VrBDVvJDVlY825fsC0jJMnpo9s9C87/uNj+vsiz7BAA+hLAsS3zEZA1I9oCipMiLAk/PDeQwQPQ9lNbQ04RRa/TjCKUn6O3HgPvfkV3/tl5tt9v12B0xHB6dlTLAmCDbNjw8PIQ8fwgFrQLnPPC6TmiPxyCkCJ3oQtsegxAiSPqv8/UG25sPH1cFLa/x/Aj8+UfAZgN8/gy120GKDk3ToOs6hOARvE9372a4+QTvXLob50JUlhXl1aosy+v4EhDSZpQ9KoVOCDRtC2tN3PyKi7WcjiCE00NRFFcrzvlpoPchHogfjeOIYRzRDyMmazEZA2MsjP0W2hjM8wxrbRqY5/nFwPNfIodB6ySX1zU60WG2BtM0vQk9aYxqTGd3ZHcxMF6MAes19GaTWPZ9D2tMZADvfJK8vML7kuPlHJZYBSkhpMTx2EH2ffJzUCpJd87Be/8F3w4sX0k+/zWGorVOCUd2L2Etl+H8kOGlh9OE2Xk47xMjd8Fodg42BhHrEq2Ie/P8Riix1NstQAg0IagfH0GrCpzXqBgDpRSMcQzDkNi/IFpyFF2Yvcd2dxnKMATs95E3FKUY+j6FkjD00PpkQ2S4LCHVawn+OwzPkuMaY7+sTR5KOWDoFYKPXV0SXvX7q4dl+c7AmGjy0cFaBzPN0MpC6xOsnU/env19m2GeB9zcAHd30Pf34JyDVhSMM1SsQl3zBKVGmElj0ie8eBgH75KHVXWVBlo7L1r7xVo/9tL3QvrmSXgpBz8Myitl/KSNn+fZXy7nXNybzww/rBhjn15L9iHA2QDvTj1KtQt4d72cLSldrwghvxhjmFJqp5QiEU3TEMZqQsua1LwmT08NeW5aIoQg4ijI8X/odlL27Pb2n5/+AxdZpsEbjMZkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7f900e0f07625e2cb895d3d98f3944c8/ba381/appsync-gui-function.webp 200w,\n/static/7f900e0f07625e2cb895d3d98f3944c8/7f61c/appsync-gui-function.webp 400w,\n/static/7f900e0f07625e2cb895d3d98f3944c8/d00b9/appsync-gui-function.webp 800w,\n/static/7f900e0f07625e2cb895d3d98f3944c8/92f8c/appsync-gui-function.webp 1200w,\n/static/7f900e0f07625e2cb895d3d98f3944c8/fad48/appsync-gui-function.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7f900e0f07625e2cb895d3d98f3944c8/772e8/appsync-gui-function.png 200w,\n/static/7f900e0f07625e2cb895d3d98f3944c8/e17e5/appsync-gui-function.png 400w,\n/static/7f900e0f07625e2cb895d3d98f3944c8/5a190/appsync-gui-function.png 800w,\n/static/7f900e0f07625e2cb895d3d98f3944c8/c1b63/appsync-gui-function.png 1200w,\n/static/7f900e0f07625e2cb895d3d98f3944c8/29007/appsync-gui-function.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7f900e0f07625e2cb895d3d98f3944c8/5a190/appsync-gui-function.png\"\n            alt=\"appsync gui function\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br/>\n<p>設定ファイルの説明は以上です。次にリゾルバーとスキーマの定義について説明します。</p>\n<h2 id=\"4-リゾルバー作成\" style=\"position:relative;\"><a href=\"#4-%E3%83%AA%E3%82%BE%E3%83%AB%E3%83%90%E3%83%BC%E4%BD%9C%E6%88%90\" aria-label=\"4 リゾルバー作成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. リゾルバー作成</h2>\n<p><code class=\"language-text\">mapping-templates</code>フォルダを作成し、その中にリクエストマッピングテンプレートとレスポンスマッピングテンプレートを作成します。</p>\n<p>PipelineResolver用のマッピングテンプレート</p>\n<div class=\"gatsby-code-title\">mapping-templates/start.vtl</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-velocity line-numbers\"><code class=\"language-velocity\">{}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br/>\n<p>PipelineResolver用のマッピングテンプレート</p>\n<div class=\"gatsby-code-title\">mapping-templates/end.vtl</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-velocity line-numbers\"><code class=\"language-velocity\"><span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">)</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br/>\n<p>ユーザー1件取得用の関数ではDynamoDBのGetItemを呼び出します。</p>\n<div class=\"gatsby-code-title\">mapping-templates/GetUser.req.vtl</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-velocity line-numbers\"><code class=\"language-velocity\">{\n    \"version\": \"2018-05-29\",\n    \"operation\": \"GetItem\",\n    \"key\": {\n        \"id\": <span class=\"token variable\">$util<span class=\"token punctuation\">.</span>dynamodb<span class=\"token punctuation\">.</span><span class=\"token function\">toDynamoDBJson</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span></span>,\n    }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>取得情報をレスポンスにて返却します。</p>\n<div class=\"gatsby-code-title\">mapping-templates/GetUser.res.vtl</div>\n<div class=\"gatsby-highlight\" data-language=\"velocity\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-velocity line-numbers\"><code class=\"language-velocity\"><span class=\"token directive\"><span class=\"token keyword\">#if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>error</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>$ctx<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">,</span> $ctx<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span></span>\n<span class=\"token directive\"><span class=\"token keyword\">#end</span></span>\n\n<span class=\"token directive\"><span class=\"token keyword\">#set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$res</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$ctx<span class=\"token punctuation\">.</span>result</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span>\n<span class=\"token variable\">$util<span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span>$res<span class=\"token punctuation\">)</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2 id=\"5-スキーマ作成\" style=\"position:relative;\"><a href=\"#5-%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E4%BD%9C%E6%88%90\" aria-label=\"5 スキーマ作成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. スキーマ作成</h2>\n<p>ユーザー情報（ID、名前）を1件検索するだけのシンプルなスキーマ定義です。\n<code class=\"language-text\">serverless.yml</code>の<code class=\"language-text\">schema</code>で指定した通り、プロジェクトルートに<code class=\"language-text\">schema.graphql</code>ファイルを作成します。</p>\n<div class=\"gatsby-code-title\">schema.graphql</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">UserResponse</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">user</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">User</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">input</span> <span class=\"token atom-input class-name\">GetUserInput</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\"># ユーザー1件取得</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Query</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">user</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">UserResponse</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"6-awsにデプロイ\" style=\"position:relative;\"><a href=\"#6-aws%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4\" aria-label=\"6 awsにデプロイ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. AWSにデプロイ</h2>\n<p>以下コマンドを実行します。とても簡単にデプロイできます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">serverless deploy -v</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br/>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回はAppSync + Serverless FrameworkによるAppSync資産の構成管理についてご紹介しました。\n複数人開発においてGUI操作の場合、意図せず変更が加えられてデグレするリスクがあるので、Serverless Frameworkを使って構成管理するのが得策です。\nまたServerless Frameworkの利点はなんといっても1コマンドでAWSにデプロイという手軽さです。\nAppSync資産だけでなく、Lambdaや他資産もServerless Frameworkで管理できるので、AWSでサーバーレスなアプリを開発するときは是非使ってみてください🍅</p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://foobar123.com/building-an-appsync-serverless-framework-backend-foobar-c383a840de0d\">Building an AppSync + Serverless Framework Backend | FooBar</a></li>\n</ul>","excerpt":"なにこれ AWSのGraphQLマネージドサービス「AppSync」はGUIで簡単に設定ができて便利ですが、\n本格的に開発を進めていくとGUIポチポチでソースコードを管理するのはつらくなってきます。\nServerless Frameworkというツールとserverless…","frontmatter":{"slug":"/aws-appsync-and-serverless-framework","title":"AppSync + Serverless Frameworkによるソースコードの構成管理","date":"2019-03-04T07:50:00.000+09:00","tags":["AppSync","serverless","AWS","GraphQL"],"keywords":["AppSync"],"thumbnail":"thumbnail/2019/03/aws-appsync-and-serverless-framework.png","category":null}}}},"staticQueryHashes":["3868140423","4185443638","467257065","558103266"],"slicesMap":{}}