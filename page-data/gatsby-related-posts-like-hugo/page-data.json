{"componentChunkName":"component---src-templates-blog-post-template-tsx","path":"/gatsby-related-posts-like-hugo/","result":{"data":{"post":{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>ブログでよく見かけるUIのひとつに<strong>関連記事リンク</strong>あります。\n記事下部に関連記事リンクを設けておくと、記事を読み終えたユーザーが、また別の記事を見てくれる可能性が上がるので、\n回遊率向上という観点で非常に効果的なUIです。</p>\n<p>そんな関連記事リンクが<a href=\"https://gohugo.io/\"><strong>Hugo</strong></a>（Go言語製静的サイトジェネレーター）には、デフォルトで用意されていることを、<a href=\"https://mom0tomo.github.io/\">mom0tomoさんのブログ</a>の記事<a href=\"https://mom0tomo.github.io/post/hugo_related_posts/\">「HugoでRelated Content(関連記事)を表示する」</a>を見て知りました。\n自分が使っている<a href=\"https://www.gatsbyjs.org/\"><strong>Gatsby</strong></a>（JavaScript製静的サイトジェネレーター）に、そのような機能はありません。うらやましい！</p>\n<p>ということで、**Hugoの実装を真似して、Gatsbyで関連記事が表示できるようにしてみました。**実物はこのページの下部にあるのでご覧ください。\n今回は、以下のような流れで、関連記事機能について説明したいと思います。</p>\n<ul>\n<li><a href=\"#hugo%E3%81%AE%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B%E6%A9%9F%E8%83%BD\">Hugoの関連記事機能</a></li>\n<li><a href=\"#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B%E8%A1%A8%E7%A4%BA%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\">関連記事機能イメージ</a></li>\n<li><a href=\"#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B%E8%A1%A8%E7%A4%BA%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89\">関連記事機能ソース</a></li>\n<li><a href=\"#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B%E6%A9%9F%E8%83%BD%E4%BD%BF%E7%94%A8%E3%81%AB%E3%81%82%E3%81%9F%E3%82%8A%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E3%81%AEfront-matter%E3%81%AB%E3%82%AD%E3%83%BC%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%9F\">関連記事機能使用にあたりマークダウンのFront Matterにキーワードを追加した</a></li>\n<li><a href=\"#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B%E6%A9%9F%E8%83%BD%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\">関連記事機能の使い方</a></li>\n<li><a href=\"#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B%E6%A9%9F%E8%83%BD%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%81%AE%E3%82%B3%E3%83%84\">関連記事機能の設定のコツ</a></li>\n</ul>\n<p>プラグイン化はできていませんが、ソースコードを見れば真似して実装できると思います。\n<strong>Gatsbyでブログを作っている方は是非実装してみてください！</strong></p>\n<ul>\n<li>関連記事取得処理：<a href=\"https://github.com/Takumon/blog/blob/master/gatsby-related-post.js\">blog/gatsby-related-post.js at master · Takumon/blog</a></li>\n<li>関連記事取得処理の呼び出し：<a href=\"https://github.com/Takumon/blog/blob/master/gatsby-node.js#L107\">blog/gatsby-node.js at master · Takumon/blog</a></li>\n</ul>\n<h2 id=\"hugoの関連記事機能\" style=\"position:relative;\"><a href=\"#hugo%E3%81%AE%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B%E6%A9%9F%E8%83%BD\" aria-label=\"hugoの関連記事機能 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hugoの関連記事機能</h2>\n<p>記事の全文を解析するようなガッツリした機能ではなく、\nマークダウンのFront Matter（日付、タイトル、タグ、キーワード、カテゴリなど）をもとに関連度を測るシンプルな機能です。\n以下のようなチューニングが設定で可能です。</p>\n<ol>\n<li>どれが一致した場合に関連とみなすか</li>\n<li>一致した場合の重みづけをどうするか</li>\n<li>関連度がどれくらい以上の場合に関連記事とみなすか</li>\n</ol>\n<p>以下では設定方法と、実際にHugoの記事中で関連記事を表示されるためのメソッドについてご紹介します。</p>\n<h3 id=\"インターフェース\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9\" aria-label=\"インターフェース permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>インターフェース</h3>\n<p>3つのインターフェースが用意されています。</p>\n<h4 id=\"related-page\" style=\"position:relative;\"><a href=\"#related-page\" aria-label=\"related page permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>.Related PAGE</h4>\n<p>指定したページの関連記事を取得します。</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-go line-numbers\"><code class=\"language-go\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> $related <span class=\"token operator\">:=</span> <span class=\"token punctuation\">.</span>Site<span class=\"token punctuation\">.</span>RegularPages<span class=\"token punctuation\">.</span>Related <span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4 id=\"relatedindices-page-indice1-indice2-\" style=\"position:relative;\"><a href=\"#relatedindices-page-indice1-indice2-\" aria-label=\"relatedindices page indice1 indice2  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>.RelatedIndices PAGE INDICE1 [INDICE2 …]</h4>\n<p>指定したページの関連記事を取得します。ただし指定した索引に限定して関連度を測ります。</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-go line-numbers\"><code class=\"language-go\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> $related <span class=\"token operator\">:=</span> <span class=\"token punctuation\">.</span>Site<span class=\"token punctuation\">.</span>RegularPages<span class=\"token punctuation\">.</span>RelatedIndices <span class=\"token punctuation\">.</span> <span class=\"token string\">\"tags\"</span> <span class=\"token string\">\"date\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4 id=\"relatedto-keyvals-keyvals2-\" style=\"position:relative;\"><a href=\"#relatedto-keyvals-keyvals2-\" aria-label=\"relatedto keyvals keyvals2  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>.RelatedTo KEYVALS [KEYVALS2 …]</h4>\n<p>指定した索引に関連する関連記事をコレクションで取得します。</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-go line-numbers\"><code class=\"language-go\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> $related <span class=\"token operator\">:=</span> <span class=\"token punctuation\">.</span>Site<span class=\"token punctuation\">.</span>RegularPages<span class=\"token punctuation\">.</span>RelatedTo <span class=\"token punctuation\">(</span> keyVals <span class=\"token string\">\"tags\"</span> <span class=\"token string\">\"hugo\"</span> <span class=\"token string\">\"rocks\"</span><span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">(</span> keyVals <span class=\"token string\">\"date\"</span> <span class=\"token punctuation\">.</span>Date <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3 id=\"設定方法\" style=\"position:relative;\"><a href=\"#%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95\" aria-label=\"設定方法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>設定方法</h3>\n<p>以下のように設定します。\nそれぞれの項目について説明します。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">related</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">threshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n  <span class=\"token key atrule\">includeNewer</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n  <span class=\"token key atrule\">toLower</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n  <span class=\"token key atrule\">indices</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> keywords\n    <span class=\"token key atrule\">weight</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> date\n    <span class=\"token key atrule\">weight</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id=\"threshold\" style=\"position:relative;\"><a href=\"#threshold\" aria-label=\"threshold permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>threshold</h4>\n<p>関連記事とみなすための関連度の最低値を指定します。\n関連度がこの値未満のものは関連記事から除外されます。</p>\n<h4 id=\"includenewer\" style=\"position:relative;\"><a href=\"#includenewer\" aria-label=\"includenewer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>includeNewer</h4>\n<p>対象の記事より新しい記事を関連記事として含めるかを指定します。\ntrueを指定すると、新しく記事を投稿した場合に、どんどん関連記事が増えていくことになります。</p>\n<h4 id=\"tolower\" style=\"position:relative;\"><a href=\"#tolower\" aria-label=\"tolower permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>toLower</h4>\n<p>関連記事検索時に、大文字・小文字を区別するかを指定します。\ntrueの場合、若干パフォーマンスは下がりますご、より良い結果が得られます。</p>\n<h4 id=\"indices\" style=\"position:relative;\"><a href=\"#indices\" aria-label=\"indices permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>indices</h4>\n<p>関連度を評価する時に使う索引を指定します。\nこちらは複数指定できます。</p>\n<ul>\n<li><code class=\"language-text\">name</code>\n<ul>\n<li>記事中に指定したfrontmatterのうちどれを関連度を測る索引として使うかを指定します。</li>\n</ul>\n</li>\n<li><code class=\"language-text\">weigth</code>\n<ul>\n<li>関連度を計算する時の重み付けです。たとえば以下のように指定した場合、日付が一致するよりも、キーワードが一致するほうが関連度が高くなります。\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">indices:\n- name: keywords\n  weight: 100\n- name: date\n  weight: 10</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h3>\n<p>公式ドキュメントに詳細が載っています。<br/>\n<small>※ピンク眼鏡で若干うさんくさくなってるゴファーくんです。</small></p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"padding-bottom: 50%; padding-top: 120px;\"><a href=\"https://gohugo.io/content-management/related/\" data-iframely-url=\"//cdn.iframe.ly/Y4ImVvB\"></a></div></div>\n<br />\n関連記事取得ロジックのソースコードはコチラ\n<ul>\n<li><a href=\"https://github.com/gohugoio/hugo/blob/master/related/inverted_index.go\"><code class=\"language-text\">related/inverted_index.go</code>（コアロジック）</a></li>\n<li><a href=\"https://github.com/gohugoio/hugo/blob/master/hugolib/pages_related.go\"><code class=\"language-text\">hugolib/pages_related.go</code>（インターフェース）</a></li>\n</ul>\n<h2 id=\"関連記事表示イメージ\" style=\"position:relative;\"><a href=\"#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B%E8%A1%A8%E7%A4%BA%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\" aria-label=\"関連記事表示イメージ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>関連記事表示イメージ</h2>\n<p>たとえば、この記事だと以下のように表示されます。記事のキーワードがGatsbyなので、Gatsby関連の記事が表示されていますね。\nちなみに記事リンクの見た目は<a href=\"https://developer.smartnews.com/blog/\">SmartNewsさんのブログ</a>を参考にしました。\nSmartNewsさんのブログはPC・モバイルともにカッコいいデザインです！</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACV0lEQVR42pWUz2/TMBTH8x9z4AwSQuI2oYkJxAEEgiNo1ZSNw64wDhul636kzVSl69o1y+84dpwmdh56T82UsrENSx/Zz05evl8/O8bOzs5Gv9+3u93fXcdxem3G4zHRjrEfjUZ/g+/ae3t768ZkMjEBALTWqixLUEpBXWuMAePFYgFVVRF5LqFaPtNudV3TxMXFRccYDs625tMruLyclVEU6SRJtJRSM8Y0xgjnXAshtOd5NC9loVFDixITjsfjTcO2z0ghY4wUIqgGlTVKUC1S1zWBY1xrqKqKHhyNRh3DtixKKHKuWJpCylJI0xQ/QHDOQQhBfRuca+CcU8LhcNgxzg+7Jrx6CsnXDyrkAuIogjiOIQhDiOOElKKqu1qzh47jdAzn5MiE96/B+vxOSa1hURRkuSgKSoaFwL6xfRtquTeUcGBZJn4/KQoleEZ2sixbsYcxQxi7sbZcb1vumfBxDfi3LypkGURhCEmSQJKm9DKOPc+DMAohCAIQeX635fPjQ1OvPYPTt+uKKwVSCFiUJUgpyTYiRA7ForhR7VbVW5YHA6pylOeqkJIS5Xl+3WMVsW/Gt7Fa5aOeCdufQHzfVWHKwPc8mM1mcOW6N5T8ixWFk6OeqZ48gtOXLxQrS+BZRpXNGKND/pC2soeNZT9NFR6PhmbvOBf3kmUty+Pj/lb9Yxtk72cZxIn2fV+7rkt3uqoqQql7KZdXb9OYDk5MeP4Ypm/WVIH3tqrofi635b8s09/m1/7+xnRo2Vb/sBsEQc/3/Wtc130Q8/m86/u+fXBwsP4HFdH9e4vcsswAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/74533d756266026e397fd7d7431ec7c1/ba381/related-content-preview.webp 200w,\n/static/74533d756266026e397fd7d7431ec7c1/7f61c/related-content-preview.webp 400w,\n/static/74533d756266026e397fd7d7431ec7c1/d00b9/related-content-preview.webp 800w,\n/static/74533d756266026e397fd7d7431ec7c1/e299d/related-content-preview.webp 866w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/74533d756266026e397fd7d7431ec7c1/772e8/related-content-preview.png 200w,\n/static/74533d756266026e397fd7d7431ec7c1/e17e5/related-content-preview.png 400w,\n/static/74533d756266026e397fd7d7431ec7c1/5a190/related-content-preview.png 800w,\n/static/74533d756266026e397fd7d7431ec7c1/c1328/related-content-preview.png 866w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/74533d756266026e397fd7d7431ec7c1/5a190/related-content-preview.png\"\n            alt=\"related-content-prevew\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h2 id=\"関連記事機能使用にあたりマークダウンのfront-matterにキーワードを追加した\" style=\"position:relative;\"><a href=\"#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B%E6%A9%9F%E8%83%BD%E4%BD%BF%E7%94%A8%E3%81%AB%E3%81%82%E3%81%9F%E3%82%8A%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E3%81%AEfront-matter%E3%81%AB%E3%82%AD%E3%83%BC%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%9F\" aria-label=\"関連記事機能使用にあたりマークダウンのfront matterにキーワードを追加した permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>関連記事機能使用にあたりマークダウンのFront Matterにキーワードを追加した</h2>\n<p>関連記事機能は、記事のFront Matterをみて関連度を測ります。\n自分の場合Front Matterにtagsしか定義していなかったため、\n関連度測定精度向上目的でkeywords（その記事を一言で表すとなに？という単語）の定義を追加しました。\nkeywordsでもcategoryでもなんでもいいと思いますが、tagsしか定義していない場合は、\n関連度をプラスアルファで測れるような指標を導入したほうが良いです。</p>\n<h2 id=\"関連記事機能の使い方\" style=\"position:relative;\"><a href=\"#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B%E6%A9%9F%E8%83%BD%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\" aria-label=\"関連記事機能の使い方 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>関連記事機能の使い方</h2>\n<p>とりあえず自分のブログで使えればいいかなと考えていたので、Hugoの3つのインターフェースのうち1つ（Related）のみ移植しました。関数名は<code class=\"language-text\">extractRelatedPosts</code>に変えています。\nHugoの場合はページオブジェクトのメソッドなので<code class=\"language-text\">Related</code>だけでも意味が通るのですが、移植後は関数化したので、関数名だけで意味がわかるように変えました。</p>\n<p>Gatsbyを使っている方は、以下参考にしていただければ関連記事表示機能を実装できると思います。\nただ自分のブログは  (1)frontmatterの取得方法が特殊 (2)関連記事のソートが関連度降順、公開日降順で固定　なのでそこを読み替えてください。</p>\n<ul>\n<li>関連記事取得処理：<a href=\"https://github.com/Takumon/blog/blob/master/gatsby-related-post.js\">blog/gatsby-related-post.js at master · Takumon/blog</a></li>\n<li>関連記事取得処理の呼び出し：<a href=\"https://github.com/Takumon/blog/blob/master/gatsby-node.js#L107\">blog/gatsby-node.js at master · Takumon/blog</a></li>\n</ul>\n<p>実際には<code class=\"language-text\">gatsby-node.js</code>で以下のよう使います。\nページコンポーネントのコンテキストに関連記事ノードの配列を指定しています。</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> relatedPost <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./gatsby-related-post'</span><span class=\"token punctuation\">)</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ・・・</span>\n\n  <span class=\"token comment\">// 関連記事取得</span>\n  <span class=\"token keyword\">const</span> relatedPosts <span class=\"token operator\">=</span> relatedPost<span class=\"token punctuation\">.</span><span class=\"token function\">extractRelatedPosts</span><span class=\"token punctuation\">(</span>\n    allPostNodes<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 全記事のノード配列</span>\n    node<span class=\"token punctuation\">,</span>  <span class=\"token comment\">// 対象の記事のノード</span>\n    relatedPost<span class=\"token punctuation\">.</span>defaultConfig <span class=\"token comment\">// 設定</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// この例では上位5件に絞っています</span>\n\n  <span class=\"token comment\">// 記事ページを生成</span>\n  actions<span class=\"token punctuation\">.</span><span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ・・・</span>\n    <span class=\"token literal-property property\">context</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// ・・・</span>\n      relatedPosts<span class=\"token punctuation\">,</span> <span class=\"token comment\">// コンテキストに関連記事のノード配列を指定</span>\n      <span class=\"token comment\">// ・・・</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// ・・・</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>これで、関連記事ノード配列が記事コンポーネントで扱えるようになります。あとはよしなり画面に表示すればOKです。</p>\n<h2 id=\"関連記事機能の設定のコツ\" style=\"position:relative;\"><a href=\"#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B%E6%A9%9F%E8%83%BD%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%81%AE%E3%82%B3%E3%83%84\" aria-label=\"関連記事機能の設定のコツ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>関連記事機能の設定のコツ</h2>\n<p>設定値のチューニングは少しコツがあります。\n<strong>設定値に必ずタグやキーワードよりも小さいweigthを持った索引を指定しましょう。</strong></p>\n<p>Hugoにおいて関連記事が閾値以上か判定している箇所は<a href=\"https://github.com/gohugoio/hugo/blob/master/related/inverted_index.go#L369-L375\">ココ</a>です。この中で呼ばれている<a href=\"https://github.com/gohugoio/hugo/blob/master/related/inverted_index.go#L390-L395\">norm関数</a>を見るとわかるのですが、このロジックだと、設定で指定した最小Weihtの索引がどれだけ一致していても関連記事とはみなされません。</p>\n<p>今回はこのロジックをそのまま移植しているので、Hugoと同様に以下のような設定だとどれだけタグが一致しても関連記事とはみなされないことになります。</p>\n<div class=\"gatsby-code-title\">🙅🏻‍♂️ダメな設定例</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> relatedContentConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">threshold</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">includeNewer</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">toLower</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">indices</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'keywords'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">weight</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'tags'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">weight</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>必ずtagsやkeywordsよりも低いweigthの索引を指定してあげましょう。</p>\n<div class=\"gatsby-code-title\">🙆🏻‍♂️良い設定例</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> relatedContentConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">threshold</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">includeNewer</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">toLower</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">indices</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'keywords'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">weight</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'tags'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">weight</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'date'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">weight</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>          </span>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>単純なロジックですが、タグとキーワードを見直すことで、それなりに満足のいく関連記事機能となりました。\nプラグイン化は、自分のブログ依存の処理（frontmatterの取得方法、ソートキー固定）を汎用化する必要があって少しめんどくさいので、時間があればやりたいくらいの気持ちです。\n今回は関連記事を表示するだけでしたが、関連度の情報を使って、記事の関連度マップを作ると面白そうなので、次回は記事関連度マップを作ろうと思います🍅</p>","excerpt":"なにこれ ブログでよく見かけるUIのひとつに関連記事リンクあります。\n記事下部に関連記事リンクを設けておくと、記事を読み終えたユーザーが、また別の記事を見てくれる可能性が上がるので、\n回遊率向上という観点で非常に効果的なUIです。 そんな関連記事リンクがHugo（Go…","frontmatter":{"slug":"/gatsby-related-posts-like-hugo","title":"GatsbyでRelated Content(関連記事)を表示する / Hugoの関連記事機能をGatsbyに移植した","date":"2019-02-09T17:00:00.000+09:00","tags":["Gatsby","Hugo","golang"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2019/02/gatsby-related-posts-like-hugo.png"},"headingsDetail":[{"id":"なにこれ","value":"なにこれ","depth":2,"parents":[]},{"id":"hugoの関連記事機能","value":"Hugoの関連記事機能","depth":2,"parents":[]},{"id":"インターフェース","value":"インターフェース","depth":3,"parents":[{"id":"hugoの関連記事機能","value":"Hugoの関連記事機能","depth":2}]},{"id":"related-page","value":".Related PAGE","depth":4,"parents":[{"id":"インターフェース","value":"インターフェース","depth":3},{"id":"hugoの関連記事機能","value":"Hugoの関連記事機能","depth":2}]},{"id":"relatedindices-page-indice1-indice2-","value":".RelatedIndices PAGE INDICE1 [INDICE2 …]","depth":4,"parents":[{"id":"インターフェース","value":"インターフェース","depth":3},{"id":"hugoの関連記事機能","value":"Hugoの関連記事機能","depth":2}]},{"id":"relatedto-keyvals-keyvals2-","value":".RelatedTo KEYVALS [KEYVALS2 …]","depth":4,"parents":[{"id":"インターフェース","value":"インターフェース","depth":3},{"id":"hugoの関連記事機能","value":"Hugoの関連記事機能","depth":2}]},{"id":"設定方法","value":"設定方法","depth":3,"parents":[{"id":"hugoの関連記事機能","value":"Hugoの関連記事機能","depth":2}]},{"id":"threshold","value":"threshold","depth":4,"parents":[{"id":"設定方法","value":"設定方法","depth":3},{"id":"hugoの関連記事機能","value":"Hugoの関連記事機能","depth":2}]},{"id":"includenewer","value":"includeNewer","depth":4,"parents":[{"id":"設定方法","value":"設定方法","depth":3},{"id":"hugoの関連記事機能","value":"Hugoの関連記事機能","depth":2}]},{"id":"tolower","value":"toLower","depth":4,"parents":[{"id":"設定方法","value":"設定方法","depth":3},{"id":"hugoの関連記事機能","value":"Hugoの関連記事機能","depth":2}]},{"id":"indices","value":"indices","depth":4,"parents":[{"id":"設定方法","value":"設定方法","depth":3},{"id":"hugoの関連記事機能","value":"Hugoの関連記事機能","depth":2}]},{"id":"参考","value":"参考","depth":3,"parents":[{"id":"hugoの関連記事機能","value":"Hugoの関連記事機能","depth":2}]},{"id":"関連記事表示イメージ","value":"関連記事表示イメージ","depth":2,"parents":[]},{"id":"関連記事機能使用にあたりマークダウンのfront-matterにキーワードを追加した","value":"関連記事機能使用にあたりマークダウンのFront Matterにキーワードを追加した","depth":2,"parents":[]},{"id":"関連記事機能の使い方","value":"関連記事機能の使い方","depth":2,"parents":[]},{"id":"関連記事機能の設定のコツ","value":"関連記事機能の設定のコツ","depth":2,"parents":[]},{"id":"まとめ","value":"まとめ","depth":2,"parents":[]}]}},"pageContext":{"thumbnail":{"node":{"relativePath":"thumbnail/2019/02/gatsby-related-posts-like-hugo.png","name":"gatsby-related-posts-like-hugo","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/636b4f62601378fcf52027f4157d6d32/2d11e/gatsby-related-posts-like-hugo.png","srcSet":"/static/636b4f62601378fcf52027f4157d6d32/6b9a5/gatsby-related-posts-like-hugo.png 300w,\n/static/636b4f62601378fcf52027f4157d6d32/ae865/gatsby-related-posts-like-hugo.png 600w,\n/static/636b4f62601378fcf52027f4157d6d32/2d11e/gatsby-related-posts-like-hugo.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/636b4f62601378fcf52027f4157d6d32/b0a02/gatsby-related-posts-like-hugo.webp 300w,\n/static/636b4f62601378fcf52027f4157d6d32/86b42/gatsby-related-posts-like-hugo.webp 600w,\n/static/636b4f62601378fcf52027f4157d6d32/c4678/gatsby-related-posts-like-hugo.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":630}}}},"siteMetadata":{"title":"Masashi Ishikawa's portfolio","author":"Masashi Ishikawa"},"slug":"/gatsby-related-posts-like-hugo","relatedPosts":[{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>ブログについて以下２点改修したので備忘録を残します。</p>\n<ul>\n<li><strong>Gatsbyをv2からv5に更新</strong>：しばらくブログを更新しない間にGatsbyの最新バージョンはv2からv5になっていたのでバージョンアップしました。</li>\n<li><strong>＋αの機能を削除</strong>：いままではプロフィールページなど充実させて機能をモリモリにしていましたが、今後はメンテコストを下げて記事投稿に集中したいからです。</li>\n</ul>\n<h2 id=\"gatsbyのバージョンアップ\" style=\"position:relative;\"><a href=\"#gatsby%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%A2%E3%83%83%E3%83%97\" aria-label=\"gatsbyのバージョンアップ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsbyのバージョンアップ</h2>\n<p>忘れていたり古くなった私のGatsbyの知識をアップデートするため、\npackage.jsonのライブラリ更新ではなく、<code class=\"language-text\">npm init gatsby blog -- -y -ts</code>でアプリを新規作成して、必用な機能だけ移行する形を取りました。</p>\n<p>ここではライブラリのバージョンアップだけではうまく行かない点について列挙します。</p>\n<h3 id=\"gatsby-image-gatsby-background-image\" style=\"position:relative;\"><a href=\"#gatsby-image-gatsby-background-image\" aria-label=\"gatsby image gatsby background image permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-image, gatsby-background-image</h3>\n<p>画像を扱うライブラリが大きく変わっていました。\nいずれも公式サイトに従って書き換えました。</p>\n<ul>\n<li><a href=\"https://www.gatsbyjs.com/docs/reference/release-notes/image-migration-guide/\">gatsby-image移行方法 | Gatsby公式サイト</a></li>\n<li><a href=\"https://www.gatsbyjs.com/plugins/gatsby-background-image/#gatsby-34--gatsby-plugin-image\">gatsby-background-iamgeプラグインのREADME</a></li>\n</ul>\n<p>またgatsby-background-imageは<a href=\"https://github.com/timhagn/gatsby-background-image/issues/179\">GitHubのissue</a>で記載があるようにGatsby V5の場合はビルドエラーが出ます。やむをえず<code class=\"language-text\">npm ci</code>や<code class=\"language-text\">npm i</code>実行時は<code class=\"language-text\">--legacy-peer-deps</code>を付与しています。</p>\n<h3 id=\"emotion\" style=\"position:relative;\"><a href=\"#emotion\" aria-label=\"emotion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>emotion</h3>\n<p><a href=\"https://emotion.sh/docs/emotion-11#package-renaming\">Emotion11でパッケージ名が変わっている</a>のでインポート文を変えました。</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-diff line-numbers\"><code class=\"language-diff\"><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span> import { css } from '@emotion/core'\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span> import { css } from '@emotion/react'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<br/>\n<p>またtsxファイルでcss属性に対してエラーが出るようになったので、<a href=\"https://emotion.sh/docs/eslint-plugin-react\">Emotionの公式サイト</a>を参考にeslintrc.jsのruleに以下追加しました。</p>\n<div class=\"gatsby-code-title\">eslintrc.js</div>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-diff line-numbers\"><code class=\"language-diff\">{\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> \"rules\": {\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>    \"react/no-unknown-property\": [\"error\", { \"ignore\": [\"css\"] }]\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> }\n</span>}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"削除した機能\" style=\"position:relative;\"><a href=\"#%E5%89%8A%E9%99%A4%E3%81%97%E3%81%9F%E6%A9%9F%E8%83%BD\" aria-label=\"削除した機能 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>削除した機能</h2>\n<p>改修過程で記事投稿に関係のないプロフィールのような付加価値的な機能と、ビルド時間が増大する機能については、移行しないことにしました。\n当時はフロントエンドのスキル情報のためのプレイグラウンドとして色んな機能を実装していましたが、今は技術調査結果や読後レポートを公開する場として使いたいからです。</p>\n<h3 id=\"qiita記事情報取得表示\" style=\"position:relative;\"><a href=\"#qiita%E8%A8%98%E4%BA%8B%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E8%A1%A8%E7%A4%BA\" aria-label=\"qiita記事情報取得表示 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Qiita記事情報取得・表示</h3>\n<p>これまではQiita連携のプラグインを使っていましたが、以下理由から廃止しました。</p>\n<ul>\n<li>Qiita記事とGatsby側記事の差分を埋めるため、nodeを加工して独自のIFを設ける必要があり、ブログの作りが複雑化してしまう</li>\n<li>1年以上の時間軸で考えるとプラグインはメンテコストがかかる</li>\n<li>Qiita側でアクセストークンの発行が必要でメンテコストがかかる</li>\n</ul>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://takumon.com/2018/11/11/\" data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Ftakumon.com%2F2018%2F11%2F11%2F&key=0658bf78be97cafcf2b0b9f96c1270ee\"></a></div></div>\n<h3 id=\"githubリポジトリ情報取得表示\" style=\"position:relative;\"><a href=\"#github%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E8%A1%A8%E7%A4%BA\" aria-label=\"githubリポジトリ情報取得表示 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitHubリポジトリ情報取得・表示</h3>\n<p>当時気張って作ってみたものの、普段の記事作成作業の生産性を下げるので廃止しました。</p>\n<ul>\n<li>GitHubでアクセストークンの発行が必要でメンテコストがかかる</li>\n<li>ビルド時間が少し長くなる</li>\n<li>ローカルで頻繁にビルドするとGitHubアクセス制限回数に到達しGitHub API呼び出しで401エラーになる</li>\n</ul>\n<h3 id=\"wordcloud表示記事文章中の頻出単語可視化d3jsのよる記事関連性の可視化\" style=\"position:relative;\"><a href=\"#wordcloud%E8%A1%A8%E7%A4%BA%E8%A8%98%E4%BA%8B%E6%96%87%E7%AB%A0%E4%B8%AD%E3%81%AE%E9%A0%BB%E5%87%BA%E5%8D%98%E8%AA%9E%E5%8F%AF%E8%A6%96%E5%8C%96d3js%E3%81%AE%E3%82%88%E3%82%8B%E8%A8%98%E4%BA%8B%E9%96%A2%E9%80%A3%E6%80%A7%E3%81%AE%E5%8F%AF%E8%A6%96%E5%8C%96\" aria-label=\"wordcloud表示記事文章中の頻出単語可視化d3jsのよる記事関連性の可視化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WordCloud表示（記事文章中の頻出単語可視化）、d3.jsのよる記事関連性の可視化</h3>\n<p>これらも当時気張って作ってみたものの廃止しました</p>\n<ul>\n<li>必要はライブラリが多い、1年立つと使い方を忘れてる</li>\n<li>ビルド時間が大幅に増加してしまう</li>\n<li>Gatsby v2→5更新時に画像処理系ライブラリ起因でエラー多発</li>\n</ul>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://takumon.com/wordcloud-in-gatsby-blog\" data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Ftakumon.com%2Fwordcloud-in-gatsby-blog%2F&key=0658bf78be97cafcf2b0b9f96c1270ee\"></a></div></div>\n<h3 id=\"ビルド処理gatsby-parallel-runnerによる画像生成処理の並列化\" style=\"position:relative;\"><a href=\"#%E3%83%93%E3%83%AB%E3%83%89%E5%87%A6%E7%90%86gatsby-parallel-runner%E3%81%AB%E3%82%88%E3%82%8B%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90%E5%87%A6%E7%90%86%E3%81%AE%E4%B8%A6%E5%88%97%E5%8C%96\" aria-label=\"ビルド処理gatsby parallel runnerによる画像生成処理の並列化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ビルド処理：gatsby-parallel-runnerによる画像生成処理の並列化</h3>\n<p>上３つの廃止に伴いビルド時間も短縮されました。\n当時ビルド時間短縮のために導入していた本機能も、Google Cloudとの連携といった煩わしさがあったので今回を機に廃止しました。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://takumon.com/optimizations-for-faster-gatsby-builds\" data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Ftakumon.com%2Foptimizations-for-faster-gatsby-builds%2F%231-%25E7%2594%25BB%25E5%2583%258F%25E7%2594%259F%25E6%2588%2590%25E5%2587%25A6%25E7%2590%2586%25E3%2582%2592%25E4%25B8%25A6%25E5%2588%2597%25E5%258C%2596%25E3%2581%2599%25E3%2582%258B&key=0658bf78be97cafcf2b0b9f96c1270ee\"></a></div></div>\n<h3 id=\"ビルド処理画像縦横幅縮小画質低減\" style=\"position:relative;\"><a href=\"#%E3%83%93%E3%83%AB%E3%83%89%E5%87%A6%E7%90%86%E7%94%BB%E5%83%8F%E7%B8%A6%E6%A8%AA%E5%B9%85%E7%B8%AE%E5%B0%8F%E7%94%BB%E8%B3%AA%E4%BD%8E%E6%B8%9B\" aria-label=\"ビルド処理画像縦横幅縮小画質低減 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ビルド処理：画像縦横幅縮小・画質低減</h3>\n<p>以下理由から廃止しました。</p>\n<ul>\n<li>WordCloudの部分でもそうでしたが画像処理系は処理が重く、ライブラリバージョンアップでエラーも付き物</li>\n<li>サムネイル画像を最適なサイズ・画質で作る環境は別で整えたので画像加工処理自体が不要になった</li>\n</ul>\n<h3 id=\"ビルド処理circle-ciでのビルドnetlifyへのデプロイ\" style=\"position:relative;\"><a href=\"#%E3%83%93%E3%83%AB%E3%83%89%E5%87%A6%E7%90%86circle-ci%E3%81%A7%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89netlify%E3%81%B8%E3%81%AE%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4\" aria-label=\"ビルド処理circle ciでのビルドnetlifyへのデプロイ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ビルド処理：Circle CIでのビルドNetlifyへのデプロイ</h3>\n<p>GitHub Actionsに乗り換えました</p>\n<h3 id=\"renovate\" style=\"position:relative;\"><a href=\"#renovate\" aria-label=\"renovate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Renovate</h3>\n<p><a href=\"https://github.com/renovatebot/renovate\">Renovate</a>（リポジトリで利用しているライブラリのバージョンアップを自動でしてくれるツール）は廃止しました。放っておくとプルリクが溜まり続けるので、１人で長期間メンテするリポジトリの場合は手動が良いと感じました。</p>\n<h2 id=\"残している機能\" style=\"position:relative;\"><a href=\"#%E6%AE%8B%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E6%A9%9F%E8%83%BD\" aria-label=\"残している機能 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>残している機能</h2>\n<h3 id=\"プラグイン系\" style=\"position:relative;\"><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E7%B3%BB\" aria-label=\"プラグイン系 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プラグイン系</h3>\n<ul>\n<li><strong>ダークモード切り替え</strong>：<a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-dark-mode/\">gatsby-plugin-dark-mode</a>を使っていましたが、TypeScriptのlint errorを解消するため<a href=\"https://github.com/kagamichan/gatsby-plugin-dark-mode\">@skagami/gatsby-plugin-dark-mode</a>に移行しました。</li>\n<li><strong>サイトマップ作成</strong>：<a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-sitemap/\">gatsby-plugin-sitemap</a></li>\n<li><strong>マークダウン表現拡張</strong>：現状維持でプラグイン郡を使っています</li>\n<li><strong>クエリからの型自動生成</strong>：<a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-typegen/\">gatsby-plugin-typegen</a>を使っています</li>\n<li><strong>文字スタイルテンプレート</strong>：<a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-typography/\">gatsby-plugin-typography</a>、テンプレートは<a href=\"https://www.npmjs.com/package/typography-theme-wordpress-2016\">typography-theme-wordpress-2016</a>を使っています</li>\n<li><strong>manifestファイル作成</strong>：gatsby-plugin-manifest</li>\n</ul>\n<h3 id=\"自作系\" style=\"position:relative;\"><a href=\"#%E8%87%AA%E4%BD%9C%E7%B3%BB\" aria-label=\"自作系 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自作系</h3>\n<ul>\n<li>目次作成</li>\n</ul>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://takumon.com/2018/10/28/\" data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=http%3A%2F%2Ftakumon.com%2F2018%2F10%2F28%2F&key=0658bf78be97cafcf2b0b9f96c1270ee\"></a></div></div>\n<br/>\n<br/>\n<ul>\n<li>関連記事表示</li>\n</ul>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://takumon.com/gatsby-related-posts-like-hugo\" data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=http%3A%2F%2Ftakumon.com%2Fgatsby-related-posts-like-hugo&key=0658bf78be97cafcf2b0b9f96c1270ee\"></a></div></div>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>だいぶスッキリして記事が書きやすくなりました。\n1年以上の時間軸で自作ブログの運用を考えると、外部連携を減らしてリポジトリのソースコードだけで完結すること、環境変数などの構成管理対象外の情報を極力減らすことがポイントだと感じました🍅</p>","excerpt":"なにこれ ブログについて以下２点改修したので備忘録を残します。 Gatsbyをv2からv5に更新：しばらくブログを更新しない間にGatsbyの最新バージョンはv2からv5になっていたのでバージョンアップしました。 ＋α…","frontmatter":{"slug":"/migrate-gatsby-v2-to-v5","title":"Gatsbyバージョンアップ（v2 to v5）","date":"2023-04-06T09:00:00.000+09:00","tags":["Gatsby"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2023/04/migrate-gatsby-v2-to-v5.png","category":"blog"}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>自分のブログ(Gatsby製)のビルドが遅すぎてNetlifyでタイムアウトしてしまうので、ビルドチューニングをしました。\n15分以上かかっていたビルドが7分以下になり50%短縮できたので、その時の知見をまとめます。\n割と地味な作業が多いですが、Gatsbyのビルド時間短縮に関するTipsを効果がある順にご紹介します。</p>\n<ul>\n<li>🚀<a href=\"#1-%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90%E5%87%A6%E7%90%86%E3%82%92%E4%B8%A6%E5%88%97%E5%8C%96%E3%81%99%E3%82%8B\">1. 画像生成処理を並列化する</a></li>\n<li>🚅<a href=\"#2-%E5%BF%85%E8%A6%81%E3%81%AA%E7%94%BB%E5%83%8F%E3%81%A0%E3%81%91%E3%82%AF%E3%82%A8%E3%83%AA%E3%81%A7%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\">2. 必要な画像だけクエリで取得する</a></li>\n<li>🚂<a href=\"#3-%E7%94%9F%E6%88%90%E7%94%BB%E5%83%8F%E3%81%AE%E7%A8%AE%E9%A1%9E%E3%82%92%E6%B8%9B%E3%82%89%E3%81%99\">3. 生成画像の種類を減らす</a></li>\n<li>🚗<a href=\"#4-%E7%94%BB%E5%83%8F%E3%81%AE%E7%B8%A6%E6%A8%AA%E3%82%B5%E3%82%A4%E3%82%BA%E3%82%92%E6%9C%80%E9%81%A9%E5%8C%96%E3%81%99%E3%82%8B\">4. 画像の縦横サイズを最適化する</a></li>\n<li>🚴🏻<a href=\"#5-%E7%94%BB%E5%83%8F%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%B5%E3%82%A4%E3%82%BA%E3%82%92%E5%9C%A7%E7%B8%AE%E3%81%99%E3%82%8B\">5. 画像のファイルサイズを圧縮する</a></li>\n<li>🏃🏻<a href=\"#6-%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B%E7%94%BB%E5%83%8F%E3%82%92%E3%82%B7%E3%83%B3%E3%83%97%E3%83%AB%EF%BC%86%E4%BD%8E%E3%82%AF%E3%82%AA%E3%83%AA%E3%83%86%E3%82%A3%E3%81%AB%E3%81%99%E3%82%8B\">6. 生成する画像をシンプル＆低クオリティにする</a></li>\n<li>🏊🏻<a href=\"#7-netlify-plugin-gatsby-cache%E3%82%92%E4%BD%BF%E3%81%86\">7. netlify-plugin-gatsby-cacheを使う</a></li>\n<li>💎<a href=\"#%E7%95%AA%E5%A4%96%E7%B7%A81-circle-ci%E3%81%A7%E3%83%93%E3%83%AB%E3%83%89%E3%81%97%E3%81%A6netlify%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B\">番外編1: Circle CIでビルドしてNetlifyにデプロイする</a></li>\n</ul>\n<h2 id=\"なぜビルドが遅いのか--画像生成に時間がかかっている\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%9C%E3%83%93%E3%83%AB%E3%83%89%E3%81%8C%E9%81%85%E3%81%84%E3%81%AE%E3%81%8B--%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90%E3%81%AB%E6%99%82%E9%96%93%E3%81%8C%E3%81%8B%E3%81%8B%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B\" aria-label=\"なぜビルドが遅いのか  画像生成に時間がかかっている permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なぜビルドが遅いのか → 画像生成に時間がかかっている</h2>\n<p>ビルド時間の内訳を見たところ、<code class=\"language-text\">Generating image thumbnails</code>に10分以上かかっており大半を締めていました。\nこれは<a href=\"https://www.gatsbyjs.org/packages/gatsby-image/\">gatsby-image</a>で様々なブラウザ幅に最適化するために、サイズ違いの画像を複数枚生成するための処理です。</p>\n<p>gatsby-imageまわりのビルドチューニングについて、日本の記事をあまり見かけませんが、\n英語の記事やGitHubでは、画像生成が遅いという記事をちらほら見かけました。</p>\n<ul>\n<li><a href=\"https://www.netlify.com/blog/2020/02/25/gatsby-build-speed-improvements-with-parallel-image-processing/\">Improve Gatsby Build Speeds With Parallel Image Processing</a></li>\n<li><a href=\"https://github.com/gatsbyjs/gatsby/issues/8056\">Gatsby build on Netlify fails(Image generation): Command did not finish within the time limit · Issue #8056 · gatsbyjs/gatsby</a></li>\n<li><a href=\"https://github.com/gatsbyjs/gatsby/issues/23033\">Gatsby stuck on generating image thumbnails · Issue #23033 · gatsbyjs/gatsby</a></li>\n</ul>\n<p>あとGatsbyの公式ドキュメントでも画像の取り扱いについて言及されています。</p>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/docs/preoptimizing-images/\">Preoptimizing Your Images | GatsbyJS</a></li>\n</ul>\n<p>そのため、本記事では、いかに画像生成処理の時間を短縮するかをメインにTipsを紹介していきます。</p>\n<h2 id=\"1-画像生成処理を並列化する\" style=\"position:relative;\"><a href=\"#1-%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90%E5%87%A6%E7%90%86%E3%82%92%E4%B8%A6%E5%88%97%E5%8C%96%E3%81%99%E3%82%8B\" aria-label=\"1 画像生成処理を並列化する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 画像生成処理を並列化する</h2>\n<p><a href=\"https://github.com/netlify/gatsby-parallel-runner\">gatsby-parallel-runner</a>で画像生成処理を並列化します。\n何をやっているかというと、gatsby buildで一番重い画像生成処理を、<a href=\"https://console.cloud.google.com/\">Google Cloud Platform</a>(以降GCP)に投げて、並列で処理して結果を受け取るというプラグインです。GCPのアカウントが必要ですが、この方法が一番楽に劇的にビルド時間を短縮できます。\n<a href=\"https://www.netlify.com/blog/2020/02/25/gatsby-build-speed-improvements-with-parallel-image-processing/\">Netlifyの記事</a>では6分21秒かかっていたビルドが3分22秒、およそ半分になったそうです。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a917a9b6980544d6e3f6ad9fa2793ab1/01fc7/parallel-speed-comparison.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAC/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAFmV1wOZH//xAAZEAEAAwEBAAAAAAAAAAAAAAABAAMEEBH/2gAIAQEAAQUCa9HhXoQNEY8//8QAGBEAAgMAAAAAAAAAAAAAAAAAAAERElH/2gAIAQMBAT8BlFlh/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHBAAAQMFAAAAAAAAAAAAAAAAAQADIRETIIGR/9oACAEBAAY/Aq3RxS4BpSRh/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARMZEhUf/aAAgBAQABPyG0HjhNzS+F4a7UTevZYxewWtZ//9oADAMBAAIAAwAAABALz//EABYRAQEBAAAAAAAAAAAAAAAAAAABYf/aAAgBAwEBPxDBQ//EABYRAAMAAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxB0jP/EAB0QAQACAgIDAAAAAAAAAAAAAAEAIRFxQVFhscH/2gAIAQEAAT8QuEhfRz9hfnziPNQQN5pAK1iUFfWUQADSIgZTbP/Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a917a9b6980544d6e3f6ad9fa2793ab1/ba381/parallel-speed-comparison.webp 200w,\n/static/a917a9b6980544d6e3f6ad9fa2793ab1/7f61c/parallel-speed-comparison.webp 400w,\n/static/a917a9b6980544d6e3f6ad9fa2793ab1/d00b9/parallel-speed-comparison.webp 800w,\n/static/a917a9b6980544d6e3f6ad9fa2793ab1/92f8c/parallel-speed-comparison.webp 1200w,\n/static/a917a9b6980544d6e3f6ad9fa2793ab1/fad48/parallel-speed-comparison.webp 1600w,\n/static/a917a9b6980544d6e3f6ad9fa2793ab1/919bf/parallel-speed-comparison.webp 3200w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a917a9b6980544d6e3f6ad9fa2793ab1/e07e9/parallel-speed-comparison.jpg 200w,\n/static/a917a9b6980544d6e3f6ad9fa2793ab1/066f9/parallel-speed-comparison.jpg 400w,\n/static/a917a9b6980544d6e3f6ad9fa2793ab1/4b190/parallel-speed-comparison.jpg 800w,\n/static/a917a9b6980544d6e3f6ad9fa2793ab1/e5166/parallel-speed-comparison.jpg 1200w,\n/static/a917a9b6980544d6e3f6ad9fa2793ab1/b17f8/parallel-speed-comparison.jpg 1600w,\n/static/a917a9b6980544d6e3f6ad9fa2793ab1/01fc7/parallel-speed-comparison.jpg 3200w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a917a9b6980544d6e3f6ad9fa2793ab1/4b190/parallel-speed-comparison.jpg\"\n            alt=\"parallel speed comparison\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>設定方法は<a href=\"https://www.netlify.com/blog/2020/02/25/gatsby-build-speed-improvements-with-parallel-image-processing/\">Netlifyの記事</a>にキャプチャ付きで詳しく載っているので、そちらをご覧いただければ簡単に設定できると思います。GCPの環境をCLIで構築してNetlifyに環境変数を設定すればすぐに使えるようになります。</p>\n<h2 id=\"2-必要な画像だけクエリで取得する\" style=\"position:relative;\"><a href=\"#2-%E5%BF%85%E8%A6%81%E3%81%AA%E7%94%BB%E5%83%8F%E3%81%A0%E3%81%91%E3%82%AF%E3%82%A8%E3%83%AA%E3%81%A7%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\" aria-label=\"2 必要な画像だけクエリで取得する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 必要な画像だけクエリで取得する</h2>\n<p>フィルタを全く指定しないクエリは、全ての画像を取得してしまうのでビルド時間が大幅に増えてしまいます。\nそのため、クエリで取得する画像は他画像とフォルダを分けて、クエリのフィルタ条件を指定するなりしましょう。\nそうすることで不必要に画像を取得せずに済み、ビルド時間を短縮できます。</p>\n<div class=\"gatsby-code-title\">フィルタ条件を付けて必要な画像だけ取得する</div>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-diff line-numbers\"><code class=\"language-diff\">query {\n<span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span>  // 全画像を取得してしまう\n<span class=\"token prefix deleted\">-</span>  allFile {\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>  // 検索条件を指定して必要な画像だけ取得するようにする\n<span class=\"token prefix inserted\">+</span>  allFile(filter: {relativePath: {regex: \"/^thumbnail/*/\"}}) {\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>   edges {\n<span class=\"token prefix unchanged\"> </span>     node {\n<span class=\"token prefix unchanged\"> </span>       childImageSharp {\n<span class=\"token prefix unchanged\"> </span>         fluid {\n<span class=\"token prefix unchanged\"> </span>           ...GatsbyImageSharpFluid\n<span class=\"token prefix unchanged\"> </span>         }\n<span class=\"token prefix unchanged\"> </span>       }\n<span class=\"token prefix unchanged\"> </span>     }\n<span class=\"token prefix unchanged\"> </span>   }\n<span class=\"token prefix unchanged\"> </span> }\n</span>}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"クエリのフィルタ条件をcontext経由で指定する\" style=\"position:relative;\"><a href=\"#%E3%82%AF%E3%82%A8%E3%83%AA%E3%81%AE%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E6%9D%A1%E4%BB%B6%E3%82%92context%E7%B5%8C%E7%94%B1%E3%81%A7%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B\" aria-label=\"クエリのフィルタ条件をcontext経由で指定する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>クエリのフィルタ条件をContext経由で指定する</h3>\n<p>例えば、トップページの上部にピックアップした３つ記事のサムネイル付きで表示する場合、\n3つのサムネイル画像だけ取得するクエリを定義したいところですが、クエリに画像のパスをフィルタ条件としてハードコードしたくはないので、一旦、全てのサムネイルをクエリで取得して、JS(コンポーネント)中で3つにフィルタするようなケースがあります。この場合、不必要な画像も取得してしまうのでビルド時間が増えます。</p>\n<p>StaticQueryなどは、その名の通りStaticなのでJS中の変数をフィルタ条件として使うことができませんが、\nページテンプレートに指定しているコンポーネントのクエリではContextの値がフィルタ条件として使えます。\nこれを利用して以下のように、3つの画像だけ取得するクエリを定義でき、不必要に画像を生成せずに済み、ビルド時間を短縮できます。</p>\n<div class=\"gatsby-code-title\">config/featured-posts.js(クエリのフィルタ条件を設定ファイルに定義する)</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 設定ファイルで3つの画像パスを指定する</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">featuredPosts</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'/blog/2019/05/09'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'/blog/2018/05/08'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'/blog/2016/03/18'</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">gatsby-node.js(Contextにクエリのフィルタ条件を指定する)</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// 設定ファイルを読み込む</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> featuredPosts <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./config/featured-posts.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 中略</span>\n  \n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// ページ生成時にContextとして渡す</span></span>  <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> postTemplate<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">context</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">featuredPostPathList</span><span class=\"token operator\">:</span> featuredPosts<span class=\"token punctuation\">,</span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 中略</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">src/templates/post.jsx(Contextに指定した値をクエリのフィルタ条件に指定する)</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token comment\">// 中略</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> query <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token string\">  query($featuredPostPathList: [String]) {</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token string\">    allMarkdownRemark(filter: { frontmatter: { path: { in: $featuredPostPathList } } }) {</span></span><span class=\"token string\">      edges {</span>\n<span class=\"token string\">        node {</span>\n<span class=\"token string\">          frontmatter {</span>\n<span class=\"token string\">            cover {</span>\n<span class=\"token string\">              childImageSharp {</span>\n<span class=\"token string\">                fluid {</span>\n<span class=\"token string\">                  ...GatsbyImageSharpFluid</span>\n<span class=\"token string\">                }</span>\n<span class=\"token string\">              }</span>\n<span class=\"token string\">            }</span>\n<span class=\"token string\">          }</span>\n<span class=\"token string\">        }</span>\n<span class=\"token string\">      }</span>\n<span class=\"token string\">    }</span>\n<span class=\"token string\">  }</span>\n<span class=\"token string\"></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 中略</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>なお<code class=\"language-text\">src/pages/index.jsx</code>のように<code class=\"language-text\">gatsby-node.js</code>で明示的にページ生成しないようなコンポーネントでも、以下のように<code class=\"language-text\">gatsby-node.js</code>の<code class=\"language-text\">onCreatePage</code>でページを再生成することでContextを指定できます。</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreatePage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage<span class=\"token punctuation\">,</span> deletePage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token comment\">// ルートページの場合のみ処理継続</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">.</span>path <span class=\"token operator\">!==</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// いったんルートページを削除</span>\n  <span class=\"token function\">deletePage</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// pageオブジェクトをもとにルートページを再生成</span>\n  <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>page<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">context</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>page<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// Contextにクエリのフィルタ条件を指定</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">featuredPostPathList</span><span class=\"token operator\">:</span> featuredPosts<span class=\"token punctuation\">,</span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2 id=\"3-生成画像の種類を減らす\" style=\"position:relative;\"><a href=\"#3-%E7%94%9F%E6%88%90%E7%94%BB%E5%83%8F%E3%81%AE%E7%A8%AE%E9%A1%9E%E3%82%92%E6%B8%9B%E3%82%89%E3%81%99\" aria-label=\"3 生成画像の種類を減らす permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 生成画像の種類を減らす</h2>\n<p>以下のように同じ画像でも、記事埋め込み用、OGP画像用などに違う縦横サイズ、クオリティを指定していると、画像生成枚数が増えて、ビルド時間も増えてしまいます。\n少しの違いであれば、ある程度妥協して同じ縦横サイズ、クオリティを指定して、生成画像枚数を減らしましょう。\nこれにより、大幅にビルド時間を短縮できます。</p>\n<div class=\"gatsby-code-title\">縦横幅、クオリティを統一して生成画像枚数を減らす</div>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-diff line-numbers\"><code class=\"language-diff\"><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> query {\n<span class=\"token prefix unchanged\"> </span>   images: allFile(filter: {relativePath: {regex: \"/^thumbnail/*/\"}}) {\n<span class=\"token prefix unchanged\"> </span>     edges {\n<span class=\"token prefix unchanged\"> </span>       node {\n<span class=\"token prefix unchanged\"> </span>         childImageSharp {\n</span><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span>            // 記事の最大幅にあわせた少し小さめで低品質な画像を取得\n<span class=\"token prefix deleted\">-</span>            fluid(maxWidth: 800, quality: 50, pngQuality: 50) {\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>            // 生成画像枚数を減らすために、あえて縦横幅、クオリティをサムネイルに合わせる\n<span class=\"token prefix inserted\">+</span>            fluid(maxWidth: 1200, quality: 90, pngQuality: 90) {\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>             ...GatsbyImageSharpFluid\n<span class=\"token prefix unchanged\"> </span>           }\n<span class=\"token prefix unchanged\"> </span>         }\n<span class=\"token prefix unchanged\"> </span>       }\n<span class=\"token prefix unchanged\"> </span>     }\n<span class=\"token prefix unchanged\"> </span>   }\n<span class=\"token prefix unchanged\"> </span> }\n</span>\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> // OGP画像用に少し大きめで高品質な画像を取得\n<span class=\"token prefix unchanged\"> </span> query {\n<span class=\"token prefix unchanged\"> </span>   images: allFile(filter: {relativePath: {regex: \"/^thumbnail/*/\"}}) {\n<span class=\"token prefix unchanged\"> </span>     edges {\n<span class=\"token prefix unchanged\"> </span>       node {\n<span class=\"token prefix unchanged\"> </span>         childImageSharp {\n<span class=\"token prefix unchanged\"> </span>           fluid(maxWidth: 1200, quality: 90, pngQuality: 90) {\n<span class=\"token prefix unchanged\"> </span>             ...GatsbyImageSharpFluid\n<span class=\"token prefix unchanged\"> </span>           }\n<span class=\"token prefix unchanged\"> </span>         }\n<span class=\"token prefix unchanged\"> </span>       }\n<span class=\"token prefix unchanged\"> </span>     }\n<span class=\"token prefix unchanged\"> </span>   }\n<span class=\"token prefix unchanged\"> </span> }</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2 id=\"4-画像の縦横サイズを最適化する\" style=\"position:relative;\"><a href=\"#4-%E7%94%BB%E5%83%8F%E3%81%AE%E7%B8%A6%E6%A8%AA%E3%82%B5%E3%82%A4%E3%82%BA%E3%82%92%E6%9C%80%E9%81%A9%E5%8C%96%E3%81%99%E3%82%8B\" aria-label=\"4 画像の縦横サイズを最適化する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 画像の縦横サイズを最適化する</h2>\n<p>画像のサイズが大きいとビルド時間は指数関数的に増加します。\nそのため、表示幅に併せて画像の縦横比を縮小しましょう。\n例えば記事中で最大800pxで表示するような場合、Retina対応も考慮すると最大幅は800px * 2 = 1600pxで十分です。\nそのためビルド前に1600pxより幅が大きい画像は全て1600pxに縮小しましょう。\n<a href=\"https://github.com/lovell/sharp\">Sharp</a>というライブラリを使えばできます。\n以下のようなスクリプトを定義して、package.jsonに<code class=\"language-text\">optimizeImages</code>のようなnpm scriptsを定義しましょう。</p>\n<div class=\"gatsby-code-title\">scripts/optimize-images.js(画像縦横サイズ最適化スクリプト)</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> sharp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">sharp</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> glob <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">glob</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">fs</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 最適化したい画像のパスを正規表現で指定</span>\n<span class=\"token keyword\">const</span> matches <span class=\"token operator\">=</span> glob<span class=\"token punctuation\">.</span><span class=\"token function\">sync</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">src/pages/**/*.{png,jpg,jpeg}</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// Retinaを考慮し2倍にする</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">MAX_WIDTH</span> <span class=\"token operator\">=</span> <span class=\"token number\">800</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span>\n\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>\n  matches<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token parameter\">match</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> stream <span class=\"token operator\">=</span> <span class=\"token function\">sharp</span><span class=\"token punctuation\">(</span>match<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> info <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> stream<span class=\"token punctuation\">.</span><span class=\"token function\">metadata</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">.</span>width <span class=\"token operator\">&lt;=</span> <span class=\"token constant\">MAX_WIDTH</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 画像幅をMAX_WIDTHまで縮小して上書き</span>\n    <span class=\"token keyword\">const</span> outputBuffer <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> stream<span class=\"token punctuation\">.</span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span><span class=\"token constant\">MAX_WIDTH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBuffer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>match<span class=\"token punctuation\">,</span> outputBuffer<span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">success resize markdown image. </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>info<span class=\"token punctuation\">.</span>width<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> -> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">MAX_WIDTH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Success'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">package.jsonのnpm</div>\n<div class=\"gatsby-highlight\" data-language=\"jsonscripts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsonscripts line-numbers\"><code class=\"language-jsonscripts\">  &quot;scripts&quot;: {\n    // 中略\n    &quot;optimizeImages&quot;: &quot;node ./scripts/optimize-images.js&quot;,\n    // 中略\n  }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>こうすれば<code class=\"language-text\">npm run optimizeImages</code>で画像の縦横サイズを最適化できます。</p>\n<h2 id=\"5-画像のファイルサイズを圧縮する\" style=\"position:relative;\"><a href=\"#5-%E7%94%BB%E5%83%8F%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%B5%E3%82%A4%E3%82%BA%E3%82%92%E5%9C%A7%E7%B8%AE%E3%81%99%E3%82%8B\" aria-label=\"5 画像のファイルサイズを圧縮する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 画像のファイルサイズを圧縮する</h2>\n<p>写真は無駄に高画質でファイルサイズが大きくなりがちです。\nこの場合、<a href=\"https://github.com/imagemin/imagemin\">imagemin</a>を使って画像のファイルサイズを圧縮しましょう。\n以下のようなスクリプトを定義して、package.jsonに<code class=\"language-text\">compressImages</code>のようなnpm scriptsを定義しましょう。\njpegは<a href=\"https://www.npmjs.com/package/imagemin-mozjpeg\">imagemin-mozjpeg</a>、pngは<a href=\"https://www.npmjs.com/package/imagemin-pngquant\">imagemin-pngquant</a>を使えば画質をそれほど落とすことなく圧縮できます。</p>\n<div class=\"gatsby-code-title\">scripts/compress-images(画像ファイルサイズ最適化スクリプト)</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> glob <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">glob</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">fs</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> imagemin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'imagemin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> imageminMozjpeg <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'imagemin-mozjpeg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> imageminPngquant <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'imagemin-pngquant'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addSizeInfo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">filePath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">statSync</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">size</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">,</span>\n    filePath\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> matchesThumbnail <span class=\"token operator\">=</span> glob<span class=\"token punctuation\">.</span><span class=\"token function\">sync</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">src/images/thumbnail/**/*.{png,jpg,jpeg}</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> matchesPage <span class=\"token operator\">=</span> glob<span class=\"token punctuation\">.</span><span class=\"token function\">sync</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">src/pages/**/*.{png,jpg,jpeg}</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>matchesThumbnail<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>matchesPage<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>addSizeInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">factor</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> filePath <span class=\"token operator\">=</span> factor<span class=\"token punctuation\">.</span>filePath<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> fileDir <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> fileExt <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">extname</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'.png'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>fileExt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token keyword\">await</span> <span class=\"token function\">imagemin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>filePath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">destination</span><span class=\"token operator\">:</span> fileDir<span class=\"token punctuation\">,</span> <span class=\"token comment\">// overwrite</span>\n        <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token function\">imageminPngquant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> compressedSize <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">statSync</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">;</span>    \n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>factor<span class=\"token punctuation\">.</span>size<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> -> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>compressedSize<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>filePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'.jpg'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'.jpeg'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>fileExt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n      <span class=\"token keyword\">await</span> <span class=\"token function\">imagemin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>filePath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">destination</span><span class=\"token operator\">:</span> fileDir<span class=\"token punctuation\">,</span> <span class=\"token comment\">// overwrite</span>\n        <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token function\">imageminMozjpeg</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> compressedSize <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">statSync</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">;</span>    \n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>factor<span class=\"token punctuation\">.</span>size<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> -> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>compressedSize<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>filePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Can't optimize\"</span><span class=\"token punctuation\">,</span> filePath<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">package.jsonのnpm</div>\n<div class=\"gatsby-highlight\" data-language=\"jsonscripts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsonscripts line-numbers\"><code class=\"language-jsonscripts\">  &quot;scripts&quot;: {\n    // 中略\n    &quot;compressImages&quot;: &quot;node ./scripts/compress-images.js&quot;,\n    // 中略\n  }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>こうすれば<code class=\"language-text\">npm run compressImages</code>で画像のファイルサイズを圧縮できます。</p>\n<h2 id=\"6-生成する画像をシンプル低クオリティにする\" style=\"position:relative;\"><a href=\"#6-%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B%E7%94%BB%E5%83%8F%E3%82%92%E3%82%B7%E3%83%B3%E3%83%97%E3%83%AB%E4%BD%8E%E3%82%AF%E3%82%AA%E3%83%AA%E3%83%86%E3%82%A3%E3%81%AB%E3%81%99%E3%82%8B\" aria-label=\"6 生成する画像をシンプル低クオリティにする permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 生成する画像をシンプル＆低クオリティにする</h2>\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-image/#gatsby-transformer-sharp\">gatsby-image</a>では、生成する画像の種類を以下のように選択できます。\nレスポンシブ対応する場合<code class=\"language-text\">Fluid</code>系の画像の指定が必須ですが、\n<code class=\"language-text\">GatsbyImageSharpFluid_tracedSVG</code>や<code class=\"language-text\">GatsbyImageSharpFluid_withWebp</code>はSVGやWebpなどの画像も併せて生成することになるので、ビルド時間は長くなってしまいます。　特にこだわりがなければ一番シンプルな<code class=\"language-text\">GatsbyImageSharpFluid</code>を選択するとビルド時間が短縮できるでしょう。</p>\n<ul>\n<li><code class=\"language-text\">GatsbyImageSharpFixed</code> ← Fixed系はレスポンシブだと使えない</li>\n<li><code class=\"language-text\">GatsbyImageSharpFixed_noBase64</code></li>\n<li><code class=\"language-text\">GatsbyImageSharpFixed_tracedSVG</code></li>\n<li><code class=\"language-text\">GatsbyImageSharpFixed_withWebp</code></li>\n<li><code class=\"language-text\">GatsbyImageSharpFixed_withWebp_noBase64</code></li>\n<li><code class=\"language-text\">GatsbyImageSharpFixed_withWebp_tracedSVG</code></li>\n<li><code class=\"language-text\">GatsbyImageSharpFluid</code> ← シンプル</li>\n<li><code class=\"language-text\">GatsbyImageSharpFluid_noBase64</code> ← 最初に表示するBase64のぼかし画像がないが、それでいいなら一番シンプル</li>\n<li><code class=\"language-text\">GatsbyImageSharpFluid_tracedSVG</code> ← SVGを生成するのでビルド時間が長くなる</li>\n<li><code class=\"language-text\">GatsbyImageSharpFluid_withWebp</code> ← Webpを生成するのでビルド時間が長くなる</li>\n<li><code class=\"language-text\">GatsbyImageSharpFluid_withWebp_noBase64</code></li>\n<li><code class=\"language-text\">GatsbyImageSharpFluid_withWebp_tracedSVG</code> &#x3C;-SVGとWebpを生成するのでビルド時間がかなり長くなる</li>\n<li><code class=\"language-text\">GatsbyImageSharpFluidLimitPresentationSize</code></li>\n</ul>\n<p>また、クエリで生成画像のクオリティを指定できます。\nクオリティある程度妥協できるならば、低い値を指定することでビルド時間を短縮できます。</p>\n<div class=\"gatsby-code-title\">クオリティを下げることでビルド時間を短縮する</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\">  <span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">images</span><span class=\"token punctuation\">:</span> <span class=\"token property-query\">allFile</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">relativePath</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">regex</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/^thumbnail/*/\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token object\">childImageSharp</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property-query\">fluid</span><span class=\"token punctuation\">(</span>\n              <span class=\"token attr-name\">maxWidth</span><span class=\"token punctuation\">:</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">              <span class=\"token attr-name\">quality</span><span class=\"token punctuation\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">              <span class=\"token attr-name\">pngQuality</span><span class=\"token punctuation\">:</span> <span class=\"token number\">50</span></span>            <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token operator\">...</span><span class=\"token fragment function\">GatsbyImageSharpFluid</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2 id=\"7-netlify-plugin-gatsby-cacheを使う\" style=\"position:relative;\"><a href=\"#7-netlify-plugin-gatsby-cache%E3%82%92%E4%BD%BF%E3%81%86\" aria-label=\"7 netlify plugin gatsby cacheを使う permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. netlify-plugin-gatsby-cacheを使う</h2>\n<p>Netlifyでビルド＆ホストしているなら、<a href=\"https://github.com/jlengstorf/netlify-plugin-gatsby-cache\">netlify-plugin-gatsby-cache</a>が使えます。\nこれは前回ビルド時のキャッシュを用いてビルド時間を短縮するためのNetlifyプラグインです。\n<strong>自分は、コレを導入したおかげで、記事を追加するだけならビルド時間が2分程度で済むようになりました。</strong></p>\n<p>以下のように<code class=\"language-text\">netlify.toml</code>を設定し、package.jsonのnpm scriptで<code class=\"language-text\">gatsby build</code>にちょっとした引数を指定するだけキャッシュが有効になります。</p>\n<div class=\"gatsby-code-title\">netlify.toml(Netlifyの設定ファイル)</div>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-toml line-numbers\"><code class=\"language-toml\">// 中略\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token table class-name\">plugins</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n  <span class=\"token key property\">package</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"netlify-plugin-gatsby-cache\"</span>\n// 中略</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">package.jsonのnpm</div>\n<div class=\"gatsby-highlight\" data-language=\"jsonscripts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsonscripts line-numbers\"><code class=\"language-jsonscripts\">  &quot;scripts&quot;: {\n    // 中略\n    &quot;build&quot;: &quot;GATSBY_EXPERIMENTAL_PAGE_BUILD_ON_DATA_CHANGES=true gatsby-parallel-runner build --log-pages&quot;,\n    // 中略\n  }\n</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>ただ、こちらはキャッシュを使ったビルド時間短縮方法ですので、初回のビルドは短縮されません。\nNetlifyのビルドでタイムアウトを解決したい場合の根本的な解決策にはならないので、気をつけてください。\nキャッシュでビルド時間がタイムアウト時間以内に収まっていたとしても、ドラスティックな機能改修でほとんどキャッシュが効かない場合や、なんらかの不具合でキャッシュなしでクリーンビルドが必要になった場合、結局タイムアウトが発生してしまいます。\nこの場合は先にあげた1～6のTipsを実施して、根本的なビルド時間の短縮を図ってください。</p>\n<h2 id=\"番外編1-circle-ciでビルドしてnetlifyにデプロイする\" style=\"position:relative;\"><a href=\"#%E7%95%AA%E5%A4%96%E7%B7%A81-circle-ci%E3%81%A7%E3%83%93%E3%83%AB%E3%83%89%E3%81%97%E3%81%A6netlify%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B\" aria-label=\"番外編1 circle ciでビルドしてnetlifyにデプロイする permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>番外編1: Circle CIでビルドしてNetlifyにデプロイする</h2>\n<p>本線からは少し脱線しますが、どうしてもNetlifyでタイムアウト問題が克服できない or ビルド時間が安定しない時はCircleCIを使ってビルドすると良いです。Netlify側でコケても、CircleCIでビルド検証ができるようになります。\nCircleCIはタイムアウトになる心配もないし、Netlifyより少しビルドが早くなります。</p>\n<p>開発用依存ライブラリに<a href=\"https://github.com/netlify/cli\">netlify-cli</a>して以下のスクリプトを定義しましょう。\nなるべくキャッシュして次回以降のビルド時間を短縮するようにしています。\nビルドが終わったら、netlify-cliでビルド資産をNetlifyにdeployしています。\nmasterブランチの場合は<code class=\"language-text\">--prod</code>を指定して本チャンdeployになるようにしています。\ndeploy時は、Netlifyのトークンが必要になるので、事前にNetlifyでトークンを発行して、CircleCIの環境変数に設定してあげましょう。</p>\n<div class=\"gatsby-code-title\">.circleci/config.yml(CircleCIの設定ファイル)</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2.1</span>\n<span class=\"token key atrule\">executors</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">node-executor</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">docker</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> circleci/node<span class=\"token punctuation\">:</span><span class=\"token number\">12</span>\n<span class=\"token key atrule\">commands</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">gatsby-build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> checkout\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">restore_cache</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">keys</span><span class=\"token punctuation\">:</span>\n            <span class=\"token comment\"># when lock file changes, use increasingly general patterns to restore cache</span>\n            <span class=\"token punctuation\">-</span> node<span class=\"token punctuation\">-</span>v1<span class=\"token punctuation\">-</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Branch <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> checksum \"package<span class=\"token punctuation\">-</span>lock.json\" <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">-</span> node<span class=\"token punctuation\">-</span>v1<span class=\"token punctuation\">-</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Branch <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span>\n            <span class=\"token punctuation\">-</span> node<span class=\"token punctuation\">-</span>v1<span class=\"token punctuation\">-</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">save_cache</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> ~/usr/local/lib/node_modules  <span class=\"token comment\"># location depends on npm version</span>\n          <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">-</span>v1<span class=\"token punctuation\">-</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Branch <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> checksum \"package<span class=\"token punctuation\">-</span>lock.json\" <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">restore_cache</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">keys</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> gatsby<span class=\"token punctuation\">-</span>public<span class=\"token punctuation\">-</span>cache<span class=\"token punctuation\">-</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Branch <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">-</span> gatsby<span class=\"token punctuation\">-</span>public<span class=\"token punctuation\">-</span>cache<span class=\"token punctuation\">-</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> GATSBY_CPU_COUNT=2 NODE_OPTIONS=\"<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>max<span class=\"token punctuation\">-</span>old<span class=\"token punctuation\">-</span>space<span class=\"token punctuation\">-</span>size=8192\" npm run build\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">save_cache</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> gatsby<span class=\"token punctuation\">-</span>public<span class=\"token punctuation\">-</span>cache<span class=\"token punctuation\">-</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Branch <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> ./public\n<span class=\"token key atrule\">workflows</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n  <span class=\"token key atrule\">build-deploy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">filters</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">ignore</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> master\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">filters</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">only</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> master\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">executor</span><span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">-</span>executor\n    <span class=\"token key atrule\">working_directory</span><span class=\"token punctuation\">:</span> ~/repo\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> gatsby<span class=\"token punctuation\">-</span>build\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Netlify Deploy\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> ./node_modules/.bin/netlify deploy <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>dir=public <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>message \"deploy preview from $CIRCLE_BRANCH\" <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>auth $NETLIFY_ACCESS_TOKEN\n  <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">executor</span><span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">-</span>executor\n    <span class=\"token key atrule\">working_directory</span><span class=\"token punctuation\">:</span> ~/repo\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> gatsby<span class=\"token punctuation\">-</span>build\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Netlify Deploy\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> ./node_modules/.bin/netlify deploy <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>prod <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>dir=public <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>message \"deploy from $CIRCLE_BRANCH\" <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>auth $NETLIFY_ACCESS_TOKEN</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"番外編2効果がみられなかった取り組み\" style=\"position:relative;\"><a href=\"#%E7%95%AA%E5%A4%96%E7%B7%A82%E5%8A%B9%E6%9E%9C%E3%81%8C%E3%81%BF%E3%82%89%E3%82%8C%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E5%8F%96%E3%82%8A%E7%B5%84%E3%81%BF\" aria-label=\"番外編2効果がみられなかった取り組み permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>番外編2:効果がみられなかった取り組み</h2>\n<p>ビルド時間短縮のためアレコレと試しましたが、効果がなかったものもあります。</p>\n<h3 id=\"画像取得系staticqueryを集約する\" style=\"position:relative;\"><a href=\"#%E7%94%BB%E5%83%8F%E5%8F%96%E5%BE%97%E7%B3%BBstaticquery%E3%82%92%E9%9B%86%E7%B4%84%E3%81%99%E3%82%8B\" aria-label=\"画像取得系staticqueryを集約する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>画像取得系StaticQueryを集約する</h3>\n<p>複数箇所に散らばっていStaticQueryを１つコンポーネントに集約してみました。\n確かにクエリの実行回数は減りましたが、画像生成枚数は変わらないのでビルド時間は短縮されませんでした。</p>\n<h3 id=\"クエリをgatsby-nodejsに集約する\" style=\"position:relative;\"><a href=\"#%E3%82%AF%E3%82%A8%E3%83%AA%E3%82%92gatsby-nodejs%E3%81%AB%E9%9B%86%E7%B4%84%E3%81%99%E3%82%8B\" aria-label=\"クエリをgatsby nodejsに集約する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>クエリをgatsby-node.jsに集約する</h3>\n<p>上記と似ていますが、すべてのクエリを<code class=\"language-text\">gatsby-node.js</code>で発行して、クエリの結果をContextで各ページのコンポーネントに渡すようにしても、ビルド時間は短縮されませんでした。</p>\n<p>また<code class=\"language-text\">gatsby-node.js</code>にクエリを集約するのは、以下のような弊害もあるため、あまりオススメしません。</p>\n<ul>\n<li><code class=\"language-text\">gatsby develop</code>時に<code class=\"language-text\">gatsby-node.js</code>を修正してもホットリロードされない</li>\n<li>ページのコンポーネントで使うデータを取得するためのクエリが、<code class=\"language-text\">gatsby-node.js</code>という離れた場所にあるので管理しづらい</li>\n<li>クエリでGraphQLのフラグメントが使えない\n<ul>\n<li>gatsby-imagesのGatsbyImageSharpFluidなどが使えないので、以下のようにフラグメントに定義されてる全プロパティを書き出す必要があります。</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-code-title\">gatsby-node.js中で画像取得クエリを書く場合はフラグメントが使えない</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">allFile</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">relativePath</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">regex</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/^thumbnail/*/\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token object\">childImageSharp</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token object\">fluid</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">            <span class=\"token property\">base64</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token property\">aspectRatio</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token property\">src</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token property\">srcSet</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token property\">sizes</span></span>          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>Gatsbyは割とgatsby-imageとの戦いで、画像の取り扱いが面倒くさく、ビルド時間も長くなりがちですが、\n今回紹介したようなTipsを使えば、ある程度ビルド時間は短縮できます。\nただ、これらTipsを実施してもビルド時間が短縮できない場合は、いっそのことgatsby-imageを使うのをやめて、\n他の画像ホスティングサービスを使うのもアリなんじゃないかと思います🍅</p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://www.netlify.com/blog/2020/02/25/gatsby-build-speed-improvements-with-parallel-image-processing/\">Improve Gatsby Build Speeds With Parallel Image Processing</a></li>\n<li><a href=\"https://dev.to/biilmann/open-source-parallel-processing-for-gatsby-270d\">Open source parallel processing for Gatsby - DEV Community 👩‍💻👨‍💻</a></li>\n<li><a href=\"https://www.gatsbyjs.org/docs/preoptimizing-images/\">Preoptimizing Your Images | GatsbyJS</a></li>\n<li><a href=\"https://web.dev/use-imagemin-to-compress-images/\">Use Imagemin to compress images</a></li>\n<li><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-sharp\">gatsby-plugin-sharp | GatsbyJS</a></li>\n<li><a href=\"https://www.netlify.com/blog/2020/04/23/enable-gatsby-incremental-builds-on-netlify/\">Enable Gatsby Incremental Builds on Netlify</a></li>\n<li><a href=\"https://oioannou.com/build-on-circleci-deploy-netlify\">Building gatsby on CircleCi and deploying on Netlify — Orestis Ioannou</a></li>\n<li><a href=\"https://web.dev/use-imagemin-to-compress-images/\">Use Imagemin to compress images</a></li>\n<li><a href=\"https://www.netlify.com/blog/2020/06/11/5-optimizations-for-faster-gatsby-builds/\">5 Optimizations to Get Faster Gatsby Builds Today</a></li>\n</ul>","excerpt":"なにこれ 自分のブログ(Gatsby製)のビルドが遅すぎてNetlifyでタイムアウトしてしまうので、ビルドチューニングをしました。\n15分以上かかっていたビルドが7分以下になり50%短縮できたので、その時の知見をまとめます。\n割と地味な作業が多いですが、Gatsby…","frontmatter":{"slug":"/optimizations-for-faster-gatsby-builds","title":"Gatsbyビルドチューニング ビルド時間を15分から7分に短縮するためのTips 7選","date":"2020-06-22T08:30:00.000+09:00","tags":["Gatsby","gatsby-image","gatsby-image-sharp","Netlify","CircleCI"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2020/06/optimizations-for-faster-gatsby-builds.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://github.com/plotly/react-cytoscapejs\">react-cytoscape</a>のようなwindowオブジェクトを前提としたライブラリをGatsbyで使おうとすると、<code class=\"language-text\">gatsby develop</code>のときは正常動作するにもかかわらず、ビルド時にだけ<code class=\"language-text\">window is not defined</code>エラーがでます。今回はその対処法を備忘録として残しておきます。</p>\n<h2 id=\"原因と対処法\" style=\"position:relative;\"><a href=\"#%E5%8E%9F%E5%9B%A0%E3%81%A8%E5%AF%BE%E5%87%A6%E6%B3%95\" aria-label=\"原因と対処法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>原因と対処法</h2>\n<p>Gatsbyビルド時は、<code class=\"language-text\">window</code>や<code class=\"language-text\">document</code>といったブラウザのグローバルオブジェクトを参照しているとエラーになります。\nこの場合、それらがundefinedかチェックが必要です。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// (Before) 以下でビルド時にエラーが出る場合は...</span>\n<span class=\"token keyword\">const</span> module <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"module\"</span><span class=\"token punctuation\">)</span> \n\n<span class=\"token comment\">// (After 1) このようにwindowオブジェクトの存在チェックをすることでエラーを免れます</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">undefined</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> module <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"module\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// (After 2) このような形でもOKです</span>\n<span class=\"token keyword\">const</span> module <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">undefined</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">?</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"module\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br />\n<p>またwebpackの設定で、ビルドエラーになるライブラリをダミーに置き換えることで、エラーを免れます。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateWebpackConfig</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> stage<span class=\"token punctuation\">,</span> loaders<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>stage <span class=\"token operator\">===</span> <span class=\"token string\">'build-html'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    actions<span class=\"token punctuation\">.</span><span class=\"token function\">setWebpackConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">react-cytoscapejs</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> loaders<span class=\"token punctuation\">.</span><span class=\"token function\">null</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br />\n<p>さらに、そのライブラリを使った処理をReactコンポーネントに記述している場合は、<code class=\"language-text\">componentDidMount</code>か<code class=\"language-text\">useEffect</code>に移しましょう。そうすることで、その処理がブラウザでのみ実行されるようになるのでビルド時のエラーを免れます。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> CytoscapeComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'react-cytoscapejs'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PostRelationSection</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/*--中略--*/</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> posts<span class=\"token punctuation\">,</span> allImage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props\n    <span class=\"token keyword\">const</span> nodes <span class=\"token operator\">=</span> <span class=\"token function\">createPostNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> posts<span class=\"token punctuation\">,</span> allImage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    nodes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CYTOSCAPE_ZOOM_UP_ELEMENT</span><span class=\"token punctuation\">)</span>\n    nodes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CYTOSCAPE_ZOOM_DOWN_ELEMENT</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> edges <span class=\"token operator\">=</span> <span class=\"token function\">createPostEdges</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>posts<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> cytoscapeElements <span class=\"token operator\">=</span> CytoscapeComponent<span class=\"token punctuation\">.</span><span class=\"token function\">normalizeElements</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> nodes<span class=\"token punctuation\">,</span> edges <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> cytoscapeElements <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/*--中略--*/</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/docs/debugging-html-builds/\">Debugging HTML Builds | GatsbyJS</a></li>\n<li><a href=\"https://github.com/gatsbyjs/gatsby/issues/309\">Window is not defiend · Issue #309 · gatsbyjs/gatsby</a></li>\n</ul>","excerpt":"なにこれ react-cytoscapeのようなwindowオブジェクトを前提としたライブラリをGatsbyで使おうとすると、のときは正常動作するにもかかわらず、ビルド時にだけエラーがでます。今回はその対処法を備忘録として残しておきます。 原因と対処法 Gatsby…","frontmatter":{"slug":"/error-about-window-is-not-available-during-server-side-rendering-gatsby","title":"Gatsbyビルドエラー「window is not defined」への対処法","date":"2020-05-23T09:00:00.000-07:00","tags":["Gatsby"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2020/05/error-about-window-is-not-available-during-server-side-rendering-gatsby.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>自分専用のRSSリーダーを<a href=\"https://gatsbyjs.org\">Gatsby</a> + <a href=\"https://netlify.com\">Netlify</a> + <a href=\"https://zapier.com/\">Zapier</a>を使って作りました。Gatsbyビルド時にRSSとOGPを取得して、Webサイトに表示しています。\n今回はこのWebサイトのビルドの仕組みと、GatsbyビルドでRSS+OGPを取得する方法をご紹介します。</p>\n<p>サイトはコチラ↓</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://favorite-blogs.netlify.com//\" data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Ffavorite-blogs.netlify.com&key=0658bf78be97cafcf2b0b9f96c1270ee\"></a></div></div>\n<br/>\n<p>ソースはコチラ↓</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://github.com/Takumon/blog-rss\" data-iframely-url=\"//cdn.iframe.ly/B8twzEh\"></a></div></div>\n<br/>\n<h2 id=\"ビルドの仕組み\" style=\"position:relative;\"><a href=\"#%E3%83%93%E3%83%AB%E3%83%89%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF\" aria-label=\"ビルドの仕組み permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ビルドの仕組み</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 106%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAABcRAAAXEQHKJvM/AAACqklEQVR42pWUe1PTQBTF+90dv4Azjo5vdKjFAUqRAqWFNmmem9c22Tz6wlqoVIFieZXyyHG2FUVksM6cPzK7+8vZ3HtuEnCVW4orCph2oORb+YWvwvKxUQTTUZH/Ppm4C5YRkF2jrMy8Ed4966pFNL2YShPCCnz1KKwJ7zecJbLHdtDwUJkcDtQ9GsnTtjXrVUub2AwwoTMXU07qrdKcnH6a2TZ30PQndR7DR9VNQSin3qY+aW3u/F/wYdR0aVj1Gm3SRYP9E75uBi+YNmg2IsnqEHpcb99bMN8AI/DJ9ao6sMRdQ+oxCy03bji/tyoyfA2eMm57Ap6KwjRKsygkYZfANIRkYJVruSzNzHeFla64yhcrMj/p67tSbmCJCMgIrtFYylzKi1CXULWxkMSrxwhI37f09Ozn4vKOsh7XKzEto+agRreK2b4hoOkiNBOou6dVN1hJn/km2jXk0ki+gFI40YtG6vXQUa4Y6Ttacy079M3Y5eb82kwfwQ23Y8iLH1Jy8iWa/pUpxLYIR2rlMvnnjy6pNKTKmWdc2OVz37p0tbgi8/z6ZOxMv1DS2e1tGTLPsKfywoTGiWc28mvfibgl5BqlfF9dP/UIN6QS17Wzdxi5W45+wEzUWeypoxfrfdfclsSOLH7Txa4htwrZA1tDZMVM4/WLLIRWAoGBGkWdourA1UCKo221Z+l9SrpE7VEDNRtMRWhwZqyqDaYleDZomQMrc5h6gtx8XF5FoO8rpWND3NeEfaV4RER4o1G9qZ8hGU0/pFUspvBxJl5fhLHRI/KFIx3o0sBR9pQST9F98fR1RCYX02JT7JQyiOweKexrufPQ6hTnbkTwzsH4daU6HZQfom5f0JmhORU32an4gH/qnz+jO6dq1MaqjdBEZI8eLF5On9yCfwCSSy5+ddkwVwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/bd76523636abbba4e627962160567c6d/ba381/build-flow.webp 200w,\n/static/bd76523636abbba4e627962160567c6d/7f61c/build-flow.webp 400w,\n/static/bd76523636abbba4e627962160567c6d/d00b9/build-flow.webp 800w,\n/static/bd76523636abbba4e627962160567c6d/92f8c/build-flow.webp 1200w,\n/static/bd76523636abbba4e627962160567c6d/fad48/build-flow.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/bd76523636abbba4e627962160567c6d/772e8/build-flow.png 200w,\n/static/bd76523636abbba4e627962160567c6d/e17e5/build-flow.png 400w,\n/static/bd76523636abbba4e627962160567c6d/5a190/build-flow.png 800w,\n/static/bd76523636abbba4e627962160567c6d/c1b63/build-flow.png 1200w,\n/static/bd76523636abbba4e627962160567c6d/29007/build-flow.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/bd76523636abbba4e627962160567c6d/5a190/build-flow.png\"\n            alt=\"build flow\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>以下時系列で説明します。</p>\n<ul>\n<li>Zapier\n<ul>\n<li>ジョブで定義したRSSを監視</li>\n<li>RSSに更新があったらNetlifyビルドをトリガー</li>\n</ul>\n</li>\n<li>Netlify\n<ul>\n<li>ビルドでGitHubからGatsbyプロジェクトのリポジトリをフェッチ</li>\n<li>Gatsbyプロジェクトのビルドを実行</li>\n<li>Gatsbyプロジェクトのビルドの中で、設定ファイルに定義したRSSをフェッチ</li>\n<li>ビルドが終わったらCDNにホスティング</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"netlifyとgithubの連携\" style=\"position:relative;\"><a href=\"#netlify%E3%81%A8github%E3%81%AE%E9%80%A3%E6%90%BA\" aria-label=\"netlifyとgithubの連携 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NetlifyとGitHubの連携</h3>\n<p>Netlify上でGitHubリポジトリをビルド＆ホストできるようにしておきます。\n連携はNelityのGUIで簡単にできます。</p>\n<h3 id=\"zapierとnetlifyの連携\" style=\"position:relative;\"><a href=\"#zapier%E3%81%A8netlify%E3%81%AE%E9%80%A3%E6%90%BA\" aria-label=\"zapierとnetlifyの連携 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ZapierとNetlifyの連携</h3>\n<p>RSSリーダーは「RSSが更新されたらビルドをトリガーする」ような仕組みが必要です。この仕組みはNetlifyとZapierで実現できます。\nZapierはいろんなサービスやアプリを連携させて自動化できるWebサービスで、Netlifyにも対応しています。\nZapierの画面上で、監視したいRSSをポチポチ登録すると「RSSが更新されたらNetlifyのビルドをトリガーする」が簡単に実現できます。</p>\n<h2 id=\"rss--ogp取得\" style=\"position:relative;\"><a href=\"#rss--ogp%E5%8F%96%E5%BE%97\" aria-label=\"rss  ogp取得 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RSS + OGP取得</h2>\n<p>さてビルドの仕組みを整えたので、次はGatsbyのビルドでRSSを取得する方法について説明します。</p>\n<p>どのRSSを引っ張ってくるかは、GitHubリポジトリに設定ファイルにて定義します（<a href=\"https://github.com/Takumon/blog-rss/blob/master/favorite-blog-rss.js\">実際の設定ファイル</a>）。\nただコレ、ZapierのジョブのRSS定義と二重管理になるのが難点です。Zapierのタスクがyamlで書けるようになったら一元管理できるかもですが...</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> striptags <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'striptags'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> axios <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'axios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> cheerio <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cheerio'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> crypto <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"crypto\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> Parser <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rss-parser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> parser <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Parser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">'User-Agent'</span><span class=\"token operator\">:</span> <span class=\"token string\">'something different'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">INTERNAL_TYPE_BLOG</span> <span class=\"token operator\">=</span> <span class=\"token string\">'blog'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">INTERNAL_TYPE_BLOG_POST</span> <span class=\"token operator\">=</span> <span class=\"token string\">'blogPost'</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// RSSのような外部リソースを</span>\n<span class=\"token comment\">// GatsbyでGraphQLのデータとして扱うためには</span>\n<span class=\"token comment\">// sorceNodeで処理する</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sourceNodes</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> actions<span class=\"token punctuation\">,</span> createNodeId<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> cache <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> feeds <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// 設定ファイルかなにかしらの方法でRSSのURLを読み込む</span>\n  <span class=\"token keyword\">const</span> blogUrls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'rss-url-1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'rss-url-2'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> blogUrl <span class=\"token keyword\">of</span> blogUrls<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  \n    <span class=\"token comment\">// rss-parserでRSS情報を取得する</span>\n    <span class=\"token keyword\">const</span> feed <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> parser<span class=\"token punctuation\">.</span><span class=\"token function\">parseURL</span><span class=\"token punctuation\">(</span>blogUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">feed</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>feed<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">items</span><span class=\"token operator\">:</span> feed<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">excerpt</span><span class=\"token operator\">:</span> <span class=\"token function\">excerpt</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">pubDate</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>pubDate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toISOString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">link</span> <span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    feeds<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>feed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n\n  <span class=\"token comment\">// ブログごとにノード生成</span>\n  feeds\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">feed</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> feed<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> feed<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">link</span><span class=\"token operator\">:</span> feed<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">lastBuildDate</span><span class=\"token operator\">:</span> feed<span class=\"token punctuation\">.</span>lastBuildDate<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">b</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> contentDigest <span class=\"token operator\">=</span> crypto<span class=\"token punctuation\">.</span><span class=\"token function\">createHash</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">md5</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">digest</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n      actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>b<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token function\">createNodeId</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">INTERNAL_TYPE_BLOG</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>b<span class=\"token punctuation\">.</span>link<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">__SOURCE__</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">internal</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">INTERNAL_TYPE_BLOG</span><span class=\"token punctuation\">,</span>\n          contentDigest<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// RSSに加えて、OGPを取得</span>\n  <span class=\"token keyword\">const</span> rssPosts <span class=\"token operator\">=</span> feeds<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">feed</span> <span class=\"token operator\">=></span> feed<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span>b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>a<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> rssPostsWithImageUrl <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Promise.allでやると503になるのでfor文を使う</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> p <span class=\"token keyword\">of</span> rssPosts<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> pWithImageUrl <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">'User-Agent'</span><span class=\"token operator\">:</span> <span class=\"token string\">'something different'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token comment\">// 取得したHTMLからOGPを取得</span>\n      <span class=\"token keyword\">const</span> $ <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">let</span> imageUrl<span class=\"token punctuation\">;</span>\n      <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'head meta'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">i<span class=\"token punctuation\">,</span> el</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> property <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'property'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'content'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>property <span class=\"token operator\">===</span> <span class=\"token string\">'og:image'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          imageUrl <span class=\"token operator\">=</span> content\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 記事情報にOGPのURLを追加</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>p<span class=\"token punctuation\">,</span>\n        imageUrl<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    rssPostsWithImageUrl<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>pWithImageUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n\n  <span class=\"token comment\">// OGP画像のノードを生成</span>\n  <span class=\"token comment\">// 重複を考慮してユニークにしてから処理する</span>\n  <span class=\"token keyword\">const</span> imageUrls <span class=\"token operator\">=</span> <span class=\"token function\">_uniq</span><span class=\"token punctuation\">(</span>rssPostsWithImageUrl<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">p</span> <span class=\"token operator\">=></span> p<span class=\"token punctuation\">.</span>imageUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">p</span> <span class=\"token operator\">=></span> p<span class=\"token punctuation\">.</span>imageUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>imageUrls<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token parameter\">imageUrl</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> fileNode <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">createRemoteFileNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> imageUrl<span class=\"token punctuation\">,</span>\n      cache<span class=\"token punctuation\">,</span>\n      store<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">createNode</span><span class=\"token operator\">:</span> actions<span class=\"token punctuation\">.</span>createNode<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">createNodeId</span><span class=\"token operator\">:</span> createNodeId<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">node</span><span class=\"token operator\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'ThumbnailImage'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">node</span><span class=\"token operator\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'link'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> imageUrl<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> fileNode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n  <span class=\"token comment\">// ブログ記事ごとのノード生成</span>\n  rssPostsWithImageUrl<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">p</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> contentDigest <span class=\"token operator\">=</span> crypto<span class=\"token punctuation\">.</span><span class=\"token function\">createHash</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">md5</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">digest</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">const</span> excerpt <span class=\"token operator\">=</span> \n    actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>p<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token function\">createNodeId</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">INTERNAL_TYPE_BLOG_POST</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>p<span class=\"token punctuation\">.</span>link<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">parent</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">__SOURCE__</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">internal</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">INTERNAL_TYPE_BLOG_POST</span><span class=\"token punctuation\">,</span>\n        contentDigest<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// 記事要約は記事本文から抽出</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">excerpt</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">html<span class=\"token punctuation\">,</span> maxLength</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> rowText <span class=\"token operator\">=</span> <span class=\"token function\">striptags</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">,</span> <span class=\"token string\">'&lt;pre>'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;pre[\\s\\S]+?>[\\s\\S]+?&lt;\\/pre></span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\n</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\"> </span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> rowText<span class=\"token punctuation\">.</span>length <span class=\"token operator\">>=</span> maxLength\n    <span class=\"token operator\">?</span> rowText<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> maxLength<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'...'</span>\n    <span class=\"token operator\">:</span> rowText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>OGP画像をGatsbyで扱う処理は今も参考にしてみてください。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"padding-bottom: 52.5%; padding-top: 120px;\"><a href=\"https://takumon.com/gatsby-image-of-remote-in-building-by-using-create-remote-file-node\" data-iframely-url=\"//cdn.iframe.ly/r1GTW3Y\"></a></div></div>\n<h3 id=\"リソース取得は間隔を置かないと503になる\" style=\"position:relative;\"><a href=\"#%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E5%8F%96%E5%BE%97%E3%81%AF%E9%96%93%E9%9A%94%E3%82%92%E7%BD%AE%E3%81%8B%E3%81%AA%E3%81%84%E3%81%A8503%E3%81%AB%E3%81%AA%E3%82%8B\" aria-label=\"リソース取得は間隔を置かないと503になる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リソース取得は間隔を置かないと503になる</h3>\n<p>ビルド時にRSSやらOGPやらを引っ張ってくるために、大量のリクエストを発行しますが、サイトによっては時間当たりのリクエスト上限に引っかかって503エラーになることがあります。\n対処法としては、<code class=\"language-text\">Promise.all</code>で一度にリクエストを投げずに、for文でリクエスト1つずつawaitしながら投げて、適度に間隔を開けるのが良いと思います。</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>RSSリーダーのようなものをSPAだけで作ろうとすると、フロント側の高負荷処理で画面描画が遅くなってしまいますが、\nGatsbyを使えばビルド時に重い処理を流せるので、パフォーマンスの向上が期待できます。\nまた今回のように、NetlifyやZapierなど他サービスと連携することで、作れる静的サイトの幅も広がります。\nSPA(Single Page Application)でこのような静的サイトを作っている方は一度Gatsbyを導入してみてはいかがでしょうか🍅</p>","excerpt":"なにこれ 自分専用のRSSリーダーをGatsby + Netlify + Zapierを使って作りました。Gatsbyビルド時にRSSとOGPを取得して、Webサイトに表示しています。\n今回はこのWebサイトのビルドの仕組みと、GatsbyビルドでRSS+OGP…","frontmatter":{"slug":"/gatsby-rss-reader-with-netlify-and-zapier","title":"Gatsby + Netlify + ZapierでRSSリーダーを作る","date":"2019-06-18T10:00:00.000-07:00","tags":["Gatsby","Netlify","Zapier","RSS","gatsby-plugin-feed"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2019/06/gatsby-rss-reader-with-netlify-zapier.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Gatsbyで画像を扱う場合<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-image\">gatsby-image</a>を使うとイイ感じに最適化してくれます。\nWebサイトのリポジトリ内の画像については<code class=\"language-text\">gatsby-config.js</code>で簡単に設定できますが、<strong>今回はビルド時に動的に取得する外部画像に対して設定する方法をご紹介します。</strong></p>\n<h2 id=\"実装方法\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95\" aria-label=\"実装方法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装方法</h2>\n<h3 id=\"step1-外部画像ファイルノード生成\" style=\"position:relative;\"><a href=\"#step1-%E5%A4%96%E9%83%A8%E7%94%BB%E5%83%8F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%8E%E3%83%BC%E3%83%89%E7%94%9F%E6%88%90\" aria-label=\"step1 外部画像ファイルノード生成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step1. 外部画像ファイルノード生成</h3>\n<p>Gatsbyの<a href=\"\">gatsby-source-filesystem</a>では、外部画像を扱うためのAPI(<code class=\"language-text\">createRemoteFileNode</code>)が用意されています。\nコチラを<code class=\"language-text\">gatsby-node.js</code>の<code class=\"language-text\">sourceNodes</code>で呼び出せば外部画像にgatsby-imageを適用できます。\nあと、ちょっとしたハックとして、Reactコンポーネント側で他ファイルノードと区別できるように、ノード生成時に識別子を付けましょう。これは後述する外部画像表示用コンポーネントで使うためのものです。</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createRemoteFileNode <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-source-filesystem</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// sourceNodesにて外部画像のファイルノードを作成する</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sourceNodes</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> actions<span class=\"token punctuation\">,</span> createNodeId<span class=\"token punctuation\">,</span> cache<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* (中略) */</span>\n\n  <span class=\"token comment\">// ここでは外部画像のURLの配列を処理するサンプルを示す</span>\n  <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>sampleImageUrls<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token parameter\">sampleImageUrl</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// createRemoteFileNodeで外部の画像のファイルノードを作成する</span>\n    <span class=\"token keyword\">const</span> fileNode <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">createRemoteFileNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> sampleImageUrl<span class=\"token punctuation\">,</span>\n      cache<span class=\"token punctuation\">,</span>\n      store<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">createNode</span><span class=\"token operator\">:</span> actions<span class=\"token punctuation\">.</span>createNode<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">createNodeId</span><span class=\"token operator\">:</span> createNodeId<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 他ファイルノードと区別するための識別子を付与</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">node</span><span class=\"token operator\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'SampleImage'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// メタ情報として画像のURLを付与</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">node</span><span class=\"token operator\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'link'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> sampleImageUrl<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> fileNode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"step2-外部画像表示用reactコンポーネント作成\" style=\"position:relative;\"><a href=\"#step2-%E5%A4%96%E9%83%A8%E7%94%BB%E5%83%8F%E8%A1%A8%E7%A4%BA%E7%94%A8react%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E4%BD%9C%E6%88%90\" aria-label=\"step2 外部画像表示用reactコンポーネント作成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step2. 外部画像表示用Reactコンポーネント作成</h3>\n<p>外部画像のファイルノードを生成できたら、\n今度はReactコンポーネント側で、それに<code class=\"language-text\">gatsby-iamge</code>を適用して表示します。\nGraphQLのクエリで、ファイルノードを生成時に付与した識別子を使い、すべてのファイルノードから外部画像だけを抽出するようにしましょう。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> GatsbyImage <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-image'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> StaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// OGP画像のURLを引数に取る</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> url <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>StaticQuery\n    query<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n      query {\n        allFile(\n          # Gatsby Buildで付与した識別子をもとに\n          # 全ファイルからOPG画像のみ抽出\n          filter: {fields: {SampleImage: {eq: \"true\"}}}\n        ){\n          edges {\n            node {\n              childImageSharp {\n                resolutions {\n                  ...GatsbyImageSharpResolutions\n                }\n              }\n              id\n              fields {\n                # 一応メタ情報も取得する\n                SampleImage\n                link\n              }\n            }\n          }\n        }\n      }\n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\n    render<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// OGP画像リストの中から、コンポーネント引数で指定したURLの画像を抽出する</span>\n      <span class=\"token keyword\">const</span> targetEdge <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allFile<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">edge</span> <span class=\"token operator\">=></span> edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>link <span class=\"token operator\">===</span> url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 画像が取得できた場合のみgatsby-imageのコンポーネントを返す</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        targetEdge <span class=\"token operator\">&amp;&amp;</span> targetEdge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>childImageSharp\n          <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GatsbyImage</span></span> <span class=\"token attr-name\">resolutions</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>targetEdge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>childImageSharp<span class=\"token punctuation\">.</span>resolutions<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n          <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"step3-上記で作成したコンポーネントの呼び出し\" style=\"position:relative;\"><a href=\"#step3-%E4%B8%8A%E8%A8%98%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97\" aria-label=\"step3 上記で作成したコンポーネントの呼び出し permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step3. 上記で作成したコンポーネントの呼び出し</h3>\n<p>最後に上記コンポーネントの呼び出します。以下のように外部画像のURLを指定してあげましょう。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SampleImage</span></span> <span class=\"token attr-name\">url</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>SampleImageUrl<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br/>\n<p>これで外部画像に<code class=\"language-text\">gatsby-image</code>を適用してイイ感じに表示できます！</p>\n<h2 id=\"例webサイトurlからogp画像を取得する場合\" style=\"position:relative;\"><a href=\"#%E4%BE%8Bweb%E3%82%B5%E3%82%A4%E3%83%88url%E3%81%8B%E3%82%89ogp%E7%94%BB%E5%83%8F%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\" aria-label=\"例webサイトurlからogp画像を取得する場合 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>例：WEBサイトURLからOGP画像を取得する場合</h2>\n<p>実用的な例として、複数のWebサイトのOGP画像を<code class=\"language-text\">gatsby-image</code>として扱う方法をご紹介します。</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> axios <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'axios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> cheerio <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cheerio'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createRemoteFileNode <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-source-filesystem</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// sourceNodesにて外部画像のファイルノードを作成する</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sourceNodes</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> actions<span class=\"token punctuation\">,</span> createNodeId<span class=\"token punctuation\">,</span> cache<span class=\"token punctuation\">,</span> store <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* (中略) */</span>\n\n\n  <span class=\"token comment\">// WEBサイトURLからHTMLを取得してOGPを抽出</span>\n  <span class=\"token keyword\">const</span> ogpImageUrls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Promise.allで処理するとリクエスト多可で503になるのでfor文で一件ずつ処理する</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> postUrl <span class=\"token keyword\">of</span> postUrls<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>postUrl<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">'User-Agent'</span><span class=\"token operator\">:</span> <span class=\"token string\">'something different'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// cheerioを使ってHMTLからOGP画像URLを抽出</span>\n    <span class=\"token keyword\">let</span> ogpImageUrl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> $ <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'head meta'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">i<span class=\"token punctuation\">,</span> el</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> property <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'property'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'content'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>property <span class=\"token operator\">===</span> <span class=\"token string\">'og:image'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        ogpImageUrls<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>ogpImageUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 取得したOGP画像URLをもとにファイルノードを生成</span>\n  <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>ogpImageUrls<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token parameter\">imageUrl</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> fileNode <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">createRemoteFileNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> imageUrl<span class=\"token punctuation\">,</span>\n      cache<span class=\"token punctuation\">,</span>\n      store<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">createNode</span><span class=\"token operator\">:</span> actions<span class=\"token punctuation\">.</span>createNode<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">createNodeId</span><span class=\"token operator\">:</span> createNodeId<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 他ファイルノードと区別するための識別子を付与</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">node</span><span class=\"token operator\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'OgpImage'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// メタ情報として画像のURLを付与</span>\n    <span class=\"token keyword\">await</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">node</span><span class=\"token operator\">:</span> fileNode<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'link'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> imageUrl<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> fileNode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>Reactのコンポーネントの定義、呼び出し側定義は<a href=\"#%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95\">実装方法</a>で紹介した内容とほぼ同じなので割愛します。</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回の方法を使えば、外部から画像をかき集めてリッチなWebサイトを構築する場合でも、Gatsby側でブラウザ表示を最適化してくれて、画面表示が遅くなる心配もありません。\n是非参考にしてみてください🍅</p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://www.wildsmithstudio.com/blog/remote-images-with-gatsby/\">Wrangling remote images with Gatsby</a></li>\n<li><a href=\"https://stackoverflow.com/questions/52612936/gatsby-fetching-remote-images-with-createremotefilenode\">graphql - Gatsby - fetching remote images with createRemoteFileNode - Stack Overflow</a></li>\n</ul>","excerpt":"なにこれ Gatsbyで画像を扱う場合gatsby-imageを使うとイイ感じに最適化してくれます。\nWebサイトのリポジトリ内の画像についてはで簡単に設定できますが、今回はビルド時に動的に取得する外部画像に対して設定する方法をご紹介します。 実装方法 Step…","frontmatter":{"slug":"/gatsby-image-of-remote-in-building-by-using-create-remote-file-node","title":"Gatsbyにおける外部取得画像へのgatsby-image適用方法","date":"2019-06-01T21:30:00.000-07:00","tags":["Gatsby","gatsby-image"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2019/06/gatsby-image-of-remote-in-building-by-using-create-remote-file-node.png","category":null}}],"latestPosts":[{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Windowsでキーバインドをお気軽にいじれる<a href=\"https://www.autohotkey.com/\">AutoHotkey</a>の紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。</p>\n<h2 id=\"autohotkeyとは\" style=\"position:relative;\"><a href=\"#autohotkey%E3%81%A8%E3%81%AF\" aria-label=\"autohotkeyとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AutoHotkeyとは</h2>\n<p>Windows版で提供されているソフトウェアで、専用のプログラミング言語でキーバインドを定義すれば、任意のキー入力に対してスクリプトを実行できます。既存のキーに別のキーの割当てたり、複雑なショートカットコマンドの割当が可能です。</p>\n<h3 id=\"良い部分\" style=\"position:relative;\"><a href=\"#%E8%89%AF%E3%81%84%E9%83%A8%E5%88%86\" aria-label=\"良い部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>良い部分</h3>\n<p><strong>サクッと導入して合わなかったらサクッと廃止できます。</strong><br>\n同じようなものでWindowsの<a href=\"https://forest.watch.impress.co.jp/library/software/changekey/\">Change Key</a>やMacの<a href=\"https://karabiner-elements.pqrs.org/\">Karabiner Elements</a>がありますが、AutoHotkeyはアプリレイヤーで制御するので、アプリを終了すれば通常操作に戻れて、レジストリをいじったりしなくて良いという手軽さが魅力です。</p>\n<h3 id=\"イマイチな部分\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%9E%E3%82%A4%E3%83%81%E3%81%AA%E9%83%A8%E5%88%86\" aria-label=\"イマイチな部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>イマイチな部分</h3>\n<p><strong>独自言語で設定します。</strong><br>\n言語仕様はAutoHotkey公式リファレンスを見て学習が必要です。\n少し独特な言語で処理をどこでreturnするか分かりづらい気がします。</p>\n<p><strong>リモート接続PCでは効きません。</strong><br>\nリモート接続先のPCの操作に対してはAutHotkeyの設定は有効になりません。テレワークでリモートPC操作がメインの方だとイマイチかもしれません。これはChange KeyもKarabiner Elementsも同じですが...</p>\n<h2 id=\"実例紹介全体像\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E5%85%A8%E4%BD%93%E5%83%8F\" aria-label=\"実例紹介全体像 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：全体像</h2>\n<p>Windowsだと<code class=\"language-text\">Ctrl</code>+スクロールは拡大/縮小、<code class=\"language-text\">Shift</code>+スクロールは横スクロールになっています。\nこのノリを<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>にも拡張する感じでAutoHotkeyで設定します。<br>\n右手でマウススクロールしながら、左手で<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>を押下することで、目的のデスクトップ・アプリ・タブに素早く直感的に移動できます。</p>\n<p><img src=\"./overview.png\" alt=\"overview\"></p>\n<h2 id=\"実例紹介ソースコード\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89\" aria-label=\"実例紹介ソースコード permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：ソースコード</h2>\n<p>まずはソースコード全量を示します。</p>\n<div class=\"gatsby-code-title\">AutoHotkey設定ファイルの実例</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span> 仮想デスクトップ間移動\n~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span>\n\n<span class=\"token punctuation\">;</span> アプリ間移動\n~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab\n\n<span class=\"token punctuation\">;</span> Tabの修飾キー化\n<span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn\n\n<span class=\"token punctuation\">;</span> タブ間移動：VSCode\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span> タブ間移動：Chrome\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>以下で処理の塊ごとに説明します。</p>\n<h3 id=\"仮想デスクトップ間移動\" style=\"position:relative;\"><a href=\"#%E4%BB%AE%E6%83%B3%E3%83%87%E3%82%B9%E3%82%AF%E3%83%88%E3%83%83%E3%83%97%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"仮想デスクトップ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>仮想デスクトップ間移動</h3>\n<p><code class=\"language-text\">Win</code> + スクロール実行時に、<code class=\"language-text\">Win</code> + 左右矢印を発動するように設定します。\n<code class=\"language-text\">Left</code>,<code class=\"language-text\">Right</code>の向きは好みによって変えてください。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"アプリ間移動\" style=\"position:relative;\"><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"アプリ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アプリ間移動</h3>\n<p>同じように<code class=\"language-text\">Alt</code>+ スクロール実行時に、<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>を発動するように設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<br/>\n<p>※ちなみに<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>のアプローチは複数選択肢がありますが、<code class=\"language-text\">Alt</code>を押し続ける必要があり、１つのキーで代替するのは難しく皆さん実現に苦労されているようです。</p>\n<h3 id=\"タブ移動\" style=\"position:relative;\"><a href=\"#%E3%82%BF%E3%83%96%E7%A7%BB%E5%8B%95\" aria-label=\"タブ移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>タブ移動</h3>\n<p>Tabは修飾キー化が必要です。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  <span class=\"token punctuation\">;</span> 押し続けている限りリピートせず待機\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  <span class=\"token punctuation\">;</span> 押下中に他のホットキーが発動した場合は入力無し い\n  <span class=\"token punctuation\">;</span> 長押しの場合も入力無し\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>さらにアプリ毎にショートカットキーが異なるのでアプリ別に設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span>マウスホイールでタブ移動（VScode）\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span>マウスホイールでタブ移動（クローム）\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回紹介したのはスクロールとの組み合わせでしたが、AutoHotkeyは他にもさまざまな設定ができるので便利です。是非使ってみてください🍅</p>","excerpt":"なにこれ Windowsでキーバインドをお気軽にいじれるAutoHotkeyの紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。 AutoHotkeyとは Windows…","frontmatter":{"slug":"/mahjong-solitaire","title":"上海 (Mahjong Solitaire)","date":"2023-04-07T09:00:00.000+09:00","tags":["キーボード","AutoHotkey","作業効率化"],"keywords":["キーボード"],"thumbnail":"thumbnail/shanghai.png","category":"game"}},{"html":"<p>プログラミングの参考や勉強になるWebサイトを集めた。</p>\n<h2 id=\"github\" style=\"position:relative;\"><a href=\"#github\" aria-label=\"github permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>github</h2>","excerpt":"プログラミングの参考や勉強になるWebサイトを集めた。 github","frontmatter":{"slug":"/bookmarks","title":"リンク集","date":"2023-04-07T09:00:00.000+09:00","tags":["リンク集"],"keywords":["links"],"thumbnail":"thumbnail/2023/04/autohotkey-mouse-scroll-combination.png","category":"note"}},{"html":"<h2 id=\"小説\" style=\"position:relative;\"><a href=\"#%E5%B0%8F%E8%AA%AC\" aria-label=\"小説 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>小説</h2>\n<p>村田沙耶香 『コンビニ人間』\n『地球星人』</p>\n<p>本谷有希子『嵐のピクニック』</p>\n<p>小山田寛子の『工場』</p>\n<p>多和田葉子の『献灯使』</p>\n<p>大江健三郎の『個人的な体験</p>\n<p>桐野夏生   『リアルワールド』\n『グロテスク』</p>\n<p>高野 文子   わたしたちが描いたアニメーション「平家物語」</p>\n<p>吉本ばなな  『キッチン』  『トカゲ』</p>\n<p>湊かなえ『告白』</p>\n<p>乙一は『GOTH』、『ZOO』、『夏と花火と私の死体』</p>\n<p>川口俊和の『コーヒーが冷めないうちに』</p>\n<p>中村文則『銃』と『掏摸』</p>\n<p>遠藤周作の『沈黙』</p>","excerpt":"…","frontmatter":{"slug":"/いつか読む本","title":"いつか読む本","date":"2023-04-07T09:00:00.000+09:00","tags":["リンク集"],"keywords":["links"],"thumbnail":"thumbnail/2023/04/autohotkey-mouse-scroll-combination.png","category":"note"}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Windowsでキーバインドをお気軽にいじれる<a href=\"https://www.autohotkey.com/\">AutoHotkey</a>の紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。</p>\n<h2 id=\"autohotkeyとは\" style=\"position:relative;\"><a href=\"#autohotkey%E3%81%A8%E3%81%AF\" aria-label=\"autohotkeyとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AutoHotkeyとは</h2>\n<p>Windows版で提供されているソフトウェアで、専用のプログラミング言語でキーバインドを定義すれば、任意のキー入力に対してスクリプトを実行できます。既存のキーに別のキーの割当てたり、複雑なショートカットコマンドの割当が可能です。</p>\n<h3 id=\"良い部分\" style=\"position:relative;\"><a href=\"#%E8%89%AF%E3%81%84%E9%83%A8%E5%88%86\" aria-label=\"良い部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>良い部分</h3>\n<p><strong>サクッと導入して合わなかったらサクッと廃止できます。</strong><br>\n同じようなものでWindowsの<a href=\"https://forest.watch.impress.co.jp/library/software/changekey/\">Change Key</a>やMacの<a href=\"https://karabiner-elements.pqrs.org/\">Karabiner Elements</a>がありますが、AutoHotkeyはアプリレイヤーで制御するので、アプリを終了すれば通常操作に戻れて、レジストリをいじったりしなくて良いという手軽さが魅力です。</p>\n<h3 id=\"イマイチな部分\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%9E%E3%82%A4%E3%83%81%E3%81%AA%E9%83%A8%E5%88%86\" aria-label=\"イマイチな部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>イマイチな部分</h3>\n<p><strong>独自言語で設定します。</strong><br>\n言語仕様はAutoHotkey公式リファレンスを見て学習が必要です。\n少し独特な言語で処理をどこでreturnするか分かりづらい気がします。</p>\n<p><strong>リモート接続PCでは効きません。</strong><br>\nリモート接続先のPCの操作に対してはAutHotkeyの設定は有効になりません。テレワークでリモートPC操作がメインの方だとイマイチかもしれません。これはChange KeyもKarabiner Elementsも同じですが...</p>\n<h2 id=\"実例紹介全体像\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E5%85%A8%E4%BD%93%E5%83%8F\" aria-label=\"実例紹介全体像 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：全体像</h2>\n<p>Windowsだと<code class=\"language-text\">Ctrl</code>+スクロールは拡大/縮小、<code class=\"language-text\">Shift</code>+スクロールは横スクロールになっています。\nこのノリを<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>にも拡張する感じでAutoHotkeyで設定します。<br>\n右手でマウススクロールしながら、左手で<code class=\"language-text\">Win</code>,<code class=\"language-text\">Alt</code>,<code class=\"language-text\">Tab</code>を押下することで、目的のデスクトップ・アプリ・タブに素早く直感的に移動できます。</p>\n<h2 id=\"tilesheet-b-0---255\" style=\"position:relative;\"><a href=\"#tilesheet-b-0---255\" aria-label=\"tilesheet b 0   255 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tilesheet B: 0 - 255</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2edad07529a0c14a7ef89ec91015aaea/212bf/tilesheet-b-numbering-sheet.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABwaoAAB//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAEFAh//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAE/IR//2gAMAwEAAgADAAAAEMDAPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABoQAAEFAQAAAAAAAAAAAAAAAAABEBEhMUH/2gAIAQEAAT8QhBMaxM6W8H//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2edad07529a0c14a7ef89ec91015aaea/ba381/tilesheet-b-numbering-sheet.webp 200w,\n/static/2edad07529a0c14a7ef89ec91015aaea/7f61c/tilesheet-b-numbering-sheet.webp 400w,\n/static/2edad07529a0c14a7ef89ec91015aaea/8b983/tilesheet-b-numbering-sheet.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2edad07529a0c14a7ef89ec91015aaea/e07e9/tilesheet-b-numbering-sheet.jpg 200w,\n/static/2edad07529a0c14a7ef89ec91015aaea/066f9/tilesheet-b-numbering-sheet.jpg 400w,\n/static/2edad07529a0c14a7ef89ec91015aaea/212bf/tilesheet-b-numbering-sheet.jpg 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2edad07529a0c14a7ef89ec91015aaea/212bf/tilesheet-b-numbering-sheet.jpg\"\n            alt=\"overview\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"tilesheet-c-256---511\" style=\"position:relative;\"><a href=\"#tilesheet-c-256---511\" aria-label=\"tilesheet c 256   511 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tilesheet C: 256 - 511</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d12582187b534f5b767f3fa81481401f/212bf/tilesheet-c-numbering-sheet.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGGAAAD/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQABBQIf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQAGPwIf/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQABPyEf/9oADAMBAAIAAwAAABAgAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAZEAADAAMAAAAAAAAAAAAAAAAAEJERMfD/2gAIAQEAAT8QdKVYO0f/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d12582187b534f5b767f3fa81481401f/ba381/tilesheet-c-numbering-sheet.webp 200w,\n/static/d12582187b534f5b767f3fa81481401f/7f61c/tilesheet-c-numbering-sheet.webp 400w,\n/static/d12582187b534f5b767f3fa81481401f/8b983/tilesheet-c-numbering-sheet.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d12582187b534f5b767f3fa81481401f/e07e9/tilesheet-c-numbering-sheet.jpg 200w,\n/static/d12582187b534f5b767f3fa81481401f/066f9/tilesheet-c-numbering-sheet.jpg 400w,\n/static/d12582187b534f5b767f3fa81481401f/212bf/tilesheet-c-numbering-sheet.jpg 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d12582187b534f5b767f3fa81481401f/212bf/tilesheet-c-numbering-sheet.jpg\"\n            alt=\"overview\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"tilesheet-d-512---767\" style=\"position:relative;\"><a href=\"#tilesheet-d-512---767\" aria-label=\"tilesheet d 512   767 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tilesheet D: 512 - 767</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a236da186ca7b390d42a77547ff512aa/212bf/tilesheet-d-numbering-sheet.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGGAAAD/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQABBQIf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQAGPwIf/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQABPyEf/9oADAMBAAIAAwAAABDjCAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAYEAADAQEAAAAAAAAAAAAAAAAQESEA8P/aAAgBAQABPxA0rllR/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a236da186ca7b390d42a77547ff512aa/ba381/tilesheet-d-numbering-sheet.webp 200w,\n/static/a236da186ca7b390d42a77547ff512aa/7f61c/tilesheet-d-numbering-sheet.webp 400w,\n/static/a236da186ca7b390d42a77547ff512aa/8b983/tilesheet-d-numbering-sheet.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a236da186ca7b390d42a77547ff512aa/e07e9/tilesheet-d-numbering-sheet.jpg 200w,\n/static/a236da186ca7b390d42a77547ff512aa/066f9/tilesheet-d-numbering-sheet.jpg 400w,\n/static/a236da186ca7b390d42a77547ff512aa/212bf/tilesheet-d-numbering-sheet.jpg 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a236da186ca7b390d42a77547ff512aa/212bf/tilesheet-d-numbering-sheet.jpg\"\n            alt=\"overview\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"tilesheet-e-768---1023\" style=\"position:relative;\"><a href=\"#tilesheet-e-768---1023\" aria-label=\"tilesheet e 768   1023 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tilesheet E: 768 - 1023</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/146bbedfb0b61dd5edc0b0540f20e1fb/212bf/tilesheet-e-numbering-sheet.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABwwAKFB//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAEFAh//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAE/IR//2gAMAwEAAgADAAAAEDPIAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABsQAAICAwEAAAAAAAAAAAAAAAARASEgYeHw/9oACAEBAAE/EMb2IiK4LyP/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/146bbedfb0b61dd5edc0b0540f20e1fb/ba381/tilesheet-e-numbering-sheet.webp 200w,\n/static/146bbedfb0b61dd5edc0b0540f20e1fb/7f61c/tilesheet-e-numbering-sheet.webp 400w,\n/static/146bbedfb0b61dd5edc0b0540f20e1fb/8b983/tilesheet-e-numbering-sheet.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/146bbedfb0b61dd5edc0b0540f20e1fb/e07e9/tilesheet-e-numbering-sheet.jpg 200w,\n/static/146bbedfb0b61dd5edc0b0540f20e1fb/066f9/tilesheet-e-numbering-sheet.jpg 400w,\n/static/146bbedfb0b61dd5edc0b0540f20e1fb/212bf/tilesheet-e-numbering-sheet.jpg 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/146bbedfb0b61dd5edc0b0540f20e1fb/212bf/tilesheet-e-numbering-sheet.jpg\"\n            alt=\"overview\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"tilesheet-a5-1536---1663\" style=\"position:relative;\"><a href=\"#tilesheet-a5-1536---1663\" aria-label=\"tilesheet a5 1536   1663 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tilesheet A5: 1536 - 1663</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 384px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e93480e29f1789695e5e23dddb088e2f/4ecad/tilesheet-a5-numbering-sheet.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 200%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAoABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeMUAXNKggAP/8QAGBAAAwEBAAAAAAAAAAAAAAAAABARISD/2gAIAQEAAQUCdKVab3//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AV//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AV//xAAYEAADAQEAAAAAAAAAAAAAAAAAMaHxIP/aAAgBAQAGPwLDDB0dHTTTRQUFOP/EACEQAAECBQUBAAAAAAAAAAAAAAEAMREhQXGRUWHR8PGx/9oACAEBAAE/ISZFs6ESJtWqEjbKF3SVkXXdSXTwjGBfwi56/CNyESM2WiIeatXKhuy5ULYGiIdq0ChbAX//2gAMAwEAAgADAAAAEOAKDHPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxBf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxBf/8QAIRAAAQIHAQADAAAAAAAAAAAAAQCRESExQVFh8HGx0eH/2gAIAQEAAT8QB4Sw13qjNrga504lw6QITaG7DnFBjNPpkIRN9TfkoVZQb4e/EcXzMucEUXo3yKLoCw2jiim4CE47i4UIwMqCy33qDGT7Mb50RxUXTtf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e93480e29f1789695e5e23dddb088e2f/ba381/tilesheet-a5-numbering-sheet.webp 200w,\n/static/e93480e29f1789695e5e23dddb088e2f/e6f2f/tilesheet-a5-numbering-sheet.webp 384w\"\n              sizes=\"(max-width: 384px) 100vw, 384px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e93480e29f1789695e5e23dddb088e2f/e07e9/tilesheet-a5-numbering-sheet.jpg 200w,\n/static/e93480e29f1789695e5e23dddb088e2f/4ecad/tilesheet-a5-numbering-sheet.jpg 384w\"\n            sizes=\"(max-width: 384px) 100vw, 384px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e93480e29f1789695e5e23dddb088e2f/4ecad/tilesheet-a5-numbering-sheet.jpg\"\n            alt=\"overview\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"tilesheet-a1-2048---2815\" style=\"position:relative;\"><a href=\"#tilesheet-a1-2048---2815\" aria-label=\"tilesheet a1 2048   2815 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tilesheet A1: 2048 - 2815</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4ce07a6c33c0feb6fb6c2a451d41e562/212bf/tilesheet-a1-numbering-sheet.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHHcWWCD//EABgQAAMBAQAAAAAAAAAAAAAAAAAxQQEC/9oACAEBAAEFAjXDpz//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAADAAMBAAAAAAAAAAAAAAAAASExQXGh/9oACAEBAAY/AsbHBT0XRxCiP//EAB0QAAIBBAMAAAAAAAAAAAAAAAABQREhMbFRcYH/2gAIAQEAAT8hSxsuL4OdFIOJCpBDDgEupk//2gAMAwEAAgADAAAAEBDP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHxABAAICAgIDAAAAAAAAAAAAAREhADFBgWFxkbHR/9oACAEBAAE/ELLvL7K1kIcdeHwtwMi8m0l95V+j2xrADAQyGuqrJVIE2L7rP//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/4ce07a6c33c0feb6fb6c2a451d41e562/ba381/tilesheet-a1-numbering-sheet.webp 200w,\n/static/4ce07a6c33c0feb6fb6c2a451d41e562/7f61c/tilesheet-a1-numbering-sheet.webp 400w,\n/static/4ce07a6c33c0feb6fb6c2a451d41e562/8b983/tilesheet-a1-numbering-sheet.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/4ce07a6c33c0feb6fb6c2a451d41e562/e07e9/tilesheet-a1-numbering-sheet.jpg 200w,\n/static/4ce07a6c33c0feb6fb6c2a451d41e562/066f9/tilesheet-a1-numbering-sheet.jpg 400w,\n/static/4ce07a6c33c0feb6fb6c2a451d41e562/212bf/tilesheet-a1-numbering-sheet.jpg 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/4ce07a6c33c0feb6fb6c2a451d41e562/212bf/tilesheet-a1-numbering-sheet.jpg\"\n            alt=\"overview\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"tilesheet-a2-2816---4351\" style=\"position:relative;\"><a href=\"#tilesheet-a2-2816---4351\" aria-label=\"tilesheet a2 2816   4351 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tilesheet A2: 2816 - 4351</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d5be0543f94368630a45f1272a379b78/212bf/tilesheet-a2-numbering-sheet.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABzQQD/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEREP/aAAgBAQABBQKEHrP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAEBAQEAAAAAAAAAAAAAAAAAMUEB/9oACAEBAAY/ApxOIxjH/8QAHhAAAQMEAwAAAAAAAAAAAAAAAAEhMRFBkfBRYYH/2gAIAQEAAT8h1KalEQyOTzEp1iWtA//aAAwDAQACAAMAAAAQww//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAhEAEAAQIGAwEAAAAAAAAAAAABIQARMWFxgaHwUZHB4f/aAAgBAQABPxCyIO8t6AJFhp47ejGHDBPykD3Ru8b0ASO1uWmfNAGHkPyv/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d5be0543f94368630a45f1272a379b78/ba381/tilesheet-a2-numbering-sheet.webp 200w,\n/static/d5be0543f94368630a45f1272a379b78/7f61c/tilesheet-a2-numbering-sheet.webp 400w,\n/static/d5be0543f94368630a45f1272a379b78/8b983/tilesheet-a2-numbering-sheet.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d5be0543f94368630a45f1272a379b78/e07e9/tilesheet-a2-numbering-sheet.jpg 200w,\n/static/d5be0543f94368630a45f1272a379b78/066f9/tilesheet-a2-numbering-sheet.jpg 400w,\n/static/d5be0543f94368630a45f1272a379b78/212bf/tilesheet-a2-numbering-sheet.jpg 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d5be0543f94368630a45f1272a379b78/212bf/tilesheet-a2-numbering-sheet.jpg\"\n            alt=\"overview\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"tilesheet-a3-4352---5887\" style=\"position:relative;\"><a href=\"#tilesheet-a3-4352---5887\" aria-label=\"tilesheet a3 4352   5887 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tilesheet A3: 4352 - 5887</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1daf3f5b062647c815f0e9327c28ee50/212bf/tilesheet-a3-numbering-sheet.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeBYyUP/xAAWEAEBAQAAAAAAAAAAAAAAAAABEAD/2gAIAQEAAQUCjXf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAACAwEAAAAAAAAAAAAAAAAAARFRYaH/2gAIAQEAAT8hjOIjOITOIhUQqEVH/9oADAMBAAIAAwAAABDAz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAAICAgMBAAAAAAAAAAAAAAERACEx8EFRYZH/2gAIAQEAAT8QR4aewAxTjRwDFMDRwqNPkuFM9ex4Ux1P/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/1daf3f5b062647c815f0e9327c28ee50/ba381/tilesheet-a3-numbering-sheet.webp 200w,\n/static/1daf3f5b062647c815f0e9327c28ee50/7f61c/tilesheet-a3-numbering-sheet.webp 400w,\n/static/1daf3f5b062647c815f0e9327c28ee50/8b983/tilesheet-a3-numbering-sheet.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/1daf3f5b062647c815f0e9327c28ee50/e07e9/tilesheet-a3-numbering-sheet.jpg 200w,\n/static/1daf3f5b062647c815f0e9327c28ee50/066f9/tilesheet-a3-numbering-sheet.jpg 400w,\n/static/1daf3f5b062647c815f0e9327c28ee50/212bf/tilesheet-a3-numbering-sheet.jpg 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/1daf3f5b062647c815f0e9327c28ee50/212bf/tilesheet-a3-numbering-sheet.jpg\"\n            alt=\"overview\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"tilesheet-a4-5888---8191\" style=\"position:relative;\"><a href=\"#tilesheet-a4-5888---8191\" aria-label=\"tilesheet a4 5888   8191 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tilesheet A4: 5888 - 8191</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2c5f8b9624b4456779e7ef8405e238f9/212bf/tilesheet-a4-numbering-sheet.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeaoZKG4JB//xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIRISD/2gAIAQEAAQUCwwzikUhxR//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABYQAQEBAAAAAAAAAAAAAAAAAEEAIP/aAAgBAQAGPwIiJmcf/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAExESFRYfBx/9oACAEBAAE/IfZUblxvEr1lesb6zUajAP/aAAwDAQACAAMAAAAQA88A/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHhAAAQQDAQEBAAAAAAAAAAAAAQARIWExQVHRcZH/2gAIAQEAAT8QAhTh+lA6j20PwXUCiPzu0CiNdfUZxGI09RG8YTZgU5EcL//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2c5f8b9624b4456779e7ef8405e238f9/ba381/tilesheet-a4-numbering-sheet.webp 200w,\n/static/2c5f8b9624b4456779e7ef8405e238f9/7f61c/tilesheet-a4-numbering-sheet.webp 400w,\n/static/2c5f8b9624b4456779e7ef8405e238f9/8b983/tilesheet-a4-numbering-sheet.webp 768w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2c5f8b9624b4456779e7ef8405e238f9/e07e9/tilesheet-a4-numbering-sheet.jpg 200w,\n/static/2c5f8b9624b4456779e7ef8405e238f9/066f9/tilesheet-a4-numbering-sheet.jpg 400w,\n/static/2c5f8b9624b4456779e7ef8405e238f9/212bf/tilesheet-a4-numbering-sheet.jpg 768w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2c5f8b9624b4456779e7ef8405e238f9/212bf/tilesheet-a4-numbering-sheet.jpg\"\n            alt=\"overview\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"floor-type-autotile-shapes\" style=\"position:relative;\"><a href=\"#floor-type-autotile-shapes\" aria-label=\"floor type autotile shapes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>floor-type-autotile-shapes</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 552px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b8bbb1763f55cda3d7eceb32e4843344/25044/floor-type-autotile-shapes.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEEAv/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAGHYwZSF//EABgQAQEBAQEAAAAAAAAAAAAAAAIAAQMR/9oACAEBAAEFAvbdyOyKkVDm7//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AYj/xAAWEQEBAQAAAAAAAAAAAAAAAAAAERL/2gAIAQIBAT8BrT//xAAcEAACAgIDAAAAAAAAAAAAAAAAASFBMVECIlL/2gAIAQEABj8Cc7scqx9r9DzdjjdnLOdn/8QAIBAAAQIFBQAAAAAAAAAAAAAAAAEhMUFh0fERUXGRwf/aAAgBAQABPyHTGnt2PWnBT3S2ED0wyKqx0FjEjy2P/9oADAMBAAIAAwAAABCv/wD/xAAVEQEBAAAAAAAAAAAAAAAAAAAAcf/aAAgBAwEBPxAl/8QAFhEBAQEAAAAAAAAAAAAAAAAAABFR/9oACAECAQE/ECNf/8QAIBABAAICAQQDAAAAAAAAAAAAARExACHhQWFxgaHw8f/aAAgBAQABPxCg2bIl6Bzj7z555fObXCTRBjTMiNlqDR+4GFkyhrb6vtnTiJg95//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/b8bbb1763f55cda3d7eceb32e4843344/ba381/floor-type-autotile-shapes.webp 200w,\n/static/b8bbb1763f55cda3d7eceb32e4843344/7f61c/floor-type-autotile-shapes.webp 400w,\n/static/b8bbb1763f55cda3d7eceb32e4843344/dd35b/floor-type-autotile-shapes.webp 552w\"\n              sizes=\"(max-width: 552px) 100vw, 552px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/b8bbb1763f55cda3d7eceb32e4843344/e07e9/floor-type-autotile-shapes.jpg 200w,\n/static/b8bbb1763f55cda3d7eceb32e4843344/066f9/floor-type-autotile-shapes.jpg 400w,\n/static/b8bbb1763f55cda3d7eceb32e4843344/25044/floor-type-autotile-shapes.jpg 552w\"\n            sizes=\"(max-width: 552px) 100vw, 552px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/b8bbb1763f55cda3d7eceb32e4843344/25044/floor-type-autotile-shapes.jpg\"\n            alt=\"overview\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"wall-type-autotile-shapes\" style=\"position:relative;\"><a href=\"#wall-type-autotile-shapes\" aria-label=\"wall type autotile shapes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>wall-type-autotile-shapes</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 264px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/877f07bce2129311a6806fa3cd5792cd/c285d/wall-type-autotile-shapes.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAMEAQL/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAAByx5OK3ID1INAP//EAB0QAAEEAgMAAAAAAAAAAAAAAAECAxETEiEiI0P/2gAIAQEAAQUCJculdYU5Bws44CuCe7ynX//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB8QAAEDBAMBAAAAAAAAAAAAAAEAAhEhIzFRAyIzkf/aAAgBAQAGPwJvUTG1ydRE1Qtt+oXXRuU+4c0G17PTaDC5KDKFAv/EABwQAAICAwEBAAAAAAAAAAAAAAERACExQVFhcf/aAAgBAQABPyG43iG06cNniA8iCqlQvIJ7FrIJTYuy+2NR/Q6gDw+T/9oADAMBAAIAAwAAABB4GIL/xAAZEQEAAgMAAAAAAAAAAAAAAAABABARQVH/2gAIAQMBAT8QWZex3X//xAAZEQEAAgMAAAAAAAAAAAAAAAABABARQVH/2gAIAQIBAT8QCYOQ1X//xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMUFRYXH/2gAIAQEAAT8QdUjQYD7Fnt5FvFgQVEK08iXnIIVnANRa/wAQBil9YyvUWDx5qdQ8GjK0ZFb2NanSsz//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/877f07bce2129311a6806fa3cd5792cd/ba381/wall-type-autotile-shapes.webp 200w,\n/static/877f07bce2129311a6806fa3cd5792cd/9a0f6/wall-type-autotile-shapes.webp 264w\"\n              sizes=\"(max-width: 264px) 100vw, 264px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/877f07bce2129311a6806fa3cd5792cd/e07e9/wall-type-autotile-shapes.jpg 200w,\n/static/877f07bce2129311a6806fa3cd5792cd/c285d/wall-type-autotile-shapes.jpg 264w\"\n            sizes=\"(max-width: 264px) 100vw, 264px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/877f07bce2129311a6806fa3cd5792cd/c285d/wall-type-autotile-shapes.jpg\"\n            alt=\"overview\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"waterfall-type-autotile-shapes\" style=\"position:relative;\"><a href=\"#waterfall-type-autotile-shapes\" aria-label=\"waterfall type autotile shapes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>waterfall-type-autotile-shapes</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 264px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5fdf8222a1f22fa6debb361df8659fbd/c285d/waterfall-type-autotile-shapes.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHPiJuB/8QAGBABAQADAAAAAAAAAAAAAAAAAhEBIiP/2gAIAQEAAQUCvU51Kh//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAACAgMAAAAAAAAAAAAAAAAAMQECEWKB/9oACAEBAAY/As6l+kJH/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERMSFRYYH/2gAIAQEAAT8hTyw8dGR7YenFFo//2gAMAwEAAgADAAAAEI//AP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQADAQEAAAAAAAAAAAAAAAEAETEhgf/aAAgBAQABPxB9SxileJiaIedyBZg6WOE//9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5fdf8222a1f22fa6debb361df8659fbd/ba381/waterfall-type-autotile-shapes.webp 200w,\n/static/5fdf8222a1f22fa6debb361df8659fbd/9a0f6/waterfall-type-autotile-shapes.webp 264w\"\n              sizes=\"(max-width: 264px) 100vw, 264px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5fdf8222a1f22fa6debb361df8659fbd/e07e9/waterfall-type-autotile-shapes.jpg 200w,\n/static/5fdf8222a1f22fa6debb361df8659fbd/c285d/waterfall-type-autotile-shapes.jpg 264w\"\n            sizes=\"(max-width: 264px) 100vw, 264px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5fdf8222a1f22fa6debb361df8659fbd/c285d/waterfall-type-autotile-shapes.jpg\"\n            alt=\"overview\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"実例紹介ソースコード\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E4%BE%8B%E7%B4%B9%E4%BB%8B%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89\" aria-label=\"実例紹介ソースコード permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実例紹介：ソースコード</h2>\n<p>まずはソースコード全量を示します。</p>\n<div class=\"gatsby-code-title\">AutoHotkey設定ファイルの実例</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span> 仮想デスクトップ間移動\n~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span>\n\n<span class=\"token punctuation\">;</span> アプリ間移動\n~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab\n\n<span class=\"token punctuation\">;</span> Tabの修飾キー化\n<span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn\n\n<span class=\"token punctuation\">;</span> タブ間移動：VSCode\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span> タブ間移動：Chrome\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>以下で処理の塊ごとに説明します。</p>\n<h3 id=\"仮想デスクトップ間移動\" style=\"position:relative;\"><a href=\"#%E4%BB%AE%E6%83%B3%E3%83%87%E3%82%B9%E3%82%AF%E3%83%88%E3%83%83%E3%83%97%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"仮想デスクトップ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>仮想デスクトップ間移動</h3>\n<p><code class=\"language-text\">Win</code> + スクロール実行時に、<code class=\"language-text\">Win</code> + 左右矢印を発動するように設定します。\n<code class=\"language-text\">Left</code>,<code class=\"language-text\">Right</code>の向きは好みによって変えてください。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LWin <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token comment\">#{Left}</span>\n~LWin <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token comment\">#{Right}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"アプリ間移動\" style=\"position:relative;\"><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E9%96%93%E7%A7%BB%E5%8B%95\" aria-label=\"アプリ間移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アプリ間移動</h3>\n<p>同じように<code class=\"language-text\">Alt</code>+ スクロール実行時に、<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>を発動するように設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~LAlt <span class=\"token operator\">&amp;</span> WheelDown::AltTab \n~LAlt <span class=\"token operator\">&amp;</span> WheelUp::ShiftAltTab</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<br/>\n<p>※ちなみに<code class=\"language-text\">Alt</code>+<code class=\"language-text\">Tab</code>のアプローチは複数選択肢がありますが、<code class=\"language-text\">Alt</code>を押し続ける必要があり、１つのキーで代替するのは難しく皆さん実現に苦労されているようです。</p>\n<h3 id=\"タブ移動\" style=\"position:relative;\"><a href=\"#%E3%82%BF%E3%83%96%E7%A7%BB%E5%8B%95\" aria-label=\"タブ移動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>タブ移動</h3>\n<p>Tabは修飾キー化が必要です。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token variable\">$Tab</span>::\n  startTime :<span class=\"token operator\">=</span> A_TickCount\n  <span class=\"token punctuation\">;</span> 押し続けている限りリピートせず待機\n  KeyWait, Tab\n  keyPressDuration :<span class=\"token operator\">=</span> A_TickCount - startTime\n  <span class=\"token punctuation\">;</span> 押下中に他のホットキーが発動した場合は入力無し い\n  <span class=\"token punctuation\">;</span> 長押しの場合も入力無し\n  If <span class=\"token punctuation\">(</span>A_ThisHotkey <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$Tab</span>\"</span> and keyPressDuration <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Send, <span class=\"token punctuation\">{</span>Blind<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>Tab<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\nReturn</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>さらにアプリ毎にショートカットキーが異なるのでアプリ別に設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">;</span>マウスホイールでタブ移動（VScode）\n<span class=\"token comment\">#IfWinActive ahk_exe Code.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^<span class=\"token punctuation\">{</span>PgUp<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>PgDn<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span>\n\n<span class=\"token punctuation\">;</span>マウスホイールでタブ移動（クローム）\n<span class=\"token comment\">#IfWinActive ahk_exe chrome.exe</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelUp::send,^+<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\n  ~Tab <span class=\"token operator\">&amp;</span> WheelDown::send,^<span class=\"token punctuation\">{</span>tab<span class=\"token punctuation\">}</span>\nReturn\n<span class=\"token comment\">#IfWinActiveW</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回紹介したのはスクロールとの組み合わせでしたが、AutoHotkeyは他にもさまざまな設定ができるので便利です。是非使ってみてください🍅</p>","excerpt":"なにこれ Windowsでキーバインドをお気軽にいじれるAutoHotkeyの紹介です。３ヶ月使ってみて色々な設定を試した結果、その中でも特に便利だと感じたマウススクロールと修飾キーの組合せについてご紹介します。 AutoHotkeyとは Windows…","frontmatter":{"slug":"/rpg-maker","title":"自作RPGゲームエンジン","date":"2023-04-07T09:00:00.000+09:00","tags":["RPG"],"keywords":["RPG"],"thumbnail":"thumbnail/default.png","category":"game"}},{"html":"<h2 id=\"メルセンヌツイスタmersenne-twister-mt法\" style=\"position:relative;\"><a href=\"#%E3%83%A1%E3%83%AB%E3%82%BB%E3%83%B3%E3%83%8C%E3%83%84%E3%82%A4%E3%82%B9%E3%82%BFmersenne-twister-mt%E6%B3%95\" aria-label=\"メルセンヌツイスタmersenne twister mt法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>メルセンヌ・ツイスタ（Mersenne Twister, MT）法</h2>\n<p>松本眞・西村拓士両氏によって1996年に発表された擬似乱数生成アルゴリズムである。 他の擬似乱数生成アルゴリズムと比べて以下の特徴がある。 （「Mersenne Twister とは?」より）</p>\n<ul>\n<li>\n<p>従来の様々な生成法の欠点を考慮して設計されています。</p>\n</li>\n<li>\n<p>従来にない長周期, 高次元均等分布を持ちます。（周期が<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>19937</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^{19937} -1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">19937</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span>で<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>、623次元超立方体の中に 均等に分布することが証明されています。）</p>\n</li>\n<li>\n<p>生成速度がかなり速い。（処理系にもよりますが、パイプライン処理やキャッシュメモリ のあるシステムでは、Cの標準ライブラリの rand() より高速なこと もあります。なお、開発当時には cokus 版は rand() より4倍程度高速でしたが、その後 ANSI-C の rand() が LCG 法から lagged-fibonacci に 変更されたこともあり、2002年現在 rand と MT の速度差はあまりありません。）</p>\n</li>\n<li>\n<p>メモリ効率が良い。（32ビット以上のマシン用に設計された mt19937.c は、 624ワードのワーキングメモリを消費するだけです。 1ワードは32ビット長とします。</p>\n</li>\n</ul>\n<p>MT法を利用したJavascsriptライブラリを開発した。</p>\n<hr>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\"><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>19937</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^{19937} -1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">19937</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span>はメルセンヌ素数で Mersenne Twister の名前の由来になっている。 Mersenne Twister では周期サイズごとに複数の実装があるが,<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>19937</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^{19937} -1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">19937</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span>がポピュラーな実装として広く使われている。<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a></li>\n</ol>\n</div>","excerpt":"メルセンヌ・ツイスタ（Mersenne Twister, MT）法 松本眞・西村拓士両氏によって1996年に発表された擬似乱数生成アルゴリズムである。 他の擬似乱数生成アルゴリズムと比べて以下の特徴がある。 （「Mersenne Twister…","frontmatter":{"slug":"/mersenne-twister","title":"メルセンヌ・ツイスター法による乱数生成Javascriptライブラリ","date":"2023-04-07T09:00:00.000+09:00","tags":["typescript"],"keywords":["乱数"],"thumbnail":"thumbnail/540px-Npm-logo.png","category":"software"}}],"previous":{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>2019/2/1(金)、<a href=\"https://web-engineer-meetup.connpass.com/event/115444/\">WEBエンジニア勉強会 #11</a>でLTしてきました。\n本記事では<strong>自分のLTスライド</strong>と、<strong>10分の枠では伝えきれなかった補足情報</strong>を紹介します。\nまた他の方のLTの様子や、勉強会の雰囲気なども<strong>参加レポート</strong>として書いています。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"padding-bottom: 40.8994%; padding-top: 120px;\"><a href=\"https://web-engineer-meetup.connpass.com/event/115444/\" data-iframely-url=\"//cdn.iframe.ly/YLILmaW\"></a></div></div>\n<h2 id=\"ltの発表スライド\" style=\"position:relative;\"><a href=\"#lt%E3%81%AE%E7%99%BA%E8%A1%A8%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89\" aria-label=\"ltの発表スライド permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LTの発表スライド</h2>\n<p>※スライドの右端をクリックするか、<code class=\"language-text\">→</code>をクリックすると次画面に遷移できます。<br>\n※全画面で見る場合は<a href=\"https://takumon.github.io/mdx-deck-sample/\">GitHub Pages</a>をご覧ください。</p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 75%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <iframe src=\"https://takumon.github.io/mdx-deck-sample\" style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div>\n<p>※実はMDX-Deckについては以前の記事にも書いています。\nLTのネタになりそうだとうことで、今回さらに深堀して整理したものをLTで発表しました。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"https://takumon.com/2018/12/23/\" data-iframely-url=\"//cdn.iframe.ly/vvP8pRK\"></a></div></div>\n<h2 id=\"ltの反響\" style=\"position:relative;\"><a href=\"#lt%E3%81%AE%E5%8F%8D%E9%9F%BF\" aria-label=\"ltの反響 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LTの反響</h2>\n<p>Twitterを見るとMDX-Deckに少しでも興味をもっていただけたようでうれしいです。</p>\n<blockquote class=\"twitter-tweet\" data-partner=\"tweetdeck\"><p lang=\"ja\" dir=\"ltr\">よく考えたらスライド作成ツールの紹介をするスライド作るのってハードル高くてしんどいよな・・・<br>こんな表現・アニメーションできるんだぜって見せつけなきゃいけないんだから、たくもんさんすごい  <a href=\"https://twitter.com/hashtag/web%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E5%8B%89%E5%BC%B7%E4%BC%9A11?src=hash&amp;ref_src=twsrc%5Etfw\">#webエンジニア勉強会11</a></p>&mdash; ngmt (@ngmt83) <a href=\"https://twitter.com/ngmt83/status/1091307490694713346?ref_src=twsrc%5Etfw\">February 1, 2019</a></blockquote>\n<blockquote class=\"twitter-tweet\" data-partner=\"tweetdeck\"><p lang=\"ja\" dir=\"ltr\">隣に座っている、みずりゅさんが手に持ったものを落としそうになるぐらいスゴイ、それが MDX-DECK！w　　<a href=\"https://twitter.com/hashtag/WEB%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E5%8B%89%E5%BC%B7%E4%BC%9A11?src=hash&amp;ref_src=twsrc%5Etfw\">#WEBエンジニア勉強会11</a></p>&mdash; いわしまん (@iwasiman) <a href=\"https://twitter.com/iwasiman/status/1091307489881055234?ref_src=twsrc%5Etfw\">February 1, 2019</a></blockquote>\n<blockquote class=\"twitter-tweet\" data-partner=\"tweetdeck\"><p lang=\"ja\" dir=\"ltr\">MDX-DECK、jsxでかけるのめっちゃよさそう <a href=\"https://twitter.com/hashtag/WEB%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E5%8B%89%E5%BC%B7%E4%BC%9A11?src=hash&amp;ref_src=twsrc%5Etfw\">#WEBエンジニア勉強会11</a></p>&mdash; Rin(しま) (@408rin) <a href=\"https://twitter.com/408rin/status/1091306260723449861?ref_src=twsrc%5Etfw\">February 1, 2019</a></blockquote>\n<blockquote class=\"twitter-tweet\" data-partner=\"tweetdeck\"><p lang=\"ja\" dir=\"ltr\">mdxカックイイ <a href=\"https://twitter.com/hashtag/WEB%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E5%8B%89%E5%BC%B7%E4%BC%9A11?src=hash&amp;ref_src=twsrc%5Etfw\">#WEBエンジニア勉強会11</a></p>&mdash; VTRyo@レベル0 (@3s_hv) <a href=\"https://twitter.com/3s_hv/status/1091305678143053824?ref_src=twsrc%5Etfw\">February 1, 2019</a></blockquote>\n<h2 id=\"lt補足情報ハマりポイントなど\" style=\"position:relative;\"><a href=\"#lt%E8%A3%9C%E8%B6%B3%E6%83%85%E5%A0%B1%E3%83%8F%E3%83%9E%E3%82%8A%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%AA%E3%81%A9\" aria-label=\"lt補足情報ハマりポイントなど permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LT補足情報（😭ハマりポイント😭など）</h2>\n<p>LTではMDX-Deckのメリットを中心に話しましたが、実際使ってみるとハマりポイントがいくつかあります😭\nここでは、LTで話せなかった部分の説明と、MDX-Deckを使う上での注意事項とハマりポイントのワークアラウンドについてお話します。<br/>\nハマりポイントはありますが、一度作ってしまえば、テーマやコンポーネントなどは再利用できるので、MDX-Deck是非使ってみてください。</p>\n<h3 id=\"コンポーネント\" style=\"position:relative;\"><a href=\"#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88\" aria-label=\"コンポーネント permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>コンポーネント</h3>\n<p>時間の都合上、紹介できなかったコンポーネントです。</p>\n<h4 id=\"horizontal横並びレイアウト\" style=\"position:relative;\"><a href=\"#horizontal%E6%A8%AA%E4%B8%A6%E3%81%B3%E3%83%AC%E3%82%A4%E3%82%A2%E3%82%A6%E3%83%88\" aria-label=\"horizontal横並びレイアウト permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Horizontal：横並びレイアウト</h4>\n<p>複数の画像や文章を横ならびに表示するレイアウトです。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Horizontal<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'mdx-deck/layouts'</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Horizontal\n\n<span class=\"token operator\">!</span><span class=\"token punctuation\">[</span>images<span class=\"token operator\">/</span>sample<span class=\"token operator\">-</span>background<span class=\"token punctuation\">.</span>jpg<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>images<span class=\"token operator\">/</span>sample<span class=\"token operator\">-</span>background<span class=\"token punctuation\">.</span>jpg<span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">!</span><span class=\"token punctuation\">[</span>images<span class=\"token operator\">/</span>note<span class=\"token operator\">-</span>preview<span class=\"token punctuation\">.</span>png<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>images<span class=\"token operator\">/</span>note<span class=\"token operator\">-</span>preview<span class=\"token punctuation\">.</span>png<span class=\"token punctuation\">)</span>\n\n### どんどん横に並んでいく</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id=\"headメタ情報埋め込み\" style=\"position:relative;\"><a href=\"#head%E3%83%A1%E3%82%BF%E6%83%85%E5%A0%B1%E5%9F%8B%E3%82%81%E8%BE%BC%E3%81%BF\" aria-label=\"headメタ情報埋め込み permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Head：メタ情報埋め込み</h4>\n<p>スライドをHTMLで公開する場合、HTMLのheadタグを指定できます。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Head <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'mdx-deck'</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Head</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">mdx-deckとcode-surferでスライドを作ろう！</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Head</span></span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>😭ただコチラTwitterCardの設定はうまくいきませんでした😭</strong>\n今回どうしてもTwitterCardを設定したかったので、\nワークアラウンドとして、ビルド時に出力されたHTMLファイルを直接編集し\nheadタグに以下を埋め込んでからデプロイしました。</p>\n<div class=\"gatsby-highlight\" data-language=\"title=ビルド後に出力されたindex.htmlの一部\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-title=ビルド後に出力されたindex.htmlの一部 line-numbers\"><code class=\"language-title=ビルド後に出力されたindex.htmlの一部\">&lt;link rel=&quot;canonical&quot; href=&quot;https://takumon.github.io/mdx-deck-sample/&quot;&gt;\n&lt;meta name=&#39;viewport&#39; content=&#39;width=device-width,initial-scale=1&#39;&gt;\n&lt;meta name=&quot;twitter:site&quot; content=&quot;@inouetakumon&quot;&gt;\n&lt;meta name=&quot;twitter:creator&quot; content=&quot;@inouetakumon&quot;&gt;\n&lt;meta name=&quot;twitter:card&quot; content=&quot;summary_large_image&quot;&gt;\n&lt;meta name=&#39;twitter:title&#39; content=&quot;MDX-DeckとCode Surferでスライドを作ろう！ #WEBエンジニア勉強会11&quot;&gt;\n&lt;meta name=&#39;twitter:image&#39; content=&quot;https://takumon.github.io/mdx-deck-sample/images/card.png&quot;&gt;\n&lt;meta name=&#39;twitter:description&#39; content=&quot;MDX（Markdown + JSX）をベースとしたグラフィカルなスライドが作れるライブラリの紹介です。&quot;&gt;\n\n&lt;meta property=&quot;og:title&quot; content=&quot;MDX-DeckとCode Surferでスライドを作ろう！ #WEBエンジニア勉強会11&quot;&gt;\n&lt;meta property=&quot;og:description&quot; content=&quot;MDX（Markdown + JSX）をベースとしたグラフィカルなスライドが作れるライブラリの紹介です。&quot;&gt;\n&lt;meta property=&quot;og:image&quot; content=&quot;https://takumon.github.io/mdx-deck-sample/images/card.png&quot;&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"プレゼンテーション機能\" style=\"position:relative;\"><a href=\"#%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E6%A9%9F%E8%83%BD\" aria-label=\"プレゼンテーション機能 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プレゼンテーション機能</h3>\n<p>LTではデモをお見せしただけだったので、\n実際どんなものか説明します。</p>\n<h4 id=\"プレゼンモード\" style=\"position:relative;\"><a href=\"#%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E3%83%A2%E3%83%BC%E3%83%89\" aria-label=\"プレゼンモード permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プレゼンモード</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAADBElEQVR42oWQ22sbRxSHZ/YyK0vWStZt16u9SL6uJMuSSqyYKCHUxg/BlKQhUCil0IeSlr4WTPxcaNI0chNVju3Q2LQlDyFtXgOl0FSktWWUp+QvaWlwNsOvzDpuQyh04JszzJnzceaQldXV7ze/2X6ydmN9f/PW9uDTlUuDvFMY6CPpQSprhOQMgTkwTGuQNcxBMpUN79M5M4zN+ZP7y2+de7q4uPQt2b59e3/30c8Y7P3CH/d/xU8P7uNmdw3r3TV0O210rrfx+eXLuHbtS7TbbXS713Hnu02sd9vo3LiCr9au4Gb3Kr/6xWdYubS6SyRK9iqTQ3jn3Exwar7AW02Xt+bHeaPm8XLJ5q43yiUtzrWYzqkW45Zt8KWTHn/vwin+yYfn+fvvLvOPPzgTvL3cwrCe+o1QFukrVhmSWeKSUYJANnxIuWlQwwfNTUHJl6EK7EoYCSG4e/cexPrjz7/w7CDgL15wLC4u7IZCZlegOTNcFIxMNGBWT2C02kLGb8JvnYE+3oBilcQbaE4lFN7/8YdQ+DwIROBiW1h4RcjsChdFqaljKB57E07jNNzqCTilJqLebNgZE0K7AkIlfHTxInZ2drCxsYGtrS3+daeDiYmJ14T5MhLjNeRKTWRK80hPvoERbwaRw/wh+TKowlAsjmFuronZWh2mafJkMik6PxKWxVe4YvnIlo9jbG4B1mwLaf84mCNE5X9QrRJYREWlqKLopOGPZxCNKJwQCkrpLpFYtK85VTC3yplbRbRYDxkq1BAp1MFE7lXsGcgqw/AQgaJIYEyCLFEu5nrYocz6ctqDkna5nHJAE3lxhpJxoWZcsKwXomaOcEFlBS8FR/wrlCj5PapRKLJ0oMfUwMrFAkLI/8JUOUjEWaDHWKAx+UBjBJSSR8RISfu16Tjs0SSv+VmcXZoSs4CYiUBVGTQtAkVR8XJOYVdJXUPdT2FsMgHPjvNpVxHf3yOMsVvDw/G+qrKHhJDe63ie16s3Gj3Lsnr/lWcFraen9YfxeKIfi8W2/gY+an1JWdQv+wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5f09fd481c9fa476ff30093c3ff084af/ba381/presentation-mode-1.webp 200w,\n/static/5f09fd481c9fa476ff30093c3ff084af/7f61c/presentation-mode-1.webp 400w,\n/static/5f09fd481c9fa476ff30093c3ff084af/d00b9/presentation-mode-1.webp 800w,\n/static/5f09fd481c9fa476ff30093c3ff084af/92f8c/presentation-mode-1.webp 1200w,\n/static/5f09fd481c9fa476ff30093c3ff084af/fad48/presentation-mode-1.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5f09fd481c9fa476ff30093c3ff084af/772e8/presentation-mode-1.png 200w,\n/static/5f09fd481c9fa476ff30093c3ff084af/e17e5/presentation-mode-1.png 400w,\n/static/5f09fd481c9fa476ff30093c3ff084af/5a190/presentation-mode-1.png 800w,\n/static/5f09fd481c9fa476ff30093c3ff084af/c1b63/presentation-mode-1.png 1200w,\n/static/5f09fd481c9fa476ff30093c3ff084af/29007/presentation-mode-1.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5f09fd481c9fa476ff30093c3ff084af/5a190/presentation-mode-1.png\"\n            alt=\"presentation-mode-1.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>ショートカットキーは、Macだと<code class=\"language-text\">option + p</code>、Windowsだと<code class=\"language-text\">alt + p</code>です。<br>\nタイマーやページ数などプレゼンに必要な機能がすべて確認できるモードです。\nMDX-Deckは複数タブ間の画面遷移を同期する機能を持っています。\nそのため手元のPCではプレゼンテーションモードで開いてスライドを遷移させながら、\nプロジェクターには通常モードで開いて見せるといったことが可能です。</p>\n<h4 id=\"オーバービューモード\" style=\"position:relative;\"><a href=\"#%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%93%E3%83%A5%E3%83%BC%E3%83%A2%E3%83%BC%E3%83%89\" aria-label=\"オーバービューモード permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>オーバービューモード</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABcRAAAXEQHKJvM/AAADVUlEQVR42m2Sy28bRRzHZ9feXdtxHvbaie31PuJX7H3YcdwEx6Zt1JomTiMllIoKaHlKlRCKuHCAGw21QQhFqpQLqFJFQkmdVuICvYFPCNgTFw7cQOIPqDggEWb0RV6bFlAPH83MTzOf+Wp+Q3q9wx8P9vd/6B0euru7u26tVnNTiurGZjQ3Eku5semUO51U3WRK80gpuquoumsYGVfXM242m3Pb7fb3m5tbP7VardfJnaO7+PTgNrtzdA9ffnUf13auo3P9XRztf4j7X3yCe5/v4e7tPfQ+28PBrT3cunkDNz++gU7nA3S7Qzrd92m328X29vYO8cWzCCrFvwKJPKs3mowQwkJRmZ1cKbK1jWVWP11l1eUKs09YLF8peShzc4yLaIyPjpD1Y19YBiHkGpFUB2GjzCYyVZxcOTMoQogZ4BNlkHgJ3Iz5iIQJX8ICP1OCoNoQNQeiZkPU56koq4OzO2RKsxBRTRbJVHBubd0TijENAd1BQLUgpU1Ec1Uo5SYSdgPy3CKKzVVM5U/AnypBTFsDMRWjykhYmEdkboEFMjU8tbo+SqgNb09b3qFY6QnotRVoC6ehWnWo5hLCRgWCYj4SyumhsBTOYlUusI2ig/b6eU8oxTVImgNJHQpnzEUknQbUhRWkrDrihoWQag1lafO/wu9eeAf4qMN+672Np5/ZGiaUNfjTjpfAlyxh2mwis3gWSvlJxMxlCOl/ZI8R1jcvob51iTUuXEb7/DDh9GwOU/kKJrMOxgwbWqWGoGZDStuQBs0YSB5SGjSGivLoDTk5C07OMCFh4qXn1+DMEtRPVTF/ahl2YwlOs44rr24gZJQhpB2I6v+xIenzVIiOujym2wimi0wu1B52mReD4APj4KUw+EAYnBSGLzjuMVjz0pgHN0AMQQxN0nh8Yij0RzMgcuY4GMvRVuscJYRQXVVoqVigtlWihqbSWUOns4ZB87kMnZwYp6IoePtEP099PEejE9KfZ5fCw4/93NU3sXn5Krvyxlu4cPFZL2G14IeujEFNjiMZC3g1jiPe+O+5mgzDUCbQrKXoxXZxUHuPPPj9wbe//vLzN/T4j/6LL7/SJ4T0Q+FAXxD8fc7v7wuC0Of9/sfC8bwH4fiveR/v8gL/2t9NAJDBLN/QeQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/25cb665a63151021db00d7d61c5a4aef/ba381/presentation-mode-2.webp 200w,\n/static/25cb665a63151021db00d7d61c5a4aef/7f61c/presentation-mode-2.webp 400w,\n/static/25cb665a63151021db00d7d61c5a4aef/d00b9/presentation-mode-2.webp 800w,\n/static/25cb665a63151021db00d7d61c5a4aef/92f8c/presentation-mode-2.webp 1200w,\n/static/25cb665a63151021db00d7d61c5a4aef/fad48/presentation-mode-2.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/25cb665a63151021db00d7d61c5a4aef/772e8/presentation-mode-2.png 200w,\n/static/25cb665a63151021db00d7d61c5a4aef/e17e5/presentation-mode-2.png 400w,\n/static/25cb665a63151021db00d7d61c5a4aef/5a190/presentation-mode-2.png 800w,\n/static/25cb665a63151021db00d7d61c5a4aef/c1b63/presentation-mode-2.png 1200w,\n/static/25cb665a63151021db00d7d61c5a4aef/29007/presentation-mode-2.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/25cb665a63151021db00d7d61c5a4aef/5a190/presentation-mode-2.png\"\n            alt=\"presentation-mode-2.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>ショートカットキーは、Macだと<code class=\"language-text\">option + u</code>、Windowsだと<code class=\"language-text\">alt + u</code>です。\nパワーポイントのように、左側にページ一覧が表示されるモードです。</p>\n<h4 id=\"全ページ表示モード\" style=\"position:relative;\"><a href=\"#%E5%85%A8%E3%83%9A%E3%83%BC%E3%82%B8%E8%A1%A8%E7%A4%BA%E3%83%A2%E3%83%BC%E3%83%89\" aria-label=\"全ページ表示モード permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>全ページ表示モード</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAABcRAAAXEQHKJvM/AAADBElEQVR42m3QX0hTcRQH8HPv7r377/5o2nbv7u6u27zb3d2mOVN7CKZTS5KioMI2sLI0S9sfao4c2korqKgeMuilCB/sxZ7sIdP+gJYYKlpU0B8wSnrqxZCMXywjKjpP3/Pw4Xs48OjB2IPR+0+fjN+6eaN+U11NdVVtTXWouiq81dfWFDrauu1AU/2+vVsTR3elj+2uqq6tqa3dt39/IpFobm6GeLo32tWb6D4TTfe2p04eTmUOJXvaU5loKtl56tSJvnM9mTMnu8+ezlzoSnd1RKOxeLy9vSMSifT39wNusGl5v8IkgIYBrUWTbzeybjDyoLPladg2zHRd7Rvm/LMbue2SFQBkGOA4DgDhcBhUnM8sluc6S5VWL8l6OWdxqT+74oyrojS0kLz89eLVb7evoPeXjhzcDAByOUlRFABEIhGgGJEwuwjaTTHiz+zG1gqURQSddUdzx/MPC2Mzs4/nXr76+CXW2Q2QrV1tbmxsBBXn1fB+tc2n4rwUI+rsJQVi+VqpEvRcqvcCQmh6eubV/CRCaGBgYBXLZDIAaGlpAdBzWC6PGW2gs+IFTj3vU7MehcUDKlP67CWE0OfFhcWPbxFCg4ODf+J4PA4NkdaGSOuWcMu2psO2QBA3uTR8iUFYD3mOPW2JhxOTQ8P37twdGR2fTKV7AADDsFUcjUYBIbSysrLy/TtC6Hh339DwyOT03MijieT5a0S+PXvUGgcYbNn/q9fAz/mFY7EsXlpaWl5eRgidyPR9Wlx8/+6t5BbsDruKFvSOdSZPhcFZquGLiVzLv/jZ7PzUzNzUzNyL12927m2tDIaCdfUYqcYVWgUjkIxIMqKCESmL9B+cJ5Tp7OtUVq/SKpG0SBYUaTif3hlQcj4FK1G0O6ewOIf3k4znNyZ+Y8a3Id+9XslKhNmFm4T8ooAzEDQ6AyQtyVmJoEWjUGYUykiLROT91RyLxcAWCPKBYGFZlb08pHOUELRLyYoq1qNlnRqrS04XKRgXZS6iaEFmMAMGOVrCoJcDwPFk5w938uqouzyP0gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/bc7839c5e9e8be9394d622b8cbbe6cdd/ba381/presentation-mode-3.webp 200w,\n/static/bc7839c5e9e8be9394d622b8cbbe6cdd/7f61c/presentation-mode-3.webp 400w,\n/static/bc7839c5e9e8be9394d622b8cbbe6cdd/d00b9/presentation-mode-3.webp 800w,\n/static/bc7839c5e9e8be9394d622b8cbbe6cdd/92f8c/presentation-mode-3.webp 1200w,\n/static/bc7839c5e9e8be9394d622b8cbbe6cdd/fad48/presentation-mode-3.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/bc7839c5e9e8be9394d622b8cbbe6cdd/772e8/presentation-mode-3.png 200w,\n/static/bc7839c5e9e8be9394d622b8cbbe6cdd/e17e5/presentation-mode-3.png 400w,\n/static/bc7839c5e9e8be9394d622b8cbbe6cdd/5a190/presentation-mode-3.png 800w,\n/static/bc7839c5e9e8be9394d622b8cbbe6cdd/c1b63/presentation-mode-3.png 1200w,\n/static/bc7839c5e9e8be9394d622b8cbbe6cdd/29007/presentation-mode-3.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/bc7839c5e9e8be9394d622b8cbbe6cdd/5a190/presentation-mode-3.png\"\n            alt=\"presentation-mode-3.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>ショートカットキーは、Macだと<code class=\"language-text\">option + g</code>、Windowsだと<code class=\"language-text\">alt + g</code>です。\n全ページがグリッド表示されるモードです。発表後の、質問タイムなどに使えます。</p>\n<h3 id=\"テーマ指定方法\" style=\"position:relative;\"><a href=\"#%E3%83%86%E3%83%BC%E3%83%9E%E6%8C%87%E5%AE%9A%E6%96%B9%E6%B3%95\" aria-label=\"テーマ指定方法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>テーマ指定方法</h3>\n<p>テーマのカスタマイズについては<a href=\"https://github.com/jxnblk/mdx-deck/blob/master/docs/theming.md\">公式ドキュメント</a>を見ると良いです。\nここでは<a href=\"https://github.com/Takumon/mdx-deck-sample/blob/master/components/theme.js\">僕のスライドのソースコード</a>を例にしてにカスタマイズ方法を紹介します。</p>\n<h4 id=\"デフォルトテーマをカスタマイズする\" style=\"position:relative;\"><a href=\"#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%83%86%E3%83%BC%E3%83%9E%E3%82%92%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA%E3%81%99%E3%82%8B\" aria-label=\"デフォルトテーマをカスタマイズする permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>デフォルトテーマをカスタマイズする</h4>\n<div class=\"gatsby-code-title\">theme.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> theme <span class=\"token keyword\">from</span> <span class=\"token string\">'mdx-deck/themes'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>theme<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// カスタマイズしたいプロパティを定義</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"セクションタイトルなどをレスポンシブ対応する\" style=\"position:relative;\"><a href=\"#%E3%82%BB%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%E3%81%AA%E3%81%A9%E3%82%92%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B7%E3%83%96%E5%AF%BE%E5%BF%9C%E3%81%99%E3%82%8B\" aria-label=\"セクションタイトルなどをレスポンシブ対応する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>セクションタイトルなどをレスポンシブ対応する</h3>\n<p>画面サイズに応じたスタイルを指定するには、メディアクエリを指定する必要があります。\nテーマの設定においてメディアクエリは以下のような形で指定できます。</p>\n<div class=\"gatsby-code-title\">theme.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> theme <span class=\"token keyword\">from</span> <span class=\"token string\">'mdx-deck/themes'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>theme<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">h1</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">textTransform</span><span class=\"token operator\">:</span> <span class=\"token string\">'uppercase'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontWeight</span><span class=\"token operator\">:</span> <span class=\"token number\">600</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'1rem'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">letterSpacing</span><span class=\"token operator\">:</span> <span class=\"token string\">'.02rem'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'@media screen and (min-width:480px) and (min-height: 400px)'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'1.5rem'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">letterSpacing</span><span class=\"token operator\">:</span> <span class=\"token string\">'.03rem'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'@media screen and (min-width:640px) and (min-height: 500px)'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'2.5rem'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">letterSpacing</span><span class=\"token operator\">:</span> <span class=\"token string\">'.04rem'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'@media screen and (min-width:1020px) and (min-height: 830px)'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'4rem'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">letterSpacing</span><span class=\"token operator\">:</span> <span class=\"token string\">'.05rem'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"画面遷移方式をカスタマイズする\" style=\"position:relative;\"><a href=\"#%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB%E6%96%B9%E5%BC%8F%E3%82%92%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA%E3%81%99%E3%82%8B\" aria-label=\"画面遷移方式をカスタマイズする permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>画面遷移方式をカスタマイズする</h3>\n<p>横スライドしかできませんが、\n遷移における、速度変化の割合（CSSでいう<code class=\"language-text\">transition-timing-function</code>）と時間を指定できます。\n自分の場合は、アニメーションをオフにしたかったので、時間は0にしました。</p>\n<div class=\"gatsby-code-title\">theme.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> theme <span class=\"token keyword\">from</span> <span class=\"token string\">'mdx-deck/themes'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>theme<span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 横スライドするでデジ曲線のパターン</span>\n  <span class=\"token literal-property property\">transitionTimingFunction</span><span class=\"token operator\">:</span> <span class=\"token string\">'linear'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// スライドにかかる時間</span>\n  <span class=\"token literal-property property\">transitionDuration</span><span class=\"token operator\">:</span> <span class=\"token string\">'0s'</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"ソースコードのシンタックスハイライトを指定する\" style=\"position:relative;\"><a href=\"#%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E3%82%B7%E3%83%B3%E3%82%BF%E3%83%83%E3%82%AF%E3%82%B9%E3%83%8F%E3%82%A4%E3%83%A9%E3%82%A4%E3%83%88%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B\" aria-label=\"ソースコードのシンタックスハイライトを指定する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ソースコードのシンタックスハイライトを指定する</h3>\n<p><a href=\"https://www.npmjs.com/package/react-syntax-highlighter\">react-syntax-highlighter</a>をインストールして、以下のように指定します。\nお好きなテーマを選びましょう。自分はatomDarkにしました。</p>\n<div class=\"gatsby-code-title\">theme.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> theme <span class=\"token keyword\">from</span> <span class=\"token string\">'mdx-deck/themes'</span>\n<span class=\"token keyword\">import</span> atomDark <span class=\"token keyword\">from</span> <span class=\"token string\">'react-syntax-highlighter/styles/prism/atom-dark'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>theme<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">prism</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">style</span><span class=\"token operator\">:</span> atomDark\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"ソースコードプレビューをレスポンシブ対応する\" style=\"position:relative;\"><a href=\"#%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%83%97%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B7%E3%83%96%E5%AF%BE%E5%BF%9C%E3%81%99%E3%82%8B\" aria-label=\"ソースコードプレビューをレスポンシブ対応する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ソースコードプレビューをレスポンシブ対応する</h3>\n<p>MDE-Deckのテーマは、<code class=\"language-text\">h1～h6</code>, <code class=\"language-text\">ul</code>, <code class=\"language-text\">ol</code>, <code class=\"language-text\">li</code>タグのスタイルは指定できるのですが、\n<strong>😭ソースコードプレビューのタグである<code class=\"language-text\">pre</code>の指定はテーマではできません😭</strong>\nそのためテーマではなく、レイアウトコンポーネントを作ることで対応しました。</p>\n<div class=\"gatsby-code-title\">layout-aligne-center.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> styled <span class=\"token keyword\">from</span> <span class=\"token string\">'styled-components'</span>\n\n<span class=\"token keyword\">const</span> Wrapper <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>main<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  width: 100vw;\n  height: 100vh;\n  padding: 1rem;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  justify-content: center;\n  position: relative;\n\n  pre {\n    max-width: 90vw;\n    max-height: 80vh;\n    font-size: 0.5rem;\n\n    @media screen and (min-width:480px) and (min-height: 400px) {\n      font-size: 0.8rem;\n    }\n    @media screen and (min-width:640px) and (min-height: 500px) {\n      font-size: 1rem;\n    }\n    @media screen and (min-width:1020px) and (min-height: 830px) {\n      font-size: 1.8rem;\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">LayoutAlignCenter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Wrapper</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Wrapper</span></span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> LayoutAlignCenter</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"ビルド周りの注意点\" style=\"position:relative;\"><a href=\"#%E3%83%93%E3%83%AB%E3%83%89%E5%91%A8%E3%82%8A%E3%81%AE%E6%B3%A8%E6%84%8F%E7%82%B9\" aria-label=\"ビルド周りの注意点 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ビルド周りの注意点</h3>\n<h4 id=\"htmlに出力する\" style=\"position:relative;\"><a href=\"#html%E3%81%AB%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B\" aria-label=\"htmlに出力する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTMLに出力する</h4>\n<p><code class=\"language-text\">mdx-deck build</code>では<strong>😭mdxファイルで指定した画像を出力してくれません😭</strong>\nそのため以下のようにしてビルド時に自分でコピーする必要があります。\nnpmスクリプトは以下のようにしました。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\">    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mdx-deck build --no-html deck.mdx &amp; cpx \\\"images/*\\\" ./dist/images\"</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4 id=\"pdfに出力する\" style=\"position:relative;\"><a href=\"#pdf%E3%81%AB%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B\" aria-label=\"pdfに出力する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PDFに出力する</h4>\n<p>npmスクリプトは以下の縦幅と横幅を指定して出力するようにしました。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\">    <span class=\"token property\">\"pdf\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mdx-deck pdf --width 1377 --height 756 deck.mdx\"</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>😭ただ文字の大きさなどのレイアウトが思い通りにいかない部分がありました😭</strong></p>\n<ul>\n<li>Code Surferのアニメーション非対応\n<ul>\n<li>ソースコードの全量が表示されるのみ、アニメーションごとの説明は表示されない</li>\n</ul>\n</li>\n<li>Appearタグのアニメーション非対応\n<ul>\n<li>アニメーションごとにスライドを分けたりはできない。最終結果のみ表示される</li>\n</ul>\n</li>\n<li>左右分割レイアウト非対応\n<ul>\n<li>何も表示されない。空白のページが出力される。</li>\n</ul>\n</li>\n<li>絵文字は白黒になる</li>\n<li>文字が小さく表示される</li>\n</ul>\n<h4 id=\"スナップショットを出力する\" style=\"position:relative;\"><a href=\"#%E3%82%B9%E3%83%8A%E3%83%83%E3%83%97%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%E3%82%92%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B\" aria-label=\"スナップショットを出力する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>スナップショットを出力する</h4>\n<p>MDX-Deckでは一枚目のスライドをPNGで出力できます。\nnpmスクリプトは以下の縦幅と横幅を指定して出力するようにしました。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\">    <span class=\"token property\">\"screenshot\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mdx-deck screenshot --width 1200 --height 630 deck.mdx\"</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>😭ただこれもPDFと同様に、レイアウトが思い通りにいきませんでした😭</strong>\n本当はTwitterカード用の画像をこの機能で作りたかったのですが、結局断念してパワポで作りました。</p>\n<h3 id=\"シンタックス周りの注意点\" style=\"position:relative;\"><a href=\"#%E3%82%B7%E3%83%B3%E3%82%BF%E3%83%83%E3%82%AF%E3%82%B9%E5%91%A8%E3%82%8A%E3%81%AE%E6%B3%A8%E6%84%8F%E7%82%B9\" aria-label=\"シンタックス周りの注意点 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>シンタックス周りの注意点</h3>\n<p>2つほど注意点があります。</p>\n<ul>\n<li>HTMLタグやコンポーネントのタグ内に、マークダウンを記述しても素の文字列として認識されてしまう</li>\n<li>セクションタイトルを凝ったスタイルにしようとしてHTMLタグのh1 h2タグなどを使うと、テーマで指定したスタイルが有効にならない</li>\n</ul>\n<h3 id=\"プレゼン時の注意事項\" style=\"position:relative;\"><a href=\"#%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E6%99%82%E3%81%AE%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85\" aria-label=\"プレゼン時の注意事項 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プレゼン時の注意事項</h3>\n<p>こちらも注意が必要です。<br/>\nHTMLなので、レイアウトがディスプレイの解像度に左右されます。\nレスポンシブデザインにしたとしても、<strong>😭場合によっては文章が折り返されたりして、思い通りのレイアウトで表示されません😭</strong>\nそのため、プレゼンの前は、お試しでプロジェクターに映してレイアウトが崩れないか確認しましょう。\n崩れる場合は、ブラウザの拡大率で調整すればOKです。</p>\n<h3 id=\"mdxを使ったライブラリ\" style=\"position:relative;\"><a href=\"#mdx%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA\" aria-label=\"mdxを使ったライブラリ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MDXを使ったライブラリ</h3>\n<p>MDX-Deckの以外にも<a href=\"https://mdxjs.com/\">MDX</a>を使ったライブラリが何個かあります。</p>\n<ul>\n<li><a href=\"https://www.docz.site/\">docz</a>\n<ul>\n<li>手軽にReactコンポーネントガイドを作れるです。</li>\n</ul>\n</li>\n<li><a href=\"https://github.com/ChristopherBiscardi/gatsby-mdx\">gatsby-mdx</a>\n<ul>\n<li>Gatsbyのプラグイン。GatsbyでMDXが使えるようになります。</li>\n</ul>\n</li>\n</ul>\n<p>補足情報は以上です。</p>\n<h2 id=\"参加レポート\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E5%8A%A0%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88\" aria-label=\"参加レポート permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参加レポート</h2>\n<p><a href=\"https://twitter.com/engineer_osca\">OSCA</a>さんが主催する勉強会で、今回で11回目の開催です。\n今回の渋谷にある<a href=\"https://mixi.co.jp/\">ミクシィ</a>で行われました。広々としたスペースで夜景が見えるとても綺麗な会場でした。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8UlEQVR42hXOXUtTYRwA8PNVukmQVWfnxbN15hp1Mxn5RhBIUkTh1aJwkcWmJkZ3isKYpqar1A3dtGyz6TbIVadtYfgC4byJkgijizjn7Dwv/2erPsAPfhwrX4B3TshLNCPSlEhW7WRVxcsqXjqPohJ65kGTUi3eXtsMsvUQjrSaww5jSDX6XcaDZo4VXVCQIWujqZP0ZQNJNpJYA46JeKHJispsVjrKhSOpSnrX3KiAgRB60mWEJGPArd9XOabJUPTC9g3Y9rOdQSj3gRYg+Zsk6bWmGiHu03W9Z+77yMbv52VyuLdPx1r0kGT0u/Q+J8dKbii1sf17tV/v2dFr9iXMvq7Rwh3yqhMn2nC8g6T9x+XEn0+J+mGW7qXNYdl4qBoDbnPIy7GPDii2gNYOWjdo16l2i2Y6yfolvOLDSz4ca7UmZDpuo9MX2Y6fHY8ibZH+0KozPXpA5JgmwZYdNk/RXDP5HCJvr5KkgmM8XjyLnvJo8jSaOVcNO63oldrBtdruCVq6Xf/ZQXJBvVfhmCZCQYIcT7MOmveRtIckJBwT8LyMojKaEq0J2Qor1VGFZC6zylj9W6B+oKCFXv1uE8c+CLDFQ85O3/B0zUZWzpBl4T9+IaA5AU2LVkS0xsXqiGg+4s3HHjTbhea7jaD6r/0XQRI9dGjaU+sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/4eab536b17042dfeaa47e871289b000f/ba381/web-engineer-meetup.webp 200w,\n/static/4eab536b17042dfeaa47e871289b000f/7f61c/web-engineer-meetup.webp 400w,\n/static/4eab536b17042dfeaa47e871289b000f/cc661/web-engineer-meetup.webp 660w\"\n              sizes=\"(max-width: 660px) 100vw, 660px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/4eab536b17042dfeaa47e871289b000f/772e8/web-engineer-meetup.png 200w,\n/static/4eab536b17042dfeaa47e871289b000f/e17e5/web-engineer-meetup.png 400w,\n/static/4eab536b17042dfeaa47e871289b000f/1f083/web-engineer-meetup.png 660w\"\n            sizes=\"(max-width: 660px) 100vw, 660px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/4eab536b17042dfeaa47e871289b000f/1f083/web-engineer-meetup.png\"\n            alt=\"web-engineer-meatup\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span>\n<br/>\n<br/></p>\n<p>技術領域を限定していないので、フロントエンドからバックエンドまで色々な技術ネタを聞くことができ、非常に楽しい勉強会でした。\n以下にLT登壇者のスライドと感想を載せています。</p>\n<h3 id=\"写真共有アプリみてねに見る簡潔な良uiux\" style=\"position:relative;\"><a href=\"#%E5%86%99%E7%9C%9F%E5%85%B1%E6%9C%89%E3%82%A2%E3%83%97%E3%83%AA%E3%81%BF%E3%81%A6%E3%81%AD%E3%81%AB%E8%A6%8B%E3%82%8B%E7%B0%A1%E6%BD%94%E3%81%AA%E8%89%AFuiux\" aria-label=\"写真共有アプリみてねに見る簡潔な良uiux permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>写真共有アプリ「みてね」に見る簡潔な良UI/UX</h3>\n<p><strong><a href=\"https://twitter.com/ngmt83\">ngmt</a>さん</strong></p>\n<div style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 74.9288%;\"><iframe src=\"//speakerdeck.com/player/d7decad7104443288501c421631cc8a5\" style=\"border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;\" allowfullscreen scrolling=\"no\" allow=\"autoplay; encrypted-media\"></iframe></div>\n<br/>\n<p>ミクシィさんが作っている写真共有アプリ「みてね」の紹介です。\n実際ngmtさんが使ってみた感想を踏まえながら、\n「みてね」のUI/UXのすばらしさについて聞くことができました。\n「サービスとして『なんでも提供できる』は『何も提供していない』と同じ」という前提をもとに\n「みてね」は想定ユーザーを限定し、そこに対して使いやすさを追求することで簡潔なUI/UXを実現できている\nという話しの展開で、すごく納得させられるLTでした。</p>\n<br/>\n<br/>\n<h3 id=\"webエンジニアが知っておきたい決済の仕組み\" style=\"position:relative;\"><a href=\"#web%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E3%81%8C%E7%9F%A5%E3%81%A3%E3%81%A6%E3%81%8A%E3%81%8D%E3%81%9F%E3%81%84%E6%B1%BA%E6%B8%88%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF\" aria-label=\"webエンジニアが知っておきたい決済の仕組み permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WEBエンジニアが知っておきたい決済の仕組み</h3>\n<p><strong><a href=\"https://twitter.com/ykagano\">ykagano</a>さん</strong></p>\n<div style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 69.1563%;\"><iframe src=\"//speakerdeck.com/player/2f10fe62a6d541acb0a42deb95e3828b\" style=\"border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;\" allowfullscreen scrolling=\"no\" allow=\"autoplay; encrypted-media\"></iframe></div>\n<br/>\n<p>通称「おーそり」と呼ばれる「オーソライゼーション」や「クリアリング」「セツルメント」までの決済の一連の流れと登場人物を\n図解で説明してくれていて、決済システムに詳しくない自分でも理解することができました。\n<a href=\"https://twitter.com/ykagano\">ykagano</a>さんのしゃべりは非常に聞きやすく、\n、聴衆への視線の配り方、間の取り方などはぜひ参考にしたいところです。</p>\n<br/>\n<br/>\n<h3 id=\"心理的安全性とは-保ち方壊し方-などについて\" style=\"position:relative;\"><a href=\"#%E5%BF%83%E7%90%86%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E3%81%A8%E3%81%AF-%E4%BF%9D%E3%81%A1%E6%96%B9%E5%A3%8A%E3%81%97%E6%96%B9-%E3%81%AA%E3%81%A9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\" aria-label=\"心理的安全性とは 保ち方壊し方 などについて permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>心理的安全性とは？ 保ち方、壊し方 などについて</h3>\n<p><strong><a href=\"https://connpass.com/user/NagaakiHoshi/\">星 永亮</a>さん</strong></p>\n<div style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 74.9288%;\"><iframe src=\"//speakerdeck.com/player/10bca2b777d64c1296af7b63d695b427\" style=\"border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;\" allowfullscreen scrolling=\"no\" allow=\"autoplay; encrypted-media\"></iframe></div>\n<br/>\n<p>最近はやりのワードについてのLTでした。\n心理的安全性が高い状態に持っていくには、誰かが継続的に行動しないと実現できないんだなぁと実感しました。\n「セーフティー」という言葉を社内に流行らせようとしている<a href=\"https://connpass.com/user/NagaakiHoshi/\">星 永亮</a>さんの行動はとても素晴らしいと思います！！</p>\n<br/>\n<br/>\n<h3 id=\"なぜ僕はプログラミングが苦手なのか\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%9C%E5%83%95%E3%81%AF%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%81%8C%E8%8B%A6%E6%89%8B%E3%81%AA%E3%81%AE%E3%81%8B\" aria-label=\"なぜ僕はプログラミングが苦手なのか permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なぜ僕はプログラミングが苦手なのか</h3>\n<p><strong><a href=\"https://twitter.com/3s_hv\">VTRyo</a>さん</strong></p>\n<div style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 74.9288%;\"><iframe src=\"//speakerdeck.com/player/94caa136a9b74483a9f897f41cff4220\" style=\"border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;\" allowfullscreen scrolling=\"no\" allow=\"autoplay; encrypted-media\"></iframe></div>\n<br/>\n<p>「他の人が短時間で簡単に実現できることを、自分がそれの何倍も時間がかかってやっと実現できた」ときに「自分はセンスないな」と劣等感を抱いてしまいがちです。\nしかしセンスの有無について以下のように解釈すると、劣等感を打破して前に進んでいけるというお話でした。</p>\n<ul>\n<li>センスある人 = これまでの経験により必要な感覚が備わっている</li>\n<li>センスがない人 = まだ習慣が備わってない人</li>\n</ul>\n<p>自分も新人のころ「自分はセンスない」と落ち込んだりしたことがあるので、非常に共感させられるLTでした。\n<br/>\n<br/></p>\n<h3 id=\"grpc入門\" style=\"position:relative;\"><a href=\"#grpc%E5%85%A5%E9%96%80\" aria-label=\"grpc入門 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gRPC入門</h3>\n<p><strong><a href=\"https://twitter.com/mzryuka\">みずりゅ</a>さん</strong></p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 75%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <iframe src=\"https://esa-pages.io/p/sharing/10496/posts/38/86b73fd543ff1f842540-slides.html\" style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> <br> </div>\n<p>いろんな言語でgRPCを試したという内容でした。\nスライドが<a href=\"https://esa.io/\">esa</a>のプレゼンモードで、\n画面遷移時に、<strong>↓↓esaのキャラクター↓↓</strong>がにゅにゅにゅっと動くのがかわいかったです。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 212px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB9klEQVR42qWQS2gTURiFxwFNCXEwSfNQd24FdeXWXVNXrlIsXSjiIjZulFlUBLsS2smjmZl7500VxUWtpoq4MC4sCAlJbdWFWgyVgigUXahQcNG5R2byILUoES98nPv4/8P5Lxc8k04K1yZGhckrp/+LqxOjwbGx/ZyQzaQiDkXEoayt24g6FPFZHfFZzd/vqLFJq89SIVwaH+aE7PmUd4hYKmtrl6inNkFAK2JAm8GgTfB7TcRUWn2G/HfDuE18g6hFcOrRfQwvzGGfqSDmUMR6jfsx9JKF9BJ4NY9bq2/QWdPLDXCyhJAht9L3axg2FZRevsDj9TV8/PINbysqVisUzY2vuLf2HurrZT9luLfvT4Ze4R5awPWlmp/qJwM+rZTx+dVDf++t/MqSX9Mevb8/3KuXkHlWwcbmZnfk9R/fMb74FIIhd9LtHDmczaQSNkHCoW7CJqzDAYeyACmwoYW77MmHJnvQfMeOz91mA6TADjqUxSyVDfoQ19eOIXfh3BBPCuBpcYunRbeX3dqMu0uRXM5Dllxezfl33lvQVNyQpbohU9nyVZcRuJxNcWenplJSvQqpXmVt3UauUUOuR6frVeQbNZy4aeOwVsIxQ2FHDQVHNBmHLmZOcpOimFycnx95Xi6n/4U7jpO+YZpdLF0fEUUx+QscqyH51F60fwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c3db08be04626dd26597d742352ca981/ba381/esa-icon.webp 200w,\n/static/c3db08be04626dd26597d742352ca981/f19c9/esa-icon.webp 212w\"\n              sizes=\"(max-width: 212px) 100vw, 212px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c3db08be04626dd26597d742352ca981/772e8/esa-icon.png 200w,\n/static/c3db08be04626dd26597d742352ca981/9f128/esa-icon.png 212w\"\n            sizes=\"(max-width: 212px) 100vw, 212px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c3db08be04626dd26597d742352ca981/9f128/esa-icon.png\"\n            alt=\"esa-icon.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<br/>\n<br/>\n<h3 id=\"word-cloudでツイートを可視化してみた\" style=\"position:relative;\"><a href=\"#word-cloud%E3%81%A7%E3%83%84%E3%82%A4%E3%83%BC%E3%83%88%E3%82%92%E5%8F%AF%E8%A6%96%E5%8C%96%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F\" aria-label=\"word cloudでツイートを可視化してみた permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Word Cloudでツイートを可視化してみた</h3>\n<p><strong><a href=\"https://twitter.com/naoto_7713\">なおと</a>さん</strong></p>\n<div style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 75.0019%; padding-top: 38px;\"><iframe src=\"https://www.slideshare.net/slideshow/embed_code/key/3LF05HDXS8WFos\" style=\"border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;\" allowfullscreen scrolling=\"no\" allow=\"autoplay; encrypted-media\"></iframe></div>\n<br/>\n<p>WEBエンジニア勉強会#11に関するツイートをワードクラウド化するデモが印象的でした。</p>\n<blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"ja\" dir=\"ltr\">LT楽しかったです。セーフティーですね<br>ツイート数の合計は368でした！！また、word cloudしたものです。<a href=\"https://twitter.com/hashtag/web%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E5%8B%89%E5%BC%B7%E4%BC%9A11?src=hash&amp;ref_src=twsrc%5Etfw\">#webエンジニア勉強会11</a> <a href=\"https://t.co/Ytx1JAPDMA\">pic.twitter.com/Ytx1JAPDMA</a></p>&mdash; なおと (@naoto_7713) <a href=\"https://twitter.com/naoto_7713/status/1091364920807964673?ref_src=twsrc%5Etfw\">2019年2月1日</a></blockquote>\n<br/>\n<p>Twitter APIと形態素解析のライブラリとWord Cloudを組み合わせだそうで、比較的簡単に実装できそうなので自分でも試してみたいです。\n<a href=\"https://qiita.com/turmericN/items/04cd0b40f91076f0ef42\">Qiita</a>にも投稿されてますね！</p>\n<br/>\n<br/>\n<h3 id=\"フロントエンドコーディングにおけるpagespeed-insights対策\" style=\"position:relative;\"><a href=\"#%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8Bpagespeed-insights%E5%AF%BE%E7%AD%96\" aria-label=\"フロントエンドコーディングにおけるpagespeed insights対策 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>フロントエンドコーディングにおけるPageSpeed Insights対策</h3>\n<p><strong><a href=\"https://twitter.com/kkoudev\">kkoudev</a>さん</strong></p>\n<div style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.1987%;\"><iframe src=\"//speakerdeck.com/player/0c7e921dcb7041e898071b8c8690b8c1\" style=\"border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;\" allowfullscreen scrolling=\"no\" allow=\"autoplay; encrypted-media\"></iframe></div>\n<br/>\n<p><a href=\"https://www.amazon.co.jp/dp/B07JJ344WK/ref=dp-kindle-redirect?_encoding=UTF8&#x26;btkr=1\">超速本</a>を思い出す内容でした。フロントエンドのパフォーマンスを改善するための具体的な方法の紹介でしたが、\nちょいちょい「IE11だけは～」みたいな話がありIE11の闇を感じました。</p>\n<br/>\n<br/>\n<h2 id=\"まとめ初ltの感想\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81%E5%88%9Dlt%E3%81%AE%E6%84%9F%E6%83%B3\" aria-label=\"まとめ初ltの感想 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ（初LTの感想）</h2>\n<p>正式な登壇枠でのLTは、実は今回が初でした。\nなんとなく「LTやりたい」と思っていた状態から実行に移せたのは、ひとえに周りの方々のおかげです。\n背中を押してくれた<a href=\"https://twitter.com/kakakakakku\">@kakakakakku</a>さん、<br/>\n資料レビューをしてくれた #write_blog_every_week の皆さん、<br/>\n誤字脱字を隅々までチェックして、練習に付き合ってくれた会社の後輩くん、<br>\n本当にありがとうございました。\n今後も別の勉強会でLTしたり、<a href=\"https://web-engineer-meetup.connpass.com/\">WEBエンジニア勉強会</a>に参加したいと思います🍅</p>","excerpt":"なにこれ 2019/2/1(金)、WEBエンジニア勉強会 #11でLTしてきました。\n本記事では自分のLTスライドと、10分の枠では伝えきれなかった補足情報を紹介します。\nまた他の方のLTの様子や、勉強会の雰囲気なども参加レポートとして書いています。 LT…","frontmatter":{"slug":"/mdx-deck-and-code-surfer","title":"WEBエンジニア勉強会 初LT感想と参加レポート / 「MDX-DeckとCode Surferでスライドを作ろう！」補足情報","date":"2019-02-03T17:15:00.000+09:00","tags":["勉強会","LT","mdx-deck","mdx","code-surfer","markdown","プレゼン","スライド"],"keywords":["mdx-deck"],"thumbnail":"thumbnail/2019/02/mdx-deck-and-code-surfer.png","category":null}},"next":{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>以前の記事<a href=\"graphpack-graphql-zero-config-server\">設定いらずのNode製GraphQLサーバー「Graphpack」の使い方</a>でGraphQLのサーバー側を実装を紹介しました。\nGraphpackは備え付けの<a href=\"https://github.com/prisma/graphql-playground\">GraphQL Playground IDE</a>で動作確認できますが、せっかくなので今回はクライアント側も作成してみました。\n本記事では**<a href=\"https://ja.nuxtjs.org/\">Nuxt.js</a>と<a href=\"https://www.apollographql.com/docs/react/api/apollo-client.html\">Apollo Client</a>を使って簡単なユーザー管理画面を作成する方法をチュートリアル形式でご紹介します。**<br/>\n最終的にはQuery, Mutation, Subscription全てを実装しますが、\n以下のようにステップを分けて、少しずつ実装していきましょう✨</p>\n<ul>\n<li><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\">🔰 プロジェクトのひな型を作成する</a></li>\n<li><a href=\"#query%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💪 Queryを実装する</a> → ユーザー情報が一覧で表示できる</li>\n<li><a href=\"#mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💖 Mutationを実装する</a> → ユーザーの登録・更新・削除ができる</li>\n<li><a href=\"#subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\">💎 Subscriptionを実装する</a> → 他ブラウザとリアルタイムでユーザー情報が同期する</li>\n</ul>\n<p>完成イメージ\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 534px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACqUlEQVR42pWSXWsTQRSGp7f9uCxCf0H/gt4oxfwXpZfir5GWCH40XjaCrYpCMK1NMEKTmnS3ZpPszuzObmY2McnmY2bzyi6ttpILe+BlzmHgmXPeOWRj4872/Qf39zOZzKutra29RA+3Hu5d5ZlMZm9zc3NvaWkpFSFkkV4SQvYJIY/Ik6dPnzdaTZimqWzHAWMUjLFUDnUgpcSLly9w9+49rK+vY3l5Gaurq/9Kra2tYWVlZZd8/PRxtysEKKWTer2uKWPaoVR3HKrbtq2ZxzV1Xf2t8l2flMr6+OuJ/npSTvNrmpz9qCOff/uMfPlSyBrnBqrVmpJSQMoQMgwhpEQY9jAYDhGNx5jOZpgphfkcUFr/qdMzSQA0m80dcnDwLhv4AWq1qmo2W7ges9kM/X4vBSYxn89hGiYGg0Fax3F8dabAVqu1Q4rHxWxS+Jyr+o8GtI4xGY8xGo0QhiGa1k94nGMcjTGdTmEYRuov5xyJVckkAFJgu93eIaZpZmOtEw9Vr9fDOIrAXQ+dTgd+EMB1XTBK4Xle+kAURWhZFo6OjpD4Vq1WbwLPzqpZrRRsmyrP43BsB4Hfhe/7ELKXdsc8hqAbIJQSv34N4Dg2KpUKzIsLGIZ5E9hoNNKRu0Io7nuw2m0EQsBhNjyXwbY7cFwHnLuQoUytSEY+PT1F07Jw8fPiJrBQ+JwdDodJ6yrx5U0uh/cHh7j8BSyKeD6H1jr9lEv9BR4Xi9nkknNPmaYB5jIkD6h0RRYDF8T1DgtZIQXOjXNVLpdgWRa4H2AURX/W4lbADx8Od4ejEUS3OwmCQHPuaSGkjqJIK6V0HMf/o8kl8Bmp1U6fJ0W/31fDwRAuY6k/t4yrxd4lpVJpm3Oep5S+ppTlGGM5z/NyQRDcRq+EEPlKpfL4N6SiBI30pOpEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/33a6b1c1ac9f570529d394f2fb3020b4/ba381/project-image-4.webp 200w,\n/static/33a6b1c1ac9f570529d394f2fb3020b4/7f61c/project-image-4.webp 400w,\n/static/33a6b1c1ac9f570529d394f2fb3020b4/29722/project-image-4.webp 534w\"\n              sizes=\"(max-width: 534px) 100vw, 534px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/33a6b1c1ac9f570529d394f2fb3020b4/772e8/project-image-4.png 200w,\n/static/33a6b1c1ac9f570529d394f2fb3020b4/e17e5/project-image-4.png 400w,\n/static/33a6b1c1ac9f570529d394f2fb3020b4/a07a7/project-image-4.png 534w\"\n            sizes=\"(max-width: 534px) 100vw, 534px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/33a6b1c1ac9f570529d394f2fb3020b4/a07a7/project-image-4.png\"\n            alt=\"project-image-4\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>完成品はGitHubに置いております。躓いたときは参考にしてください。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"\" data-iframely-url=\"//cdn.iframe.ly/HQ2E77R\"></a></div></div>\n<h2 id=\"プロジェクトのひな型を作成する\" style=\"position:relative;\"><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%B2%E3%81%AA%E5%9E%8B%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\" aria-label=\"プロジェクトのひな型を作成する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プロジェクトのひな型を作成する</h2>\n<ul>\n<li>create-nuxt-appで雛形を作成します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">npx create-nuxt-app client</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br/>\n<ul>\n<li>何個か質問されるので以下のように答えます。<code class=\"language-text\">Author name</code>は読み替えてください。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">? Project name client\n? Project description My amazing Nuxt.js project\n? Use a custom server framework none\n? Choose features to install\n? Use a custom UI framework none\n? Use a custom test framework none\n? Choose rendering mode Single Page App\n? Author name Takumon\n? Choose a package manager npm</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<ul>\n<li>アプリを起動しましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">cd client\nnpm run dev</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">http://localhost:3000</code>にアクセスして以下の画面が表示されればOKです。</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACGUlEQVR42p1Tz2sTQRTeP8Rj8BDwVAlFUK9ePOutZyt6VAtpDTl6ENFE0ICHFkHwJFgoTVxEaCFWhDZBWqzWxrYbDdnZ7I+Znd2Z+WQnP6iaxNQPPt7bt+99+968WePO3Nxa7m6uksvlzHw+b2azWTOdTpuGYUzEVCplnpuermQymWp6amrGII4Dy7KkbRO02zZs4mC1XMGjQgGFYvGffPK0hGLxsSiVSri1sDBvAIDneTGlVCZkjEkAJ2WU6GzUalktKKVMggMopZKYpvaVgug9j6BI6qpbW/NDBbUolLYWJdjzfmo/ER4GpZQW/FCvjxaUqhu6/2kZV1ceYOXj+0H3Jxbsd7LjHOLSu3s4e3sWF2/ewB75MbTTsYL9VCkVrm08w+nCdZy5cAWnzl/GbOnhIElNLthNtUMfzxvrWHpbxuKL11h8uYylN6vohMFfo090hgm4z+G6vh4xFgKM8v87wwQh59htHKC+8wXbn7+htr2Lr/sHiGMxuWBikoK+DSgD5xF4FCGKYu0L0X0nhBh0O1IwDDmI4yIIGAhxQRwPTseD6wVwOr6mHzC02h3YxEUUx70FyvEjJ19mEQflIXzGEEaRPgLfp6CM967NmKUIIWJ5DEII6TEqiedK2+3IIGSSMiaJ40rfp1IK3cHxEv0vVzc3s2O3PCl+6/Cw1VprWFal0Wyax7l/dDSSf+Ym9d+bzeqrcnnmFyuNxd+dHFn/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f3c326aeaaf78f38be299a7a6197602e/ba381/project-image-1.webp 200w,\n/static/f3c326aeaaf78f38be299a7a6197602e/7f61c/project-image-1.webp 400w,\n/static/f3c326aeaaf78f38be299a7a6197602e/d00b9/project-image-1.webp 800w,\n/static/f3c326aeaaf78f38be299a7a6197602e/82aba/project-image-1.webp 904w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f3c326aeaaf78f38be299a7a6197602e/772e8/project-image-1.png 200w,\n/static/f3c326aeaaf78f38be299a7a6197602e/e17e5/project-image-1.png 400w,\n/static/f3c326aeaaf78f38be299a7a6197602e/5a190/project-image-1.png 800w,\n/static/f3c326aeaaf78f38be299a7a6197602e/d9217/project-image-1.png 904w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f3c326aeaaf78f38be299a7a6197602e/5a190/project-image-1.png\"\n            alt=\"project-image-1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<ul>\n<li>次にApollo Clientを導入します。<a href=\"https://www.npmjs.com/package/@nuxtjs/apollo\">@nuxtjs/apollo</a>をインストールしましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">npm i @nuxtjs/apollo</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">nuxt.config.js</code>に以下設定を追加します。</li>\n</ul>\n<div class=\"gatsby-code-title\">nuxt.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n  <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'@nuxtjs/apollo'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">apollo</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">clientConfigs</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Graphpack側のエンドポイントを指定します。</span>\n        <span class=\"token literal-property property\">httpEndpoint</span><span class=\"token operator\">:</span> <span class=\"token string\">'http://localhost:4000/graphql'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Subscription用にWebSocketの設定も追加します。</span>\n        <span class=\"token literal-property property\">wsEndpoint</span><span class=\"token operator\">:</span> <span class=\"token string\">'ws://localhost:4000/graphql'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">websocketsOnly</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> \n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>これで準備は整いました。\n次からは本格的な実装に入っていきます。</p>\n<h2 id=\"queryを実装する\" style=\"position:relative;\"><a href=\"#query%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-label=\"queryを実装する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Queryを実装する</h2>\n<h3 id=\"実装\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-label=\"実装 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー情報取得用のクエリ<code class=\"language-text\">apollo/queries/getUsers.gql</code>を作成します。今回は<code class=\"language-text\">apollo/queries</code>配下にgqlファイルを作成することにします。</li>\n</ul>\n<div class=\"gatsby-code-title\">apollo/queries/getUsers.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token definition-query function\">GetUsers</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">users</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">id</span>\n        <span class=\"token property\">name</span>\n        <span class=\"token property\">email</span>\n        <span class=\"token property\">age</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<ul>\n<li>次に<code class=\"language-text\">pages/index.vue</code>を修正します。ここでは<a href=\"https://github.com/Akryum/vue-apollo/blob/master/docs/api/smart-query.md\">SmartQuery</a>を使い、コンポーネントにapolloオブジェクトを定義してApollo Clientを呼び出す方法を使います。 <small>※今回デザインは一切気にしないので<code class=\"language-text\">&lt;style>～&lt;/style></code>の部分を削除しています。</small></li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vue</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>table<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token constant\">ID</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>名前<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>メール<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>年齢<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>tr v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"item in users\"</span> <span class=\"token operator\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"item.id\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>email <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> getUsersGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/queries/getUsers.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">users</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">apollo</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">users</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> getUsersGql\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"動作確認\" style=\"position:relative;\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-label=\"動作確認 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<h4 id=\"サーバー側起動\" style=\"position:relative;\"><a href=\"#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E5%81%B4%E8%B5%B7%E5%8B%95\" aria-label=\"サーバー側起動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>サーバー側起動</h4>\n<ul>\n<li>\n<p>GraphQLサーバを起動します。以下2通り、お好きなほうで起動してください。</p>\n<ul>\n<li>サーバー側を作成する\n<ul>\n<li><a href=\"graphpack-graphql-zero-config-server\">以前のGraphpackの記事</a>にしたがって作成</li>\n<li>作成したアプリに移動</li>\n<li><code class=\"language-text\">npm run dev</code></li>\n</ul>\n</li>\n<li><a href=\"https://github.com/Takumon/nuxt-graphpack-sample\">本記事のサンプルコード</a>を使う\n<ul>\n<li><code class=\"language-text\">git clone https://github.com/Takumon/nuxt-graphpack-sample.git</code></li>\n<li><code class=\"language-text\">cd nuxt-graphpack-sample/server</code></li>\n<li><code class=\"language-text\">npm i</code></li>\n<li><code class=\"language-text\">npm run dev</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>GraphQLサーバーの起動確認をします。<code class=\"language-text\">http://localhost:4000/</code>にアクセスして以下のクエリを発行しユーザー情報が返ってくればOKです。</p>\n</li>\n</ul>\n<div class=\"gatsby-code-title\">サーバー動作確認用クエリ</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token object\">users</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">id</span>\n    <span class=\"token property\">name</span>\n    <span class=\"token property\">email</span>\n    <span class=\"token property\">age</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACd0lEQVR42p2TzWsTQRjG9y8QTEx2092ZpMnuZpvs5+yuTbq7SVqrQvEigkfBgychIHjyKF56rdF+iQcRBA8KInjwIw3aquBRTEFM/44ShldmNymWtmp7+LHD7LwPz/O+M9zdW3eerq6sfO50Ot21tbVeu93u8TzfS6fTvUwm809SqVSPELKxsLCwNTc395x78fL19tbXb/BuY5N2P36BV2/ewv3l9RGPjmRpeR2WHiZ0Vh/TpQercG9xcYeTw8s/iqQJgmIN01ilmUKZIs2iUtmkE4oek5OrVChVR+sE9j85FzPMVwjgivOLw8Z0v+hEULQDWjDrgPVpYF+p4gOvOpBVbBArPiC9BnzZBUFjeICNOrC6gjUDJRJRxWsBqtYHXLZk9kW9DrkyoYJKQCgTtgZesUFQHTiFNLh09Rpcv3kbxKoPRbcJyAoBmSFIZjCGSkYIhdbsgONlqz9hnAVhilBetmOhP8mULJg0a6DV5gHbERT8ecAkAmRHiTDDDqlYCcC+cWXAZYtmP2f4IFRdysvWAUFGHNuox8V5/yLka+cA11uAp1uA3Abbp9hugOQGicOc5gIvW/QwsXF0ZAaxQ0xmAdmNOHJM4pJipwGiPjPgMkWjLyQ9O1KQDYf1ihVj73zsDNeagP0GICfacygaxxRkDvPeBcDuLCAvAuw1k8j2cQWVJHJ+PIhxXObaDE/gcCS4N9WDnCzy/wp+HwnuZmVryCsMez+qM5TMYIis8HDsaDcWNIOf7KVss2sjqE7yUlQSO9pHmYBkzIx6diiUDUw06jvcmUntCa+Ym4JivUcV0sW61z1dmDpAavJvaB+yJf1TVjae/QZ4LujuwujDqQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/010587f43d99381ecdcc79b716c10904/ba381/server-image-1.webp 200w,\n/static/010587f43d99381ecdcc79b716c10904/7f61c/server-image-1.webp 400w,\n/static/010587f43d99381ecdcc79b716c10904/d00b9/server-image-1.webp 800w,\n/static/010587f43d99381ecdcc79b716c10904/d7803/server-image-1.webp 954w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/010587f43d99381ecdcc79b716c10904/772e8/server-image-1.png 200w,\n/static/010587f43d99381ecdcc79b716c10904/e17e5/server-image-1.png 400w,\n/static/010587f43d99381ecdcc79b716c10904/5a190/server-image-1.png 800w,\n/static/010587f43d99381ecdcc79b716c10904/eb2af/server-image-1.png 954w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/010587f43d99381ecdcc79b716c10904/5a190/server-image-1.png\"\n            alt=\"server-image-1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h4 id=\"クライアント側起動\" style=\"position:relative;\"><a href=\"#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E5%81%B4%E8%B5%B7%E5%8B%95\" aria-label=\"クライアント側起動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>クライアント側起動</h4>\n<ul>\n<li>サーバーの準備が整ったら、クライアント側を<code class=\"language-text\">npm run dev</code>で起動します。</li>\n<li>ブラウザで<a href=\"http://localhost:3000\">http://localhost:3000</a> にアクセスして以下の画面が表示されればOKです。</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABDElEQVR42u3OsUrDQBzH8XuZQAaXToE+j4OLYyezZNLMScE8hItgkYaQmiiCz1AHS0hISu7OXsGjuctPEig4lWAdHPqHD/fnOL4cubLtV8dxIsdx4o5t27FpmjEhZBDDMOLxeBxZlvV2NhpdkE8hUJalqilDh3KOeRjCn057nu8fdBsE8DxfBUGAy8nEJYwxLJfvuy8pNedcr1Yfumm03gqhhdhqAEPsACBKn2/IZiNQlZWidY2iKJBlGfI8x7paQ0qJtm2htT5IKaW64PwpdUm3qH6anw/6c+i0bdsHw31wf/HbOQVPwX8ZBCABNEeQfTBJrv/2h+mLSzjnC0rpjFL6eIQZYyy5u384/wb4hd/ywJ+BEQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/22a0dde580a6e078c9a0bbb294cc8707/ba381/project-image-2.webp 200w,\n/static/22a0dde580a6e078c9a0bbb294cc8707/7f61c/project-image-2.webp 400w,\n/static/22a0dde580a6e078c9a0bbb294cc8707/d00b9/project-image-2.webp 800w,\n/static/22a0dde580a6e078c9a0bbb294cc8707/468b0/project-image-2.webp 907w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/22a0dde580a6e078c9a0bbb294cc8707/772e8/project-image-2.png 200w,\n/static/22a0dde580a6e078c9a0bbb294cc8707/e17e5/project-image-2.png 400w,\n/static/22a0dde580a6e078c9a0bbb294cc8707/5a190/project-image-2.png 800w,\n/static/22a0dde580a6e078c9a0bbb294cc8707/142fb/project-image-2.png 907w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/22a0dde580a6e078c9a0bbb294cc8707/5a190/project-image-2.png\"\n            alt=\"project-image-2\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h2 id=\"mutationを実装する\" style=\"position:relative;\"><a href=\"#mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-label=\"mutationを実装する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mutationを実装する</h2>\n<h3 id=\"実装-1\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A3%85-1\" aria-label=\"実装 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー一覧ができたので、登録、更新、削除処理を追加します。</li>\n</ul>\n<div class=\"gatsby-code-title\">apollo/mutations/createUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-gql line-numbers\"><code class=\"language-gql\">mutation($name: String!, $email: String!, $age: Int) {\n  createUser(name: $name, email: $email, age: $age) {\n    id\n    name\n    email\n    age\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/mutations/updateUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-gql line-numbers\"><code class=\"language-gql\">mutation($id: ID!, $name: String!, $email: String!, $age: Int) {\n  updateUser(id: $id,name: $name,email: $email,age: $age) {\n    id\n    name\n    email\n    age\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/mutations/deleteUser.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-gql line-numbers\"><code class=\"language-gql\">mutation($id: ID!) {\n  deleteUser(id: $id) {\n    id\n    name\n    email\n    age\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<ul>\n<li>次にユーザー一覧で、登録、更新、削除ができるようにします。index.vueを修正しましょう。</li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vueの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブル上部に登録ボタンを設置します。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"isShowEditArea = true\"</span><span class=\"token operator\">></span>\n      新規登録\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> テーブルに編集ボタンと削除ボタンの列を追加します。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>table<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token constant\">ID</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>名前<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>メール<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>年齢<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span><span class=\"token operator\">-</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>tr v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"item in users\"</span> <span class=\"token operator\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"item.id\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>email <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">.</span>age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"editItem(item)\"</span><span class=\"token operator\">></span>\n            編集\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"deleteItem(item)\"</span><span class=\"token operator\">></span>\n            削除\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 登録と更新の両方で使う編集エリアです。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 登録か更新かの判定はeditedIndexを見ます。 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div v<span class=\"token operator\">-</span><span class=\"token keyword\">if</span><span class=\"token operator\">=</span><span class=\"token string\">\"isShowEditArea\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> formTitle <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.name\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"名前\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.email\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"email\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"メール\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"editedItem.age\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"number\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"年齢\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"close\"</span><span class=\"token operator\">></span>\n          キャンセル\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"save\"</span><span class=\"token operator\">></span>\n          保存\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> getUsersGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/queries/getUsers.gql'</span>\n<span class=\"token comment\">// 今回定義したgqlファイルをインポートします。</span>\n<span class=\"token keyword\">import</span> createUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/createUser.gql'</span>\n<span class=\"token keyword\">import</span> updateUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/updateUser.gql'</span>\n<span class=\"token keyword\">import</span> deleteUserGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/mutations/deleteUser.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">users</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 登録・更新用の編集エリア表示非表示のためのフラグです</span>\n      <span class=\"token literal-property property\">isShowEditArea</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 登録か更新かを判定するための値です。</span>\n      <span class=\"token comment\">// -1の場合は登録</span>\n      <span class=\"token comment\">// それ以外の場合は更新　と判定します。</span>\n      <span class=\"token literal-property property\">editedIndex</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 編集エリア用のモデルです。</span>\n      <span class=\"token literal-property property\">editedItem</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// 編集エリア用のモデルを初期化用モデルです。</span>\n      <span class=\"token comment\">// 初期化時に</span>\n      <span class=\"token comment\">// this.editedItem = Object.asigne({}, this.defaultEditedItem)</span>\n      <span class=\"token comment\">// のように使います。</span>\n      <span class=\"token literal-property property\">defaultEditedItem</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 更新の場合、更新対象が何番目かをeditedIndexにセットしているので</span>\n  <span class=\"token comment\">// editedIndexの値によって、更新か登録かを判断し</span>\n  <span class=\"token comment\">// 編集エリアのタイトルを出しわけます。</span>\n  <span class=\"token literal-property property\">computed</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">formTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n        <span class=\"token operator\">?</span> <span class=\"token string\">'ユーザー新規登録'</span>\n        <span class=\"token operator\">:</span> <span class=\"token string\">'ユーザー更新'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">apollo</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">users</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> getUsersGql\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//登録処理です。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// mutationを発行する場合は、Smart Queryではなく</span>\n      <span class=\"token comment\">// $apolloを使って処理します。</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">mutation</span><span class=\"token operator\">:</span> createUserGql<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">variables</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// refetchQueriesは処理完了後に発行するGraphQLの操作を指定できます。</span>\n        <span class=\"token comment\">// ここでは登録後に、データを再取得してユーザー一覧をリフレッシュしています。</span>\n        <span class=\"token literal-property property\">refetchQueries</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// 編集エリアを非表示にします。</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 更新処理です。</span>\n    <span class=\"token comment\">// 登録処理とほぼ同様の処理なので説明は割愛します。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">mutation</span><span class=\"token operator\">:</span> updateUserGql<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">variables</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">refetchQueries</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 削除処理です。</span>\n    <span class=\"token comment\">// 登録処理とほぼ同様の処理なので説明は割愛します。</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">deleteItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ユーザー(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)を削除しますか?</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">mutation</span><span class=\"token operator\">:</span> deleteUserGql<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">variables</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>id\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">refetchQueries</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> getUsersGql\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 一覧の編集ボタンクリック時の処理です</span>\n    <span class=\"token comment\">// 編集エリアの変数に値を代入して、編集エリアを表示します。</span>\n    <span class=\"token function\">editItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isShowEditArea <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 編集エリアを非表示にする処理です。</span>\n    <span class=\"token comment\">// 編集エリアのモデルの初期化もあわせて実施します。</span>\n    <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isShowEditArea <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>defaultEditedItem<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 編集エリアで保存ボタンをクリックした場合の処理です。</span>\n    <span class=\"token comment\">// editedIndexをみて登録か更新かを判断します。</span>\n    <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedIndex <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editedItem<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"動作確認-1\" style=\"position:relative;\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-1\" aria-label=\"動作確認 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>ブラウザを開いてみてください。\nそれぞれの以下のようにして操作ができます。</p>\n<h4 id=\"登録\" style=\"position:relative;\"><a href=\"#%E7%99%BB%E9%8C%B2\" aria-label=\"登録 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>登録</h4>\n<ol>\n<li>右上の新規登録ボタンをクリック</li>\n<li>名前、メール、年齢を入力</li>\n<li>保存ボタンをクリック</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAAC2UlEQVR42o2SS08TURTHLwu2PBZ8Ar6CYYsfQYwuaDd8BSXGaMCNKza6wI0JlEqMxBA1GMxEgqi8tKI2lWofM1PoTO287rSVPuZ5529mqDE1vk7yy7nP3z05uWR0dHT6wsWL27FYbD0Wi3HxeJwLc8jk5CQ3NTXFnRk7w/X393N9fX0cIeR3PCOEbBNCpsnV2ZmkqGsoSbJX1TRolELXNOiGAVVV0Ww2kUzew/j4WYyMjGBwcBBDQ0O/4g8PD2NgYGCJbK+tLZrZLCrptJ1Nf/QlXvCPJMkvCoLPi6J/VJZ8RdV8QRR9Xiz5ReE0C704mm5gb+/NAjm8cmU19+gxPj1Y8Z3YJNyxMZyYJr61Wmi2WuhYFmzbhu04ESxgcFwXVrjWXe9Ylg8AYqmUIIfXrz9sp1KQnzzxxJlZIJlEwFi4D8vqwDQpWu1WNPc8D/lcLmpDGEEQRJkxFgllWU6Qj/v7CTCGmix5R1+rCFWddhvtdhv1Rh3VahWU0qgay7IhSxJURQkvQ1FUmKYZin8Ki3xxyfU8VBTFo4aBTqsFXVUjkappKJfL0eVKpQJKTdiWDVEUsLu7i0wmg0Ih3yv8UigshjO+LHkVTYdYlpAtFPGZ5yFXVdBGA5quolavoWaasCwLuq6BF/hulUqv8FUycb+ZzyO/uenJqbd4dvcuHt66jeW5Obx787anV3+Knh4e37iRPslkIG88Z3RnB/7hIbx8Hu7r12ATEwjOnUPQlQbspzh6JPiNMLew8EHyfPCKwrKVCo50A7Lj4qRUApufB5aX8a/oEQrXru27qXdobm2xDseh8WITfioFtrGBQFV/lPP/wvdbW4mGJKH0Jefoq6useGee2RPnGeJxBsdh4ekI4I8wxtyucJEcHx8vdV/x0P3QWFkBbt7E/8aPCiVJWiIHBweXa7XaS6rra7RG1416fZ267inh2DDWKaV/Rdf1p6Zpvkyn05e+A5hu+Op6by+CAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8750f08ef569de932265a3de5995bc55/ba381/project-image-create-1.webp 200w,\n/static/8750f08ef569de932265a3de5995bc55/7f61c/project-image-create-1.webp 400w,\n/static/8750f08ef569de932265a3de5995bc55/d00b9/project-image-create-1.webp 800w,\n/static/8750f08ef569de932265a3de5995bc55/a6125/project-image-create-1.webp 837w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8750f08ef569de932265a3de5995bc55/772e8/project-image-create-1.png 200w,\n/static/8750f08ef569de932265a3de5995bc55/e17e5/project-image-create-1.png 400w,\n/static/8750f08ef569de932265a3de5995bc55/5a190/project-image-create-1.png 800w,\n/static/8750f08ef569de932265a3de5995bc55/ddc81/project-image-create-1.png 837w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8750f08ef569de932265a3de5995bc55/5a190/project-image-create-1.png\"\n            alt=\"project-image-create-1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span>\n<br/></p>\n<p>ユーザー一覧に登録したユーザが追加されます。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACmUlEQVR42p2SyU7bUBiFLztWDCtegKdgSd+hbErEgi1iXV6CF4AYiYoFkuUFomSABilMhZBIaYCMjscknkLsmCQeklPZUEEQUiV+6dO5x/Z//Nv3kvn5+fWvS0uJb98idCQSYVZWVphAA5aXl5nV1VVmYWGBmZycZCYmJhhCyEfQhJA4IWSNfN/Y2OFaDQi84CmKAl3XoRsGjLYBTdPQ6/Wwt7eHxcUvmJubw/T0NGZmZt7jzc7OYmpqiiKpVGrb0A3IsjwoFAo+zwu+IEo+y3E+y/G+IMl+S9X9Glv3KzXWL1erob7DaSoqzs4vt8ivkxPqrnCHbC7nWZYF0zRhWV10Au12YT89oT8YwHEcuJ6H0WgEz/NC77guXNcN1AMAluOiJBGLUbZto1Ipe8ViObgeNgU16Pdh6Dq6djf0Q99H8eEBpmmNPQcgDBRFMUpubq6pwOiq4lXLlbCpb9uwuxY6bQOyJEJTVfSCSXs9iDyPpixD4Hm0Go3wHoZvAqssux24hq57hmWh57pQDB2SpkE1O5A1DU3DQKv9iEf7CX3HgdiQcXF7i7tqBUWWHZ+wTlH7bjYL7uehL8UTEI6OIMVikGJxNJLHEGNx8LFDNI8TUE6O0b26QjOZRG73B2oHB6jTNNBqPQfyfJSYm5vJYa2GTibjq5cXEE5P0b65Rus8jcA302k0z9Mwfl/CzGbR/5OHcpZGnqZRT6XA7+8DudxroJRI7ELVgFLJQ6UCVKtAufxM4D9al0qhjgLu7wHTfP1kjuej4Q4CXrBn/+NfvV2P/UOOZannMzEMDhk+xVggx22/vGUwGo38zzAcDp2XwC1Sr9d33o79yQp7BUGgSCaTWW+32wlVVWld15nPoGkabRhGPJ/Pr/0FGScGULh4e0wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/4fda4465fc13b57827bc3639cc240f0b/ba381/project-image-create-2.webp 200w,\n/static/4fda4465fc13b57827bc3639cc240f0b/7f61c/project-image-create-2.webp 400w,\n/static/4fda4465fc13b57827bc3639cc240f0b/d00b9/project-image-create-2.webp 800w,\n/static/4fda4465fc13b57827bc3639cc240f0b/05152/project-image-create-2.webp 836w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/4fda4465fc13b57827bc3639cc240f0b/772e8/project-image-create-2.png 200w,\n/static/4fda4465fc13b57827bc3639cc240f0b/e17e5/project-image-create-2.png 400w,\n/static/4fda4465fc13b57827bc3639cc240f0b/5a190/project-image-create-2.png 800w,\n/static/4fda4465fc13b57827bc3639cc240f0b/27b8e/project-image-create-2.png 836w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/4fda4465fc13b57827bc3639cc240f0b/5a190/project-image-create-2.png\"\n            alt=\"project-image-create-2\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h4 id=\"更新\" style=\"position:relative;\"><a href=\"#%E6%9B%B4%E6%96%B0\" aria-label=\"更新 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更新</h4>\n<ol>\n<li>更新したい行の編集ボタンをクリック</li>\n<li>名前、メール、年齢を入力</li>\n<li>保存ボタンをクリック</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADEklEQVR42oWRS08bVxTHLxJrHpuwidR1duQzsGqUgiW+QPkKraKoiyyzyCaiVVtqJcURRU2bRWkVhElSYl5qBXFwRZiMPcavefrO2GPG47HncWf+0QxVKASlV/rr6Fz97++cew65+snVLz+9eWM7lUqtzszMZFOpVDaOsaanp7Ozs7PZycnJ7PDwcHZoaChLCLlMq4SQbULIF+T2V7cfVRUZtVo90LQmdF1PZBgGKKXo2TaWl5cxNTWFiYkJjI6OYmxs7KLY+Pg4RkZGFsnLXO7HGCBJont4eMhqtTqr1xtMKFdYuVJhtYbItCZlRaHMiiWB8cVSEi/IkxUVm9u7D8nGxkaGO+JwUCgE3W4XlmWha9uwbBt2z0F/MIDrevB8H74fIIqAIGDwPD+5S+T5AQBUq/VFsr6+nrG6XZSFUlAuH8f3iOJXAFzXRafTgeM4SR4yBkEoIfb/1wcgAUqStEj29/czcdJutxJgbHLdAQaDPizrBLIiwzBa8DwPnuuiUa2gqWlQZDmZtWl2zgOFspBJjI1GEBt6vR7U0yVBUVWIoghZUiDLElqdE7gARE3FX69fg3v7FnyxeB7IcW8yURhBVpRA0zTEijtQFRWU6pBkBaJUB7VMGC+eoz8/D+3PF8jPfw1+cxP88fEFYLGYfFk3zaBptlGqVdFst0DNFgxDB40LqDJaEYNz7x5w7Rra6R/A3b2L+tOnqFEKhOEZ8OUfK4tOo4Gjra2A8jyefP8dnj/+BXCcs6FHEaLTLcXDBvp9wDAA3/9wKaU7d351d3egrq2xo5+W0FxfQ3BwAO/ZM0SFAsDzuOxE59MzIP/Nt7/RgYtjSlmhUkGV6mj6ARxFQTg3B1y/Dtj2+07fxyi6HPjm1q0ng8I/sPJ5z9rfY+1Xr1iX45iby4Xhzg6L9vZYFEUfVRiG3r/Ah4TLbTyCquKkWAoGK79Df/wzvAcPgM9uAru7p/XDEP9zkg5FUcyQvwuFuWb3ZEkyzQVVENLa1lZaXVlJe1eurJr372dor7dAVTVNKf2YFnRdX8rn85+/A7ZU8RjA1imkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6af808a0a42c802ec85df97dcd6f76b6/ba381/project-image-update-1.webp 200w,\n/static/6af808a0a42c802ec85df97dcd6f76b6/7f61c/project-image-update-1.webp 400w,\n/static/6af808a0a42c802ec85df97dcd6f76b6/d00b9/project-image-update-1.webp 800w,\n/static/6af808a0a42c802ec85df97dcd6f76b6/05152/project-image-update-1.webp 836w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6af808a0a42c802ec85df97dcd6f76b6/772e8/project-image-update-1.png 200w,\n/static/6af808a0a42c802ec85df97dcd6f76b6/e17e5/project-image-update-1.png 400w,\n/static/6af808a0a42c802ec85df97dcd6f76b6/5a190/project-image-update-1.png 800w,\n/static/6af808a0a42c802ec85df97dcd6f76b6/27b8e/project-image-update-1.png 836w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6af808a0a42c802ec85df97dcd6f76b6/5a190/project-image-update-1.png\"\n            alt=\"project-image-update-1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span>\n<br/></p>\n<p>ユーザー一覧のユーザー情報が更新されています。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACoklEQVR42q1R204aURQ9iW/e3nxr/Aw/wD9oTIwkPrdJTb/FH2jLSI2Zhz4QYyuCQq2kKpSGGpCLyNxvwDDDoMBwZlzNjLbaxofGdCcra1/OXtn7bDL/bH7t+dLSdiQS2VpZWWEjkQgbcIDl5WV2dXWVXVhYYCcnJ9mJiQmWEPIYtggh24SQV2Tt9dpGjW/iotGgsqxA0zRoqhayoiiwLRuxWAyLi4uYm5vD9PQ0ZmZm/gadnZ3F1NRUlKTT6ahpmtBUdVSpVDxBED1ZUT1OEDxelDxJUT3daHmVas0rV6ohSufnXvm88jsuV6ojUVaQzmTeki+Zz8xFvY5CoUBt20b/6go9x0Gv58Du9eD0+3BdF9Tz4I7HGFOKm5sbUOrBdccYj8cYuS4FgGazGSWJ3QTT6ZgwjBatX9RhdrtBLWwKLGiwrC4cx7nN+z5q1Rosyw5j3/cDCgVFUYySXC7HBMHIHdF6ow7TssKH18MBrgbX6NoWBFmCZhgYDEcYjEbgBRGarkNWFbTNDlqdzr3gJXfJ+MMhxEaDdnUDw14PoBRtSYLcaKAly9B4HrogwBBFmKqGgeNA5jmcHB6i8qOIcrF4L1hlWQa5PKSdHap+2gUfj8M8SMPKZKDv7aGdOoCeSMBI7sFIJWHup9A/OkI7mURpcxPixx1wsfc0GELU9Sjh1tcZlMuwz86o+S2Pxv4+6qkUjNMTqF+zaOdOoWazod86PYFd/I5BqQTj+Bhn8Tj47BEuYxsUnQ5E04wSvlxmMBjAFwQKSQIUBVBVhP5jEG/5RhCCHUP2Oe52ZUWJEp7nmbtr0eCu/4Jf9sC//8OHgni6/SH47i45vCs8BUEvJEl6QziO2/hfEwbbknw+/7Ldbn/QNI3RdT32RDCBRqFQePET0bkA6J4kzyIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/425216beeaf6cca70c1dd4cec921b6b2/ba381/project-image-update-2.webp 200w,\n/static/425216beeaf6cca70c1dd4cec921b6b2/7f61c/project-image-update-2.webp 400w,\n/static/425216beeaf6cca70c1dd4cec921b6b2/d00b9/project-image-update-2.webp 800w,\n/static/425216beeaf6cca70c1dd4cec921b6b2/7820a/project-image-update-2.webp 838w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/425216beeaf6cca70c1dd4cec921b6b2/772e8/project-image-update-2.png 200w,\n/static/425216beeaf6cca70c1dd4cec921b6b2/e17e5/project-image-update-2.png 400w,\n/static/425216beeaf6cca70c1dd4cec921b6b2/5a190/project-image-update-2.png 800w,\n/static/425216beeaf6cca70c1dd4cec921b6b2/a1dd2/project-image-update-2.png 838w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/425216beeaf6cca70c1dd4cec921b6b2/5a190/project-image-update-2.png\"\n            alt=\"project-image-update-2\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h4 id=\"削除\" style=\"position:relative;\"><a href=\"#%E5%89%8A%E9%99%A4\" aria-label=\"削除 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>削除</h4>\n<p>削除したい行の削除ボタンをクリック</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACiElEQVR42q2ST0sbQRjG9+C5KKWHiPRW6a30VKilCCp+FQ8eW/oNLH4Ab2oEKVj2ICh6itEGEatYhLiyxpjdTTI7M5vdmMSkm2Rn9im7xj+VUor0hWdn9+Gd3zyzM8rzFy+nR8bGNt5NTKy8GR1V346NqyPjd3o/OakOv3qtPh0aUgcGB9WBxLX6E4n7+tqfSGw8efZsWvnw6ePSybmOU00LDMOAZUYyYxUuLuBwhs8zMxgeHkZfXx8URfmTRG9MKqlUeqFWr4NS1tb1M2FTKmzGBaFUEJsKx/VEwTBFZndXpHe+ia3tHZHaSsfjjVLp7c7+wSFWVHVeyexkkvl8HtlsNqhWq4jgrldFxXXhei5q9QY6nS5kGN4qqut3CSlDBEKIyLNKpUVlY30tSQiBZVlBsWih2WrFE8LeRN/3cXl5iVbPb7fbyJ+fo9PpxD1SSogboGUtKnv7e8m40fcDTTuJE8agnz78to8odalchud56Ha6MfhM18E5j70K52jU6zGwFCXM5XLJaAFCSNBoNBAEQQzkjIFRG67ngTEGhztwHAfNZgt+u42cruPH8TGOz3SYxL4DatlsMuh2YVrFgJQJopO+uroCIXaczLZZ1AjTMkAZBecM0cL5izyy3w9wtr4GkslcAwlZVE41Ld6y57mB43BkTzTouXMwzmHTMihjIOUSKKdgnKFWr6HVbCJftKBtbiI3O4vS3JyAEChVKouKaZoxUEp5vdd7dXMwD9zbZygEQteFcCt3Cc1CIQYKKYKwdy3CB8LD7wclpbz7h39L+K/1G7BQKCz0TB9A8BhJKds94LxiGMbS/0pYLBaTyuHh4ZTruquU0mXO+ZdHatlxnNWjo6OpX+VMChXtKatxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6ccfdd0c5ed54c0cce7643d2e1534c19/ba381/project-image-delete-1.webp 200w,\n/static/6ccfdd0c5ed54c0cce7643d2e1534c19/7f61c/project-image-delete-1.webp 400w,\n/static/6ccfdd0c5ed54c0cce7643d2e1534c19/d00b9/project-image-delete-1.webp 800w,\n/static/6ccfdd0c5ed54c0cce7643d2e1534c19/a6125/project-image-delete-1.webp 837w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6ccfdd0c5ed54c0cce7643d2e1534c19/772e8/project-image-delete-1.png 200w,\n/static/6ccfdd0c5ed54c0cce7643d2e1534c19/e17e5/project-image-delete-1.png 400w,\n/static/6ccfdd0c5ed54c0cce7643d2e1534c19/5a190/project-image-delete-1.png 800w,\n/static/6ccfdd0c5ed54c0cce7643d2e1534c19/ddc81/project-image-delete-1.png 837w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6ccfdd0c5ed54c0cce7643d2e1534c19/5a190/project-image-delete-1.png\"\n            alt=\"project-image-delete-1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span>\n<br/></p>\n<p>ユーザー一覧から削除したユーザーがなくなっています。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 535px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACFUlEQVR42rWSy27aQBSGB7EEdqx5Ah4gfYEUgXiQKO9Q5T2iFLJJ6TYXKd2hqigbRFNM4mCKcXwBG2OPEca42MNf2aBcaKWmUXukX6M5o/Odf84MyeVy+7tvd09LpdJJsVisPVWhUKiVy+VaPp+vJZPJWiKRqBFCfqcTQsgpIWSPvDs4OO7JEnpCL1AUBZqmPUhVFEwmE1QqFezsvEE2m0UqlUI6nd5WkMlkorMjUq/XK7ZtRwCfv+VDVdNi3StKKMlKqI2MUBvpYZvrhNff2mHr63W8bsn/3hdxefnpkHyu16vduy64DhdQSuE4DhxnCkodONMp3LkH3/cRhiEYWyEKxhhCxsBWm5WxIMpLknRELs7Pq5Zl4fbmJpCk+7gAq3XhcrkEdWws/MUmvYLQ7WLmuus9Y9h0eAReXTWq0UYfDQOe78bdPW8O13Vh2xb6Yh+GYcDzPCz8HzFQ13WMzTEiI9FNADwCe4JQjZyoqhpEs5zNXOgjHbIsY2yaGA6HUDUNI30E26ZYeAv0BAGNLw20OxzaHPcceMfzscPx2Ayi+VGbxi87mVigzhSmaUI39NitY9uYz+exY0EQIKsKFFV9DpQkqboexDr5NFabWb4g/gz8FbV6aLKtFzv8i/iPQFEUK5vP6jPGwlfKjxiDweCQDAaD43/lUBTF96TZbO5TSs8Mw/hgmubH1yiqtSzrrNVq7f0EQOcVH9uCTvAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/23e16c6866f6c729b4eed8d6b1371e77/ba381/project-image-delete-2.webp 200w,\n/static/23e16c6866f6c729b4eed8d6b1371e77/7f61c/project-image-delete-2.webp 400w,\n/static/23e16c6866f6c729b4eed8d6b1371e77/e0c9f/project-image-delete-2.webp 535w\"\n              sizes=\"(max-width: 535px) 100vw, 535px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/23e16c6866f6c729b4eed8d6b1371e77/772e8/project-image-delete-2.png 200w,\n/static/23e16c6866f6c729b4eed8d6b1371e77/e17e5/project-image-delete-2.png 400w,\n/static/23e16c6866f6c729b4eed8d6b1371e77/b5245/project-image-delete-2.png 535w\"\n            sizes=\"(max-width: 535px) 100vw, 535px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/23e16c6866f6c729b4eed8d6b1371e77/b5245/project-image-delete-2.png\"\n            alt=\"project-image-delete-2\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>これでユーザ一覧でCRUD操作ができるようになりました。</p>\n<h2 id=\"subscriptionを実装する\" style=\"position:relative;\"><a href=\"#subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\" aria-label=\"subscriptionを実装する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Subscriptionを実装する</h2>\n<p>Subscriptionを使って、ユーザー情報を他の人が編集したときにリアルタイムで同期するようにしてみましょう。</p>\n<h3 id=\"実装-2\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A3%85-2\" aria-label=\"実装 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userCreated.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-gql line-numbers\"><code class=\"language-gql\">subscription {\n  userCreated {\n    id\n    name\n    email\n    age\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userUpdated.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-gql line-numbers\"><code class=\"language-gql\">subscription {\n  userUpdated {\n    id\n    name\n    email\n    age\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">apollo/subscriptions/userDeleted.gql</div>\n<div class=\"gatsby-highlight\" data-language=\"gql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-gql line-numbers\"><code class=\"language-gql\">subscription {\n  userDeleted {\n    id\n    name\n    email\n    age\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<ul>\n<li>index.vueでSubscriptionを実装します。templateには一切手をいれません。scriptタグのみ修正します。</li>\n</ul>\n<div class=\"gatsby-code-title\">pages/index.vueの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">/* (中略) */</span>\n<span class=\"token comment\">// 今回定義したgqlファイルをインポートします。</span>\n<span class=\"token keyword\">import</span> userCreatedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userCreated.gql'</span>\n<span class=\"token keyword\">import</span> userUpdatedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userUpdated.gql'</span>\n<span class=\"token keyword\">import</span> userDeletedGql <span class=\"token keyword\">from</span> <span class=\"token string\">'~/apollo/subscriptions/userDeleted.gql'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/* (中略) */</span>\n\n  <span class=\"token literal-property property\">apollo</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">users</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> getUsersGql<span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// SubscriptionはSmart QueryのsubscribeToMoreで指定します。</span>\n      <span class=\"token literal-property property\">subscribeToMore</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token comment\">// 登録時の処理です</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">document</span><span class=\"token operator\">:</span> userCreatedGql<span class=\"token punctuation\">,</span>\n          <span class=\"token comment\">// Subscription発生時の処理をupdateQueryに定義します。</span>\n          <span class=\"token comment\">// 第一引数は前回のusers</span>\n          <span class=\"token comment\">// 第二引数はサーバーからのレスポンス情報　です。</span>\n          <span class=\"token function-variable function\">updateQuery</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> newUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userCreated\n            <span class=\"token comment\">// ここで返した値がusersに代入されます。</span>\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newUser<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// 更新時の処理です。</span>\n        <span class=\"token comment\">// 登録時とほぼ同様の処理なので説明は割愛します。</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">document</span><span class=\"token operator\">:</span> userUpdatedGql<span class=\"token punctuation\">,</span>\n          <span class=\"token function-variable function\">updateQuery</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userUpdated\n            <span class=\"token keyword\">const</span> targetUser <span class=\"token operator\">=</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span> <span class=\"token operator\">===</span> updatedUser<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n            targetUser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>name\n            targetUser<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>email\n            targetUser<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> updatedUser<span class=\"token punctuation\">.</span>age\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// 削除時の処理です。</span>\n        <span class=\"token comment\">// 登録時とほぼ同様の処理なので説明は割愛します。</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">document</span><span class=\"token operator\">:</span> userDeletedGql<span class=\"token punctuation\">,</span>\n          <span class=\"token function-variable function\">updateQuery</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> subscriptionData <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> prev\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> deletedUser <span class=\"token operator\">=</span> subscriptionData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userDeleted\n            <span class=\"token keyword\">const</span> userIndex <span class=\"token operator\">=</span> prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span> <span class=\"token operator\">===</span> deletedUser<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User not found'</span><span class=\"token punctuation\">)</span>\n\n            prev<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>userIndex<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> prev<span class=\"token punctuation\">.</span>users\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">createItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">mutation</span><span class=\"token operator\">:</span> createUserGql<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">variables</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">updateItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      age\n    <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">mutation</span><span class=\"token operator\">:</span> updateUserGql<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">variables</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">,</span>\n          name<span class=\"token punctuation\">,</span>\n          email<span class=\"token punctuation\">,</span>\n          age\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">deleteItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ユーザー(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)を削除しますか?</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$apollo<span class=\"token punctuation\">.</span><span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">mutation</span><span class=\"token operator\">:</span> deleteUserGql<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">variables</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>id\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// mutation実装時はrefetchQueriesを定義していましたが</span>\n        <span class=\"token comment\">// Subscriptionがそれにとってかわるので</span>\n        <span class=\"token comment\">// 今回はrefetchQueriesは定義しません。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// エラー処理</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">/* (中略) */</span>\n\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"動作確認-2\" style=\"position:relative;\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-2\" aria-label=\"動作確認 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>2つブラウザを開いてみて、片方で操作してみてください。\nリアルタイムでもう一方のブラウザにユーザー情報の変更が反映されていればOKです。</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>簡単ではありますが、Nuxt.js+Apollo Clientで簡単なアプリの作り方をご紹介しました。\nせっかくのクライアントアプリなので、UIフレームワークを使ってリッチにしてみるのも良いかもしれません。\n一応Vue.jsのマテリアルデザインのUIフレームワーク<a href=\"https://vuetifyjs.com/ja/\">「Vuetify」</a>を使った版も以下においておりますので、参考にしてみてください🍅</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"https://github.com/Takumon/nuxt-graphpack-sample/tree/master/client_vuetify\" data-iframely-url=\"//cdn.iframe.ly/9B6aV8g\"></a></div></div>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://medium.freecodecamp.org/how-to-build-a-real-time-editable-data-table-in-vue-js-46b7f0b11684\">How to build a real-time editable data table in Vue.js</a></li>\n<li><a href=\"https://www.aintek.xyz/posts/graphql-nuxt-chat\">GraphQL と Nuxt.js でチャットを作る</a></li>\n<li><a href=\"https://github.com/the-road-to-graphql/fullstack-apollo-subscription-example\">the-road-to-graphql/fullstack-apollo-subscription-example: A minimal Apollo Server 2 with Apollo Client 2 with Subscriptions application.</a></li>\n<li><a href=\"https://github.com/bmsantos/apollo-graphql-subscriptions-example\">bmsantos/apollo-graphql-subscriptions-example: Apollo GraphQL Subscriptions issue</a></li>\n<li><a href=\"https://www.levvel.io/our-ideas/A-Guide-to-Subscriptions-in-GraphQL-with-Apollo\">Levvel Blog - A Guide to Subscriptions in GraphQL with Apollo</a></li>\n</ul>","excerpt":"なにこれ 以前の記事設定いらずのNode製GraphQLサーバー「Graphpack」の使い方でGraphQLのサーバー側を実装を紹介しました。\nGraphpackは備え付けのGraphQL Playground IDE…","frontmatter":{"slug":"/nuxt-apollo-with-graphpack","title":"Nuxt.js＋Apollo ClientでCRUD操作 / ユーザー管理画面でQuery, Mutation, Subscriptionを実装","date":"2019-02-12T07:00:00.000+09:00","tags":["GraphQL","Nuxt.js","Apollo Client","Vue.js"],"keywords":["GraphQL"],"thumbnail":"thumbnail/2019/02/nuxt-apollo-with-graphpack.png","category":null}}}},"staticQueryHashes":["3868140423","4185443638","467257065","558103266"],"slicesMap":{}}