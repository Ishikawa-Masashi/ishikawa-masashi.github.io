{"componentChunkName":"component---src-templates-tags-template-tsx","path":"/tags/react/","result":{"pageContext":{"nodes":[{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://www.netlify.com/docs/form-handling/\">Netlify Forms</a>はNetlifyにホストしている静的サイトでお問い合わせフォームを作れる機能です。DBを用意しなくても、お問い合わせフォーム送信結果はNetlify側で保持しれくれます。Netlifyの管理画面からCSVダウンロードなども可能です。\nさらに<a href=\"https://zapier.com/\">Zapier</a>と連携すると、お問い合わフォームで入力したメールアドレス宛てに定型フォーマットのメールを送信できたりもします。\nそんな便利なNetlify Formsですが、ググっても、お問い合わせフォームを同期的に送信する簡単な方法しか実装サンプルを見つけられませんでした。そこで今回は以下のような実用的サンプルの実装方法をご紹介します。</p>\n<ul>\n<li>お問い合わせフォームにファイルアップロードを含む</li>\n<li>Reactを使う</li>\n<li>入力チェックに<a href=\"https://jaredpalmer.com/formik/\">Formik</a>を使う</li>\n<li><a href=\"https://github.com/axios/axios\">axios</a>で非同期にお問い合わせフォームを送信する</li>\n</ul>\n<h2 id=\"step1-ファイルアップロード--単純なhmlt--同期送信\" style=\"position:relative;\"><a href=\"#step1-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89--%E5%8D%98%E7%B4%94%E3%81%AAhmlt--%E5%90%8C%E6%9C%9F%E9%80%81%E4%BF%A1\" aria-label=\"step1 ファイルアップロード  単純なhmlt  同期送信 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step.1 ファイルアップロード + 単純なHMLT + 同期送信</h2>\n<p>もっとも単純なパターン、こちら<a href=\"https://www.netlify.com/docs/form-handling/\">Netlifyの公式サイト</a>に書いてある情報を参考に実装します。</p>\n<div class=\"gatsby-code-title\">index.html</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- (中略) --></span>\n  <span class=\"token comment\">&lt;!-- name：Formの名前NetlifyのおけるFormの識別子となる --></span>\n  <span class=\"token comment\">&lt;!-- novalidate：Formikで入力チェックするためブラウザの入力チェックはオフ --></span>\n  <span class=\"token comment\">&lt;!-- data-netlify：NetlifyでFormを認識させるための属性 --></span>\n  <span class=\"token comment\">&lt;!-- netlify-honeypot：NetlifyでFormを認識させるための属性 --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span>\n    <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>POST<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>contact<span class=\"token punctuation\">\"</span></span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">novalidate</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">data-netlify</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">netlify-honeypot</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bot-field<span class=\"token punctuation\">\"</span></span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">></span></span></span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sampleText<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sampleFile<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    \n    <span class=\"token comment\">&lt;!-- 送信ボタン --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">></span></span>\n      SUBMIT\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!-- (中略) --></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2 id=\"step2-ファイルアップロード--react--同期送信\" style=\"position:relative;\"><a href=\"#step2-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89--react--%E5%90%8C%E6%9C%9F%E9%80%81%E4%BF%A1\" aria-label=\"step2 ファイルアップロード  react  同期送信 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step.2 ファイルアップロード + React + 同期送信</h2>\n<p>次にReactの場合です。Reactの場合はフォーム情報に<code class=\"language-text\">bot-field</code>と<code class=\"language-text\">form-name</code>を付与する必要があります。\nこれらは<code class=\"language-text\">&lt;input type=\"hidden\"></code>で実装します。</p>\n<div class=\"gatsby-code-title\">SampleForm.jsx</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>  <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>form\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"contact\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formの名前NetlifyのおけるFormの識別子となる */</span><span class=\"token punctuation\">}</span>\n    method<span class=\"token operator\">=</span><span class=\"token string\">\"POST\"</span>\n    novalidate<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formikで入力チェックするためブラウザの入力チェックはオフ */</span><span class=\"token punctuation\">}</span>\n    data<span class=\"token operator\">-</span>netlify<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n    netlify<span class=\"token operator\">-</span>honeypot<span class=\"token operator\">=</span><span class=\"token string\">\"bot-field\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyFormで必要な値 */</span><span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bot-field<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyFormで必要な値 */</span><span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></span><span class=\"gatsby-highlight-code-line\"></span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sampleText<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sampleFile<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    \n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* 送信ボタン */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      SUBMIT</span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">);</span>\n<span class=\"token plain-text\"></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2 id=\"step3-ファイルアップロード--react--formik--同期送信\" style=\"position:relative;\"><a href=\"#step3-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89--react--formik--%E5%90%8C%E6%9C%9F%E9%80%81%E4%BF%A1\" aria-label=\"step3 ファイルアップロード  react  formik  同期送信 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step.3 ファイルアップロード + React + Formik + 同期送信</h2>\n<p>Netlify Formsはサーバー側のバリデーション機能はないので、\n実際使うときはフロント側のバリデーションが必要です。\nここでは、Reactのバリデーションライブラリ<a href=\"https://jaredpalmer.com/formik/\">Fromik</a>を使ってバリデーションを追加します。</p>\n<p>入力チェックエラーメッセージ表示はコンポーネント化します。そのほうがすっきりするので。</p>\n<div class=\"gatsby-code-title\">ErrorMessage.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Field<span class=\"token punctuation\">,</span> getIn <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'formik'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Formikエラーメッセージ表示用コンポーネント</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Field</span></span>\n    <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> form <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> error <span class=\"token operator\">=</span> <span class=\"token function\">getIn</span><span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> touch <span class=\"token operator\">=</span> <span class=\"token function\">getIn</span><span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>touched<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      cosnt isShowError <span class=\"token operator\">=</span> touch <span class=\"token operator\">&amp;&amp;</span> error<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> isShowError\n        <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>error<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>入力フォームのコンポーネントはFormikの作法にしたがって以下を実装します。<br/></p>\n<ul>\n<li><code class=\"language-text\">initialValues</code>:入力フォーム初期値設定処理</li>\n<li><code class=\"language-text\">validate</code>: 入力チェック処理</li>\n<li><code class=\"language-text\">render</code>: 入力フォーム描画処理</li>\n</ul>\n<p>ただしファイルについてはFormikが用意している<code class=\"language-text\">Field</code>タグは<code class=\"language-text\">type=file</code>をサポートしていないので、HTMLの<code class=\"language-text\">input</code>タグでファイル変更時に手動でFormikにファイルを追加します。</p>\n<div class=\"gatsby-code-title\">SampleForm.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> navigate <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Formik<span class=\"token punctuation\">,</span> Field <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'formik'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ErrorMessage <span class=\"token keyword\">from</span> <span class=\"token string\">'./ErrorMessage'</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// フォームの値を初期化</span>\n<span class=\"token keyword\">const</span> initialValues <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">'form-name'</span><span class=\"token operator\">:</span> <span class=\"token string\">'contact'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// NetlifyFormで必要な値</span>\n  <span class=\"token string-property property\">'bot-field'</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// NetlifyFormで必要な値</span>\n  sampleText<span class=\"token punctuation\">]</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">sampleFile</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// 入力チェック</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleValidate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">values</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> errors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// sampleText</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>values<span class=\"token punctuation\">.</span>sampleText<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    errors<span class=\"token punctuation\">.</span>sampleText <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">テキストを記入してください</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// sampleFile</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>values<span class=\"token punctuation\">.</span>sampleFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    errors<span class=\"token punctuation\">.</span>sampleFile <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ファイルを添付してください</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">.</span>sampleFile<span class=\"token punctuation\">.</span>size <span class=\"token operator\">></span> <span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    errors<span class=\"token punctuation\">.</span>sampleFile <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">100MB以下のファイルを添付してください</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> errors<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">// Form描画処理</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">renderForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n  dirty<span class=\"token punctuation\">,</span>\n  isSubmitting<span class=\"token punctuation\">,</span>\n  setFieldValue<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>form\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"contact\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formの名前NetlifyのおけるFormの識別子となる */</span><span class=\"token punctuation\">}</span>\n    method<span class=\"token operator\">=</span><span class=\"token string\">\"POST\"</span>\n    novalidate<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formikで入力チェックするためブラウザの入力チェックはオフ */</span><span class=\"token punctuation\">}</span>\n    data<span class=\"token operator\">-</span>netlify<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n    netlify<span class=\"token operator\">-</span>honeypot<span class=\"token operator\">=</span><span class=\"token string\">\"bot-field\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Field</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bot-field<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyFormで必要な値 */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Field</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyFormで必要な値 */</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Field</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sampleText<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ErrorMessage</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sampleText<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* FormikのFieldタグではなくHTMLのinputタグを使う */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span>input\n      id<span class=\"token operator\">=</span><span class=\"token string\">\"sampleFile\"</span>\n      name<span class=\"token operator\">=</span><span class=\"token string\">\"sampleFile\"</span>\n      type<span class=\"token operator\">=</span><span class=\"token string\">\"file\"</span>\n      <span class=\"token punctuation\">{</span><span class=\"token comment\">/* ファイル変更時に、手動でFormikの値に設定 */</span><span class=\"token punctuation\">}</span>\n      onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token function\">setFieldValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sampleFile\"</span><span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ErrorMessage</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sampleFile<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    \n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* 送信ボタン */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">disabled</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>isSubmitting<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span> isSubmitting <span class=\"token operator\">?</span> <span class=\"token string\">'SUBMITTING...'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'SUBMIT'</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n);\n\n\n// Form用Reactコンポーネント\nexport default () =>  (\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Formik</span></span>\n    <span class=\"token attr-name\">initialValues</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>initialValues<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">validate</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleValidate<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>renderForm<span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n);</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br />\n<h2 id=\"step5-ファイルアップロード--react--formik--非同期送信axios\" style=\"position:relative;\"><a href=\"#step5-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89--react--formik--%E9%9D%9E%E5%90%8C%E6%9C%9F%E9%80%81%E4%BF%A1axios\" aria-label=\"step5 ファイルアップロード  react  formik  非同期送信axios permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step.5 ファイルアップロード + React + Formik + 非同期送信(Axios)</h2>\n<p>Reactを使っている場合、SPAなので同期通信は極力控えたほうが良いです。\nそのため入力フォームの送信も非同期でやるのが現実的でしょう。\nここでは、<code class=\"language-text\">Formik</code>の<code class=\"language-text\">onSubmit</code>でAxiosを使ってお問い合わせフォームを非同期送信する例を示します。<br/>\n<code class=\"language-text\">Formik</code>タグは<code class=\"language-text\">onSubmit</code>プロパティでサブミット処理を自分で定義できます。\nこの<code class=\"language-text\">onSubmit</code>にて、axiosを使うことで非同期処理が可能です。<br/></p>\n<p><small>大半は前セクションと同じなので差分にフォーカスして説明します</small></p>\n<p>エラーメッセージ用コンポーネントは前回と同じなので割愛します。</p>\n<p>以下フォーム用コンポーネントです。</p>\n<div class=\"gatsby-code-title\">SampleForm.jsx</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> navigate <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Formik<span class=\"token punctuation\">,</span> Field <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'formik'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ErrorMessage <span class=\"token keyword\">from</span> <span class=\"token string\">'./ErrorMessage'</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">\"axios\"</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token comment\">// フォームの値を初期化</span>\n<span class=\"token comment\">/* (略) */</span>\n\n<span class=\"token comment\">// 入力チェック</span>\n<span class=\"token comment\">/* (略) */</span>\n\n<span class=\"token comment\">// サブミット処理</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleSubmit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">values<span class=\"token punctuation\">,</span> actions</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// FormData作成</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span>  params <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  params<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'form-name'</span><span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">'form-name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// for Netlify Forms</span></span><span class=\"gatsby-highlight-code-line\">  params<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bot-field'</span><span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">'bot-field'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// for Netlify Forms</span></span><span class=\"gatsby-highlight-code-line\">  params<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sampleText'</span><span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">'sampleText'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  params<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sampleFile'</span><span class=\"token punctuation\">,</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">'sampleFile'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// Formikの送信中フラグをオンにする</span></span><span class=\"gatsby-highlight-code-line\">  actions<span class=\"token punctuation\">.</span><span class=\"token function\">setSubmitting</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// axiosで非同期にお問い合わせフォームを送信</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token string-property property\">\"Content-Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"application/x-www-form-urlencoded\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> params<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// フォーム送信完了後</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// 他画面に遷移（同期遷移ではなくSPAとしての遷移）</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/application-complete'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// フォーム内容初期化</span></span><span class=\"gatsby-highlight-code-line\">    actions<span class=\"token punctuation\">.</span><span class=\"token function\">resetForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// 最後にFormikの送信中フラグをオフにする</span></span><span class=\"gatsby-highlight-code-line\">    actions<span class=\"token punctuation\">.</span><span class=\"token function\">setSubmitting</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// なにかしらエラーハンドリング</span></span><span class=\"gatsby-highlight-code-line\">    actions<span class=\"token punctuation\">.</span><span class=\"token function\">setSubmitting</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span>    <span class=\"token comment\">/* (中略) */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">// Form描画処理</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">renderForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n  handleSubmit<span class=\"token punctuation\">,</span>\n  dirty<span class=\"token punctuation\">,</span>\n  isSubmitting<span class=\"token punctuation\">,</span>\n  setFieldValue<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>form\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"contact\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formの名前NetlifyのおけるFormの識別子となる */</span><span class=\"token punctuation\">}</span>\n    method<span class=\"token operator\">=</span><span class=\"token string\">\"POST\"</span>\n    novalidate<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Formikで入力チェックするためブラウザの入力チェックはオフ */</span><span class=\"token punctuation\">}</span>\n    data<span class=\"token operator\">-</span>netlify<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n    netlify<span class=\"token operator\">-</span>honeypot<span class=\"token operator\">=</span><span class=\"token string\">\"bot-field\"</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* NetlifyでFormを認識させるための属性 */</span><span class=\"token punctuation\">}</span>\n    onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* (中略) */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// Form用Reactコンポーネント</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>  <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Formik</span></span>\n    <span class=\"token attr-name\">initialValues</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>initialValues<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">validate</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleValidate<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>renderForm<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br />\n<p>これでようやくNetlify FormsにおいてReactを使って非同期でファイルアップロードできるようになりました！</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>自分の復習も兼ねてステップごとに実装方法をご紹介しました。\nAngularとVueで実装する場合も今回紹介した実装と似たような感じになると思います。\n参考にしてみてください🍅</p>","excerpt":"なにこれ Netlify FormsはNetlifyにホストしている静的サイトでお問い合わせフォームを作れる機能です。DBを用意しなくても、お問い合わせフォーム送信結果はNetlify側で保持しれくれます。Netlifyの管理画面からCSV…","frontmatter":{"slug":"/async-file-upload-in-netlify-forms-with-react-formik-axios","title":"Netlify Formsでファイルを非同期アップロード with React + Formik + Axios","date":"2019-06-01T22:00:00.000-07:00","tags":["Netlify","NetlifyForms","React","Fromik","Axios"],"keywords":["Netlify"],"thumbnail":"thumbnail/2019/06/async-file-upload-in-netlify-forms-with-react-formik-axios.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>WordCloudをJSだけで生成したい。Pythonとか使わずにフロントエンドだけでやりたい。というモチベーションで、\n<a href=\"https://github.com/takuyaa/kuromoji.js/\">kuromoji.js</a>と<a href=\"https://github.com/jasondavies/d3-cloud\">D3-Cloud</a>を使って文字列をインプットにWordCloudを描画するReactアプリを作ってみました。今回はそのやり方についてご紹介します。</p>\n<p>※サンプルコードは以下に置いております。\n<a href=\"https://github.com/Takumon/playbox2019/blob/master/react-kuromoji-sample/src/App.js\">https://github.com/Takumon/playbox2019/blob/master/react-kuromoji-sample/src/App.js</a></p>\n<h2 id=\"wordcloudの作り方原理\" style=\"position:relative;\"><a href=\"#wordcloud%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9%E5%8E%9F%E7%90%86\" aria-label=\"wordcloudの作り方原理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WordCloudの作り方（原理）</h2>\n<p>WordCloudは文章をインプットにして画像をアウトプットします。\nその過程は2つに分かれます。</p>\n<h3 id=\"1-文章を解析して単語出現回数をデータ化\" style=\"position:relative;\"><a href=\"#1-%E6%96%87%E7%AB%A0%E3%82%92%E8%A7%A3%E6%9E%90%E3%81%97%E3%81%A6%E5%8D%98%E8%AA%9E%E5%87%BA%E7%8F%BE%E5%9B%9E%E6%95%B0%E3%82%92%E3%83%87%E3%83%BC%E3%82%BF%E5%8C%96\" aria-label=\"1 文章を解析して単語出現回数をデータ化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 文章を解析して単語出現回数をデータ化</h3>\n<div class=\"gatsby-code-title\">たとえばこんな文章を...</div>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-txt line-numbers\"><code class=\"language-txt\">そこも場合もうその病気らに対して旨の時がしんませ。単に事実に使用方はどうかその応用たないでもが思いてならないがも発展思いうべきて、あいにくにもなるだなですた。\n差が向いんものは何だか翌日からしきりにんなけれう。もちろんネルソンさんで養成道具一応束縛に致しませ示威この力誰か講演をというご妨害ないますですうば、\n...</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>↓↓</p>\n<div class=\"gatsby-code-title\">単語と出現回数のデータに加工します</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"そこ\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">14</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"場合\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">11</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"うそ\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"病気\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">8</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ら\"</span><span class=\"token punctuation\">,</span>      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">17</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"旨\"</span><span class=\"token punctuation\">,</span>      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"時\"</span><span class=\"token punctuation\">,</span>      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">43</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"しん\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"事実\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"使用\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"方\"</span><span class=\"token punctuation\">,</span>      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">41</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"応用\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ない\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">175</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"思う\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">39</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"なる\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">99</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"発展\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">13</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"思い\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"くる\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">8</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"差\"</span><span class=\"token punctuation\">,</span>      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">\"向く\"</span><span class=\"token punctuation\">,</span>    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"2-データをもとにイイ感じの画像出力\" style=\"position:relative;\"><a href=\"#2-%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%82%E3%81%A8%E3%81%AB%E3%82%A4%E3%82%A4%E6%84%9F%E3%81%98%E3%81%AE%E7%94%BB%E5%83%8F%E5%87%BA%E5%8A%9B\" aria-label=\"2 データをもとにイイ感じの画像出力 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. データをもとにイイ感じの画像出力</h3>\n<p>単語と出現回数の他に、以下の値を何らかの形で決定します。</p>\n<ul>\n<li>フォントの大きさ</li>\n<li>フォントの回転位置</li>\n<li>フォントの種類</li>\n<li>フォントの色</li>\n<li>表示位置</li>\n</ul>\n<p>大体のWordCloud系ライブラリは出現回数が多い単語を大きく中心に配置し、\nその周りに敷き詰めるように他の単語を配置します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/76191097103de55829c825fc63f9828a/748b0/wordcloud-sample.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAENElEQVR42kWS624aZwJAedl9kNXuj0p7UdTLrrorbXerNm0um5hkEjtxHGzHEAzmAzw2twGGuQ9zgYEBhst8PlXVH32BI52jU1DV1lcj3epNG29v1lf/FaPRG2G4FRHexWI28sSbW0s8/dQVP37qCuvOEd26JxqfHRENZ8Ib+0KLI9Hzw5uWF/QajcajgmHqypyULNZy4j6rrEW+6ZH5GotsTa07oTxZUjXWZMuQ3OySGWOw75GLDHu+5zjd5G+2MHKcYkGf6K8yEppmtH/d8uV0tpBc/0duP34hN+0nkvI3cq9dyMDey4XWlQf9WnL1SB4u/yYtN5XGXSjb6/W+lO4xbPtlYawbSnIAMZnl35fHdMIMaV3Dsz+QGg6Zcc9D8xlTD9Ig4VD7gYf3f+bQVfA0nZu7iNNZkncOoFtWsaCPB8phmzL3zTx0l0zjDXz8E/LiW1YRyPsy2/4R8zSA1lMeescs5zEbZ8ju7d8piYB/RfP8+WLHyLSKhYFhKqx06Cr5pjlD2iYPNz8ga09YBrBVzzlUvmQXD8CoQflrHkp/Zd8scij/D7Nj0Rkbubt/wHLdYsG2HQVW5EGUr7SE7Sjl4CRgtgmGDk+vNaR2xso3WfgWmVCQv2qrL5m/KpKefsB7+yzHC5jUh8WCaZoK7Jj7Tj4xbQLTpl+tcFep4N0JXjddfrwJSOczVvOIXesW2b5mmy1IL0tsHYefwtPcywK85qRYsF1X4SBZW3a+negsfJ/edZlho0bzwzGLqcl5x+SPRyr/LvV5fNrntl4Dq0rut9mvFljtcs56xcT0igVT0xTSBdHUz23TxxxPGIk6ekvQrVyxXfm8V3X+8rbPu7bJS7X9ayuCB5g7Dqt370gqtXxu6KiiXiwYuq64C4kX+3k4V0nmNlq1QvtTCa9X53l9wk9VCysdUHXO+e72W150n6JGY9SpSmN4zj5K8kOSMLhVi4WxriuTJehOLV8uq0ytK4aNOoPrCvdC8N2lxmIW4I6GHA+Oed75PyeTDzQHFzitGqo7Jj15l3PfQdcnxYJj2wpAuJrl0fIOyyij1auoF2fcHCtMgym98YhZEiPcBo/bj3k9OkEML0lOzhF+Rvzieb6tVKi3mr8D+zM3PzNP6Rq3DD5fcfvxBLVySaLrZNqIj/oZyvANxf4RT+5/5kR/D2qf2dEL0vOLXG42lPq/bfNKAk4a7Rt+Qw5DTTqDoex+FnIWRHL54UzG//in1HqqrHSqsj9syWb3s2z6ujwK13JomjK0f96vWfBp5L0sOE6kQMAu6+W2NSXwbXbpDl/bsl9twbFhFrNZpiyTlF264iGJSTcrqpnE3e85bNQcNqiTXrFw31a/SmKrF3rmjTkciVG3I1xjIjzPFaHjiNgwRZLEYjENhR/FIg5nIg0dETlj4TmuiD1HRNPZjakPeqVG6dEvx/OxlPZOgfsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/76191097103de55829c825fc63f9828a/ba381/wordcloud-sample.webp 200w,\n/static/76191097103de55829c825fc63f9828a/7f61c/wordcloud-sample.webp 400w,\n/static/76191097103de55829c825fc63f9828a/d00b9/wordcloud-sample.webp 800w,\n/static/76191097103de55829c825fc63f9828a/1ae05/wordcloud-sample.webp 868w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/76191097103de55829c825fc63f9828a/772e8/wordcloud-sample.png 200w,\n/static/76191097103de55829c825fc63f9828a/e17e5/wordcloud-sample.png 400w,\n/static/76191097103de55829c825fc63f9828a/5a190/wordcloud-sample.png 800w,\n/static/76191097103de55829c825fc63f9828a/748b0/wordcloud-sample.png 868w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/76191097103de55829c825fc63f9828a/5a190/wordcloud-sample.png\"\n            alt=\"wordcloud sample\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"wordcloudの作り方実装\" style=\"position:relative;\"><a href=\"#wordcloud%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9%E5%AE%9F%E8%A3%85\" aria-label=\"wordcloudの作り方実装 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WordCloudの作り方（実装）</h2>\n<p>自前実装の必要はありません。<a href=\"https://github.com/takuyaa/kuromoji.js/\">kuromoji.js</a>と<a href=\"https://github.com/jasondavies/d3-cloud\">D3-Cloud</a>というライブラリを使えば簡単に実装できます。\nさらに<a href=\"https://github.com/Yoctol/react-d3-cloud\">react-d3-cloud</a>というD3-CloudをReactで使うためのライブラリもあったので、それを使ってReactアプリを実装します。</p>\n<h3 id=\"1-文章を解析して単語出現回数をデータ化-1\" style=\"position:relative;\"><a href=\"#1-%E6%96%87%E7%AB%A0%E3%82%92%E8%A7%A3%E6%9E%90%E3%81%97%E3%81%A6%E5%8D%98%E8%AA%9E%E5%87%BA%E7%8F%BE%E5%9B%9E%E6%95%B0%E3%82%92%E3%83%87%E3%83%BC%E3%82%BF%E5%8C%96-1\" aria-label=\"1 文章を解析して単語出現回数をデータ化 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 文章を解析して単語出現回数をデータ化</h3>\n<p>kuromoji.jsは形態素解析で辞書を使います。\nkuromoji.jsをインストールすると辞書がバンドルされています。\nReactで使う場合は以下のように辞書の場所を移動して、辞書をブラウザから読み込めるようにしておく必要があります。</p>\n<div class=\"gatsby-code-title\">辞書をブラウザから読み込める場所にコピー</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">cp</span> <span class=\"token parameter variable\">-a</span> node_modules/kuromoji/dict public/</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br/>\n<p>kuromoji.jsの解析結果は以下のようになります。\n色々ありますが、今回は<code class=\"language-text\">pos（品詞）</code>と<code class=\"language-text\">surface_form（表層形）</code>または<code class=\"language-text\">basic_form（基本形）</code>のみを使います。</p>\n<div class=\"gatsby-code-title\">kuromoji.js解析結果の形式</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">word_id</span><span class=\"token operator\">:</span> <span class=\"token number\">509800</span><span class=\"token punctuation\">,</span>          <span class=\"token comment\">// 辞書内での単語ID</span>\n  <span class=\"token literal-property property\">word_type</span><span class=\"token operator\">:</span> <span class=\"token string\">'KNOWN'</span><span class=\"token punctuation\">,</span>       <span class=\"token comment\">// 単語タイプ(辞書に登録されている単語ならKNOWN, 未知語ならUNKNOWN)</span>\n  <span class=\"token literal-property property\">word_position</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>         <span class=\"token comment\">// 単語の開始位置</span>\n  <span class=\"token literal-property property\">surface_form</span><span class=\"token operator\">:</span> <span class=\"token string\">'黒文字'</span><span class=\"token punctuation\">,</span>    <span class=\"token comment\">// 表層形</span>\n  <span class=\"token literal-property property\">pos</span><span class=\"token operator\">:</span> <span class=\"token string\">'名詞'</span><span class=\"token punctuation\">,</span>               <span class=\"token comment\">// 品詞</span>\n  <span class=\"token literal-property property\">pos_detail_1</span><span class=\"token operator\">:</span> <span class=\"token string\">'一般'</span><span class=\"token punctuation\">,</span>      <span class=\"token comment\">// 品詞細分類1</span>\n  <span class=\"token literal-property property\">pos_detail_2</span><span class=\"token operator\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>        <span class=\"token comment\">// 品詞細分類2</span>\n  <span class=\"token literal-property property\">pos_detail_3</span><span class=\"token operator\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>        <span class=\"token comment\">// 品詞細分類3</span>\n  <span class=\"token literal-property property\">conjugated_type</span><span class=\"token operator\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>     <span class=\"token comment\">// 活用型</span>\n  <span class=\"token literal-property property\">conjugated_form</span><span class=\"token operator\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>     <span class=\"token comment\">// 活用形</span>\n  <span class=\"token literal-property property\">basic_form</span><span class=\"token operator\">:</span> <span class=\"token string\">'黒文字'</span><span class=\"token punctuation\">,</span>      <span class=\"token comment\">// 基本形</span>\n  <span class=\"token literal-property property\">reading</span><span class=\"token operator\">:</span> <span class=\"token string\">'クロモジ'</span><span class=\"token punctuation\">,</span>       <span class=\"token comment\">// 読み</span>\n  <span class=\"token literal-property property\">pronunciation</span><span class=\"token operator\">:</span> <span class=\"token string\">'クロモジ'</span>  <span class=\"token comment\">// 発音</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>Reactコンポーネントでは以下のように実装します。</p>\n<div class=\"gatsby-code-title\">テキスト加工処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> kuromoji <span class=\"token keyword\">from</span> <span class=\"token string\">'kuromoji'</span>\n\n<span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">そこも場合もうその病気らに対して旨の時がしんませ。\n単に事実に使用方はどうかその応用たないでもが思いてならないがも発展思いうべきて、\n...\n</span><span class=\"token template-punctuation string\">`</span></span>\n\n<span class=\"token comment\">// 辞書格納フォルダパス</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DIC_URL</span> <span class=\"token operator\">=</span> <span class=\"token string\">'/dict'</span>\n\n<span class=\"token comment\">// WordCloudの情報として抽出する品詞（助詞、助動詞などは意味がないので拾わない）</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TARGET_POS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'名詞'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'動詞'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'形容詞'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\">// kuromoji.jsの解析結果の値で特に値がない場合は以下の文字が設定される</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">NO_CONTENT</span> <span class=\"token operator\">=</span> <span class=\"token string\">'*'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// kuromoji.jsによる形態素解析は非同期なので</span>\n  <span class=\"token comment\">// 解析結果はstateのプロパティとしてコンストラクタで初期化しておく</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">dataForD3Cloud</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 辞書を読み混んでトークナイザー（形態素解析するための関数）を生成</span>\n    kuromoji<span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">dicPath</span><span class=\"token operator\">:</span> <span class=\"token constant\">DIC_URL</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> tokenizer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// テキストを引数にして形態素解析</span>\n      <span class=\"token keyword\">const</span> tokens <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span><span class=\"token function\">tokenize</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n\n      <span class=\"token comment\">// 解析結果から単語と出現回数を抽出</span>\n      <span class=\"token keyword\">const</span> dataForD3Cloud <span class=\"token operator\">=</span> tokens\n        <span class=\"token comment\">// pos（品詞）を参照し、'名詞', '動詞', '形容詞'のみを抽出</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> <span class=\"token constant\">TARGET_POS</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// 単語を抽出(basic_formかsurface_formに単語が存在する)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> t<span class=\"token punctuation\">.</span>basic_form <span class=\"token operator\">===</span> <span class=\"token constant\">NO_CONTENT</span> <span class=\"token operator\">?</span> t<span class=\"token punctuation\">.</span>surface_form <span class=\"token operator\">:</span> t<span class=\"token punctuation\">.</span>basic_form<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// [{text: 単語, value: 出現回数}]の形にReduce</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> text</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=></span> c<span class=\"token punctuation\">.</span>text <span class=\"token operator\">===</span> text<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            target<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>value <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            data<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n              text<span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n          <span class=\"token keyword\">return</span> data\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      \n      <span class=\"token comment\">// 加工した解析結果をstateにセット</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>dataForD3Cloud<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 略</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"2-データをもとにイイ感じの画像出力-1\" style=\"position:relative;\"><a href=\"#2-%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%82%E3%81%A8%E3%81%AB%E3%82%A4%E3%82%A4%E6%84%9F%E3%81%98%E3%81%AE%E7%94%BB%E5%83%8F%E5%87%BA%E5%8A%9B-1\" aria-label=\"2 データをもとにイイ感じの画像出力 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. データをもとにイイ感じの画像出力</h3>\n<p><a href=\"https://github.com/Yoctol/react-d3-cloud\">react-d3-cloud</a>が専用のコンポーネントを提供しているのでそれを使うだけです。</p>\n<div class=\"gatsby-code-title\">WordCloud描画処理</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> WordCloud <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-d3-cloud\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// フォントの大きさを決める関数</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fontSizeMapper</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">word</span> <span class=\"token operator\">=></span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span>\n\n<span class=\"token comment\">// フォントの回転位置</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">rotate</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">word</span> <span class=\"token operator\">=></span> word<span class=\"token punctuation\">.</span>value <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> <span class=\"token number\">90</span>\n\n<span class=\"token comment\">// フォントの種類</span>\n<span class=\"token keyword\">const</span> fontFamily <span class=\"token operator\">=</span> <span class=\"token string\">'meiryo'</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 略</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 略</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>WordCloud\n          data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>dataForD3Cloud<span class=\"token punctuation\">}</span>\n          fontSizeMapper<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>fontSizeMapper<span class=\"token punctuation\">}</span>\n          rotate<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>rotate<span class=\"token punctuation\">}</span>\n          font<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>fontFamily<span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>さて、ここで疑問を持たれる方もいると思います。\n前述の<a href=\"#2-%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%82%E3%81%A8%E3%81%AB%E3%82%A4%E3%82%A4%E6%84%9F%E3%81%98%E3%81%AE%E7%94%BB%E5%83%8F%E5%87%BA%E5%8A%9B\">WordCloudの作り方（原理）> 2. データをもとにイイ感じの画像出力</a>で画像出力するには以下を決定する必要があると述べました。</p>\n<ol>\n<li>フォントの大きさ・・・・・☚コンポーネントで定義した👍</li>\n<li>フォントの回転位置・・・・☚コンポーネントで定義した👍</li>\n<li>フォントの種類・・・・・・☚コンポーネントで定義した👍</li>\n<li>フォントの色・・・・・・・☚コンポーネントで定義してない🤔</li>\n<li>表示位置・・・・・・・・・☚コンポーネントで定義してない🤔</li>\n</ol>\n<p><code class=\"language-text\">4</code>,<code class=\"language-text\">5</code>どうやって決めるのでしょうか？\n実は<code class=\"language-text\">4</code>はreact-d3-cloud内部でよしなり定義してくれていて、\n<code class=\"language-text\">5</code>はD3-Cloudがイイ感じに決めてくれています。</p>\n<p><a href=\"https://github.com/Yoctol/react-d3-cloud/blob/master/src/WordCloud.js#L91\"><strong>↓react-d3-cloud内部ロジック 色定義：WordCloud.js#L91</strong></a></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 67\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">   <span class=\"token keyword\">const</span> layout <span class=\"token operator\">=</span> <span class=\"token function\">cloud</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">font</span><span class=\"token punctuation\">(</span>font<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">words</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">padding</span><span class=\"token punctuation\">(</span>padding<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>rotate<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">fontSize</span><span class=\"token punctuation\">(</span>fontSizeMapper<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">words</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> texts <span class=\"token operator\">=</span> <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>wordCloud<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'svg'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">,</span> layout<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">,</span> layout<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>layout<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>layout<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">selectAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>words<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">enter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'font-size'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">d</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>size<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'font-family'</span><span class=\"token punctuation\">,</span> font<span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fill'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">d<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">fill</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></span>          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text-anchor'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'middle'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">d</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">[</span>d<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)rotate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>d<span class=\"token punctuation\">.</span>rotate<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">d</span> <span class=\"token operator\">=></span> d<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p><a href=\"https://github.com/jasondavies/d3-cloud/blob/master/build/d3.layout.cloud.js#L59-L73\"><strong>↓D3-Cloud内部ロジック 表示位置定義：d3.layout.cloud.js#L59-L73</strong></a></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 56\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">    <span class=\"token keyword\">function</span> <span class=\"token function\">step</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> start <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> start <span class=\"token operator\">&lt;</span> timeInterval <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">++</span>i <span class=\"token operator\">&lt;</span> n <span class=\"token operator\">&amp;&amp;</span> timer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">var</span> d <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        d<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        d<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">cloudSprite</span><span class=\"token punctuation\">(</span>contextAndRatio<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">.</span>hasText <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">place</span><span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> bounds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">          tags<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token function\">event</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"word\"</span><span class=\"token punctuation\">,</span> cloud<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bounds<span class=\"token punctuation\">)</span> <span class=\"token function\">cloudBounds</span><span class=\"token punctuation\">(</span>bounds<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token keyword\">else</span> bounds <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> d<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> d<span class=\"token punctuation\">.</span>x0<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> d<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> d<span class=\"token punctuation\">.</span>y0<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> d<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> d<span class=\"token punctuation\">.</span>x1<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> d<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> d<span class=\"token punctuation\">.</span>y1<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token comment\">// Temporary hack</span></span><span class=\"gatsby-highlight-code-line\">          d<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-=</span> size<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">          d<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-=</span> size<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span></span>      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">>=</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        cloud<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">event</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"end\"</span><span class=\"token punctuation\">,</span> cloud<span class=\"token punctuation\">,</span> tags<span class=\"token punctuation\">,</span> bounds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>これによって以下のようなイイ感じのWordCloudを出力することができるのですね。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/76191097103de55829c825fc63f9828a/748b0/wordcloud-sample.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAENElEQVR42kWS624aZwJAedl9kNXuj0p7UdTLrrorbXerNm0um5hkEjtxHGzHEAzmAzw2twGGuQ9zgYEBhst8PlXVH32BI52jU1DV1lcj3epNG29v1lf/FaPRG2G4FRHexWI28sSbW0s8/dQVP37qCuvOEd26JxqfHRENZ8Ib+0KLI9Hzw5uWF/QajcajgmHqypyULNZy4j6rrEW+6ZH5GotsTa07oTxZUjXWZMuQ3OySGWOw75GLDHu+5zjd5G+2MHKcYkGf6K8yEppmtH/d8uV0tpBc/0duP34hN+0nkvI3cq9dyMDey4XWlQf9WnL1SB4u/yYtN5XGXSjb6/W+lO4xbPtlYawbSnIAMZnl35fHdMIMaV3Dsz+QGg6Zcc9D8xlTD9Ig4VD7gYf3f+bQVfA0nZu7iNNZkncOoFtWsaCPB8phmzL3zTx0l0zjDXz8E/LiW1YRyPsy2/4R8zSA1lMeescs5zEbZ8ju7d8piYB/RfP8+WLHyLSKhYFhKqx06Cr5pjlD2iYPNz8ga09YBrBVzzlUvmQXD8CoQflrHkp/Zd8scij/D7Nj0Rkbubt/wHLdYsG2HQVW5EGUr7SE7Sjl4CRgtgmGDk+vNaR2xso3WfgWmVCQv2qrL5m/KpKefsB7+yzHC5jUh8WCaZoK7Jj7Tj4xbQLTpl+tcFep4N0JXjddfrwJSOczVvOIXesW2b5mmy1IL0tsHYefwtPcywK85qRYsF1X4SBZW3a+negsfJ/edZlho0bzwzGLqcl5x+SPRyr/LvV5fNrntl4Dq0rut9mvFljtcs56xcT0igVT0xTSBdHUz23TxxxPGIk6ekvQrVyxXfm8V3X+8rbPu7bJS7X9ayuCB5g7Dqt370gqtXxu6KiiXiwYuq64C4kX+3k4V0nmNlq1QvtTCa9X53l9wk9VCysdUHXO+e72W150n6JGY9SpSmN4zj5K8kOSMLhVi4WxriuTJehOLV8uq0ytK4aNOoPrCvdC8N2lxmIW4I6GHA+Oed75PyeTDzQHFzitGqo7Jj15l3PfQdcnxYJj2wpAuJrl0fIOyyij1auoF2fcHCtMgym98YhZEiPcBo/bj3k9OkEML0lOzhF+Rvzieb6tVKi3mr8D+zM3PzNP6Rq3DD5fcfvxBLVySaLrZNqIj/oZyvANxf4RT+5/5kR/D2qf2dEL0vOLXG42lPq/bfNKAk4a7Rt+Qw5DTTqDoex+FnIWRHL54UzG//in1HqqrHSqsj9syWb3s2z6ujwK13JomjK0f96vWfBp5L0sOE6kQMAu6+W2NSXwbXbpDl/bsl9twbFhFrNZpiyTlF264iGJSTcrqpnE3e85bNQcNqiTXrFw31a/SmKrF3rmjTkciVG3I1xjIjzPFaHjiNgwRZLEYjENhR/FIg5nIg0dETlj4TmuiD1HRNPZjakPeqVG6dEvx/OxlPZOgfsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/76191097103de55829c825fc63f9828a/ba381/wordcloud-sample.webp 200w,\n/static/76191097103de55829c825fc63f9828a/7f61c/wordcloud-sample.webp 400w,\n/static/76191097103de55829c825fc63f9828a/d00b9/wordcloud-sample.webp 800w,\n/static/76191097103de55829c825fc63f9828a/1ae05/wordcloud-sample.webp 868w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/76191097103de55829c825fc63f9828a/772e8/wordcloud-sample.png 200w,\n/static/76191097103de55829c825fc63f9828a/e17e5/wordcloud-sample.png 400w,\n/static/76191097103de55829c825fc63f9828a/5a190/wordcloud-sample.png 800w,\n/static/76191097103de55829c825fc63f9828a/748b0/wordcloud-sample.png 868w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/76191097103de55829c825fc63f9828a/5a190/wordcloud-sample.png\"\n            alt=\"wordcloud sample\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"その他日本語長文サンプルの準備にはすぐに使えるダミーテキストが便利\" style=\"position:relative;\"><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96%E6%97%A5%E6%9C%AC%E8%AA%9E%E9%95%B7%E6%96%87%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%81%AE%E6%BA%96%E5%82%99%E3%81%AB%E3%81%AF%E3%81%99%E3%81%90%E3%81%AB%E4%BD%BF%E3%81%88%E3%82%8B%E3%83%80%E3%83%9F%E3%83%BC%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%8C%E4%BE%BF%E5%88%A9\" aria-label=\"その他日本語長文サンプルの準備にはすぐに使えるダミーテキストが便利 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>その他：日本語長文サンプルの準備には「すぐに使えるダミーテキスト」が便利</h2>\n<p>WordCloudを作るときにテキトーな日本語文章を大量に用意する必要があります。\nそんな時は下記サイトが便利でした。</p>\n<p><a href=\"https://lipsum.sugutsukaeru.jp/index.cgi\">https://lipsum.sugutsukaeru.jp/index.cgi</a></p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>Pythonじゃないと形態素解析とWordCloud生成は無理かなと思っていましたが、JavaScriptでもライブラリが提供されていました。JavaScriptであればブラウザ上で処理を行えるので、たとえば入力フォームに入力した文字列をインプットにWordCloudを生成するなど、インタラクティブな操作が可能です。ただし生成に時間がかかるので、実際使うときはユーザーに生成中の旨をフィードバックするようなUIにする必要があるでしょう🍅</p>","excerpt":"なにこれ WordCloudをJSだけで生成したい。Pythonとか使わずにフロントエンドだけでやりたい。というモチベーションで、\nkuromoji.jsとD3-Cloudを使って文字列をインプットにWordCloudを描画するReact…","frontmatter":{"slug":"/wordcloud-with-kuromoji-d3cloud-react","title":"React + kuromoji.js + D3-CloudでWordCloudをブラウザに描画","date":"2019-05-04T12:40:00.000+09:00","tags":["React","kuromoji.js","d3.js","d3Cloud","データ可視化","形態素解析","WordCloud"],"keywords":["React"],"thumbnail":"thumbnail/2019/05/wordcloud-with-kuromoji-d3cloud-react.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>SNSのコンテンツ、動画といった外部コンテンツを自分のブログに載せる場合、\n単純にリンクを張り付けるよりも、以下のようにHTMLの<strong>埋め込みコード</strong>を張り付けたほうがビジュアル面で効果的です。</p>\n<div class=\"iframely-embed\">\n    <div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\">\n        <a \n            href=\"https://takumon.com\" \n            data-iframely-url=\"//cdn.iframe.ly/uqqhvR3\">\n        </a>\n    </div>\n</div>\n<br/>\n<p>ただTwitterやYouTubeなどの埋め込み対応サイトでも、<strong>サイトごとに埋め込みコードを取得する方法が異なる</strong>ため結構めんどくさかったりします。\nまた埋め込みコードに対応していないサイトも多いのが現状です。\n<br/></p>\n<p><strong><a href=\"https://iframely.com/\">「Iframely」</a><strong>は、そのような問題を一挙に解決してくれるWebサービスです。\n実際このブログでも<a href=\"https://iframely.com/\">Iframely</a>を使って外部コンテンツを埋め込んでいますが、かなり便利です。<br/>\n今回は、</strong>「Iframelyでどんなことができるか」</strong>、**「実際使ってみた感想」<strong>などについてご紹介したいと思います。\n最後のほうに</strong><a href=\"#gatsby%E3%81%AE%E5%A0%B4%E5%90%88\">「GatsbyでIframelyを使う方法」</a>**も紹介しています。</p>\n<h2 id=\"iframelyとは\" style=\"position:relative;\"><a href=\"#iframely%E3%81%A8%E3%81%AF\" aria-label=\"iframelyとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Iframelyとは</h2>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 168px; padding-bottom: 0;\"><a href=\"https://iframely.com/\" data-iframely-url=\"//cdn.iframe.ly/KGpjY3\"></a></div></div>\n<br/>\n<p>埋め込みコードを生成してくれるWebサービスです。<br/>\n<strong>「アカウント登録なし」</strong>、**「無料」**で以下の基本機能が使えます。</p>\n<ul>\n<li>あらゆるWebサイトにおいて、IframelyにURLを張り付けるだけで埋め込みコードを生成してくれる</li>\n<li>埋め込み未対応のWebサイトでもイイ感じの埋め込みコードを生成してくれる</li>\n</ul>\n<p>またアカウントを登録すれば**「埋め込みコードのデザインをカスタマイズできる」**ようになります。\nデザインをカスタマイズした埋め込みコードは1000リクエスト/月までなら無料です。</p>\n<h2 id=\"iframelyの使い方\" style=\"position:relative;\"><a href=\"#iframely%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\" aria-label=\"iframelyの使い方 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Iframelyの使い方</h2>\n<ul>\n<li>まずは<a href=\"https://iframely.com/embed\">Iframely</a>にアクセスしましょう。</li>\n<li>次に、埋め込みたいURLを入力欄に張り付け<code class=\"language-text\">CHECK IT</code>ボタンをクリックします。</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACiklEQVR42o2STWsTQRjH87kEC0VQSg/qpYeehNqmghS8+XbyE3j1JKX0IHqQfgBN39S2lqbNS2uyyW62m83EdLPZ7M7Oy+7kL7Npa7EKLvwYHubZH/9nZnLLy8sf1jc2uju7u82V1VVrbu6hlc8vWgsL+evkr9fz8wvW4uKj5tNnz7uPl5be5Wzb3gSAjjdQgzDCCMhQf4HJBDxJwaWESFKIJIFMUwwp1dvYL5UKuYZlrusipDShjCkmhIo5V1xKJRKpmBivXArFhVA8SbIeynjWp4niONGO3WLxU65pmhu6iOJYb0LDhIDtEhgtB23yE81TF062tlEzW/D8AbgUuOjX/2rHXrFY+KcwiCgc0sVhtYaDSg3lHw3sHVXR6Xl6mmzsP4WVk5MrQh1fSkSMYxhFoIwhpDG8QQB/GKIfDLNkWkBjps8NlHHEUiBiY+FxvX5FGAQqHg4RRhG8mMHtByBBiG4QonPmo9Prg/R9tHseun0f+gKjOAbrDRB50TihFhqWlQnZ9rYSW1sQpRJEtwvebl8ihMhu9BIpIZWCDCPw4gro3muFRKBiNM6FUiJotVToughtG2HTRGhaGdS0IDgHT5Ls3MaIrBZBCFp+g8HeSwURo6yFtm1nCROllMIIyWgEeRWlsoT8HCHHXNRSKE028olhFHKu62ZCr++n/iAYpUl68bb/GzkapdphNJufc67jbI6fDVMxl0iV7vn9ScHQrFdRr5Zg1CoIziy0nQYOKyUcHhXx7WAf779+yRJarVYhVzeMtZjS4NR13FPXJa5lEdN2SN2yidc7I8XvO+Tu9B0yNXGDPJi5RdbePiGvXsySyekJcnvqJpm9P0Fm7k26vt8PysfHH38BjUCnmO7kCJwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/eb8c1074bb248edb2b11d1ad7cd6f752/ba381/how-to-use-1.webp 200w,\n/static/eb8c1074bb248edb2b11d1ad7cd6f752/7f61c/how-to-use-1.webp 400w,\n/static/eb8c1074bb248edb2b11d1ad7cd6f752/d00b9/how-to-use-1.webp 800w,\n/static/eb8c1074bb248edb2b11d1ad7cd6f752/92f8c/how-to-use-1.webp 1200w,\n/static/eb8c1074bb248edb2b11d1ad7cd6f752/fad48/how-to-use-1.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/eb8c1074bb248edb2b11d1ad7cd6f752/772e8/how-to-use-1.png 200w,\n/static/eb8c1074bb248edb2b11d1ad7cd6f752/e17e5/how-to-use-1.png 400w,\n/static/eb8c1074bb248edb2b11d1ad7cd6f752/5a190/how-to-use-1.png 800w,\n/static/eb8c1074bb248edb2b11d1ad7cd6f752/c1b63/how-to-use-1.png 1200w,\n/static/eb8c1074bb248edb2b11d1ad7cd6f752/29007/how-to-use-1.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/eb8c1074bb248edb2b11d1ad7cd6f752/5a190/how-to-use-1.png\"\n            alt=\"how-to-use-1.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<ul>\n<li>すると埋め込みコードとそのプレビューが表示されます。<code class=\"language-text\">COPY CODE</code>ボタンをクリックして埋め込みコードをコピーしましょう。</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACtUlEQVR42mWRS28cRRRG+1+GkZ2g7CJlxSJs2PAX2IIcC7FCYoHYgARKhjGCWJFNwHYSux+u9Mz01Mz0q6q7Hv249aHuNkIWi9O3b6l07qO8L4+Ovvvlxcvt4uS36Oj4mD2Yzdjs4JDNDicezA7YR0N+cMgOHj5kh48e3WM4+/jx4+iTZ8+2T54+/dZjcXwCAG3XUdf3mCCQc6iURhQnYGuODwlHGK/hnBuuY/jSHbbthoB31/7cCxn7dUgqbTplG5LaUFpWtCvkRC5Gtnk5si8EpaWkoqpJWUumMaSN6gbH+d+XL7zg9nYxdtjU1HcaA12rUNcltJIopUAmJnIhkZUlSilRawVlNHTbQ7U0dnh6djb3IjYJX0UV/RFp/B5pDPGUmZFSGYAMqP+PsehQvG+g1scQ/uej8PWbv+ZedNfhOqtpWxrshcEQeamxKTQqrdG0Grb5P01joYtTVNufRuHl++u5t1ouRyFAxGUDf6+wrRpIO4zSgxyB6D7Dwwz8+080jXwdBHNvu0kWNYA3jNN5mOA82uBqtceZv8Q7niPv7soB6ByQqg6Z6lC1Dj0A0fR4X1Sj0A/CSWgBbLZ7yosCZa0hjUVRKxTKgNUdWK6xqlrktkfWEPa2x053yCxB9ISryo7CMAznHt8ki3ZIdjlFpURc7LBKd1inKeKihC8aXFxewfcD3DKGMPAR+jeIWQQpa5z++AXe/vzpKAwm4WZhbI+3N6yP2MqxNHOrfeZ4WjiurAtE426Xa7def3CbwHdxvHTJhrtdmrk0L9zXx8/dN199NkyPmyB86SWcn6BpkUcxabYE0gzIS6Cux90ZBygAity4rwJA4QBJgCBgWLG5e5SQsbnn+/4PVmthizwxouTamAmtuVbqHqJWvJQ1F7LmUkouheCqrrmqZNI2Vvx5cfH9PzeEskwrgkXfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/74b77bf359b63454c3a7a85747bf1210/ba381/how-to-use-2.webp 200w,\n/static/74b77bf359b63454c3a7a85747bf1210/7f61c/how-to-use-2.webp 400w,\n/static/74b77bf359b63454c3a7a85747bf1210/d00b9/how-to-use-2.webp 800w,\n/static/74b77bf359b63454c3a7a85747bf1210/92f8c/how-to-use-2.webp 1200w,\n/static/74b77bf359b63454c3a7a85747bf1210/fad48/how-to-use-2.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/74b77bf359b63454c3a7a85747bf1210/772e8/how-to-use-2.png 200w,\n/static/74b77bf359b63454c3a7a85747bf1210/e17e5/how-to-use-2.png 400w,\n/static/74b77bf359b63454c3a7a85747bf1210/5a190/how-to-use-2.png 800w,\n/static/74b77bf359b63454c3a7a85747bf1210/c1b63/how-to-use-2.png 1200w,\n/static/74b77bf359b63454c3a7a85747bf1210/29007/how-to-use-2.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/74b77bf359b63454c3a7a85747bf1210/5a190/how-to-use-2.png\"\n            alt=\"how-to-use-2.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<ul>\n<li>コピーした埋め込みコードを、自分のブログ記事に張り付けます。</li>\n</ul>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"markdown\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-markdown line-numbers\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> Iframly埋め込みコードお試し記事</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>iframe</span> </span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://hatenablog-parts.com/embed?url=http%3A%2F%2Fblog.hatenablog.com%2Fentry%2F2018%2F12%2F28%2F140000<span class=\"token punctuation\">\"</span></span> </span><span class=\"gatsby-highlight-code-line\">    <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span> <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span> <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 190px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span> </span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">allowfullscreen</span> </span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">scrolling</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>no<span class=\"token punctuation\">\"</span></span> </span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">allow</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>autoplay; encrypted-media<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>iframe</span><span class=\"token punctuation\">></span></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\nこれだけでブログに外部コンテンツを埋め込むことができます。\n<h2 id=\"iframelyの実例\" style=\"position:relative;\"><a href=\"#iframely%E3%81%AE%E5%AE%9F%E4%BE%8B\" aria-label=\"iframelyの実例 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Iframelyの実例</h2>\n<p>いろんなWebサイトをいい感じに埋め込んでくれます。何個か実例を見ていきましょう。</p>\n<h3 id=\"はてなブログの場合\" style=\"position:relative;\"><a href=\"#%E3%81%AF%E3%81%A6%E3%81%AA%E3%83%96%E3%83%AD%E3%82%B0%E3%81%AE%E5%A0%B4%E5%90%88\" aria-label=\"はてなブログの場合 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>はてなブログの場合</h3>\n<iframe\n    src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fblog.hatenablog.com%2Fentry%2F2018%2F12%2F28%2F140000\" \n    style=\"border: 0; width: 100%; height: 190px;\" \n    allowfullscreen \n    scrolling=\"no\" \n    allow=\"autoplay; \n    encrypted-media\">\n</iframe>\n<div class=\"gatsby-code-title\">埋め込みコード</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>iframe</span>\n    <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://hatenablog-parts.com/embed?url=http%3A%2F%2Fblog.hatenablog.com%2Fentry%2F2018%2F12%2F28%2F140000<span class=\"token punctuation\">\"</span></span> \n    <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span> <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span> <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 190px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span> \n    <span class=\"token attr-name\">allowfullscreen</span> \n    <span class=\"token attr-name\">scrolling</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>no<span class=\"token punctuation\">\"</span></span> \n    <span class=\"token attr-name\">allow</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>autoplay; \n    encrypted-media<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>iframe</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"codepenの場合\" style=\"position:relative;\"><a href=\"#codepen%E3%81%AE%E5%A0%B4%E5%90%88\" aria-label=\"codepenの場合 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CodePenの場合</h3>\n<iframe \n    src=\"https://codepen.io/dudleystorey/embed/preview/HrFBx?height=300&amp;slug-hash=HrFBx&amp;default-tabs=css,result&amp;host=https://codepen.io\" \n    style=\"border: 0; width: 100%; height: 300px;\" \n    allowfullscreen \n    allow=\"autoplay; encrypted-media\">\n</iframe>\n<div class=\"gatsby-code-title\">埋め込みコード</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>iframe</span> \n    <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://codepen.io/dudleystorey/embed/preview/HrFBx?height=300<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span>slug-hash=HrFBx<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span>default-tabs=css,result<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span>host=https://codepen.io<span class=\"token punctuation\">\"</span></span> \n    <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span> <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span> <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span> \n    <span class=\"token attr-name\">allowfullscreen</span> \n    <span class=\"token attr-name\">allow</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>autoplay; encrypted-media<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>iframe</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"soundcloudの場合\" style=\"position:relative;\"><a href=\"#soundcloud%E3%81%AE%E5%A0%B4%E5%90%88\" aria-label=\"soundcloudの場合 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SoundCloudの場合</h3>\n<iframe \n    src=\"https://w.soundcloud.com/player/?visual=true&amp;url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F411487752&amp;show_artwork=true\" \n    style=\"border: 0; width: 100%; height: 400px;\" \n    allowfullscreen \n    allow=\"autoplay; encrypted-media\">\n</iframe>\n<div class=\"gatsby-code-title\">埋め込みコード</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>iframe</span> \n    <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://w.soundcloud.com/player/?visual=true<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span>url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F411487752<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span>show_artwork=true<span class=\"token punctuation\">\"</span></span> \n    <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span> <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span> <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 400px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span> \n    <span class=\"token attr-name\">allowfullscreen</span> \n    <span class=\"token attr-name\">allow</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>autoplay; encrypted-media<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>iframe</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"gistの場合\" style=\"position:relative;\"><a href=\"#gist%E3%81%AE%E5%A0%B4%E5%90%88\" aria-label=\"gistの場合 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gistの場合</h3>\n<p>題名、行番号などを表示してくれます。</p>\n<div class=\"iframely-embed\">\n    <div class=\"iframely-responsive\" style=\"padding-bottom: 100%;\">\n        <a \n            href=\"https://gist.github.com/Takumon/72c51d0145c84d149748ea9f256ec6cd\" \n            data-iframely-url=\"//cdn.iframe.ly/5awFZ6V\">\n        </a>\n    </div>\n</div>\n<div class=\"gatsby-code-title\">埋め込みコード</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>iframely-embed<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>iframely-responsive<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">padding-bottom</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> \n            <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://gist.github.com/Takumon/72c51d0145c84d149748ea9f256ec6cd<span class=\"token punctuation\">\"</span></span> \n            <span class=\"token attr-name\">data-iframely-url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//cdn.iframe.ly/5awFZ6V<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">async</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//cdn.iframe.ly/embed.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"amazonの場合\" style=\"position:relative;\"><a href=\"#amazon%E3%81%AE%E5%A0%B4%E5%90%88\" aria-label=\"amazonの場合 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Amazonの場合</h3>\n<p>書評の記事なんかに便利です。</p>\n<div class=\"iframely-embed\">\n    <div class=\"iframely-responsive\" style=\"padding-bottom: 52.5%; padding-top: 120px;\">\n        <a \n            href=\"https://www.amazon.co.jp/%25E8%2580%2583%25E3%2581%2588%25E3%2582%258B%25E6%258A%2580%25E8%25A1%2593%25E3%2583%25BB%25E6%259B%25B8%25E3%2581%258F%25E6%258A%2580%25E8%25A1%2593%25E2%2580%2595%25E5%2595%258F%25E9%25A1%258C%25E8%25A7%25A3%25E6%25B1%25BA%25E5%258A%259B%25E3%2582%2592%25E4%25BC%25B8%25E3%2581%25B0%25E3%2581%2599%25E3%2583%2594%25E3%2583%25A9%25E3%2583%259F%25E3%2583%2583%25E3%2583%2589%25E5%258E%259F%25E5%2589%2587-%25E3%2583%2590%25E3%2583%25BC%25E3%2583%2590%25E3%2583%25A9-%25E3%2583%259F%25E3%2583%25B3%25E3%2583%2588/dp/4478490279\" \n            data-iframely-url=\"//cdn.iframe.ly/uI9bmG0\">\n        </a>\n    </div>\n</div>\n<br/>\n<div class=\"gatsby-code-title\">埋め込みコード</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>iframely-embed<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>iframely-responsive<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">padding-bottom</span><span class=\"token punctuation\">:</span> 52.5%<span class=\"token punctuation\">;</span> <span class=\"token property\">padding-top</span><span class=\"token punctuation\">:</span> 120px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> \n            <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://www.amazon.co.jp/%25E8%2580%2583%25E3%2581%2588%25E3%2582%258B%25E6%258A%2580%25E8%25A1%2593%25E3%2583%25BB%25E6%259B%25B8%25E3%2581%258F%25E6%258A%2580%25E8%25A1%2593%25E2%2580%2595%25E5%2595%258F%25E9%25A1%258C%25E8%25A7%25A3%25E6%25B1%25BA%25E5%258A%259B%25E3%2582%2592%25E4%25BC%25B8%25E3%2581%25B0%25E3%2581%2599%25E3%2583%2594%25E3%2583%25A9%25E3%2583%259F%25E3%2583%2583%25E3%2583%2589%25E5%258E%259F%25E5%2589%2587-%25E3%2583%2590%25E3%2583%25BC%25E3%2583%2590%25E3%2583%25A9-%25E3%2583%259F%25E3%2583%25B3%25E3%2583%2588/dp/4478490279<span class=\"token punctuation\">\"</span></span> \n            <span class=\"token attr-name\">data-iframely-url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//cdn.iframe.ly/uI9bmG0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">async</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//cdn.iframe.ly/embed.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"埋め込みコードのデザインをカスタマイズできる\" style=\"position:relative;\"><a href=\"#%E5%9F%8B%E3%82%81%E8%BE%BC%E3%81%BF%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3%E3%82%92%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA%E3%81%A7%E3%81%8D%E3%82%8B\" aria-label=\"埋め込みコードのデザインをカスタマイズできる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>埋め込みコードのデザインをカスタマイズできる</h2>\n<p>アカウント登録すれば、カードのデザインをカスタマイズできます。\n以下のようにカードの形式、色、フォント、記載する情報など細かいチューニングが可能です。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADJ0lEQVR42p2SXU8bRxiF9zf16xJqV6lgHUIxRb1olaRNEf1QU7hoSxqIkqofFgmpCBGliEQ2SRAIQzGt0kZqlTZp1Fas15CrxCTYXozXeNde767tXc/OzKl2S39Ae6Sj950Z6ZnzjkbIPs6uFzX94c87uc2CUpSyT3alJ7mCVFLLkrJXDOrBwYH02/3fpXQ6LcmyLGUysrQVOCNlZNnf25RleTudTt8WbMvaAYBs02VWy4HZdEAoBeMAZcw/gqqqeCP6Ck70RvD6sQiiYhdeFbvQ79dINwaOijwcCmF4eHhPKB9oj/GPvEc1k+Xthk9hObPByoe9oijs5VCIdb8UZl3hMOvo6Ajc2fniYd9Jn3v+BZw4+WZB2M0VdgjlqNsNVrdseIzBsptoexRN1w1uKqkqIv0D6Iv2IRrtQ29vL8SIiEhExNGICFHs5uFwCB+e/kARTNMMRrYaTWaaNpotJwAyxsA5D4B6rY53xqbx7tg0JucWcW15A7fWbyOx9j2mEqs4d+UmH72UwEw8qQjlciUA2naDEeKh0WrBtG20CQngnuehUjXx/ldLGIolcXpiBeOzP+C7X9NI3ZXwxcwKjn88zQfe+xLnJuYUoaJpAbBJPOYSAqfdBvEo3DaB59EgoVY1MHJxAaPfrGF8dg0T19dx684fOHn2KrreGkd06DzvHxzDmc+uKIKm6wHQyWWZUamgUq3BqBuo1gzs5vPY2t6GUizhSP8QjkQH0XPqE3w6u4rYtzdxZiqO0fgdvH0xzl87+zXOzywogm4YO+AMRH7AKoU89tUyisV9lEoq0nIGqdQGcnkFz4b68EznMRwfuYALc4sYGezBR0M9uDwVw+fxJB+eT+Hy8o+KoGv64ciEUcZR3N/H/Pw8TMtCtVpDJrOFqmHi0rVFTC4ksXRXwuLyDaxcjyGZmMRGIoafUjf4xgMJv2xuK0JJLT/yga1WixBCKGWMOo5DGWPUl+u6lHPuP2Zgx23Ttseoy0AdymnLg7/2fIbrunmhVjOChD7p32/yX8UY44eh9oSnT3NLpmn9pevVe/V6/b5t2//H92zb/lPTtNW/AfOIUxEq8DoVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2a63b3905031fb220f40841c38b84e4b/ba381/card-designe.webp 200w,\n/static/2a63b3905031fb220f40841c38b84e4b/7f61c/card-designe.webp 400w,\n/static/2a63b3905031fb220f40841c38b84e4b/d00b9/card-designe.webp 800w,\n/static/2a63b3905031fb220f40841c38b84e4b/c9586/card-designe.webp 1176w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2a63b3905031fb220f40841c38b84e4b/772e8/card-designe.png 200w,\n/static/2a63b3905031fb220f40841c38b84e4b/e17e5/card-designe.png 400w,\n/static/2a63b3905031fb220f40841c38b84e4b/5a190/card-designe.png 800w,\n/static/2a63b3905031fb220f40841c38b84e4b/e9d87/card-designe.png 1176w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2a63b3905031fb220f40841c38b84e4b/5a190/card-designe.png\"\n            alt=\"card-designe.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>自分はブログのデザインと合うように、リンクの色やカードの背景色などをカスタムしています。</p>\n<div class=\"iframely-embed\">\n    <div class=\"iframely-responsive\" style=\"padding-bottom: 52.5%; padding-top: 120px;\">\n        <a \n            href=\"https://www.amazon.co.jp/%25E8%2580%2583%25E3%2581%2588%25E3%2582%258B%25E6%258A%2580%25E8%25A1%2593%25E3%2583%25BB%25E6%259B%25B8%25E3%2581%258F%25E6%258A%2580%25E8%25A1%2593%25E2%2580%2595%25E5%2595%258F%25E9%25A1%258C%25E8%25A7%25A3%25E6%25B1%25BA%25E5%258A%259B%25E3%2582%2592%25E4%25BC%25B8%25E3%2581%25B0%25E3%2581%2599%25E3%2583%2594%25E3%2583%25A9%25E3%2583%259F%25E3%2583%2583%25E3%2583%2589%25E5%258E%259F%25E5%2589%2587-%25E3%2583%2590%25E3%2583%25BC%25E3%2583%2590%25E3%2583%25A9-%25E3%2583%259F%25E3%2583%25B3%25E3%2583%2588/dp/4478490279\" \n            data-iframely-url=\"//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fwww.amazon.co.jp%2F%25E8%2580%2583%25E3%2581%2588%25E3%2582%258B%25E6%258A%2580%25E8%25A1%2593%25E3%2583%25BB%25E6%259B%25B8%25E3%2581%258F%25E6%258A%2580%25E8%25A1%2593%25E2%2580%2595%25E5%2595%258F%25E9%25A1%258C%25E8%25A7%25A3%25E6%25B1%25BA%25E5%258A%259B%25E3%2582%2592%25E4%25BC%25B8%25E3%2581%25B0%25E3%2581%2599%25E3%2583%2594%25E3%2583%25A9%25E3%2583%259F%25E3%2583%2583%25E3%2583%2589%25E5%258E%259F%25E5%2589%2587-%25E3%2583%2590%25E3%2583%25BC%25E3%2583%2590%25E3%2583%25A9-%25E3%2583%259F%25E3%2583%25B3%25E3%2583%2588%2Fdp%2F4478490279&amp;key=0658bf78be97cafcf2b0b9f96c1270ee\">\n        </a>\n    </div>\n</div>\n<br/>\n<div class=\"gatsby-code-title\">埋め込みコード</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>iframely-embed<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>iframely-responsive<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">padding-bottom</span><span class=\"token punctuation\">:</span> 52.5%<span class=\"token punctuation\">;</span> <span class=\"token property\">padding-top</span><span class=\"token punctuation\">:</span> 120px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> \n            <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://www.amazon.co.jp/%25E8%2580%2583%25E3%2581%2588%25E3%2582%258B%25E6%258A%2580%25E8%25A1%2593%25E3%2583%25BB%25E6%259B%25B8%25E3%2581%258F%25E6%258A%2580%25E8%25A1%2593%25E2%2580%2595%25E5%2595%258F%25E9%25A1%258C%25E8%25A7%25A3%25E6%25B1%25BA%25E5%258A%259B%25E3%2582%2592%25E4%25BC%25B8%25E3%2581%25B0%25E3%2581%2599%25E3%2583%2594%25E3%2583%25A9%25E3%2583%259F%25E3%2583%2583%25E3%2583%2589%25E5%258E%259F%25E5%2589%2587-%25E3%2583%2590%25E3%2583%25BC%25E3%2583%2590%25E3%2583%25A9-%25E3%2583%259F%25E3%2583%25B3%25E3%2583%2588/dp/4478490279<span class=\"token punctuation\">\"</span></span> \n            <span class=\"token attr-name\">data-iframely-url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fwww.amazon.co.jp%2F%25E8%2580%2583%25E3%2581%2588%25E3%2582%258B%25E6%258A%2580%25E8%25A1%2593%25E3%2583%25BB%25E6%259B%25B8%25E3%2581%258F%25E6%258A%2580%25E8%25A1%2593%25E2%2580%2595%25E5%2595%258F%25E9%25A1%258C%25E8%25A7%25A3%25E6%25B1%25BA%25E5%258A%259B%25E3%2582%2592%25E4%25BC%25B8%25E3%2581%25B0%25E3%2581%2599%25E3%2583%2594%25E3%2583%25A9%25E3%2583%259F%25E3%2583%2583%25E3%2583%2589%25E5%258E%259F%25E5%2589%2587-%25E3%2583%2590%25E3%2583%25BC%25E3%2583%2590%25E3%2583%25A9-%25E3%2583%259F%25E3%2583%25B3%25E3%2583%2588%2Fdp%2F4478490279<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span>key=XXXXXXXXXXXXXXXXXXXXXXXXXX<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">async</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//cdn.iframe.ly/embed.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"webサイトのあらゆるメタ情報がチェックできる\" style=\"position:relative;\"><a href=\"#web%E3%82%B5%E3%82%A4%E3%83%88%E3%81%AE%E3%81%82%E3%82%89%E3%82%86%E3%82%8B%E3%83%A1%E3%82%BF%E6%83%85%E5%A0%B1%E3%81%8C%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%81%A7%E3%81%8D%E3%82%8B\" aria-label=\"webサイトのあらゆるメタ情報がチェックできる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Webサイトのあらゆるメタ情報がチェックできる</h2>\n<p>Iframelyには<a href=\"http://iframely.com/debug\">デバッグページ</a>があり、\n対象のWebサイトが**「oEmbedに対応しているか」<strong>、</strong>「Twitterカードに対応しているか」**などを調べることができます。\nたとえば、<a href=\"http://blog.hatenablog.com/entry/2018/12/28/140000\">2018年のはてなブログを振り返る！ 「年間総合はてなブックマーク数ランキング」トップ100と「注目エントリー」</a>だと以下のように確認できます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAACxElEQVR42p1T247jRBD1R/IVfAGPiHce9wUhof0CkCAgGDG787BIwOzMkM1mO56JJ3HsXGzHdmx3uy/VfZA7ZmeRlhcsHZ2q7uryqaru4K/Z7Pky3W5m8wU7FEVYHI//iXWahuluN2Ifbvf7MB7WtilLtmkynU6/DtI0vQAA5xzhf37/nE3TdBI8RNEvg1PXta5PJzugqmuPsqqs6KVV2liltdXanGFG31hrNLfNwxca+TNEj9EPwX0UeYV1c6K2ayFEBy44Ot6h6VpIJWFIg4yGMRpaK0itPCut0UuB9nBJULdYRstJsInjsWQiqQm7WqLmCl1v0EuLYyuxyrnHthLeb3uFvOl93FAtWetLTpJ4Ery631wUADaCaNkSXh8k3pYaV7sWz+8z/H4Q+HPf44+9wPWhx7RQWJwM7goJVhskwiHmmo4AXt0nk+CSjQqtJesAB2DgXCrMqhM6QyDnYJ2Ddg7GOmjroKyFc+dYsuehXLJ4Evz67vFiHBaRteiEhJAKUiooOfTKoO4EWiEhlQbvld9X2qAffS6kT3gVJpPg5ajQaEXWWkhthp4Mmofr4OGleO34tz2yc+cevghHhRqAUpKILHgvIbSBIAdunGdve9+iM9bbwjytd5qeEl6+W48lO5JksTlxPFQcs7xFXLVIyhbLrMJjViHKSmzqDo9FjVVxQjrs1x1WRU3aJ/yg5CEhEaFsOKpu6KP292yA6CX0oEoZiL5HJ87gXIAPNhejwmQSvGDxz2NDFBlDszmj+SKi1TqmZRTR/pBRdtjR8rcviSc/DQdp+PmZ30P5KS823wcvw82TQmuR5zmaU41jnqMY7KZBnhf47NNPcD353Eda6z76lr3C727Cb6alXL/N+fxN1rHrtGTX24zdsQd2s87Y7aFhN2nJfrxdsKvFis2PnL3JOJsVHyDr5rNSxt/ehV/9Dc+IaIyhgUHAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8f8df6e23d34b0bc7fcfb14f01406e3d/ba381/how-to-use-debug.webp 200w,\n/static/8f8df6e23d34b0bc7fcfb14f01406e3d/7f61c/how-to-use-debug.webp 400w,\n/static/8f8df6e23d34b0bc7fcfb14f01406e3d/d00b9/how-to-use-debug.webp 800w,\n/static/8f8df6e23d34b0bc7fcfb14f01406e3d/92f8c/how-to-use-debug.webp 1200w,\n/static/8f8df6e23d34b0bc7fcfb14f01406e3d/bc816/how-to-use-debug.webp 1524w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8f8df6e23d34b0bc7fcfb14f01406e3d/772e8/how-to-use-debug.png 200w,\n/static/8f8df6e23d34b0bc7fcfb14f01406e3d/e17e5/how-to-use-debug.png 400w,\n/static/8f8df6e23d34b0bc7fcfb14f01406e3d/5a190/how-to-use-debug.png 800w,\n/static/8f8df6e23d34b0bc7fcfb14f01406e3d/c1b63/how-to-use-debug.png 1200w,\n/static/8f8df6e23d34b0bc7fcfb14f01406e3d/93582/how-to-use-debug.png 1524w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8f8df6e23d34b0bc7fcfb14f01406e3d/5a190/how-to-use-debug.png\"\n            alt=\"how-to-use-debug.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h2 id=\"spaなどでiframelyを使う方法\" style=\"position:relative;\"><a href=\"#spa%E3%81%AA%E3%81%A9%E3%81%A7iframely%E3%82%92%E4%BD%BF%E3%81%86%E6%96%B9%E6%B3%95\" aria-label=\"spaなどでiframelyを使う方法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SPAなどでIframelyを使う方法</h2>\n<p>ReactやAngularなどのSPAフレームワークや、その他ツールでも使えます。\n実装方法は<a href=\"https://iframely.com/docs\">Iframelyドキュメント > 「GUIDES」</a>に載っています。\n以下でReactの場合と、Gatsbyの場合について、ご紹介します。</p>\n<h3 id=\"reactの場合\" style=\"position:relative;\"><a href=\"#react%E3%81%AE%E5%A0%B4%E5%90%88\" aria-label=\"reactの場合 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reactの場合</h3>\n<p>ReactでIframelyを使うには、以下のようなコンポーネントを作成します。</p>\n<ul>\n<li>(1) コンポーネントでIframelyを読み込む</li>\n<li>(2) 埋め込みコードをHTMLに埋め込む</li>\n<li>(3) コンポーネント読み込み完了時に、埋め込みコードを描画する</li>\n</ul>\n<div class=\"gatsby-code-title\">Iframely用コンポーネント</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Helmet <span class=\"token keyword\">from</span> <span class=\"token string\">'react-helmet'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Iframely</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">render</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">                </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* (1) コンポーネントでIframelyを読み込む */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Helmet</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">                  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.iframe.ly/embed.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Helmet</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">                </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* (2) 埋め込みコードをHTMLに埋め込む */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getIframelyHtml</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// (3) コンポーネント読み込み完了時に、埋め込みコードを描画する</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function-variable function\">componentDidMount</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        window<span class=\"token punctuation\">.</span>iframely <span class=\"token operator\">&amp;&amp;</span> iframely<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span>    \n    <span class=\"token function-variable function\">getIframelyHtml</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// URLのパラメータには &amp;iframe=1&amp;omit_script=1 を付けます。</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> <span class=\"token string\">'&lt;a href=\"'</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>url <span class=\"token operator\">+</span> <span class=\"token string\">'\" data-iframely-url>&lt;/a>'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"gatsbyの場合\" style=\"position:relative;\"><a href=\"#gatsby%E3%81%AE%E5%A0%B4%E5%90%88\" aria-label=\"gatsbyの場合 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsbyの場合</h3>\n<p>GatsbyはReactの応用で行けます。\nまずはIframely用のコンポーネントを作成します。</p>\n<div class=\"gatsby-code-title\">Iframely用コンポーネント</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Helmet <span class=\"token keyword\">from</span> <span class=\"token string\">'react-helmet'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Iframely</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// 記事ページから古い記事に遷移したときにもロードされるようにする</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>iframely<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      window<span class=\"token punctuation\">.</span>iframely<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token comment\">// マークダウンファイルにembed.jsのスクリプトタグを記述しても読み込まれないため</span>\n  <span class=\"token comment\">// コンポーネントでReact Helmetを使って読み込む</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Helmet</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.iframe.ly/embed.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Helmet</span></span><span class=\"token punctuation\">></span></span></span>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>次に記事（マークダウンファイル）にIframelyで生成した埋め込み用コードを貼り付けますが、その際2点だけ修正が必要になります。</p>\n<ul>\n<li><code class=\"language-text\">data-iframely-url</code>の末尾に<code class=\"language-text\">&amp;omit_script=1</code>を追加\n<ul>\n<li>埋め込みコードの描画はIframely用コンポーネントで行うため、画面初期表示時の描画を抑止します。</li>\n</ul>\n</li>\n<li><code class=\"language-text\">embed.js</code>の読み込みを削除\n<ul>\n<li>Iframely用コンポーネントで読み込むため、記事での読み込みは削除します。</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-code-title\">記事</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"markdown\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-markdown line-numbers\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">##</span> Iframlyお試し</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>iframely-embed<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>iframely-responsive<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 168px<span class=\"token punctuation\">;</span> <span class=\"token property\">padding-bottom</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> </span><span class=\"gatsby-highlight-code-line\">      <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://booth.pm/ja/items/1045830<span class=\"token punctuation\">\"</span></span> </span><span class=\"gatsby-highlight-code-line\">      <span class=\"token attr-name\">data-iframely-url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fbooth.pm%2Fja%2Fitems%2F1045830&amp;key=XXXXXXXXXXXXXX&amp;omit_script=1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>Gatsbyにも簡単にIframelyを導入できますね。</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回はブログにあらゆる外部コンテンツを埋め込めるWebサービス「Iframely」を紹介しました。\nReactやGatsbyなどのSPAでも手軽に使えて、アカウント登録すれば自分の好みのデザインにカスタムできます。\nそんな「Iframely」をぜひ使ってみてはいかがでしょうか🍅</p>","excerpt":"なにこれ SNSのコンテンツ、動画といった外部コンテンツを自分のブログに載せる場合、\n単純にリンクを張り付けるよりも、以下のようにHTMLの埋め込みコードを張り付けたほうがビジュアル面で効果的です。 ただTwitterやYouTube…","frontmatter":{"slug":"/iframely","title":"ブログにあらゆる外部コンテンツを埋め込めるWebサービス「Iframely」の使い方","date":"2019-01-11T23:30:00.000+09:00","tags":["Iframely","oEmbed","埋め込みコード","React","Gatsby"],"keywords":["Iframely"],"thumbnail":"thumbnail/2019/01/iframely.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Slit Animationを実現するReactコンポーネントをCSSのclip-pathを使って作りました。\nSlit Animation(スリットアニメーション)は下記のようなものです。\nコマ画像を縞々にして合成した画像に、スリットを持つカバーを被せて横にスライドさせることでパラパラ漫画のようなアニメーションを実現します。</p>\n<p>デモはこちら ⇒ <a href=\"https://takumon.github.io/react-slit-animation/\">https://takumon.github.io/react-slit-animation/</a> <br>\nコンポーネントはnpmから落とせます ⇒ <a href=\"https://www.npmjs.com/package/@takumon/react-slit-animation\">@takumon/react-slit-animation</a></p>\n<p><img src=\"/fa2410ba2fb6a4f63446413bfccccfe5/animation.gif\" alt=\"animatino\"></p>\n<p><img src=\"/83306a709aca3018049ed4d392927fa3/animation-inco.gif\" alt=\"animatino\"></p>\n<p><img src=\"/e367d0c2dfb6145fde488b4df114097f/animation-go.gif\" alt=\"animatino\"></p>\n<h2 id=\"slit-animationの原理\" style=\"position:relative;\"><a href=\"#slit-animation%E3%81%AE%E5%8E%9F%E7%90%86\" aria-label=\"slit animationの原理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Slit Animationの原理</h2>\n<p>CSSやReactコンポーネントなどの説明の前に、純粋にSlit Animationの原理を説明します。\nSlit Animationは何個かのコマ画像を合成した画像とカバーから成り立ちます。以下では簡単のため４コマで説明します。</p>\n<h3 id=\"コマ画像\" style=\"position:relative;\"><a href=\"#%E3%82%B3%E3%83%9E%E7%94%BB%E5%83%8F\" aria-label=\"コマ画像 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>コマ画像</h3>\n<p>それぞれのコマ画像を縞々にして１つの画像に合成します。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2c09ec2308cb40b9df2336c3a6c0cc9d/9b379/description_image-mix.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 115.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABcRAAAXEQHKJvM/AAAEt0lEQVR42pWVi09WZRzHH96L2ew/0Mlyulk2tZxrmq4MxelCsxQiV6NAkYto001tNi2mooJZuWYpvPC+HsQZKBevBHIXw0vKpUyR94bwMuKOgO9zzqed9329TV3zbN99f+ec5/ns+zvntz2ipKTkK7vTmd/s8WQ3d3bmPFMeT067vTWn09n+bDnasu0t9vzSsrJ1osXpzAFQt26VxMZCYiIkJPiVmIi2ehUk7+CAvZCY5sMk3raQEJBex91KZ92dLDkMeFx3FWF3uxUdKMePH0EIicEgfR6oNd1fnyoXFMVJkTNHGnPnS5EbIkVeiAw6MV+KvHly9G8LR1rVbjrdHpuwt7Ye1YFMmCDbhaDebOaM0Uix0cgRs5nTQsAb01lYsglhC2XUTwswJs/FuG0Opi2zEBtnMiY/QnoYpMvtUYQjAPS+OkH2CIHHZKbdYMRlMHLLZMYVAC4q3og4FspL1sWYjizClLkQc3ooQenzeaXgY+lhwA98kFANDtbbBIMBnwdqVfcpUwk9twlxYinGgnBEwQpEYThBRRGIwuWMzo/0J7yrJ3S5fMCSX/JkQUomRWk2ivZa/Uq1kr8rg0rLaS7ezqSw4RtONSZT1PBdQMkU1m/nbNMOCRK3q00RrS6HDxi846oUG/7AsPkKYss1xOarGL6+jthwmcmp/9BfFwLlAq3KADUCLgqoDfK5VjlaggeHu+sRcMK2ailiTjJq1XFMn2Vg+tzKqMiDiIhDTEm5Qf/lEPpOCVx5RhptQTTYgvjTYqDukGC47OVnAJMvSRGdi/lLG8ZPD2KM/BnzshTE8h95bW8TQ1cW0JUvaLKauXzISNUBI+fTTJxPFcjyMU8Dg7dUShFTgiG+DJFQgYivwLC2GrGqlMnbr9JfEwK/C7QyA1QIv6qCoFKglT7WsisAjD9+Uy5Lryciq5FwSwPhmQ1EZjWyIrORjYWtDLXshL8/QmuMRG0I90lriECtX47WtFLCIA6XPjZ2u39sVFXy2KVpms+bb/6F5fCvHE7P4lazCy3wTntyrW+vw+F4BPRKVaoa6NI3qJrGv93dXKqtJcNiwWazcvVKHb09XTpCj/BQmiafBj6ecGBkhIHePgb6+hkcvs/Q4D3u9ffTPzTM0L0h+nq66e27F0j3nIQ68EGbfRersJ3NI7euipFyG8fO5ZNdW05/pUJR8UksZaV0u6offprnA6XXHzH+Cyat/4B3bN9DpGBG0lKmH02DWMGS1fMY98NuZH1cAKi3rP4fMIpJaxcx27IXPhG8lRDGNNtuWCUIi36XsWk78F6PfQFgXBQTkxYzOzM1AFzCtCN7fMAlMe8xbt9O5I0XASZGM3l9GHOt+2ClYGbSMmYoqbBG8OHqEIL370LWxz8XqASAw6r3vk70Ehflnbjmfe+sgyleIoT3zdhQ77RDO71EC29Y1NvesTu/9XqvxfrWqqqeQtVPAJxOp1W0tLTkPBwbTfUnvFCMteY0x+/UQ/EejlafIbulHsr3U1h+koym62g9Fx6M9ZN/uaKiIsntduc5HA6b/sBhtyuOjk6lu6NL6W5rU+ydA0q3fn+3TbF39CldHV1Kr8ejONwdim+9XzaXy5VXU1OT+B+NQ3H5jhfmcgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2c09ec2308cb40b9df2336c3a6c0cc9d/ba381/description_image-mix.webp 200w,\n/static/2c09ec2308cb40b9df2336c3a6c0cc9d/7f61c/description_image-mix.webp 400w,\n/static/2c09ec2308cb40b9df2336c3a6c0cc9d/d00b9/description_image-mix.webp 800w,\n/static/2c09ec2308cb40b9df2336c3a6c0cc9d/d9249/description_image-mix.webp 951w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2c09ec2308cb40b9df2336c3a6c0cc9d/772e8/description_image-mix.png 200w,\n/static/2c09ec2308cb40b9df2336c3a6c0cc9d/e17e5/description_image-mix.png 400w,\n/static/2c09ec2308cb40b9df2336c3a6c0cc9d/5a190/description_image-mix.png 800w,\n/static/2c09ec2308cb40b9df2336c3a6c0cc9d/9b379/description_image-mix.png 951w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2c09ec2308cb40b9df2336c3a6c0cc9d/5a190/description_image-mix.png\"\n            alt=\"description_image-mix\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"カバー\" style=\"position:relative;\"><a href=\"#%E3%82%AB%E3%83%90%E3%83%BC\" aria-label=\"カバー permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>カバー</h3>\n<p>カバーには等間隔で隙間があります。隙間幅は<code class=\"language-text\">縞々１個分</code>で間隔は<code class=\"language-text\">縞々１個分×コマ数</code>です。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 685px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/036c1b029a3307238f01c918343766a6/8ce22/description_cover-slit.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABcRAAAXEQHKJvM/AAAB6klEQVR42nVQXW/SYBjt33VemvgPNF64DAd6adSE8TG2Ih97y9RkygxGZFg6KJCWrmvDWMvoFxR4+7JjqvPCxJ3kPCd5Tp6Tk4cTRfHhYrH4GgRBNQgCwXFmwtXVWDAMXRiPTcHzHMG2LME0DCH272F1Pp/XJUna4obDYQp/EEURgzV1oGo6xE4XZ+0OHNfHpTFGq90B22zwP2w2GxaroihJTlXVF3fr1SKkzHaWzPFDZjtzZs/m7MYN2cxbMmsWMjdYxYeMUvoP1+v1Ok7QNC3Bxal/G4ZLCmV0iZ7cR/dcQkf8CcbYXYtbUHaLexDFQ1XVXU6W5aTruvB9L9J1E7blo974gdfv3iCdzSGTL+CgkEM2k4ZxocePQalawV4ui2z+APuFfWT23kaqMoBpmrvcYDBIRFGEZRiG5rVNAVC1r9Cj/Hv6qVqmHyo85Ys1mi3UqDmd/fZPj09ojS/Rj1WeknKFpnNHy/5QjwN34oapfq8HbTKJ0D4DHj0GaWSwvfqM1LmFV6017CANhAlg5wlunj9DwhXwctLC9ndAUGVg9ZQBLSiKmeREUdyybbs+dd2K3+uR8JAn39onpDA6JcX2gJSaF8RQa8Qb8SQgZWIdE1JU66QoN8lh0yANSSS+lq9412dfpG7/wS83vy7zuremrgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/036c1b029a3307238f01c918343766a6/ba381/description_cover-slit.webp 200w,\n/static/036c1b029a3307238f01c918343766a6/7f61c/description_cover-slit.webp 400w,\n/static/036c1b029a3307238f01c918343766a6/80e32/description_cover-slit.webp 685w\"\n              sizes=\"(max-width: 685px) 100vw, 685px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/036c1b029a3307238f01c918343766a6/772e8/description_cover-slit.png 200w,\n/static/036c1b029a3307238f01c918343766a6/e17e5/description_cover-slit.png 400w,\n/static/036c1b029a3307238f01c918343766a6/8ce22/description_cover-slit.png 685w\"\n            sizes=\"(max-width: 685px) 100vw, 685px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/036c1b029a3307238f01c918343766a6/8ce22/description_cover-slit.png\"\n            alt=\"description_cover-slit\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"アニメーション\" style=\"position:relative;\"><a href=\"#%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3\" aria-label=\"アニメーション permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アニメーション</h3>\n<p>合成画像にカバーを被せて横にスライドさせます。すると、カバーの隙間部分から<code class=\"language-text\">1→2→3→4→1→2→3→4→...</code>のようにコマが順番に繰り返し見えることになります。これによってパラパラ漫画のように見えるのです。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/faa2fc90c70a0848e339f8cb451cc361/620ae/description_slit-animation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAAC8ElEQVR42lWTXW/bNhSG/Sf3D3bbH9C7DdhV0WJAh2JA1qzF1jVZ7MyN0axNl7kZYgRNETtSXNtILMeOLan+kCKSkiiJH3oHKVmDESBweHj48DwAWRkMBo+EEEPP89qj0chYrlZGzLkhhPgyGaVGnCQGldLwlkuDpanhB4FBGTNYHBvFWc758OLi4kHl6uqqBgBRFKnlaoXo+hq++xmnJ22cGR202yY8GgK+j/TgoCgFabWQJwmYbSPo95EDqsjPZrPNyvn5+ZZdbASBWJBAi19e6vr6d/qr357oe49r+uiPr/V8fqYxdXW4vq4VoJ1fX2gRBPpzt6unfzeLnLgFblS63W41jmM4jqPG4zGSKIJSEqq493akWQYoBeatQMMQoe+BMIKQENDAB6H0rsN+v19ljIFSqubzOZp7ezjrnaFvX6JWq6Oxs43pbFKCt3rvsSAe7OsFGsaNfq29jyXxS6DjODdASimyLCuTZKOK/Z01POy28LhxjPHJQwTLfnn4zfAIK+LDuV5g/+IYkMCfvRa8W+CsAPZ6vSrnHK7rqslkUoCRI0cmJVIhbuIsg9YaUkjwNIPIMqRSIUkzSCkR8eROuQAWyowx5bouDg8PUa/XcfThI5Ykxt7bN5hOZ2WHQ3uJ7193AOTYaHbwcTABiRP88Nb4vzIh5E75+Qtsrn2L+61dPP1nCOvoGwTzbgmczD381OyXwMbxEKeWizDJ8PP7wR3wP2XbttXl5WWpV4w811BSlqppmiLPcwghypkkSZkrYs7jIi6B0+m07PD3QtXzvMxxXfWu/ko9XftRPXm2rrbquyr0B8p1xkpKpVjIVUjnavypoYSGGn/aUVFIFFkNMmQfMHOjl19+ShzH5S34q4mTgyrWrFNst22k/jZEOIGQxXuUyEWA5Wi3LF1YryEzDk4tBZwUwM2KZVmPAFiMsQ4lxGScm5wnZhLHJuexSVlsUsrMJElMSqlJihpGzSAgZsRu1oSQjpTSGo1GD/4FG1Ws3rylK48AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/faa2fc90c70a0848e339f8cb451cc361/ba381/description_slit-animation.webp 200w,\n/static/faa2fc90c70a0848e339f8cb451cc361/7f61c/description_slit-animation.webp 400w,\n/static/faa2fc90c70a0848e339f8cb451cc361/d00b9/description_slit-animation.webp 800w,\n/static/faa2fc90c70a0848e339f8cb451cc361/88fcb/description_slit-animation.webp 1043w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/faa2fc90c70a0848e339f8cb451cc361/772e8/description_slit-animation.png 200w,\n/static/faa2fc90c70a0848e339f8cb451cc361/e17e5/description_slit-animation.png 400w,\n/static/faa2fc90c70a0848e339f8cb451cc361/5a190/description_slit-animation.png 800w,\n/static/faa2fc90c70a0848e339f8cb451cc361/620ae/description_slit-animation.png 1043w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/faa2fc90c70a0848e339f8cb451cc361/5a190/description_slit-animation.png\"\n            alt=\"description_slit-animation\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"例\" style=\"position:relative;\"><a href=\"#%E4%BE%8B\" aria-label=\"例 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>例</h3>\n<p>最初にお見せしたRreactのロゴがくるくる回るSlit Animationは下記のような構成になっています。コマを縞々にして合成、隙間のあるカバーを作成し上に被せています。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/abd1e8400892394fc5e63a454f9b6756/29007/description_image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAABcRAAAXEQHKJvM/AAAE0UlEQVR42p1U31MTVxTOX2QHOypEpeMDduyTVl8VZUB9dfofaH2xdErBNCTKUDp1pNUpliBLEBpqmwRiyS9CmEQCSTCQH7vZTbLZTXb37te5l6Qto7ZMd+bOPfec73x77jnnHovP53OkUqnFtbW12a2tLS6TyXCJRIJLJpPc+vo6R3Wbm5tspVIpLhqNsp3a6U71sViM+i56vV67RZKkCACk02mSy+VQKpVgmiY0TUMymUS5XAYhhEIgCALi8TgajQbaH8VTXyqXy+WQpVQqhSloYmJCHxm5T54+fUoSiSTxeJaI3W4nDoeDLC0tkWAwSCYmviM2m408fjxJ4vE4cbvdZHh4mIyNjenBYBCZTCZoSafTEZ/Ph8HBL8nt27cxPj6OFy9eYHJyEnfufI57977A/Lwbfr8f9+/bcPfuXdjtdqyurmJ6ehqDg4NUR2ZnZ5HP50MWWZYjGxsbcDqdZNhmYyB6nna58MDhxEPnA3g8HiwvL2P823E4Ru34/tEjdqZ654MxOJwPSSQS2SekOVQUBRuxGPmN45B8/ZrlJr+7B3/4FbwBPxqqynTpTAYutweiKLJzva4i4FtAciNENN2gOQ5ZBJ5nRUEuR/SxMRgADGIw1Y9vfscKn/irAIKs4auF1P7BNGAC0AvTMMRfWVEEvhSyCILACOVqlShSBc1mk+FplaWqhLqiQNd1VnlVVSFVqszW7gRVraNakUirC/4m5Hme0Bag16GktVoNxWKR6plcr9eZTDG0fSh5tVph52KxSFotFLLwrSsXCgWSz+cZuC7LqEgVmmTkC3lUKhVUazIjLBTyKJUKUBQZoiRSP4ojpklaEYr7EQqCwCKs1WTohoFqpQKB5yGURdTrMhoNBeWyAF6QIEk1NNQGIy2LIo3s7Ss3m03S1DTo9BUUi6AZrzTqkNUadAKkRQOKqkIWt2HUkjAlL0w1i0bTgKY13yYk7fdFCMhaFFj5A+vZMPyFbbxKvkZ2xwcor2Aq64C2Q3sB7K//8H03obkPgijhzXoIK5kM6mIcQJVVVG2S/dVowjCMQxC2SDfTacwvejD/fBaJ5DYUpYFbtz5DX18fbt68gd7eXni9XgbXdf3dhGYrOlmWMfv8OUbtdthHR/Hzs2fYyWZx8dIldHd3o6enB1arFXNzc4cjlCQJMzMzsNlsbBBM/TSF9HYaly9fwblzn+D8+Qs4e/ZjLCws/Dth+8ZUjEajePLkCZs64XCY9eKFC5+iq8uKM2fO4PjxE6AT5lCE7adHG3lra4sNWmqempoCHXWBQIDlj76kwxWl9dEq0sgWF3/BysoKIyLEhGHoB3D/SdgWX758yfLW39+P3t6rGBi4josXL9Hp3r7q4Qjb/TU352Y5O3nyFE6c6MSpU6fR0dGBkZGRA7hDE3LcHGuP7u6PYLWeZPvRox/CZvvm/xG63W50dnaxyGhVT5/uZoRDQ1+/n5Dn+VDLqBFCDLo0TWODm+M449ixY0ZnZxfbrVarceTIB8bQ0BCzUxzFU9/WTF2lhNH3FYW2yLVr13D9+g309fVjYGAAV670YnLyhwO4ti/P82FLOBy27e7uurPZ7PTOzo6rvXK5nCuRSLj8fr8rEAi4lpeX2fL5fK5YLMbsbSz13dvbc0cikZE/AWZmWfhaLjpbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/abd1e8400892394fc5e63a454f9b6756/ba381/description_image.webp 200w,\n/static/abd1e8400892394fc5e63a454f9b6756/7f61c/description_image.webp 400w,\n/static/abd1e8400892394fc5e63a454f9b6756/d00b9/description_image.webp 800w,\n/static/abd1e8400892394fc5e63a454f9b6756/92f8c/description_image.webp 1200w,\n/static/abd1e8400892394fc5e63a454f9b6756/fad48/description_image.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/abd1e8400892394fc5e63a454f9b6756/772e8/description_image.png 200w,\n/static/abd1e8400892394fc5e63a454f9b6756/e17e5/description_image.png 400w,\n/static/abd1e8400892394fc5e63a454f9b6756/5a190/description_image.png 800w,\n/static/abd1e8400892394fc5e63a454f9b6756/c1b63/description_image.png 1200w,\n/static/abd1e8400892394fc5e63a454f9b6756/29007/description_image.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/abd1e8400892394fc5e63a454f9b6756/5a190/description_image.png\"\n            alt=\"description_image\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"縞々をclip-pathで実現する\" style=\"position:relative;\"><a href=\"#%E7%B8%9E%E3%80%85%E3%82%92clip-path%E3%81%A7%E5%AE%9F%E7%8F%BE%E3%81%99%E3%82%8B\" aria-label=\"縞々をclip pathで実現する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>縞々をclip-pathで実現する</h2>\n<p>今回コンポーネント化にともない「画像を縞々にする」という課題がありました。\n最初は、画像要素に白い長方形のdivタグをたくさん並べてトライしましたが、それだとコマ合成時に下の画像ごと隠れてしまいます。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/42337d4f4af57d6b4d157bfb57a7d125/29007/description_mask-pattern.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABcRAAAXEQHKJvM/AAADEklEQVR42o2QsW8bZRjGP3XxUHVDYkH0T2Bi7sBWwdCFAbEwIpiokFCrIgStgJpWGZCqIkGFItQCBRKkDpUi4sRp45AmjePEzvVi+y7fd3f2nR37bF98Pt/nH0qCqGAofaRHj97l9z7vK1SplB/Pz2NPT+v9mRlas79TtCs8GOzy6KDO8kEVI3Yx2wnLKmbVS3ioEmR3BMkGk3gFHRc0lHHsxzmhrl1b5NQp2idOjG0hNC++rL98dEuL26/pzPQbWtw8o88uXdLnvt3S4p1ZnXn3Ny3euqs/mtnUrJ3WwazQ8mcxjucyOH9emBfu9et5Tp7EEULvCAEvvMQXyzcQ371K5uYZxFevcHb+Q87d2ES8+ROZt39AvP49F+4WoXAa70eBcUvo/r0M3urFnLDm5vJcvkx4/rwOz38An15hUa1x0bzD59Vf+Hj3DrfdBX4ttvnkviSbc7l032HBbIH/NVp+hlZXNOEUjnEvJ8xiMS+7XUr1ui5bFqYf0Ao7jJIRcTJimIxIxgnRMCaKEwZxcpTRcEScjhmOhwxGBxrAtnZyQk5P53FdokpFh6VNJu0O681dtppVtoM6Gw0Tvx/wuObz0GyyWHGPcrUakAw8+sEGoV/STBzqa988BfYrFb2/VSLd77LRNDF8CyOw2G5U2e+32awFrJo+D8qK1V2ftWqLJAroBdt0/YoG/2/gykqeKKLnurqvFKOwh+o0cfebeGEL1fUJox5OEGL7XWrNEKvZRQY9hoMOg66i11EaDrB2cjlh7e3lvUaDjVJJVy2LrXIZwzDY25OYT0yMyg5hGPIsaa2Pfug4Tk4oKfOHQ9Ju60GxSL9Wo1ev0TMMhuMxTCbA5Cj+62NN0Do9Bir1FDhqNPTB8jKRadIzTVqlElEy5nn0r4ZSyoUjYBAk7lI+bZTLabNSSd319bQTxSkTnaaHFZ7hNE2TQ4ZS6o9D4NLxmlTbQYDXadLo+Lgdnyhq/3PW8zRUSi2IQqHwvuu6U7aUVxuek3Xsalba1awn61nHfpKV0slKKf/PVz3PmyoUCu/9BfMIyNiVbX+7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/42337d4f4af57d6b4d157bfb57a7d125/ba381/description_mask-pattern.webp 200w,\n/static/42337d4f4af57d6b4d157bfb57a7d125/7f61c/description_mask-pattern.webp 400w,\n/static/42337d4f4af57d6b4d157bfb57a7d125/d00b9/description_mask-pattern.webp 800w,\n/static/42337d4f4af57d6b4d157bfb57a7d125/92f8c/description_mask-pattern.webp 1200w,\n/static/42337d4f4af57d6b4d157bfb57a7d125/fad48/description_mask-pattern.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/42337d4f4af57d6b4d157bfb57a7d125/772e8/description_mask-pattern.png 200w,\n/static/42337d4f4af57d6b4d157bfb57a7d125/e17e5/description_mask-pattern.png 400w,\n/static/42337d4f4af57d6b4d157bfb57a7d125/5a190/description_mask-pattern.png 800w,\n/static/42337d4f4af57d6b4d157bfb57a7d125/c1b63/description_mask-pattern.png 1200w,\n/static/42337d4f4af57d6b4d157bfb57a7d125/29007/description_mask-pattern.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/42337d4f4af57d6b4d157bfb57a7d125/5a190/description_mask-pattern.png\"\n            alt=\"description_mask-pattern\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>合成時に他の画像に干渉しないようにするには、隠すのではなく存在を消す必要があります。\nCSSの<a href=\"https://developer.mozilla.org/ja/docs/Web/CSS/clip-path\">clip-path</a>はまさにこのようなトリミング機能を実現するためのプロパティです。丸や楕円、任意の形にトリミングできます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/37837a62cc83362e61e9d885046c4dc3/29007/description_clip-path.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 115.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABcRAAAXEQHKJvM/AAADkElEQVR42p1Uj0/bRhjl/12iMsMCgRGtEoiWaV0rIRQmraxSYZuAbYyElBEQbEoACVRGSAoNxD/P+dH8sJ3YiZNc3nRXcGGbSrazns732ff0fffedwPJZPKZrpOEqipxTZF3GIimcMiyvCNJ0r0QRTGuKEoykUh8PUA0bRcASlWbVs0WjLqLd0YT+YqNdoein0Ep5T8qirI9oGnaDtsoylrnIpujby9Fev72il5JGq1UDWoYBrVtm5qm6c0sdhu1Wq3T6/UY4daALMs8w5OT1/Thwy8w8/gxQqEJbP626WVwenqK+XAYyWSSr9nm2+h2uzxDTdO2PcLj42M6MjKC8fFxCIKAjY0N7EkO8jUb01OT8Pn9GB0dRaVS8Uj/XvIdwqOjIzo8PIyxsTEMDg4iEongdd6F4bSxtPgSwtAQZmdn0Wq1+iNMp9P06dNnCIfD+OrJE/y+t+dtcBwHmUwGpml+VBROqF2rzM6h16PoUQo+8wf/SWWPsN0FSKFM86Ua9GIVerEGhZRBChW+JvkKJO0dh2lZaDQad2BZ1h3b7DqtLrIioQopQVSKyCkFXCkFPotKAapeAvsmqSWYVp2XbhiGh2q1+oFQVVVesiSK9MWL77C0tIjnz79FMpng5biui9XVFfzw4/dcnI1olJV4v21SqRT9LBBAMBjEgweD+OXnVVzWupBKJkKfj8Pv93MsLCx8/Axvq8wswwgFYQixyDr+kGxkdAvxzRiWl1dweHgI1231TxgKhTA1NcW9uLa29g+/9a0yW7A+JUQDIQSqqsKo1d4T/h/bsEXDdqjrdsDR7sBxXNQbDhp2E1adzQ7qDRvWdYx9c5wmF63ZbH5QmRBt12q4yGRVmlOKyEpFXOTyeHOpsxjOrwj+fCMjK7IYwem5gvNLgrMLlVvKskxUqlWepOdDfh+WSjSdTvMWS6VS0DQVnU4brWaT26RSKaNcLvNOYjEmDutrBsdx/t02ExMTmJyc5Er/ei1KmwJNx8H8N/OYm5vjndHX5XB2dkbHgkEwfCoI2H4VwV6ujq2sichPy/jE54fP58fLxcV7CXfeX7AnHUEQaCAQoD6fn66sLLO/qNuhtFAo0JmZGfpoeprqhLDNlHXHzeh2ux3Goarqltd6uq7TWCyGeDyOaDTKMr6TyU3/3mub/f39LwkhcVVV1/P5fPQGhJCooigcsix7cfZ+E7+FdV3X4wcHB4/+AjtkcUBRGb2RAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/37837a62cc83362e61e9d885046c4dc3/ba381/description_clip-path.webp 200w,\n/static/37837a62cc83362e61e9d885046c4dc3/7f61c/description_clip-path.webp 400w,\n/static/37837a62cc83362e61e9d885046c4dc3/d00b9/description_clip-path.webp 800w,\n/static/37837a62cc83362e61e9d885046c4dc3/92f8c/description_clip-path.webp 1200w,\n/static/37837a62cc83362e61e9d885046c4dc3/fad48/description_clip-path.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/37837a62cc83362e61e9d885046c4dc3/772e8/description_clip-path.png 200w,\n/static/37837a62cc83362e61e9d885046c4dc3/e17e5/description_clip-path.png 400w,\n/static/37837a62cc83362e61e9d885046c4dc3/5a190/description_clip-path.png 800w,\n/static/37837a62cc83362e61e9d885046c4dc3/c1b63/description_clip-path.png 1200w,\n/static/37837a62cc83362e61e9d885046c4dc3/29007/description_clip-path.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/37837a62cc83362e61e9d885046c4dc3/5a190/description_clip-path.png\"\n            alt=\"description_clip-path\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>今回は任意の形にトリミングできる<code class=\"language-text\">polygon</code>を使って\n<code class=\"language-text\">clip-path: polygon(5px 0px,5px 800px,6px 800px,6px 0px,11px 0px,11px 800px,...)</code>のようにして縞々化を実現しました。\nこれについても最初は、複数の長方形を指定しようとしましたが、polygonは１つの閉じた図形でなければならないという制約があり困りました。\nちょっと悩んだ末、ハック的に櫛型の図形を指定することで解決しました。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/84db7447d6686f560592257b3dc2dc68/2bcd1/description_clip-path-stripe.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABcRAAAXEQHKJvM/AAAB/UlEQVR42o2S626bQBCFeeL+6JO06fNE/RFRKUVWSLBiBzCG3eViwFYLyy4XT0612JZ6S2ukT2dmV3O0Z4QlhFgIIe4453aWZTZj3GaM2Xme22VV2VVd25XRqj7XJ+r61Ncn7uq6du/v799b5a6A4IxYEoNzBsYSZFkKrTpc+72+vh6NhmF4Y6n+CJaWUyxK4mlFSVrRlpfEzsrzmsK4oE2yI55VFCYFBduceFZTxHaU5jXtD9/G4/EIz/M+Wm03YB0mFGxTREmGdcjhRwLBViCIBKI4nfV0n8+EcY6YF9jEGZjYYVfWx2ma8Pj4eGOZpzbNd5KyRds26LWa1fSdbCHbBkp10Fq9GZmI5si+758MpZSklELXdRiGwfRzfTnr+x5a6z9397cdXgzNYCclxnG82hBvGSqlSJ+HpnGcjUzdaz2rebXhKsM0y8AYIy4EDGa5lzg/c/VvMzw/4+D7dFgucXBdjGUJtVpB+z50FEEHAYbVCsN+f5n+T2TPg3x5IeV56BYLDEJAOg4614VaLmftHQe6KK4zpIcHYzh0T0+TXCymQYhJOs7Uue7ULZezaseZVFGYXUwgOumv9MYwCIIPFpIEmjHqNxv0vo+pqqDXa/RBgD6K0IchxvX6qsi+73+ytNZfmqa5bZrms0Ge9XeklP/itm3br67rvvsBIfYcVhip850AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/84db7447d6686f560592257b3dc2dc68/ba381/description_clip-path-stripe.webp 200w,\n/static/84db7447d6686f560592257b3dc2dc68/7f61c/description_clip-path-stripe.webp 400w,\n/static/84db7447d6686f560592257b3dc2dc68/d00b9/description_clip-path-stripe.webp 800w,\n/static/84db7447d6686f560592257b3dc2dc68/92f8c/description_clip-path-stripe.webp 1200w,\n/static/84db7447d6686f560592257b3dc2dc68/58c45/description_clip-path-stripe.webp 1561w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/84db7447d6686f560592257b3dc2dc68/772e8/description_clip-path-stripe.png 200w,\n/static/84db7447d6686f560592257b3dc2dc68/e17e5/description_clip-path-stripe.png 400w,\n/static/84db7447d6686f560592257b3dc2dc68/5a190/description_clip-path-stripe.png 800w,\n/static/84db7447d6686f560592257b3dc2dc68/c1b63/description_clip-path-stripe.png 1200w,\n/static/84db7447d6686f560592257b3dc2dc68/2bcd1/description_clip-path-stripe.png 1561w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/84db7447d6686f560592257b3dc2dc68/5a190/description_clip-path-stripe.png\"\n            alt=\"description_clip-path-stripe\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"reactコンポーネント\" style=\"position:relative;\"><a href=\"#react%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88\" aria-label=\"reactコンポーネント permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reactコンポーネント</h2>\n<h3 id=\"実装\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-label=\"実装 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<p>縞々化の<code class=\"language-text\">polygon</code>を組み立てロジックは、Slit Animationの原理で説明したようなロジックをもとに、先に説明したCSSのclip-pathで実現しました。</p>\n<div class=\"gatsby-code-title\">縞々生成ロジック</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">craeteFramePolygonPoints</span><span class=\"token punctuation\">(</span>\n  coverSlitWidth<span class=\"token punctuation\">,</span>  <span class=\"token comment\">// カバーの隙間幅</span>\n  coverWidth<span class=\"token punctuation\">,</span>      <span class=\"token comment\">// カバー全体の幅</span>\n  coverHeight<span class=\"token punctuation\">,</span>     <span class=\"token comment\">// カバー全体の高さ</span>\n  frameCount<span class=\"token punctuation\">,</span>      <span class=\"token comment\">// コマ数</span>\n  frameIndex       <span class=\"token comment\">// 何番目のコマか</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// カバーの隙間を配置する間隔</span>\n  <span class=\"token keyword\">const</span> unitWidth <span class=\"token operator\">=</span> coverSlitWidth <span class=\"token operator\">*</span> frameCount<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 隙間を何個並べるか</span>\n  <span class=\"token keyword\">const</span> unitCount <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>coverWidth <span class=\"token operator\">/</span> unitWidth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 櫛型とpolygonを生成</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">range</span><span class=\"token punctuation\">(</span>unitCount<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">i</span> <span class=\"token operator\">=></span>\n      <span class=\"token function\">range</span><span class=\"token punctuation\">(</span>frameCount<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">i</span> <span class=\"token operator\">=></span> i <span class=\"token operator\">%</span> frameCount <span class=\"token operator\">===</span> frameIndex  <span class=\"token operator\">%</span> frameCount<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">countInUnit</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> offset <span class=\"token operator\">=</span> i <span class=\"token operator\">*</span> unitWidth\n          <span class=\"token keyword\">const</span> offsetInUnit <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>countInUnit <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> coverSlitWidth\n          <span class=\"token keyword\">const</span> xStart <span class=\"token operator\">=</span>  offset <span class=\"token operator\">+</span> offsetInUnit\n          <span class=\"token keyword\">const</span> xEnd <span class=\"token operator\">=</span> xStart <span class=\"token operator\">+</span> coverSlitWidth\n          <span class=\"token keyword\">const</span> yStart <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n          <span class=\"token keyword\">const</span> yEnd <span class=\"token operator\">=</span> coverHeight\n\n          <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>xStart<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>yStart<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px,</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>xStart<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>yEnd<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px,</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>xEnd<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>yEnd<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px,</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>xEnd<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>yStart<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">,</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">,</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 補助関数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">size<span class=\"token punctuation\">,</span> startAt <span class=\"token operator\">=</span> <span class=\"token number\">0</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">i</span> <span class=\"token operator\">=></span> i <span class=\"token operator\">+</span> startAt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>縞々ロジックが確立してしまえば後は簡単で、淡々とコンポーネントを作成していきます。</p>\n<p>縞々画像のコンポーネント</p>\n<div class=\"gatsby-code-title\">縞々画像のコンポーネント</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> styled <span class=\"token keyword\">from</span> <span class=\"token string\">'styled-components'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SlitAnimationFrame</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    coverSlitWidth <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    imageWidth <span class=\"token operator\">=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n    imageHeight <span class=\"token operator\">=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n    frameIndex<span class=\"token punctuation\">,</span>\n    frameCount<span class=\"token punctuation\">,</span>\n    image\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>frameIndex <span class=\"token operator\">&amp;&amp;</span> frameIndex <span class=\"token operator\">!==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token string\">'You need to set frameIndex.'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>frameCount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token string\">'You need to set frameCount.'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>frameCount <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;</span> frameIndex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token string\">'You need to set frameIndex which is smaller then lastIndex of frame.'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>image<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token string\">'You need to set image.'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 縞々ロジックを使う</span>\n  <span class=\"token keyword\">const</span> freamePolygonPoints <span class=\"token operator\">=</span> <span class=\"token function\">craeteFramePolygonPoints</span><span class=\"token punctuation\">(</span>\n    coverSlitWidth<span class=\"token punctuation\">,</span>\n    imageWidth<span class=\"token punctuation\">,</span>\n    imageHeight<span class=\"token punctuation\">,</span>\n    frameCount<span class=\"token punctuation\">,</span>\n    frameIndex\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n  <span class=\"token keyword\">const</span> FrameImage <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>img<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    position: absolute;\n    width: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>imageWidth<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px;\n    height: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>imageHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px;\n    display: block;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translateX(-50%) translateY(-50%);\n    -ms-transform: translateX(-50%) translateY(-50%);\n    transform: translateX(-50%) translateY(-50%);\n    -webkit-clip-path: polygon(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>freamePolygonPoints<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">);\n    clip-path: polygon(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>freamePolygonPoints<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">);\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>FrameImage key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>frameIndex<span class=\"token punctuation\">}</span> src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>image<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n<p>続いてカバーのコンポーネント</p>\n<div class=\"gatsby-code-title\">カバーのコンポーネント</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> styled <span class=\"token keyword\">from</span> <span class=\"token string\">'styled-components'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SlitAnimationCover</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    frameCount<span class=\"token punctuation\">,</span> <span class=\"token comment\">//required</span>\n    coverWidth <span class=\"token operator\">=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n    coverHeight <span class=\"token operator\">=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n    coverColor <span class=\"token operator\">=</span> <span class=\"token string\">'#000'</span><span class=\"token punctuation\">,</span>\n    coverSlitWidth <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    startAt <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    endAt <span class=\"token operator\">=</span> coverWidth<span class=\"token punctuation\">,</span>\n    duration <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>frameCount <span class=\"token operator\">&amp;&amp;</span> frameCount <span class=\"token operator\">!==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token string\">'You need to set frameCount.'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// ここでも縞々ロジックを使う</span>\n  <span class=\"token keyword\">const</span> coverPolygonPoints <span class=\"token operator\">=</span> <span class=\"token function\">craeteCoverPolygonPoints</span><span class=\"token punctuation\">(</span>\n    coverSlitWidth<span class=\"token punctuation\">,</span>\n    coverWidth<span class=\"token punctuation\">,</span>\n    coverHeight<span class=\"token punctuation\">,</span>\n    frameCount<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> CoverDiv <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>div<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    top: 0;\n    left: 0;\n    position: absolute;\n    width: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>coverWidth<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px;\n    height: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>coverHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px;\n    overflow: hidden;\n    &amp;:after {\n      top: 0;\n      left: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>startAt<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px;\n      position: absolute;\n      content: '';\n      display: block;\n      width: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>coverWidth<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px;\n      height: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>coverHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px;\n      background: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>coverColor<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\n      -webkit-clip-path: polygon(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>coverPolygonPoints<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">);\n      clip-path: polygon(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>coverPolygonPoints<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">);\n    }\n    &amp;:hover:after {\n      left: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>endAt<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px;\n      transition: left </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>duration<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">s linear;\n    }\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>CoverDiv <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n最後に全体を取りまとめるコンポーネント。<br>\n縞々画像とカバーを重ねて表示します。<br>\nホバー時にカバーを横スライドするようにしました。\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> styled <span class=\"token keyword\">from</span> <span class=\"token string\">'styled-components'</span>\n\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SlitAnimation</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>  <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    images<span class=\"token punctuation\">,</span> <span class=\"token comment\">// required</span>\n    imageWidth <span class=\"token operator\">=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n    imageHeight <span class=\"token operator\">=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n    coverWidth <span class=\"token operator\">=</span> imageWidth<span class=\"token punctuation\">,</span>\n    coverHeight <span class=\"token operator\">=</span> imageHeight<span class=\"token punctuation\">,</span>\n    coverColor <span class=\"token operator\">=</span> <span class=\"token string\">'#000'</span><span class=\"token punctuation\">,</span>\n    coverSlitWidth <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    startAt <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    endAt <span class=\"token operator\">=</span> coverWidth<span class=\"token punctuation\">,</span>\n    duration <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>images <span class=\"token operator\">||</span> images<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token string\">'You need to set images.'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> frameCount <span class=\"token operator\">=</span> images<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> cover <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>SlitAnimationCover <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">{</span>\n    frameCount<span class=\"token punctuation\">,</span>\n    coverWidth<span class=\"token punctuation\">,</span>\n    coverHeight<span class=\"token punctuation\">,</span>\n    coverColor<span class=\"token punctuation\">,</span>\n    coverSlitWidth<span class=\"token punctuation\">,</span>\n    startAt<span class=\"token punctuation\">,</span>\n    endAt<span class=\"token punctuation\">,</span>\n    duration\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> frame <span class=\"token operator\">=</span> <span class=\"token function\">range</span><span class=\"token punctuation\">(</span>frameCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">frameIndex</span> <span class=\"token operator\">=></span>\n    <span class=\"token operator\">&lt;</span>SlitAnimationFrame <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">{</span>\n      coverSlitWidth<span class=\"token punctuation\">,</span>\n      imageWidth<span class=\"token punctuation\">,</span>\n      imageHeight<span class=\"token punctuation\">,</span>\n      frameCount<span class=\"token punctuation\">,</span>\n      frameIndex<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">image</span><span class=\"token operator\">:</span> images<span class=\"token punctuation\">[</span>frameIndex<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> Container <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>div<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    position: relative;\n    width: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>coverWidth<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px;\n    height: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>coverHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px;\n    overflow: hidden;\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>Container<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>frame<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span>cover<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Container<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>これで完成です。</p>\n<h3 id=\"使い方\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-label=\"使い方 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">npm i @takumon/react-slit-animation</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>でインストールして下記のように使えます。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> SlitAnimation <span class=\"token keyword\">from</span> <span class=\"token string\">'@takumon/react-slit-animation'</span>\n\n<span class=\"token keyword\">import</span> parrot1 <span class=\"token keyword\">from</span> <span class=\"token string\">'./images/parrot/1.png'</span>\n<span class=\"token keyword\">import</span> parrot2 <span class=\"token keyword\">from</span> <span class=\"token string\">'./images/parrot/2.png'</span>\n<span class=\"token keyword\">import</span> parrot3 <span class=\"token keyword\">from</span> <span class=\"token string\">'./images/parrot/3.png'</span>\n<span class=\"token keyword\">import</span> parrot4 <span class=\"token keyword\">from</span> <span class=\"token string\">'./images/parrot/4.png'</span>\n<span class=\"token keyword\">import</span> parrot5 <span class=\"token keyword\">from</span> <span class=\"token string\">'./images/parrot/5.png'</span>\n<span class=\"token keyword\">import</span> parrot6 <span class=\"token keyword\">from</span> <span class=\"token string\">'./images/parrot/6.png'</span>\n<span class=\"token keyword\">import</span> parrot7 <span class=\"token keyword\">from</span> <span class=\"token string\">'./images/parrot/7.png'</span>\n<span class=\"token keyword\">import</span> parrot8 <span class=\"token keyword\">from</span> <span class=\"token string\">'./images/parrot/8.png'</span>\n<span class=\"token keyword\">import</span> parrot9 <span class=\"token keyword\">from</span> <span class=\"token string\">'./images/parrot/9.png'</span>\n<span class=\"token keyword\">import</span> parrot10 <span class=\"token keyword\">from</span> <span class=\"token string\">'./images/parrot/10.png'</span>\n\n<span class=\"token operator\">&lt;</span>SlitAnimation <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">imageWidth</span><span class=\"token operator\">:</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">imageHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">images</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      parrot1<span class=\"token punctuation\">,</span>\n      parrot2<span class=\"token punctuation\">,</span>\n      parrot3<span class=\"token punctuation\">,</span>\n      parrot4<span class=\"token punctuation\">,</span>\n      parrot5<span class=\"token punctuation\">,</span>\n      parrot6<span class=\"token punctuation\">,</span>\n      parrot7<span class=\"token punctuation\">,</span>\n      parrot8<span class=\"token punctuation\">,</span>\n      parrot9<span class=\"token punctuation\">,</span>\n      parrot10<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">coverColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#444'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"いけてないところ\" style=\"position:relative;\"><a href=\"#%E3%81%84%E3%81%91%E3%81%A6%E3%81%AA%E3%81%84%E3%81%A8%E3%81%93%E3%82%8D\" aria-label=\"いけてないところ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>いけてないところ</h3>\n<p>スリット幅、カバーの色、カバーのスライド速度など調整できるようにはしていますが色々と難点があります。</p>\n<ul>\n<li>使う画像ごとに、うまく調整しないとなかなか動いているように見えない</li>\n<li>ピクセル幅にシビアなのでサイズをレスポンシブにできない</li>\n<li>モバイルで見ると固まる（レンダリングがかなり高負荷）</li>\n</ul>\n<p>などなど実用的なコンポーネントとは程遠いです<img alt=\"emoji-cold_sweat\" data-icon=\"emoji-cold_sweat\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAWv0lEQVR4Ae2bBXAcx9a2n9MDi1pJlmzJdmSmMCcXQ5eZmZmZmZmZmZkpzHTtsG9MchyzbOFK2t2hPv9K6iqpFNvXf5x8fKre6llpt6ef95weHuF/eZj/M+B/d/yfAT73erzf5E555bLQ1+NVvWNFWGHxu1VMmyBFAEVronbYkO5VZYtItj5O41ujG76zFbDciyHw/nsDWiqn7jhDvcJjEf+h1guP8XxTFGMQz8MIiAEEAFBQC1ZBswy1liy1NZPF/0LT8yWr/7G6rud6QO95A+7JOHV3scX4T1UTvBA/f38v8IwXehjfIIAKAIhMiWl+VKfxxLVZqmRxSpZklrRxldjku6M2/SVQu8cMaA6aI451G/2W0499tvUKbzJheJwf+vihQQxYIBdCWxm65sDcNujqgHIBQh8A4hTG67B3APqHm+0gDI9BHIMAaiGNbVMpNo5uM1njM6P/XP9jID1yA7iEI4nKaYvPwG//qAbFBwX5gCAnIOAHcNRcOH4FnLQSlnZDRwXyAXgeAOisMswyiBIYqMLWvXDTZrh1C+zcD2kCKCSRkjQSJKldRDr0TuD6IzKgctpW7k5U1y6TljP73ihB5QN+PlfKFQTxIAzgmKVw3mlw0nJobwGA1IJOSEEPMR/FbR98AwBDo3BTL1y8Fv51hxIngmYQNZSsHo/bZOR9o9d1fRbQ/6htgLSfuraiucVfNmHl2bmSkMsJeLBsgfDoBwinr5JJI5IU7N1ckbrWAIEPUQJrNyl/ulLZtlunTIiUaNxi49EfS3Tnq4fWnVYF9N40QDpPvmG+Fnt+4heL5xRKQhBCmBPOPdXjEfcxtBYhykD00GuSuwIf9A/qKiP0YKQGf7vWcsm6jDhS0hhq40paq10qtR3P6r/xlD2A3hvHAdJ5/yvne6b790ExOL3YkuIH0F4RHnd2yGlrhCxTxhsgcgQuH8KUJJky4YlnCYvmCX+4LGGoqgQ+1ExwTtIcW3OMj++/6gHOhHvOADnq2F+2W3/hz3Il7/RSS4wfCp3thiedV2DFQqEWZQgg3LuRAprCySuFSsnn1xfV6R+yhJ4y7nmnR+MLf9Yc6xN2rn/qEKD3hAECmGDu0V/0S+asciUmlzO0thoef06JxV0TWU8xs7N+Dzuhs1DGU1g8D550bsDvLx1nZMQSGMuYmLNSOfqLwPMAC+jdN8DBLz/78jf6peBZldaYYtEjnzc8+IwSCzuhHk3Bz17TPcx/l74VqEU0xyDNsfhceM04Dd/iS0aV4FnNMd/ce9lZn/13Jvj/Dn7VA39yalAsva9SSSiVlSDMOGlNkRULPBpRgjGQHWnGj6AiopTJsQyuMdy8oUFgFF9Tqlnpfc2xX7bpimetO5QJcij4rq6H5rtOfPNfy22tZ1XaQnJ5YV5njrNPayMMBAUEOWBPxhjUWpQjCwHEGKy1By4JtxAnymVrh9nXHxE1lOpwzNjIyOV9N336kX195zcOZoJ/KAMWnPjcpxXK3lltlYRyUcnlDWuWFAn8FJspgqAzwRXECEEYMFodxvdDPM9wJJFmljSNaalUSOIEtQqz1qkogS8cvcSjUYuJjMXYFFLvLK/J0Hf++T8C9PAMcPAL1zyhUsqFb21tSaiUDIVCRsecPPPaBU0jAHRW5gN3cP+XX/2Vi/58Pm/64JvoXjCfNE25O+H7Pvv37uEz7/0MD3r0Q3nEEx8KHiRxCswywcLcdqG7QxkcjPDUIkmCScK3Nln+sGvD70amTTi0AQbwViw960nFsl3dWk5oKQr5gmH+3AKhl2CtMjM8z5ArBOzevptffv9vXHLxlRy/ejk9C9uoRTVQ5e5EYmOOavZRzrfx7a/8jN7bd/DU5z+CBYvmEdUTsswyM0JPmmMU4nqMj0XSBBvb1RMsTQN+4OCzQxkggMyZsyJXynkvqpQzKsWEUkEpFgPaSgq2gSgg4HuGMBdQHaly/h/W8ZdfXseewRotuR7e/O7nEgRArY7czS2kWiUMipN9vfrF324au4ENN23nUU89k3MediqV1jJxlExOExSw0F5ShoopPgmSptg4Q+rei5pMPx8c3JI5Rj2UAd4ppzz6lHJJT2stJpRLhnLeUi4K5VxG4IPvG1Qt+/tGuP7qjVz819u4c9soliIt4Vw+8aknsPq4LrZt34dnzBFtAavDtYm+mn0+h7e9+XfsH4z54dev5LK/38x5jzyOM+63mrldrYgY0tQi+YzWYopnY4xN0DjBNlkmmC688PPXAPZQBhjAay15j20pJKZSimgtQD5nJ7cDNqmyY8cw27bu59Ybd3HbTXsYGEwRSqS0sayngw9//JGsOamNzVu2E4iAckThCezYvp37PegovvW95/Dut/+VrTsG2L4t5XtfvZY//nwtx500n+NPXsiSZXOZ191GpZSgSYSvCcQR6XhisiYTcD2QAfZABghg2tvbg3IxPbe1GDfhY8o5KBaVrB7xvg/8nC1bpzKtFPAoAmU6Wyo8/inH87JXnYqaYbZu3jQJf6AQhNmhgOCWD+CYB5N9rjymm1/+/tl84yvr+P2vbqV/NGDfYMIFF+/kwos3Y6ixYlkLb3jrw2ktCjWNocmQFWPSJtME29DQUAoIoAc04D7H32dZa86ubismVPIRpRyEfkrb3A6e9JQH84+/9DJWNRQKJXoWdXDfByzh3Acvonu+NqfBJqojY4SeQZBpGFV0dqs66zqAQFMGJltxLe5/KsqubVsn5/3b330Cz3/RiVxy4XauuXJbs0IGqNfHKVcsD3vUchZ2FxkeGsDLWUwSYYsJaZNpgu1vl//t9kMZ4M2rhMe35NNCJZ804SMKoRJ4PqRDPO+5J/DSl55FrWYJAiFfyIjqw+zfdzu33zICqvgikFmszdBJ0IllBRRVAAU9UKbF8U63xggiZsoY42HEUBsZb65rH21zWnnq07p5zvMfSKPukSRKsWiIGwNsvP0W8l6MF6aQi7H5hKjJNMEGbALkoFNgTp5j2nIJLfkGLaGQCxU/SDEas23jdYS5PEEQkGUZSRyT2QzU4qEOWKEpM6NTzGEef+pBDnkVxLrKcBrtH2Z0YAee8Qhy4WTblyTEUQNfE4qhJZUMP4mgyRLnEmpNNuB3BzPAAKYcpMtbwpRSGFMIDDkfgsAHI6ARktRIEwHAV8XDztqJ3vtnQy6cMQZtCCkgKCEWPMAoiaaYIMKGMUmYMtpkw3HONkCcvEqQzCvlYorBhITQB9/LQByR6mzYA9AqIkIQ+hgR0jSb1OG7ovi+NymrShKnqOqB1nNXc4zM6CPFCyI0iElyMeUmG+AB4qSzp0BQNlFbeQLea1DwIDCK5/mAHhaAoBjPYK3yr1u3MTw8zupVRzF/fgdxnBzWHAjDgD17+ti4aSdtbSWOOXoJxgg2syhymOUi+FmKZ2LUa5AFMZUmGxAcchtQ9LN8wUTkPZ+cEQLfTs6vwyB3CRAyq/zy55dw87oNeAKXFAs881kP4YQTFhPH6SHHHeZ8brmll5/+5AKSWp1M4cRT1/CMZ5xL6AtWp7N+aHzI/AzjJVivQWoiJtgAcyADxLWmJBG5SXmEIgSSYcRjpC58+o95nn7/mON6MgCQu+Yyl/O57IqNbLp5Ayu7AwJfGKg2mrvPK1i9opVCPsBa5UBhjFCvjU1+t9Vr0LEwJEl1sq+bVs/j7AesJorSaX49yNmxaz0yRBKsNEglYoINMAeaAupaE2rSyNMgL4ZQlECCSQN+dEUXv7hxBbure/nhS3sxMjXPQae7AzwJ6N20ja5Ww7yKwTdCIQjYPlBl967dnHhcF9FBqiAX+vT29hGPVlnUEVDOGVKrJImhd+M2zntgD6GXgE6nWRF3XCF3mV1WpgxAIlIaTLABBtfDAc8FfI2qoTYILIRk+BIwUsvxy/UnQlcPV++fz23b7+S0JSMgM+DN1LLxAtK4QUveUAwE3wNVIWeULB0jF5bQ7AAGCORDf+o7RimFQjGENJPJvib69PwxRBOwgAooqDoTxCEhqIKIYsVOfl9txATTBNuhrgcogMmi/lB9fJSAFE8D/nzrUextWY3f00Ha38YP167gPksvRQwOHsSZEeZDuheU2L6/HzHTCcnnA7rm+/iMEPqWA4WHmfjO5HfBeWvAZnayz2I4TpzFqABWQHGaMlnFmQKIglWLkGBJJgyYZDvY2aA6UYujO73Uw8sUz6ZkieX7609n4cnd/PpFi3jHP/r582/P5K39V7J83ogzwWVfwKfBfc6ey5abdjJes+RzwuBQwqJjulix2mDHq3i+cJewYDNlxaoyi9bMYd+/+gg6AxqREqs32acvVTKToQquxh2JOCpBVZwBgLUYm2LSBC+NJtlm886ugHTfSKP3mNjDpCA24/wNi9ngHcvbzpnLfeYHvPqBc7j82gXNKjiaDz/mElz5I0JTStpQTjimhUe+aCVX/OZOqtWU7uM7ecqLe8jpEIlJDnwF1QCqBJrwtJf28KvvZPRtHCEoBc2+Fjf7VBr7RvFEUAQMgMt4JiAAghoDFtz5hjOgqThigg3IDnY6bIH0n7vqW89Z7TdMonnJfL63/r60rurgkcuKrB9Sju0IOe7kDn550QN4Y+0SOltquCnguJR0sM6Dz2rh5PuupFazzOs0+NVBkvEY48khj/SyqE5XucHL37GAfQPdFIuGjiClsXsfxpue41hngk5lnQnhpgECMgHfVJZikhTiuDHBBiSAPZgByc/X13a+5oxcbzmWY/+5vYerkjN51AntdJc89jegMy88+vhWPnr9Cn5+wzG87pyrABAAZwKiRHsbtBc9OkJDsj8lzayD//d3Q9NaA9MYo6fgY+uWaCBDjGBUwALIjJ/IjIoyKAYUFDDWYlKLxCmNsbh3gu1QBigQjSck/dXo2rkNPfbbvQ9Aejp53JoWxlMhsTAUKQ9eXODbq9r57s0P5WX3v4pSLkZEYVKA2y5kMWQJYMC4vx3ObVpxQEktAgXjzdjowcyMu6wzveyqQDJtCkgyJIrpr8bXTrABEaAHMyAB6pdtj65kTtcL/p6cZ045dg4nzA0ZbCgqQjURuvIeDzmunZ9sOI4/3rqaZ5+xbgrOcIB2lgDQf++CAuLaGVkHZ4QIOgMacaaocc8aKZI0Vc/Q8chetj2+EqgDycEMALBA7Qv/zDasbXv0SLZmfvtDV5exCA0reAJWYSSBhywr8pdlnXzuxsfzlFPXkQ9TMCB3NWLG2OXwTod1RiXpNLgyywgctJOIoNYgGWiqSGShnjI6kt42wQTUHCOHMqBenfeYRf8oPryyaHEbazpyVBOwbkwWGEtgbsln5aIy6+44lV/ccAIvuN91YHAHRLMqAAUPyAHejMxmTIMCWPe3GFAcGFMy4vwTcC3qKsCKmyIGtRlkgqYWogwZTbl5d/r7akIdJnVIAxSo0/2AhxQWdHlHdRRQMSTWrdwNPFOwKnS35Wlb2Mb3bj6PFzzgOvAcPDOyHwB5iEdh8y3Kxo3KnXfC4BDEEYhAoQCdnbBsmbB6dbNdLJAD6goZYFzpIeDpFCx3vc2hmTYlaJxh6xY7mjEylG1715VcBlSB+uHcGElpXXBy27wi7eWQ0UToLDo2poQRBhvQkguaAy+wfvMa8GUaGplqi8LoEPz6R5aLLlB2bYcsBl/AN2AcR2Yh1Qkp+RIsXwWPfYzwiIcKkgMiwBOAKXgRZ8qUhOllTcA2IBtTsmHLNTv0h70jjMKk0sO5NaYUCu2VckBr3mMoFnoUcgYAcMnY34BCKLQWfXaaCngyo+SBPGzcoHzwA5adW2FuWVjeAbkAAgcvAqibDQpJBrUY9myGj31EueRS5d3v8mitAMmshwxVnNEOfEIpaGTJ6pZ0JKOv397wiou4DBgGxg775qhgCY1S9BWA/XXoKkDOg9RCfwSRhZLvLpgYO20AgAdjVfj4xzOqfXDSMmjJQc4Hbwb8zFALmU71Pz+F4TrccB185WuWd7zTQ6yAMgPamZAJqqAZ2IYlGdcmvKUxmDW+cZN+ZaRB1RkQARyWAdqo9iVRtMymKb5YUjUMxxA6A+op+GqxWUaaJJTsgKNiSiHcsV4Z3A+rFsPcFigEYAzIQXaCM/+eZlCKQD3YsAHqo0KxJJAB6gxgSmpBE9CGxY4rdsSSDWRcd4d85/NrtRcYcPNfD9sARndeMdx3zH2rSxtE7QU052FVSDLIFFAlyTJG6xHD/WMc13ITWAEPUCCFuQsMXd0Q+EKuqBgD1jLVRwrWKlYBpozxjOB54E8ogLwPXhWWLBVyLQYSnYKfOd9T0BhsHeyokgxb4v0pvTvs+Y//nf4B6AcGgRjg8A3Yfdlv929Z88I7F7V1zmkJCT3B5n0CT0itMh5n9I3U2bl3mL2b9/Cu0y+CdMY+Pla6Fxie+Lwcf/lJzL5RKJaFfEkotgqFCoR5aQrUQtyAqK7URpR6FRpjyti4UpgrPP3FIZ4BLKAzyj4GYkFriq1akqGm9mXs22Vves6f9ZvAkIMf+/9/RGbnJbuSjhM/tnFd62dyPiRxSmclT873SKxleDyid/cI62/cyZMq3+e+XVvRhoEAxBcwCqPKwx/uc/TJPiPDSqVV6egQikXwzMynonFgkGTC6BgM9EN9HOYvEOYWFYYsYMBlnUTQCLer0yn4vgn47PYX/10/uWGQvcA+N/ezu/Og5Bygk1Pf9vTy8jPfvOiYhS3zuisU8j5xnDEwUGP7pj4ekf2At5z8B9o7YeEiD8mBhIoETB8UlQVCIFWIdaqd/djXzAMcXyB087yhUMOVvJvrqaB10JolHVWyEUuyN2X3Dnvjy/6un75yJzuB3UAfMApwdwzwgcWAx8onr6Lr1Gfm2xbcz8/nK1lUT9L+rTtf0fb78DlL1x/nzzH0LPWodAhSEkxeICeID+IpeC7T4loAc5DLuBYAHLArd9DMZT5WbEPRMSV1+/lkf8aW7faCZ/5Jv71lMvOT2g8MHemjsi3A/FnfrYCrDih/9Gxz9mOP0yce1ePl/A4PryJ4ZYPkQSZMCHFGAGaGZNbaFdc6pUyBW3AbOjRStA7ZuCWrKulgRn0ga1zdK9970m/t34Bhl/X9blk5jPA4eMRuKMUZQ01m3F+Xi+7UXt9y5aqCdhWtzlf3n8k2E7C4bwuaCaiTBRS3PCEctEAqaDwh0IaiNbBjkI3aqXIfsKR92UTJ3/D5q/VTb7pYrwcGHHw/MALoPfmwdA5odUZ4gAK+UxFoL3i0fOXh3O+cpfLEtk6z1Gs1eC0GUxSkIHghEAoSAB6IAYzAzAqwijrDNAEiJYtB64qtKdnYlAHD/faOS+/Q377q71xdzxh1pT7gNArof9QrM2VnTDvQBlQWlil/+BxOu2+PPKyjXY73y0YmTPCKZnpKBAIekzIGAKwDR12pu5LPanYSPh2zOjCot16zU//x7ktZu2uMMcAd4THksj72n/HOUA5oASrOhBZnjP/601j6qJXmtKXtelq5hSVhweRMTiAQxAfjz6wAsKm6XZxiIyWu22hslG13DMnav2y2az+/ljuA1IGOOviqW47+M1+aMkDBwTtRBEpAzgPzmFXMO6uHhas7TE9nURcUA+bkfMqBRw4gyYiilLFawmB/TXZvHLA7Lt/Brj9tYl8G1gGOAzUH7EQdsP9V3hrznRElp6L7nAdCJ8/J4toZJma41il2agB1Bz/uVAfS/3qvzU0bkQPyTgUgnGWCce3MyAA7Cz52sA2naCb4f1UDZvYdzJLvWmcAAgDoDAMSB5nMkt47g/yPCweNcTrQ4x7WyZlx78f/A5XVFJimBjmKAAAAAElFTkSuQmCC\" title=\"emoji-cold_sweat\"></p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>思い付きで作ってみて一応Reactコンポーネント化できたのはとてもうれしかったです。\n最近のCSS周りは、なんでもできるようになってて楽しいですね🍅</p>","excerpt":"なにこれ Slit Animationを実現するReactコンポーネントをCSSのclip-pathを使って作りました。\nSlit Animation…","frontmatter":{"slug":"/2018/12/02/","title":"CSSのclip-pathでSlit Animationを実現する","date":"2018-12-02T16:00:00.000+09:00","tags":["CSS","clip-path","React"],"keywords":["React"],"thumbnail":"thumbnail/2018/react-slit-animation.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>自分のブログの目次をQiitaっぽくしたい...現在表示中の章をハイライトする目次を作りたい...ということで作りました。\nマークダウンをHTMLに変換するのに<a href=\"https://unified.js.org/\">unified</a>という構文解析ライブラリを使っています。<br>\nメモ用にReactサンプルアプリも作りました ⇒ <a href=\"https://github.com/Takumon/react-markdown-sync-toc\">ソース</a>と<a href=\"https://takumon.github.io/react-markdown-sync-toc/\">デモ</a></p>\n<p><img src=\"/1ab28e49a6d92fa569ec65b06994040c/scroll-sync-toc.gif\" alt=\"scroll\"></p>\n<h2 id=\"ポイント\" style=\"position:relative;\"><a href=\"#%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88\" aria-label=\"ポイント permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ポイント</h2>\n<ul>\n<li>マークダウンのHTML化と目次抽出には<a href=\"https://unified.js.org/\">unified</a>を使いました。</li>\n<li>スクロールの度に現在表示中の章をチェックして目次ハイライトを更新します。\n<ul>\n<li>スクロール処理は高負荷なので負荷軽減のために<a href=\"https://lodash.com/docs/4.17.10#throttle\">Lodashのthrottle</a>を使いました。</li>\n<li>表示中の章が切り替わるごとに再描画するためにReactのstateを使いました。</li>\n</ul>\n</li>\n</ul>\n<p>以下で詳細を説明していきます。</p>\n<h2 id=\"unified\" style=\"position:relative;\"><a href=\"#unified\" aria-label=\"unified permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>unified</h2>\n<p>アプリの実装を説明する前にマークダウンの構文解析に使っているunifiedについて説明します。<br>\nunified自体はただのインターフェースです。構文解析ロジックはもっておらず、構文木を使ってテキストを処理するフローを提供します。</p>\n<ol>\n<li><code class=\"language-text\">parse</code>: 文字列をパーサーで構文木に変換</li>\n<li><code class=\"language-text\">run</code>: 必要に応じて構文木をトランスフォーマーで変換</li>\n<li><code class=\"language-text\">stringfy</code>: 構文木をコンパイラーで文字列に出力</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cb7e5397d2a762f5ae7cdebf49be0f81/33a7b/unified-process.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABEklEQVR42m2RUW/CMAyE+///2zQI6wNIY6VilCegTZqmxM5N54HUoVn65Oh8smynmuf5U0RmEQkiMqrqyLwkpWS86vQ+/D7nXHLOb9UwDCdVBYWUErz3uN/vEBFM02QMw4AQgunjONJrUCMiogBYqyvv/Td+Q1W1EADG873URORPnYMAEDaIMX5Ufd+fmqaBc64457BarXA4HECtrmtsNhtst1vsdjt6LO/3e/M86845pd8mZMPr9Yqu68r5fMblckHf95Zvt5utuF6vrRHfrNHPGj1d1xGlbg15w8fKBS9RSrFbchJOwLtR+yf0sXJdhRC+cs6iqpOqpiU559S2bWqaxjgej0lE0quvlBL5sTHG9x8YMxez4DZmFwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/cb7e5397d2a762f5ae7cdebf49be0f81/ba381/unified-process.webp 200w,\n/static/cb7e5397d2a762f5ae7cdebf49be0f81/7f61c/unified-process.webp 400w,\n/static/cb7e5397d2a762f5ae7cdebf49be0f81/d00b9/unified-process.webp 800w,\n/static/cb7e5397d2a762f5ae7cdebf49be0f81/03b0b/unified-process.webp 1119w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/cb7e5397d2a762f5ae7cdebf49be0f81/772e8/unified-process.png 200w,\n/static/cb7e5397d2a762f5ae7cdebf49be0f81/e17e5/unified-process.png 400w,\n/static/cb7e5397d2a762f5ae7cdebf49be0f81/5a190/unified-process.png 800w,\n/static/cb7e5397d2a762f5ae7cdebf49be0f81/33a7b/unified-process.png 1119w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/cb7e5397d2a762f5ae7cdebf49be0f81/5a190/unified-process.png\"\n            alt=\"unifiedの処理の流れ\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"ライブラリ群\" style=\"position:relative;\"><a href=\"#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E7%BE%A4\" aria-label=\"ライブラリ群 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ライブラリ群</h3>\n<p>unifiedが提供するインターフェースの実装（プロセッサー）は、マークダウン用、HTML用、テキスト用の3種類があります。\nプロセッサーごとに、構文定義、パーサー、コンパイラーが用意されています。\n構文定義の方法は3種類の間で統一されており、マークダウンからHTMLなど相互変換が可能です。</p>\n<table>\n<thead>\n<tr>\n<th>解析対象</th>\n<th>プロセッサー</th>\n<th>構文定義</th>\n<th>パーサー</th>\n<th>コンパイラー</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>マークダウン</td>\n<td><a href=\"https://github.com/remarkjs/remark\">remark</a></td>\n<td><a href=\"https://github.com/syntax-tree/mdast\">mdast</a></td>\n<td><a href=\"https://github.com/remarkjs/remark/tree/master/packages/remark-parse\">remark-parse</a></td>\n<td><a href=\"https://github.com/remarkjs/remark/tree/master/packages/remark-stringify\">remark-stringify</a></td>\n</tr>\n<tr>\n<td>HTML</td>\n<td><a href=\"https://github.com/rehypejs/rehype\">rehype</a></td>\n<td><a href=\"https://github.com/syntax-tree/hast\">hast</a></td>\n<td><a href=\"https://github.com/rehypejs/rehype/tree/master/packages/rehype-parse\">rehype-parse</a></td>\n<td><a href=\"https://github.com/rehypejs/rehype/tree/master/packages/rehype-stringify\">rehype-stringify</a></td>\n</tr>\n<tr>\n<td>テキスト</td>\n<td><a href=\"https://github.com/retextjs/retext\">retext</a></td>\n<td><a href=\"https://github.com/syntax-tree/nlcst\">nlcst</a></td>\n<td><a href=\"https://github.com/retextjs/retext/tree/master/packages/retext-latin\">retext-latin</a></td>\n<td><a href=\"https://github.com/retextjs/retext/tree/master/packages/retext-stringify\">retext-stringfy</a></td>\n</tr>\n</tbody>\n</table>\n<p>ライブラリごとにプラグインが山ほどあって、例えばHMTLをミニファイしたり、マークダウンをリントしたり、文章中の<code class=\"language-text\">a</code>と<code class=\"language-text\">an</code>を識別したり、いろんなことができます。\n汎用的なAPIで独自ロジック実装できる! といった拡張性の高さもポイントです。</p>\n<h3 id=\"使い方\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-label=\"使い方 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h3>\n<p>unifiedがパイプラインになっていて必要なライブラリをメソッドチェーンで順番に設定していきます。\nパーサーとコンパイラーは1個つずつ、トランスフォーマーは任意の個数を指定してください。\nパーサーとコンパイラー未指定だと実行時エラーになるので気をつけましょう。</p>\n<div class=\"gatsby-code-title\">実装例</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> unified <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'unified'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> markdown <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'remark-parse'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> remark2rehype <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'remark-rehype'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> doc <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rehype-document'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> format <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rehype-format'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> html <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rehype-stringify'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> report <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vfile-reporter'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">unified</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>markdown<span class=\"token punctuation\">)</span>      <span class=\"token comment\">// パーサー（マークダウン文字列を構文木に変換）</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>remark2rehype<span class=\"token punctuation\">)</span> <span class=\"token comment\">// トランスフォーマー（マークダウンからHTMLに変換）</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">)</span>           <span class=\"token comment\">// トランスフォーマー（HTMLタグなどでラップ）</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">)</span>        <span class=\"token comment\">// トランスフォーマー（HTMLをフォーマット）</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span>          <span class=\"token comment\">// コンパイラー（rehypeの構文木を文字列に変換）</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">process</span><span class=\"token punctuation\">(</span><span class=\"token string\">'# Hello world!'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> file</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token function\">report</span><span class=\"token punctuation\">(</span>err <span class=\"token operator\">||</span> file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">String</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-code-title\">実行結果</div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">no issues found\n&lt;!DOCTYPE html>\n&lt;html lang=\"en\">\n  &lt;head>\n    &lt;meta charset=\"utf-8\">\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  &lt;/head>\n  &lt;body>\n    &lt;h1>Hello world!&lt;/h1>\n  &lt;/body>\n&lt;/html></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"unified採用の経緯\" style=\"position:relative;\"><a href=\"#unified%E6%8E%A1%E7%94%A8%E3%81%AE%E7%B5%8C%E7%B7%AF\" aria-label=\"unified採用の経緯 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>unified採用の経緯</h3>\n<p>このブログ(Gatsby製)は<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-transformer-remark\">gatsby-trasform-remark</a>というプラグインでマークダウン情報を取得しています。ただ目次情報についてはHTML化した目次しか取得できません。\nQiitaっぽい目次作成には少々難ありです。<br>\nそんなこんなで悩んでいたところ<a href=\"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-transformer-remark/src/extend-node-type.js#L20\">プラグインのソース</a>を見てみたらマークダウン文字列解析にunifiedを使っていることに気づきました。\n幸いプラグインで生のマークダウン文字列を取得できたので、unidiedで目次情報を抽出して実現できそうだと考え、採用に至りました。</p>\n<h2 id=\"実装\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-label=\"実装 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h2>\n<p>ポイントを載せていきます。詳細は<a href=\"https://github.com/Takumon/react-markdown-sync-toc\">ソースコード</a>を見てください。</p>\n<h3 id=\"マークダウンをhmtl化する\" style=\"position:relative;\"><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E3%82%92hmtl%E5%8C%96%E3%81%99%E3%82%8B\" aria-label=\"マークダウンをhmtl化する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>マークダウンをHMTL化する</h3>\n<p>マークダウン文字列を読み込んでHTML文字列に変換します。\n現在画面に表示中の章を判定するために<a href=\"https://github.com/remarkjs/remark-slug\">remark-slug</a>を使って章にidを付与しています。\nちなみにこの<a href=\"https://github.com/remarkjs/remark-slug\">remark-slug</a>は<a href=\"https://github.com/syntax-tree/mdast-util-to-string\">mdast-util-to-string</a>と<a href=\"https://github.com/Flet/github-slugger\">github-slugger</a>を使ってidを付与しています。<br></p>\n<p><em>※実際はReactコンポーネントですが簡単のためソースコードを一部省略しています。</em></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> unified <span class=\"token keyword\">from</span> <span class=\"token string\">'unified'</span>\n<span class=\"token keyword\">import</span> markdown <span class=\"token keyword\">from</span> <span class=\"token string\">'remark-parse'</span>       <span class=\"token comment\">// パーサー(文字列をremarkの構文木に変換)</span>\n<span class=\"token keyword\">import</span> slug <span class=\"token keyword\">from</span> <span class=\"token string\">'remark-slug'</span>            <span class=\"token comment\">// トランスフォーマー(章にidをつける)</span>\n<span class=\"token keyword\">import</span> remark2rehype <span class=\"token keyword\">from</span> <span class=\"token string\">'remark-rehype'</span> <span class=\"token comment\">// トランスフォーマー(マークダウンからHTMLに変換)</span>\n<span class=\"token keyword\">import</span> html <span class=\"token keyword\">from</span> <span class=\"token string\">'rehype-stringify'</span>       <span class=\"token comment\">// コンパイラー(HTML構文木を文字列に変換)</span>\n\n<span class=\"token keyword\">const</span> rawMarkdownBody <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">## なにこれ\nReactでMarkdownファイルを読み込んで表示するアプリ。\\n\n目次も表示します。特徴としては目次においてスクロールに応じて現在表示中のセクションがハイライトされます。\n\n## 大セクション その1</span><span class=\"token template-punctuation string\">`</span></span>\n･\n･\n･\n`<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> contents <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span>\n  <span class=\"token function\">unified</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>markdown<span class=\"token punctuation\">)</span>        <span class=\"token comment\">// パーサー(文字列をremarkの構文木に変換)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>slug<span class=\"token punctuation\">)</span>            <span class=\"token comment\">// トランスフォーマー(章にidをつける)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>remark2rehype<span class=\"token punctuation\">)</span>   <span class=\"token comment\">// トランスフォーマー(マークダウンからHTMLに変換)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span>            <span class=\"token comment\">// コンパイラー(HTML構文木を文字列に変換)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">processSync</span><span class=\"token punctuation\">(</span>rawMarkdownBody<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n<div class=\"gatsby-code-title\">変換の流れ</div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">マークダウン文字列\n│\n│ ←　remark-parse(パーサー)\n↓\nmdast構文木\n│\n│ ←　remark-slug(トランスフォーマー)\n↓\n章にidをつけたmdast構文木\n│\n│ ← remark-rehype(トランスフォーマー)\n↓\nhast構文木\n│\n│ ← rehype-stringify(コンパイラー)\n↓\nHTML文字列</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"マークダウンから目次情報を抽出する\" style=\"position:relative;\"><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E3%81%8B%E3%82%89%E7%9B%AE%E6%AC%A1%E6%83%85%E5%A0%B1%E3%82%92%E6%8A%BD%E5%87%BA%E3%81%99%E3%82%8B\" aria-label=\"マークダウンから目次情報を抽出する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>マークダウンから目次情報を抽出する</h3>\n<p>remarkのparseメソッドを使うと簡単にマークダウン構文木を取得できます。\nそして取得した構文木から独自ロジックで目次情報を抽出します。\n具体的には構文木を再帰的に捜査できるプラグイン<a href=\"https://github.com/syntax-tree/unist-util-visit\">unist-util-visit</a>を使って目次情報を抽出しました。<br>\nid付与のロジックはマークダウン生成時のロジック(remark-slugのロジック）とあわせています。<br></p>\n<p><em>※実際はReactコンポーネントですが簡単のためソースコードを一部省略しています。</em></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> remark <span class=\"token keyword\">from</span> <span class=\"token string\">'remark'</span>\n<span class=\"token keyword\">import</span> visit <span class=\"token keyword\">from</span> <span class=\"token string\">'unist-util-visit'</span>\n<span class=\"token keyword\">import</span> mdastToString <span class=\"token keyword\">from</span> <span class=\"token string\">'mdast-util-to-string'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> GithubSlugger <span class=\"token keyword\">from</span> <span class=\"token string\">'github-slugger'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> githubSlugger <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GithubSlugger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// マークダウン文字列から目次情報を抽出する</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">_extractToc</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">rawMarkdownBody</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  githubSlugger<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> ast <span class=\"token operator\">=</span> <span class=\"token function\">remark</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>rawMarkdownBody<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">visit</span><span class=\"token punctuation\">(</span>ast<span class=\"token punctuation\">,</span> <span class=\"token string\">'heading'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">child</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> child<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> githubSlugger<span class=\"token punctuation\">.</span><span class=\"token function\">slug</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">||</span> <span class=\"token function\">mdastToString</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> depth <span class=\"token operator\">=</span> child<span class=\"token punctuation\">.</span>depth</span><span class=\"gatsby-highlight-code-line\">    result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      value<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      id<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      depth</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token keyword\">return</span> result\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>この後さらに目次情報を加工していきますが説明が長くなるので省略します。詳細は<a href=\"https://github.com/Takumon/react-markdown-sync-toc/blob/master/src/scroll-sync-toc.js#L87-L169\">ソースコード</a>をご覧ください。</p>\n<h3 id=\"スクロール毎に表示中の章を判定する\" style=\"position:relative;\"><a href=\"#%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E6%AF%8E%E3%81%AB%E8%A1%A8%E7%A4%BA%E4%B8%AD%E3%81%AE%E7%AB%A0%E3%82%92%E5%88%A4%E5%AE%9A%E3%81%99%E3%82%8B\" aria-label=\"スクロール毎に表示中の章を判定する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>スクロール毎に表示中の章を判定する</h3>\n<p>Reactのコンポーネントで実装します。\nスクロールイベントは<code class=\"language-text\">componentDidMount</code>で購読を開始し<code class=\"language-text\">componentWillUnmount</code>で破棄します。<br>\n<strong>スクロール処理は高負荷なので<a href=\"https://lodash.com/docs/4.17.10#throttle\">Lodashのthrottle</a>で100ミリ秒ごとに間引いています。</strong>\n現在表示中の章の情報はsetStateでstateに格納しています。これにより表示中の章が切り替わった時にReactが再描画してくれます。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> throttle <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Toc <span class=\"token keyword\">from</span> <span class=\"token string\">'./toc'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> githubSlugger <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GithubSlugger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ScrollSyncToc</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> context</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>toc <span class=\"token operator\">=</span> <span class=\"token function\">_getToc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>rawMarkdownBody<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">activeItemIds</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">itemTopOffsets</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>calculateItemTopOffsets <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">calculateItemTopOffsets</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleScroll <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleScroll</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 負荷軽減のため間引く</span></span>  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">calculateItemTopOffsets</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">scroll</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleScroll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">scroll</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleScroll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">calculateItemTopOffsets</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">itemTopOffsets</span><span class=\"token operator\">:</span> <span class=\"token function\">_getElementTopOffsetsById</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>toc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">handleScroll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> itemTopOffsets <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> itemTopOffsets<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">current<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> next <span class=\"token operator\">=</span> itemTopOffsets<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// 自章よりもスクロールしている</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// かつ 次章まではスクロールしていない 場合は</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// 自章が表示されているとみなす</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> next</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">?</span> window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">>=</span> current<span class=\"token punctuation\">.</span>offsetTop <span class=\"token operator\">&amp;&amp;</span></span><span class=\"gatsby-highlight-code-line\">            window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">&lt;</span> next<span class=\"token punctuation\">.</span>offsetTop</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">:</span> window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">>=</span> current<span class=\"token punctuation\">.</span>offsetTop<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// Qiitaっぽく自章とあわせて親章をハイライトさせたいので</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// itemTopOffsetsでは親章の参照も持たせておき</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// ここでactiveItemIdsに格納しています。</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> activeItemIds <span class=\"token operator\">=</span></span><span class=\"gatsby-highlight-code-line\">      item</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">?</span> item<span class=\"token punctuation\">.</span>parents</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>item<span class=\"token punctuation\">.</span>parents<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">i</span> <span class=\"token operator\">=></span> i<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// setStateを介してstateを変更することで</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// 表示中の章に変更があった場合にのみ再描画が走ります。</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>activeItemIds<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> activeItemIds <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>Toc activeItemIds<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>activeItemIds<span class=\"token punctuation\">}</span> toc<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>toc<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n<p>実際の目次コンポーネントでは、\n<code class=\"language-text\">toc</code>(目次情報)と<code class=\"language-text\">activeItemIds</code>(現在表示中の章)をインプットに目次を描画します。\nこのとき表示中の章には<code class=\"language-text\">active</code>クラスをつけて描画しています。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> HashLink <span class=\"token keyword\">as</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-hash-link'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Toc</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> toc<span class=\"token punctuation\">,</span> activeItemIds <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> items <span class=\"token operator\">=</span> toc<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>li style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">textAlign</span><span class=\"token operator\">:</span> <span class=\"token string\">'left'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">marginLeft</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>depth <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">24</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">listStyle</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Link\n            key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span>\n            to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">#</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">            className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>activeItemIds<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token string\">'active'</span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span></span>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>ul style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'12px'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">'#eee'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>items<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Toc<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>Qiitaっぽい目次を作れたことよりも<a href=\"https://unified.js.org/\">unified</a>の便利さに驚きました。\nこれを使えば解析ツールなども簡単に実装できそうなので踏み込んで調べてみたいです🍅</p>","excerpt":"なにこれ 自分のブログの目次をQiitaっぽくしたい...現在表示中の章をハイライトする目次を作りたい...ということで作りました。\nマークダウンをHTMLに変換するのにunifiedという構文解析ライブラリを使っています。\nメモ用にReact…","frontmatter":{"slug":"/2018/10/28/","title":"unifiedでMarkdownをHTMLに変換 & ReactでQiitaっぽい目次を作る","date":"2018-10-28T21:00:00.000Z","tags":["React","unified","remark","rehype"],"keywords":["React"],"thumbnail":"thumbnail/2018/qiita-like-top-of-content-with-unified.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><a href=\"https://www.gatsbyjs.org/\">Gatsby</a>でブログを作っていて、機能拡張とともにテンプレートが肥大化してきたので、下記図の青枠単位でコンポーネント分割しました。\nあわせてCSS Moduleも採用しました。そのときのメモです。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/647324ff6c538d8dafb2c5363a8cad81/76823/page.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEN0lEQVR42nXR+08UVxjG8f3nTGwaW6+ptY2NrZpSbWRTK7RWm9hWsVwEXVg0Sr3AKkgVw8UbskAXCpbhsotigNIqKygMyO7cZ84532a32BptT/LmnXd++MzzngldWns+1bXu1Mrt9dWL3Zsr9etbjuvX3/tBv7e9VL+1o1xv/rhSv10Q0Tv3VeudX0T0zq8i+r1D1XrXkWo9XhLR4+URPX4ystAdjVj1ZfW9oZ41J9JsLMTfUKgerf+OK+uOceGdEuo3lNCx9Vumdu/E3b8PvgmjjoShJAwVYaguhHNhuBSGpkLJnS/piVQlQ3fPTc2OXHzIeCwlI98/VuHP0mrvvkW1Z++cOrT/iWosGVf1x1Kq/nhK1f+YUg3lSRWrTKlYVUo1nEqpWHVSxaJJcbVuitqa6bGQQKRnMxAfR13rlUzPmcwtu2Rc0G14asC8CfMGPDPhzyWouQ6T84q5LDxdgdll5JILrQmZDIGfnvwDxlK6utIRYNg22cwyRmYZ37MIPAvLNjFMA9+3MU2by+0eRjYLwgGCXEmAXk3kQJGenoWJqRV19Y7AdR2y2SyGYWDbOcDCcgMMR+AEkozhE+uQrGQchAgQQiKkXAXl3+DkE5h+bKnGmz6LC8+ZnU2TTqcRQvDyqNXuetDQLljJWPm3Sink6+DULIxPrqimWwLHya1oYZoGlmXlU/q+jx8EBIFP1vRpaA94kbHwXCf/0TfAyccwOZNRTbcFppHFtB1s18dyPIIgyKfglYSxjlxCO7/yfybM3WFiWKrmTrAdm4Wsh+krfAkvrZfdyYOSFxkbz/NW75B/QSlEOjcsr6Dup8CxTRzPxBdu/g8q5SOVQORFD8f1iHWA5/PqyYM9QzIZEqtgLsRAEhIjiqEHksExwWBSMpiS9I0pEqOKgWRAYlhwsRVS0zAxAw9n4MHvyJl5uJl4Dfx1DLoGoX9EkRjmn8rNfcOK/lGI34f+UUXWhOUMvMjmu3QDMK3XwJGH4JgmgbsManUn38c1dHw3kxvwHIfUhEDx5spSvgEqHDNAeLkSKCHBc3GMDJ6ZBenhmD5jE/L/wcVnTlpfUCwtuOqXAY873R7dfR7xhEt7j6A5Di3dcC1O/vlGl6B/yENf8ni+4LGw6PF80ZWGBbruJENNmy4+GdxQzv0tZcHQtjIx8EGZGPioTAx+UiYqtzWJiu0RcXLXBVH36VlxvuC8iO65IrSj5WKkrFSMVJWK0ZpSMXq21J+InaD5VMNIqO/dmjRbv4b3i5T6sBh2FMOuYigoYmJXBdruowyHS5k5UMp0cQXTh8tRVUVQWwx1xdBQBM0HJHcP0huNJkOX19bd/HnN6bEba2uHWt46rbW8HdVa1kW1lvVRrWVTjXZh42mtfnO11rztjNa4/YzWurNGayuIaq2fR7W2cFRr2x/V2g5Gf2s7XPug4dBPjX8B4hcgfHQU8pAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/647324ff6c538d8dafb2c5363a8cad81/ba381/page.webp 200w,\n/static/647324ff6c538d8dafb2c5363a8cad81/7f61c/page.webp 400w,\n/static/647324ff6c538d8dafb2c5363a8cad81/d00b9/page.webp 800w,\n/static/647324ff6c538d8dafb2c5363a8cad81/6a022/page.webp 1038w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/647324ff6c538d8dafb2c5363a8cad81/772e8/page.png 200w,\n/static/647324ff6c538d8dafb2c5363a8cad81/e17e5/page.png 400w,\n/static/647324ff6c538d8dafb2c5363a8cad81/5a190/page.png 800w,\n/static/647324ff6c538d8dafb2c5363a8cad81/76823/page.png 1038w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/647324ff6c538d8dafb2c5363a8cad81/5a190/page.png\"\n            alt=\"分割した結果\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"cssをコンポーネントスコープにする方法\" style=\"position:relative;\"><a href=\"#css%E3%82%92%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%97%E3%81%AB%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\" aria-label=\"cssをコンポーネントスコープにする方法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSSをコンポーネントスコープにする方法</h2>\n<p>コンポーネントを分割する際、CSSもあわせて分割が必要です。その場合、グローバルスコープだとスタイルがコンポーネントに限定されなくなってしまうので、コンポーネントスコープにする必要があります。Gatsbyはコンポーネントスコープの実現方法が3つ用意されています。</p>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/docs/css-modules/\">CSS Modules</a></li>\n<li><a href=\"https://www.gatsbyjs.org/docs/glamor/\">Using CSS-in-JS library Glamor</a></li>\n<li><a href=\"https://www.gatsbyjs.org/docs/styled-components/\">Using CSS-in-JS library styled components</a></li>\n</ul>\n<p>僕はスタイルをHTMLやJSの中に書くのを躊躇してしまう人（古い時代の人）なので、スタイルをCSSファイルに書けるCSS Moduleを採用しました。\n流行はStyled Componentsなんでしょうか?</p>\n<h3 id=\"css-module\" style=\"position:relative;\"><a href=\"#css-module\" aria-label=\"css module permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS Module</h3>\n<p>CSSファイルのクラス名、アニメーション名をローカルスコープで使えるようにする仕組みです。\nCSSファイルは通常のCSSと同じ文法で書くことができて、ICSSまたはInteroperable CSSと呼ばれる形式にコンパイルすることでローカルスコープを実現します。\nJavaScriptファイルでCSS Moduleを使う場合、ローカル変数名をつけてインポートし、DOMのクラス名には<code class=\"language-text\">変数名.クラス名</code>のように指定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"./style.css\"</span><span class=\"token punctuation\">;</span>\n\nelement<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'&lt;div class=\"'</span> <span class=\"token operator\">+</span> styles<span class=\"token punctuation\">.</span>className <span class=\"token operator\">+</span> <span class=\"token string\">'\">'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>参考：<a href=\"https://github.com/css-modules/css-modules\">公式ページ</a></p>\n<h3 id=\"gatsbyでcss-module\" style=\"position:relative;\"><a href=\"#gatsby%E3%81%A7css-module\" aria-label=\"gatsbyでcss module permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GatsbyでCSS Module</h3>\n<p>CSSファイル名を<code class=\"language-text\">XXX.module.css</code>のようにしてコンポーネントでインポートするだけでCSS Moduleが使えます。<br />\n<br /></p>\n<p>例えば下記のようなCSSがあるとしたら</p>\n<div class=\"gatsby-code-title\">src/components/container.module.css</div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">.container</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 3rem auto<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n<p>JavaScriptでこのように読み込みます。</p>\n<div class=\"gatsby-code-title\">src/components/container.js</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"./container.module.css\"</span></span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"コンポーネント分割\" style=\"position:relative;\"><a href=\"#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E5%88%86%E5%89%B2\" aria-label=\"コンポーネント分割 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>コンポーネント分割</h2>\n<p>CSSがコンポーネントスコープにできたところで、ようやくコンポーネントを分割できるようになります。\n純粋にReactの作法に従って分割します(Gatsbyは特に関係ありません)。<br>\nここでは、テンプレートから記事部分を分割するケースについて説明しましょう。<br></p>\n<p><strong>テンプレート(分割前)</strong></p>\n<div class=\"gatsby-code-title\">src/templates/blog-post.js</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'blog-post.module.css'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BlogPostTemplate</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>markdownRemark\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>blogTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Takumon Blog<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>article<span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>postTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>postContent<span class=\"token punctuation\">}</span> dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span></span>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> BlogPostTemplate\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"></span>\n<span class=\"token string\">  query($slug: String!) {</span>\n<span class=\"token string\">    markdownRemark(fields: { slug: { eq: $slug } }) {</span>\n<span class=\"token string\">      html</span>\n<span class=\"token string\">      frontmatter {</span>\n<span class=\"token string\">        title</span>\n<span class=\"token string\">      }</span>\n<span class=\"token string\">    }</span>\n<span class=\"token string\">  }</span>\n<span class=\"token string\"></span><span class=\"token template-punctuation string\">`</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-code-title\">src/templates/blog-post.module.css</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token punctuation\">.</span>blogTitle <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> red\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">.</span>postTitle <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> blue<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">.</span>postContent <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> green<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<p>分割後は下記のようになります。\nなお分割したコンポーネントに記事情報を渡すための属性を定義します。ここではpostという属性名にしています。<br>\nテンプレートにて記事コンポーネントのpost属性に記事情報を指定すると、\n記事コンポーネントでは<code class=\"language-text\">this.props.post</code>で受け取れるようになります。</p>\n<p><strong>テンプレート(分割後)</strong></p>\n<div class=\"gatsby-code-title\">src/templates/blog-post.js</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'blog-post.module.css'</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> Post <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/post'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BlogPostTemplate</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>markdownRemark\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>blogTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Takumon Blog<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>Post post<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> BlogPostTemplate\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"></span>\n<span class=\"token string\">  query($slug: String!) {</span>\n<span class=\"token string\">    markdownRemark(fields: { slug: { eq: $slug } }) {</span>\n<span class=\"token string\">      html</span>\n<span class=\"token string\">      frontmatter {</span>\n<span class=\"token string\">        title</span>\n<span class=\"token string\">      }</span>\n<span class=\"token string\">    }</span>\n<span class=\"token string\">  }</span>\n<span class=\"token string\"></span><span class=\"token template-punctuation string\">`</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-code-title\">src/templates/blog-post.module.css</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token punctuation\">.</span>blogTitle <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> red\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<br>\n<p><strong>記事コンポーネント</strong></p>\n<div class=\"gatsby-code-title\">src/components/post.js</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'post.module.css'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Post</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">;</span></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>article<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>postTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>postContent<span class=\"token punctuation\">}</span> dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Post</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-code-title\">src/components/post.module.css</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token punctuation\">.</span>postTitle <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> blue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">.</span>postContent <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> green<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<p>なお分割したことにより<code class=\"language-text\">src/components/post.module.css</code>が「記事に対するスタイル」ということは自明になるので、クラス名をより簡潔にできます。</p>\n<p><strong>記事コンポーネント(CSSリファクタリング後)</strong></p>\n<div class=\"gatsby-code-title\">src/components/post.js</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'post.module.css'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Post</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>article<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">}</span> dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Post</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-code-title\">src/components/post.module.css</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">.</span>title <span class=\"token punctuation\">{</span></span>  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> blue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">.</span>content <span class=\"token punctuation\">{</span></span>  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> green<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>以上の手順を繰り返すことで、コンポーネントを細かく分割できます。</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>コンポーネントを細かく分割することで、再利用性が向上し、画面レイアウトを組みやすくなりました。\nReactのWebアプリケーションの場合は、Reduxのステート用コールバック関数の受け渡しなどで複雑になりますが、\nGatsbyのような静的Webサイトの場合、単純な分割だけで事足りるかなーと。\n分割設計については<a href=\"https://www.amazon.co.jp/Atomic-Design-%E5%A0%85%E7%89%A2%E3%81%A7%E4%BD%BF%E3%81%84%E3%82%84%E3%81%99%E3%81%84UI%E3%82%92%E5%8A%B9%E7%8E%87%E8%89%AF%E3%81%8F%E8%A8%AD%E8%A8%88%E3%81%99%E3%82%8B-%E4%BA%94%E8%97%A4-%E4%BD%91%E5%85%B8/dp/477419705X\">Atomic Design ~堅牢で使いやすいUIを効率良く設計する</a>を参考にしたいところです。まだ読んでない...🍅</p>","excerpt":"なにこれ Gatsbyでブログを作っていて、機能拡張とともにテンプレートが肥大化してきたので、下記図の青枠単位でコンポーネント分割しました。\nあわせてCSS Moduleも採用しました。そのときのメモです。  CSS…","frontmatter":{"slug":"/2018/10/14/","title":"Gatsbyにおけるコンポーネント分割とCSS Module","date":"2018-10-14T07:00:00.000Z","tags":["Gatsby","React","CSSModules"],"keywords":["Gatsby"],"thumbnail":"thumbnail/2018/gatsby-css-modules.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><strong>ググった時に自分のブログ(React製)でパンくずを表示させたい</strong>\nということでJSON-LD対応しました。<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 664px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bccf70f829cca8762bbe62446d09f68a/31493/googlesearchresult.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJUlEQVR42lWOy2oVQRRF74/nD/weIeDACEIGMQPR0b0iJunqut116lTXq+vRdbYkIuJg7Q1rtE455UdvcjQq2OQKB8q8Tp6N8kxz5BYrbyZzCpXtmjnHxpvd2ZmdzTVxTo3HGHQco/be707PFC4fLxa33yb59NPg8y+Hu7PB++8TvqodzxHYCgABjv7nexW0Kqj7wNEFAMbr9N4fT1tIZxMSZsvj/PQiP6ZZlLHyYliYSd49bHJzH0XPSiY1ybKuQpbEspWck7jNib5ej1IKWmtfTjnny54ziEiWZQFb+0aK8dUheIfFRazGQs0Km/eIKSGEgDHewnAcx79C7/39PGta1nVmZu2c00RWE5G2lrUhq2vZdWtN11r/o5TyF1Vr9THGD78BLm54dlKYqIIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/bccf70f829cca8762bbe62446d09f68a/ba381/googlesearchresult.webp 200w,\n/static/bccf70f829cca8762bbe62446d09f68a/7f61c/googlesearchresult.webp 400w,\n/static/bccf70f829cca8762bbe62446d09f68a/c2945/googlesearchresult.webp 664w\"\n              sizes=\"(max-width: 664px) 100vw, 664px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/bccf70f829cca8762bbe62446d09f68a/772e8/googlesearchresult.png 200w,\n/static/bccf70f829cca8762bbe62446d09f68a/e17e5/googlesearchresult.png 400w,\n/static/bccf70f829cca8762bbe62446d09f68a/31493/googlesearchresult.png 664w\"\n            sizes=\"(max-width: 664px) 100vw, 664px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/bccf70f829cca8762bbe62446d09f68a/31493/googlesearchresult.png\"\n            alt=\"Googole検索結果パンくずリスト\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>JSON+LDについてググると色々良い記事がでてきて一通り学ぶことができました。\nここでは、それら記事の紹介を兼ねて、構造化データの説明からパンくず実現方法についてまでを記します。</p>\n<h2 id=\"構造化データについて\" style=\"position:relative;\"><a href=\"#%E6%A7%8B%E9%80%A0%E5%8C%96%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\" aria-label=\"構造化データについて permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>構造化データについて</h2>\n<p>グーグルなどの検索エンジンは、Webサイトに構造化マークアップが定義されているとパンくずやイメージ画像を表示してくれます。\n構造化マークアップというのはschema.orgという大手検索エンジン(Google、Yahoo、Bing)で定めた規格にしたがったマークアップのことです。検索時だけでなく、検索エンジンがクロールするときにも、Webサイトのメタ情報としてマークアップを認識させることができ、「検索に優しいWebサイト」を作れます。</p>\n<p>この構造化マークアップを実現するにはRDFa、Microdata、JSON-LDの3種類があります。\n今回は、(1)JSON-LDはGoogleが推奨していることと、(2)JSON書きやすい、という理由からJSON+LDを使いました。</p>\n<p>なお3種の違いについては<a href=\"https://www.suzukikenichi.com/blog/difference-between-schemaorg-microdata-and-rdfa/\">[構造化データ初級者向け] schema.orgとMicrodata、RDFaって何が違うの？</a>に詳しく書かれていました。</p>\n<h2 id=\"jsonldについて\" style=\"position:relative;\"><a href=\"#jsonld%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\" aria-label=\"jsonldについて permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON+LDについて</h2>\n<p>てっとり早く理解したい時は下記サイトがおすすめです。</p>\n<ul>\n<li><a href=\"https://qiita.com/narumana/items/b66969b80cce848b2ddf\">Google推奨「JSON-LD」で構造化マークアップ | Qiita</a>\n<ul>\n<li>Qiitaの記事です。ユースケース別に、簡単な設定例とググった時の実際のイメージが載っていてわかりやすいです。</li>\n</ul>\n</li>\n<li><a href=\"https://webnooboegaki.com/others/jsonld-schemaorg\">構造化データをまとめてみた(JSON-LD + schema.org)</a>\n<ul>\n<li>こちらもユースケース別ですが、上記Qiita記事よりも実用レベルの設定例が載っていて参考になります。</li>\n</ul>\n</li>\n</ul>\n<p>さらに理解を深めたい場合は下記サイトがおすすめです。</p>\n<ul>\n<li><a href=\"https://schema.org\">schema.org</a>\n<ul>\n<li>細かい仕様など、正しい仕様を把握する時に参考にしました。ググって調べたブログ記事などには古いバージョンだったり間違った情報が載ってたりするので、最終的にはココで確認してました。</li>\n</ul>\n</li>\n<li><a href=\"https://developers.google.com/search/docs/guides/\">Google Search</a>\n<ul>\n<li>このサイトの<code class=\"language-text\">左メニュー > Structured data > Future guies</code>にグーグル検索の表示結果の仕様が載っています。ただコレに従ったとしても、<strong>必ずしも検索結果でそれ通りに表示されるわけではない</strong>点に注意が必要です。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"構造化テストツール\" style=\"position:relative;\"><a href=\"#%E6%A7%8B%E9%80%A0%E5%8C%96%E3%83%86%E3%82%B9%E3%83%88%E3%83%84%E3%83%BC%E3%83%AB\" aria-label=\"構造化テストツール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>構造化テストツール</h3>\n<p>JSON+LDの概要を把握したら、実際に作ってみるのがイイです。\nその時、便利なのが<a href=\"https://search.google.com/structured-data/testing-tool\">構造化テストツール</a>です。これはGoogleが提供しているWebサイトの構造化データを検証するためのツールです。\n自分の作った構造化データが正しいかは、ここを見ながら作成しました。</p>\n<h4 id=\"使い方\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-label=\"使い方 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h4>\n<p>設定を貼り付けるか、URLを指定するかして、<code class=\"language-text\">テストを実行</code>ボタンをクリックすると\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/07a669c1046dc6574fba6d96e4d9061e/5caea/testtool1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 77.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC90lEQVR42nVT30/TUBTeX+ULipAg/h++EBKNxtFtZetty1p40hAUE31xKmiEBzEEjbAlaqL4W1GjDwbCAhvrftH2bqvtuvuZ244fKjT5cr6ec77vnp70Rgb7ThQuXDxv35i+sTs1NWVeu3bdvHnzlnnx0iXzzOCg2d/fbw4MDAScY5DHMyHnsbe31zzZc3K3/1QP7TvdU4ysvn5Dv3z6hK2tbbZTMlAoFFDcKSHgxSK2tosBr9Xr/6NWw4+fP/Hh3Vv24uVHPFp+14yUS1VaKhSQz+dZySihUinDMAyUy2WYpgnbtmFZVgjTDNHlvE5pA5ZZZ7k1E5lcvRkRBIESIkOSJJZKpUAIgUQICJF4DjzH43EQRRGJRIIpJAkyKjQj0WiUdoWMF2OxGEZGBAgxAYIgIBqNInr5chiPANdwbTIlQRxNNiPxeJym0+lgwsnJSTxeWMDzp4vIPlnEk6Ul5HI5ZLNZZLO5QzyLlZWVIE5PTwda7qGq6oGhmEiwu3fvoFKtIfPdxvKGBZs2wDoMRz2Mhfn5+Xk+ZWCoKMqBYVSU2L37D8KmzQ6yJaDuuCjXa6BOCy3HgeM48DwPvu+j3W4HvXNzc38bxuJxqqsyzl59xs49+AzDaqFZNdCoGKC1Kio7FVg1G+gwuG4HjtMO0Gp58Dz2v+HehIIoscxMOGHHdbGw4eLK1w6WN+p4+OEVZt6vomxbwQo8rx3gyAkPdhhn92dnugvqIN8CfjUBw3Gwml/Hq811NNzf+/vb2+HxhqLIbmcyMK0W1jdLMArb8BoWWpSi89sFc11QmwY/dbW2i+1iFcWdXczOzmJ09B9DVVUhyzLjUdd1aJqGtKZB41zXkdZ0pPXwXe9C00KMjY3ta/cMTZ5QFKVNCPElSfIJ4SB+KpXyFUXxh4eH/aGhoYDz3H6PFPZxrSzL3NiOJJNJOj4+zk9l/GTOD2NiYiK4fhyc/1vvfhHr8uAurxJCvsmy/IUQsnYUFEVZU1V17bh6V/uNEPL2D9gXpx/dwoFjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/static/07a669c1046dc6574fba6d96e4d9061e/ba381/testtool1.webp 200w,\n/static/07a669c1046dc6574fba6d96e4d9061e/7f61c/testtool1.webp 400w,\n/static/07a669c1046dc6574fba6d96e4d9061e/d00b9/testtool1.webp 800w,\n/static/07a669c1046dc6574fba6d96e4d9061e/ef2bd/testtool1.webp 996w\" sizes=\"(max-width: 800px) 100vw, 800px\" type=\"image/webp\">\n          <source srcset=\"/static/07a669c1046dc6574fba6d96e4d9061e/772e8/testtool1.png 200w,\n/static/07a669c1046dc6574fba6d96e4d9061e/e17e5/testtool1.png 400w,\n/static/07a669c1046dc6574fba6d96e4d9061e/5a190/testtool1.png 800w,\n/static/07a669c1046dc6574fba6d96e4d9061e/5caea/testtool1.png 996w\" sizes=\"(max-width: 800px) 100vw, 800px\" type=\"image/png\">\n          <img class=\"gatsby-resp-image-image\" src=\"/static/07a669c1046dc6574fba6d96e4d9061e/5a190/testtool1.png\" alt=\"構造化テストツール\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n<br></p>\n<p>構造化データの解析結果を画面右半分に表示してくれます。\nプロパティを選択すると対応するJSON+LDの部分がハイライトされるので便利です。\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/96769046ea25037efb7a606ae48f5ba3/8ecb0/testtool2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAADXElEQVR42o1T247jRBDNT/G0c0X8yz4gLV8CAwwSX7G8LUJCs4HszjUzs+PsJJM4njh2fOtux247brcT232QnTACnijpqKvK1um6nO58dfCF/frr16sffziNv/3uhJ+cfM9PT3/ib958w4+Pv+SHh0f86Oi4xeHu/BvN9/39A/7q1V58uL+XHOzvhZ33Z2f88vwcuj5VpmnCMAzMZiYaX9enmOhT6NPpi7+NjTbX/Nfv99HrdtWvv/2JX979UXZEXvBCCPAkVev1Gg2klNhsNqjrGv/HynKteuMK7x6qsuP7HieUwfd85fk+Fo4DykJIWSDLJfI8hxACWZa1fnPZP3M8jhHHscpFCh6xsuN5Hl8sAiymU0UmYzDLBA0ISEAQux6I62G5XCJNUzDGYFs2HMdBFEUvxEmaKM45kiQpO5RSHtk25sOhCiZjxMYU3LawtG1kngMZx23rzQhyKZGmKySrFfJ8O5YdVHOu1+uyQwnhy/kcs9GTsgwDga4jtS1E1hwxpVhxDlXXKKSESGLILEVdlVBKoaqq7UV5rnbE2wrpYgGiT5Q3HsObz5F4LkLXBXMdLJ0F1rmAsypxNqbo6SFuXAk7KZHyGJSxlrAsy2a+ZYdQwhPXAXsaqXD8hHBmgJgmEsYQUwJOCaJU4K1ZY2BH+P12ghHJEaxKRMuwnW1RFGqzadSRNxUS3lTi6LqKggAyyyA5RxrHyKMIKASGUY1eoIB6g5AEbbuNNW3ufLWVT7lr2XGw0HXl6Dqen5/hmjN4pomokU9I8d4UWG2qliQMl5DFuvUpoQiCACwMFSEEmRBbwnBhIRgOVKQ/gS0s5DRAQnxkzIdmUtx4ElBbwma7zTIaY4zCsmy4rtsStjMMCOGGHeDz6FnZpgvLYS8IfIaf7zgmy6IlbNprhNyIu62QkvYhMMZUI/JWNlOXLbsDC3eDSXnRH1RXF3fVxfld1bt6qD5ea5X2OK3edm+ry0/DSlVlJYSoZJ5XUsqKc97GRVGUeZ7XUsqi40QrftEf4bZ3oR56l9A+XEI7v8Gn82vcdD9g2L/HveHD43lb1W4f/7U2W9d12XE8/+Pg8fnx+mb40L8daVdXn7X+/ZP28Ghqj8OZdqsZmhMXWrHZaCLLNCHEC7J/xwMhxN1f+dqDTGarf+UAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/static/96769046ea25037efb7a606ae48f5ba3/ba381/testtool2.webp 200w,\n/static/96769046ea25037efb7a606ae48f5ba3/7f61c/testtool2.webp 400w,\n/static/96769046ea25037efb7a606ae48f5ba3/d00b9/testtool2.webp 800w,\n/static/96769046ea25037efb7a606ae48f5ba3/655ae/testtool2.webp 989w\" sizes=\"(max-width: 800px) 100vw, 800px\" type=\"image/webp\">\n          <source srcset=\"/static/96769046ea25037efb7a606ae48f5ba3/772e8/testtool2.png 200w,\n/static/96769046ea25037efb7a606ae48f5ba3/e17e5/testtool2.png 400w,\n/static/96769046ea25037efb7a606ae48f5ba3/5a190/testtool2.png 800w,\n/static/96769046ea25037efb7a606ae48f5ba3/8ecb0/testtool2.png 989w\" sizes=\"(max-width: 800px) 100vw, 800px\" type=\"image/png\">\n          <img class=\"gatsby-resp-image-image\" src=\"/static/96769046ea25037efb7a606ae48f5ba3/5a190/testtool2.png\" alt=\"構造化テストツール検証結果\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n<br></p>\n<p>また、必須プロパティが抜けていたりすると下記のようにエラーで知らせてくれます。\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/39dec17ffd85488b156ba47aff59a31d/5caea/testtool3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 77.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAADcklEQVR42o2Ty27cNhiF5626MdzUsNG3ifssgRugeYYC3XVTtIsURmo3ri2Px2NppNGVulISJYq6UjyF5CLZVsCPn4cEPh6SR5vv33xD3v7wtn7/4/vy3bt37Orqin346QO7vLxkFxcX7OzsjJ2fn6/9tc7XWuaW9dNvT9nJyUn53elJ/eb0JNp8/Pgn/3x7C9t2lO8HcBwXnufDW8auu2rX9dZatftVExLi8XGLT9fX6rc//sLPv16LjRAdbzlHWTLVdR36rkfbdhiGHvM84/980zioG0vhl8+T2IQh4UmaII5jFcUxAkKQ5xRt36NpBJqmAed87UIILJu2bftFM8ZQMqbGjqMuE7EJPY/7pITv+CryXASuA5/EiByCNPCQ5TH4f9A0TWGaFuIoWqELcOmMlaqqazBWiU2WUZ77CQrLUokfgugWMl1HajqgBwNF4GKaRkzThGEYvjgbx3Gdl9OEcRzULOUCF5uMUp67PhJdV7H5CsvMIxLTQHq0UcfRepeLE0rpClz0MEnU7YCq6UCrRg0LUAixSTPKqReDHvaKHi3klr26ywMXBUnQswKzUujaDlVVre76cYKRTyDlgKCa4NFG2Uyi4uLVIQliBGagbJ0g1HWQgw5zb+BomDi87MHb1yMuMSnLEsvbHwqJuxcCzaEwgkId0g5cdGKTpSkPDAfui6V83cTxcYfweQd7b65gsnuGKKs1Hl3bYhrHdayUQhBFCKMECS0Uq9iy/gqkfoZUN1VhHhDdP6A09qhcFzRwQcMYsu8R1SO2foFbI4CVd7CLHv/oHg5xDTcTykkFwpwvwIx7bgXHTFRs+SBWiMz2waMIWVKiogmGacaOCPAsB+Md+KjAhxl1mqOiDFXJVVtyPEXi1WF69OG/7FW4e4FvLNFxwKwDcsNAeTDQVBxO1gFVAZVnwDStx56jEHNEMA+9ghxhFcOSw4zRo6PI3zdTvHuW6e5J5t5Rpq4vqUvkWOby7u5e/n6zk+CVHKpazkrJeZ7lGMdyaho5CTGBFTiWY73hvOFpOqMIcpUThoYkEEvqyxZtPaxOippj5xVA30JJ+fUnbgUgJeZJKigJp57FJoqST7ZdbQMreggPrhY4jmYeQs3WQy10iMbyTJsB7d4TmraPtK2da09Uak/ZpGlGqm2dSnuKuofHoNk+xv3NvyQeh3oHWMGDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/static/39dec17ffd85488b156ba47aff59a31d/ba381/testtool3.webp 200w,\n/static/39dec17ffd85488b156ba47aff59a31d/7f61c/testtool3.webp 400w,\n/static/39dec17ffd85488b156ba47aff59a31d/d00b9/testtool3.webp 800w,\n/static/39dec17ffd85488b156ba47aff59a31d/ef2bd/testtool3.webp 996w\" sizes=\"(max-width: 800px) 100vw, 800px\" type=\"image/webp\">\n          <source srcset=\"/static/39dec17ffd85488b156ba47aff59a31d/772e8/testtool3.png 200w,\n/static/39dec17ffd85488b156ba47aff59a31d/e17e5/testtool3.png 400w,\n/static/39dec17ffd85488b156ba47aff59a31d/5a190/testtool3.png 800w,\n/static/39dec17ffd85488b156ba47aff59a31d/5caea/testtool3.png 996w\" sizes=\"(max-width: 800px) 100vw, 800px\" type=\"image/png\">\n          <img class=\"gatsby-resp-image-image\" src=\"/static/39dec17ffd85488b156ba47aff59a31d/5a190/testtool3.png\" alt=\"構造化テストツール検証結果エラー情報\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n<br></p>\n<h4 id=\"構造化テストツールのプレビュー機能は廃止されている\" style=\"position:relative;\"><a href=\"#%E6%A7%8B%E9%80%A0%E5%8C%96%E3%83%86%E3%82%B9%E3%83%88%E3%83%84%E3%83%BC%E3%83%AB%E3%81%AE%E3%83%97%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E6%A9%9F%E8%83%BD%E3%81%AF%E5%BB%83%E6%AD%A2%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B\" aria-label=\"構造化テストツールのプレビュー機能は廃止されている permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>構造化テストツールのプレビュー機能は廃止されている</h4>\n<p>ググると構造化テストツールのプレビュー機能の情報がでてきますが、\nプレビューと実際のグーグル検索結果が違うなどの問題があって現在のバージョンでは廃止されているみたいです実際のインターネットじゃないと確認できないのはちょっと残念ですね。<br>\n参考：<a href=\"https://www.suzukikenichi.com/blog/rip-rich-snippet-testing-tool/\">旧構造化データテストツールの提供をGoogleが終了、リッチスニペットのプレビューができなくなった</a></p>\n<h3 id=\"reactでjsonld\" style=\"position:relative;\"><a href=\"#react%E3%81%A7jsonld\" aria-label=\"reactでjsonld permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ReactでJSON+LD</h3>\n<p>Reactだと<a href=\"https://github.com/nfl/react-helmet\">React Helmet</a>で簡単に対応でます。\nこんな感じのコンポーネントを作って、どこかで呼び出してあげればいいです。<br>\n下記例は自分のブログ用で、トップページと記事ページ毎に設定を切り替えています。<br>\n<small>※blog-config.jsはブログの設定値を集約したものです</small></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 0\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> Helmet <span class=\"token keyword\">from</span> <span class=\"token string\">'react-helmet'</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> config <span class=\"token keyword\">from</span> <span class=\"token string\">'../config/blog-config.js'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">createJSONLDTag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  isRoot<span class=\"token punctuation\">,</span>      <span class=\"token comment\">// ブログトップページか（記事ページの場合false）</span>\n  title<span class=\"token punctuation\">,</span>       <span class=\"token comment\">// 記事タイトル（記事ページの時のみ指定）</span>\n  description<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 記事概要（記事ページの時のみ指定）</span>\n  postUrl<span class=\"token punctuation\">,</span>     <span class=\"token comment\">// 記事URL（記事ページの時のみ指定)</span>\n  postDate<span class=\"token punctuation\">,</span>    <span class=\"token comment\">// 記事更新日（記事ページの時のみ指定）</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// ブログ管理者（自分）</span>\n  <span class=\"token keyword\">const</span> author <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Person'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogAuthor<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogAuthorDescription<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">image</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'ImageObject'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogAuthorAvatarUrl<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string-property property\">'url'</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogUrl<span class=\"token punctuation\">,</span>\n      <span class=\"token string-property property\">\"sameAs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        config<span class=\"token punctuation\">.</span>blogAuthorFacebookUrl<span class=\"token punctuation\">,</span>\n        config<span class=\"token punctuation\">.</span>blogAuthorTwitterUrl<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'thing'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogAuthor<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">sameas</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogTitle<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogURL<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">image</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'ImageObject'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogImageUrl<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ブログ発行者（自分）</span>\n  <span class=\"token keyword\">const</span> publisher <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Organization'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogAuthor<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogAuthorDescription<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">logo</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'ImageObject'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogAuthorAvatarUrl<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// JSON+LDの設定</span>\n  <span class=\"token keyword\">const</span> jsonLdConfigs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token string-property property\">'@context'</span><span class=\"token operator\">:</span> <span class=\"token string\">'http://schema.org'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'WebSite'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">inLanguage</span><span class=\"token operator\">:</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogUrl<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> title<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">alternateName</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogTitle<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">image</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogImageUrl<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogAuthorDescription<span class=\"token punctuation\">,</span>\n      author<span class=\"token punctuation\">,</span>\n      publisher<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">potentialAction</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">\"SearchAction\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>config<span class=\"token punctuation\">.</span>blogUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/search?q={q}</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">'query-input'</span><span class=\"token operator\">:</span> <span class=\"token string\">'required name=q'</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isRoot<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// パンくずリスト表示用の設定</span></span><span class=\"gatsby-highlight-code-line\">    jsonLdConfigs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token string-property property\">'@context'</span><span class=\"token operator\">:</span> <span class=\"token string\">'http://schema.org'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'BreadcrumbList'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token literal-property property\">itemListElement</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'ListItem'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token literal-property property\">item</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">              <span class=\"token string-property property\">'@id'</span><span class=\"token operator\">:</span> postUrl<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">              <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> title<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">              <span class=\"token literal-property property\">image</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogImageUrl<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span>    jsonLdConfigs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'@context'</span><span class=\"token operator\">:</span> <span class=\"token string\">'http://schema.org'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'BlogPosting'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogURL<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> title<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">alternateName</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogTitle<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">headline</span><span class=\"token operator\">:</span> title<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">image</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'ImageObject'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogImageUrl<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        description<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">datePublished</span><span class=\"token operator\">:</span> postDate<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">dateModified</span><span class=\"token operator\">:</span> postDate<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">mainEntityOfPage</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string-property property\">'@type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'WebPage'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string-property property\">'@id'</span><span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>blogUrl\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        author<span class=\"token punctuation\">,</span>\n        publisher<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Helmet<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>script type<span class=\"token operator\">=</span><span class=\"token string\">\"application/ld+json\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>jsonLdConfigs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Helmet<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>80-95行目の設定をすると下記のようにグーグルの検索結果にパンくずリストが表示されます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 664px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bccf70f829cca8762bbe62446d09f68a/31493/googlesearchresult.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJUlEQVR42lWOy2oVQRRF74/nD/weIeDACEIGMQPR0b0iJunqut116lTXq+vRdbYkIuJg7Q1rtE455UdvcjQq2OQKB8q8Tp6N8kxz5BYrbyZzCpXtmjnHxpvd2ZmdzTVxTo3HGHQco/be707PFC4fLxa33yb59NPg8y+Hu7PB++8TvqodzxHYCgABjv7nexW0Kqj7wNEFAMbr9N4fT1tIZxMSZsvj/PQiP6ZZlLHyYliYSd49bHJzH0XPSiY1ybKuQpbEspWck7jNib5ej1IKWmtfTjnny54ziEiWZQFb+0aK8dUheIfFRazGQs0Km/eIKSGEgDHewnAcx79C7/39PGta1nVmZu2c00RWE5G2lrUhq2vZdWtN11r/o5TyF1Vr9THGD78BLm54dlKYqIIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/bccf70f829cca8762bbe62446d09f68a/ba381/googlesearchresult.webp 200w,\n/static/bccf70f829cca8762bbe62446d09f68a/7f61c/googlesearchresult.webp 400w,\n/static/bccf70f829cca8762bbe62446d09f68a/c2945/googlesearchresult.webp 664w\"\n              sizes=\"(max-width: 664px) 100vw, 664px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/bccf70f829cca8762bbe62446d09f68a/772e8/googlesearchresult.png 200w,\n/static/bccf70f829cca8762bbe62446d09f68a/e17e5/googlesearchresult.png 400w,\n/static/bccf70f829cca8762bbe62446d09f68a/31493/googlesearchresult.png 664w\"\n            sizes=\"(max-width: 664px) 100vw, 664px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/bccf70f829cca8762bbe62446d09f68a/31493/googlesearchresult.png\"\n            alt=\"Googole検索結果パンくずリスト\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h3>\n<p>今回はschema.orgやJSON+LDについての簡単なメモと\nReactでJSON+LDを実現する具体例を紹介しました。\nなお学習時は、<a href=\"https://cookpad.com/\">クックパッド</a>や<a href=\"https://www.pinterest.jp/\">Pinterest</a>など検索結果がリッチなWebサイトの構造化マークアップをのぞいてみると面白いかもしれません🍅</p>","excerpt":"なにこれ ググった時に自分のブログ(React製)でパンくずを表示させたい\nということでJSON-LD対応しました。\n JSON+LD…","frontmatter":{"slug":"/2018/09/29/","title":"Reactで構造化データマークアップ（JSON-LD対応）","date":"2018-09-29T23:50:00.000Z","tags":["React","Schema-org","JSON-LD","SRE"],"keywords":["JSON-LD"],"thumbnail":"thumbnail/2018/react-json-ld.png","category":null}},{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p>Gatsby製ブログ(Reactアプリ)でSNS対応した時のメモです。<br>\n<strong>(1) SNSシェアボタン</strong>と**(2) 自分のSNSへのリンク<strong>を設置して、ブログの記事をSNSでシェアできるように、、、<br>\nまた、</strong>(3) OGPタグを設定し**、SNSでシェアするときにイメージ画像や、タイトル、記事概要を表示できるようにしました。</p>\n<ul>\n<li>ブログのフッター\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 688px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/40ebf4eb5a183b28914eaaaa44244573/ebf47/blog-footer.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVR42o1RwW7TQBDN7/AZ3PgJLnwTXHqpECBU1AMCCQ6hSuGAKkgkgpK0SdvESRrHjeM4sb32endmHrKT0pamoiM9zc7uzNv3NBUnNJ1OIGFnTrN2QH5nTn5rTv7Zgv1RSP5gyf7pgnww+W5Mfj9cny2RT9eYEdHSWtutfGwuvL1aH+bws9Tqx3h5ssA7l3F4meP5cYI9J8OPmWB/DDz7Cjw9QBkiuBllxcx+pefr6dFIo93z+Nv5SqrDVGoTK5+GWna7qbw9y6QTsISa5NeM5Pe8HBbmdd6AN4SzCjN5BGAUGbmIDNyVwWSZYxrlSDSXCDOCFxlcxgbMt6XdUUhEHtaVbO6v3nE1K4U/kTIXbSK3wZtf1oRGe0O3hThaSKIyRFGMVaSg4gggjWWSwZj8Dsm9hOmF4315/Aj7O6/lRa2DN60Ir5rf8aEXYqdt8eS9QdWxpVLa6vYfy9YYD+4YAzeUhqvQXgI/Zx6GMaEbAbsngBNt3ex2QmOMlxEhTVPRWQqbKoDpxgIfFNeEcRxPBv0+xuOxOXccOzntWZPEhccSOjeWmf/W98BsCKcVa63HzFBKCRHBGAOtdVEjz3MEQVA0PlxhkiTVJEmaSqm6UqpRIE3TMmdZ1sh01tBa/w91rXVTa33wB1DtkvmfpVpGAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/40ebf4eb5a183b28914eaaaa44244573/ba381/blog-footer.webp 200w,\n/static/40ebf4eb5a183b28914eaaaa44244573/7f61c/blog-footer.webp 400w,\n/static/40ebf4eb5a183b28914eaaaa44244573/01c7f/blog-footer.webp 688w\"\n              sizes=\"(max-width: 688px) 100vw, 688px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/40ebf4eb5a183b28914eaaaa44244573/772e8/blog-footer.png 200w,\n/static/40ebf4eb5a183b28914eaaaa44244573/e17e5/blog-footer.png 400w,\n/static/40ebf4eb5a183b28914eaaaa44244573/ebf47/blog-footer.png 688w\"\n            sizes=\"(max-width: 688px) 100vw, 688px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/40ebf4eb5a183b28914eaaaa44244573/ebf47/blog-footer.png\"\n            alt=\"ブログフッタ\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></li>\n<li>Twitterの呟き\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 593px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/02284f3b19c4276293b4613fc734338c/0b5b1/tweet-sample-with-number.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBklEQVR42n2RTW7TUBSFvRm2gAQzRgg2wA4QggnqrBOYIbEAGFaIBSAGCJS6La3b9Cdp49ixXcc/iRPnxU7c1rHdpon93j0oRSBGfNKne84d3iu1Tr8lMWOhadrMtGxmW13me30WDBkbsfjOLCsYG0/YoixZWVVsfrtgt4sFW5YlqzhfGZZVlc4XS1nauX8PE0sTTthDEPiIkwiDaIjewIc/9BGOh5hdp5gmMYrZFdKLKbI0xSxJcJMXWCGEEKvJOdckwSK0JznfCmJqsIzqoyvaGcRUnxa0lxS0G6Ukjy5JiXM66F3RcT+j8xnu7FxwMi9BVkq8vwSMhLelZ3XgzE3EvHOC5v5X9JrbuPXO4fVD1BsaGi0Dph3gTLdx2NSw31BxrJqwe6O7nR/GONUtkc5L/BwJTXp1BFhBIqqN95BfPoLx4imqzS9gcQTfcWAZOnS1Defcgu+50NUWWs0zeF0HHbUN2zShq6q4KQocMK5Jr1XACBJ+vf6c8scPKH/ykE7erVOS58SGIZ02m9S1uxRHEY3CkHqeR+FgSNPJhHStQ4ZukOO4fHXDOuNtKQFgR7nAiQz77RqO36zh+8ZHXN/MsagE5ssKXBD+x5+nHIy5Ji3nxdGONdmrdcbK50NX+VBrKZ82W0rNThXZLRTZKxTZzX7nf9x0M2Xb+9t3t9y88cOebfwCvrwzdiIdAwQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/02284f3b19c4276293b4613fc734338c/ba381/tweet-sample-with-number.webp 200w,\n/static/02284f3b19c4276293b4613fc734338c/7f61c/tweet-sample-with-number.webp 400w,\n/static/02284f3b19c4276293b4613fc734338c/ee627/tweet-sample-with-number.webp 593w\"\n              sizes=\"(max-width: 593px) 100vw, 593px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/02284f3b19c4276293b4613fc734338c/772e8/tweet-sample-with-number.png 200w,\n/static/02284f3b19c4276293b4613fc734338c/e17e5/tweet-sample-with-number.png 400w,\n/static/02284f3b19c4276293b4613fc734338c/0b5b1/tweet-sample-with-number.png 593w\"\n            sizes=\"(max-width: 593px) 100vw, 593px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/02284f3b19c4276293b4613fc734338c/0b5b1/tweet-sample-with-number.png\"\n            alt=\"つぶやきサンプル\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></li>\n</ul>\n<h2 id=\"1-snsシェアボタンを設置\" style=\"position:relative;\"><a href=\"#1-sns%E3%82%B7%E3%82%A7%E3%82%A2%E3%83%9C%E3%82%BF%E3%83%B3%E3%82%92%E8%A8%AD%E7%BD%AE\" aria-label=\"1 snsシェアボタンを設置 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. SNSシェアボタンを設置</h2>\n<h3 id=\"facebookgooglelinkedintwitterシェアボタン\" style=\"position:relative;\"><a href=\"#facebookgooglelinkedintwitter%E3%82%B7%E3%82%A7%E3%82%A2%E3%83%9C%E3%82%BF%E3%83%B3\" aria-label=\"facebookgooglelinkedintwitterシェアボタン permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Facebook、Google、Linkedin、Twitterシェアボタン</h3>\n<p><a href=\"https://github.com/nygardk/react-share\">react-share</a>でめっちゃ簡単にできます。<br>\nそれぞれ専用タグが用意されているので<br>\n<code class=\"language-text\">url</code>属性に記事のURL、<code class=\"language-text\">icon</code>属性にアイコンサイズを指定するだけです。<br>\nLinkedinアイコンはそれに加えて<code class=\"language-text\">title</code>属性に記事タイトルを<br>\nTwitterアイコンは<code class=\"language-text\">via</code>属性に自分のTwitterアカウント名、<code class=\"language-text\">title</code>属性に記事タイトルを指定します。<br>\n※下記コード中の<code class=\"language-text\">articleUrl</code>は記事URL、<code class=\"language-text\">articleTitle</code>は記事タイトルです。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>FacebookShareButton</span> <span class=\"token attr-name\">url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{articleUrl}</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>FacebookIcon</span> <span class=\"token attr-name\">size</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{32}</span> <span class=\"token attr-name\">round</span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>FacebookShareButton</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>GooglePlusShareButton</span> <span class=\"token attr-name\">url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{articleUrl}</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>GooglePlusIcon</span> <span class=\"token attr-name\">size</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{32}</span> <span class=\"token attr-name\">round</span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>GooglePlusShareButton</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>LinkedinShareButton</span> <span class=\"token attr-name\">url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{articleUrl}</span><span class=\"token punctuation\">></span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>LinkedinIcon</span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{articleTitle}</span> <span class=\"token attr-name\">size</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{32}</span> <span class=\"token attr-name\">round</span> <span class=\"token punctuation\">/></span></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>LinkedinShareButton</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TwitterShareButton</span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{articleTitle}</span> <span class=\"token attr-name\">via</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@inouetakumon<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{articleUrl}</span><span class=\"token punctuation\">></span></span></span>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TwittearIcon</span> <span class=\"token attr-name\">size</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{32}</span> <span class=\"token attr-name\">round</span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>TwitterShareButton</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\nすると下記のように画面にSNSシェアアイコンが表示されます。\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 205px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2c11587fd21ffd363fffff8a39fc118c/85860/sns-share-icons.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABq0lEQVR42l3Qv08UQRQH8P1//BPsvRgaIjFijAWnksBIUGNhIiWNdkRiIREbYyykEDIe4rC3u2RhIYCRgggCHiFm4Qh3e4c7c2/3zT0zc1eA07xvPnnz6zlStspKwVyWZVxKxSEDDlJ2KnQzAE+l4qZHAXCpFM+MKeCYgbHZFkBQrVZ7HCIi1G3MkS4vjURtfYlMS/v/to7nJsdxPOKkLaJ7z2egb/Q9hhu/zR6Ue7t4OHQbKwO9mO5sW1v+dYxXX85jz6tFPKql1uYrCq/P1fDZcrNlDkxOT5jz2dunwoO3ODI+S4Njn+yt1akJ+jM2SpWBXjqefGGt+G6Jns5sUP9UQK/9HWt3FxJaOAIa8hr5SpOIVO2hc9bI6daTD1nh/rT+4m2bH+jzrU1dKd7QB/0F3dxctcZ/HOprE9/0zTee/hkn1j7uSn3na10XRQLmyWntlNkZnqcZnjWgM5R2d0qNOlEz6VqnnPzNqa70RaIYiFK8MEMhyo9WwmB4fS1kQgjmui5zhWB+FDE/WrPZmBAuW4+WWBT6NltzXfY99FngucPlIHhcKpWu/APXq9q5ErKu+QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2c11587fd21ffd363fffff8a39fc118c/ba381/sns-share-icons.webp 200w,\n/static/2c11587fd21ffd363fffff8a39fc118c/ac387/sns-share-icons.webp 205w\"\n              sizes=\"(max-width: 205px) 100vw, 205px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2c11587fd21ffd363fffff8a39fc118c/772e8/sns-share-icons.png 200w,\n/static/2c11587fd21ffd363fffff8a39fc118c/85860/sns-share-icons.png 205w\"\n            sizes=\"(max-width: 205px) 100vw, 205px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2c11587fd21ffd363fffff8a39fc118c/85860/sns-share-icons.png\"\n            alt=\"SNSシェアアイコン\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"はてブ追加ボタン\" style=\"position:relative;\"><a href=\"#%E3%81%AF%E3%81%A6%E3%83%96%E8%BF%BD%E5%8A%A0%E3%83%9C%E3%82%BF%E3%83%B3\" aria-label=\"はてブ追加ボタン permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>はてブ追加ボタン</h3>\n<p><code class=\"language-text\">bookmark_button.js</code>というJavaScriptファイルを読み込んで、リンクタグを設置するだけです。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Helmet</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//b.st-hatena.com/js/bookmark_button.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">async</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>async<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Helmet</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span>\n  <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://b.hatena.ne.jp/entry/<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hatena-bookmark-button<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">data-hatena-bookmark-layout</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>vertical-normal<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">data-hatena-bookmark-lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ja<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>このエントリーをはてなブックマークに追加<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n    <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//b.st-hatena.com/images/entry-button/button-only@2x.png<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>このエントリーをはてなブックマークに追加<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\nすると下記のように画面にはてブ追加アイコンが表示されます。\n![はてブシェアアイコン](./hatebu1.png)\n<p>クリックするとウィジェットが表示されます。(<code class=\"language-text\">bookmark_button.js</code>がやってくれています。)\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 384px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6bfedc72173d0e1cef493d7a565ad517/804b2/hatebu2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 132.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEOUlEQVR42p1Uz28bRRhdIcTfwA0hLgjOHDimitpDkZBAlB4KbUQOOQFF6iFXLggEB0rTVhQ4UQmBAkqVH0Qips0mSEQoeO04JnEcx15711l7Nzv7e707+9A3cWLTRjSw0ts3M9+nN59mvjeS7TizScJ9j3lGGsddQhzH3V6vd2okSbKfpmkcx/FP0rdbXXmqkeGjcsA/3OGYqiVIeAb6Dv+P/7IsS4mjKMpJ7y03ll9aNHDu1lx6/rO72ZXb09nc/Hw2Pz+fLSz8nM3NzQksLi4KzM7OZjMzM8e4d+9etvpgPmmpVQRBtCRN3N+Tz+RMnHvnXX717Tcx+cH7mJiYwJWxMYyNjeHSpUsYHx/H5OQkrl27hosXL2JkZASjo6M4MzKCs6+cx8cvP58++OITOBw5aWHLkH93AWV7l29sbOBPpYBCoQBFUQQ2NzdRKpVQLBYFl8tlwZRD+ZvlMnYUJXVNEzZjOckPQ9mxOiiXSrxQLIqkZrMJTdOwvb2NvKIcC5GIqqowDAOVSgW12h4cx6HjE2doWVZO8sJQVvU2VlZX+fr6OlZWViDLMvbqe6LCfD6PYnEDa2trYrNer4cwDBGGkeAoipDGsRA0haDnyTRxHIfHcQzGGLrdLoIggOd5ooIjtm37X2/ZNM2c1G635SzL4Ps+932fWAi4riv44TEJ06bER7BtWwjatp2TdF2XabFSqfBqtSrOJ01TgSRJBB4eD4NzTkWkxMeCFAiCgFMFdCb/9QvDcCCoaZrMASQAT7IMPQ7EffSyIfTn8VA86KVgfgiLuSkd22GFmi4fmizhQnYIGe/RNkDaZ5pnR/EUceDC3tdgm8agbfyuIU/9xXB2oc7fWFLx+i8DjC9ruHy/hYmVFt6638SVBy1cWFLxWj9+IdfEqzkNV39rpVSUZdk5KTkw5MuyCWmqwp/8ugrpqz7uVPHstIrnflTx4kwTT//QwDPTKp76ZhfSlzuQ7uzgCcq7VcEL3+0O+tDuGPKvTQef/qHym4qGG3lCC1OKjuuKjqlCG9eVNm4Q53URv1nQcXvDEOPP8zrulvRBhXq7LbtmB+1ahbf3qqhvbaK+VYLRqMHrtJE4FlLXhm8aMBq7Yp3ta8gCFx21hgOtgdZuZXCG1DY0caltwgh+GMGLInhhCD+KBdwggOsHhxyEfQ7gBSEcPwBzvYGgZVky2UxVVW5ZlngYGo0GdF1HrVZDvV4XzXuaB1YIMsYOK3RdTmYnvxJoE7Ic2Yw8Ti4hphxiMgBtRP3HOR8I2rYtU9CyLOEUqoosSNWS4MHBgfAwMT0a9Hx1Oh0BEnukQhIUD1pK7jne8dinw2snoe/pRwWTJOFDCcPJ/xAfjp0oyBhb7gumSZJkR0jTNBueD6+dwElfcElyXVdUyB93lae4ZcdxRB9+zxhrM8aqjLHa/4HjODumaXaazebdvwEPPmMMrskVmwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6bfedc72173d0e1cef493d7a565ad517/ba381/hatebu2.webp 200w,\n/static/6bfedc72173d0e1cef493d7a565ad517/e6f2f/hatebu2.webp 384w\"\n              sizes=\"(max-width: 384px) 100vw, 384px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6bfedc72173d0e1cef493d7a565ad517/772e8/hatebu2.png 200w,\n/static/6bfedc72173d0e1cef493d7a565ad517/804b2/hatebu2.png 384w\"\n            sizes=\"(max-width: 384px) 100vw, 384px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6bfedc72173d0e1cef493d7a565ad517/804b2/hatebu2.png\"\n            alt=\"はてブシェアアイコンウィジェット\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"2-自分のsnsへのリンクを設置\" style=\"position:relative;\"><a href=\"#2-%E8%87%AA%E5%88%86%E3%81%AEsns%E3%81%B8%E3%81%AE%E3%83%AA%E3%83%B3%E3%82%AF%E3%82%92%E8%A8%AD%E7%BD%AE\" aria-label=\"2 自分のsnsへのリンクを設置 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 自分のSNSへのリンクを設置</h2>\n<p>SNSへのリンクアイコンは<a href=\"https://github.com/FortAwesome/react-fontawesome\">react-fontawesome</a>を使いました。<br>\nまずはreact-fontawesomeをインストールします。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">--save</span> @fortawesome/react-fontawesome\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">--save</span> @fortawesome/fontawesome-svg-core\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">--save</span> @fortawesome/free-brands-svg-icons\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">--save</span> @fortawesome/free-solid-svg-icons\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">--save</span> @fortawesome/free-regular-svg-icons</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n実装は下記のようにします。スタイルの細かい部分は省略していますが、ざっくり書きのような感じです。Qiitaだけ小細工してます。\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">GitHub</td>\n<td align=\"left\">Font Awsomeアイコン使用。背景をダークグレイ。</td>\n</tr>\n<tr>\n<td align=\"left\">Twitter</td>\n<td align=\"left\">Font Awsomeアイコン使用。背景を水色。</td>\n</tr>\n<tr>\n<td align=\"left\">Qiita</td>\n<td align=\"left\">Font Awsomeに用意がないので、<strong>代わりに虫眼鏡アイコン使用。背景を黄緑にしてQiitaっぽくする</strong></td>\n</tr>\n</tbody>\n</table>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">・・・\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FontAwesomeIcon <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/react-fontawesome'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> faGithubSquare<span class=\"token punctuation\">,</span> faTwitterSquare <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/free-brands-svg-icons'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> faSearch <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/free-solid-svg-icons'</span>\n\n・・・\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Bio</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      ・・・\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">\"https://github.com/Takumon\"</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">       <span class=\"token operator\">&lt;</span>FontAwesomeIcon</span><span class=\"gatsby-highlight-code-line\">         color<span class=\"token operator\">=</span><span class=\"token string\">\"#333\"</span></span><span class=\"gatsby-highlight-code-line\">         icon<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>faGithubSquare<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span></span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">\"https://twitter.com/inouetakumon\"</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>FontAwesomeIcon</span><span class=\"gatsby-highlight-code-line\">          color<span class=\"token operator\">=</span><span class=\"token string\">\"#3eaded\"</span></span><span class=\"gatsby-highlight-code-line\">          icon<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>faTwitterSquare<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span></span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">\"https://qiita.com/Takumon\"</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>FontAwesomeIcon</span><span class=\"gatsby-highlight-code-line\">          color<span class=\"token operator\">=</span><span class=\"token string\">\"white\"</span></span><span class=\"gatsby-highlight-code-line\">          style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token literal-property property\">overflow</span><span class=\"token operator\">:</span> <span class=\"token string\">'hidden'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'0.9em'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'0.9em'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#4cb10d'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token string\">'2px'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token literal-property property\">marginTop</span><span class=\"token operator\">:</span> <span class=\"token string\">'2px'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">          icon<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>faSearch<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span></span>\n      ・・・\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\nここまでくると、下記のようなアイコンが画面に追加されています。\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 333px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a51384268a000f2fe0800400769fb044/24c7e/my-sns-icons.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWklEQVR42k2OzUoCURzFZ99j9Azt3LSrJ2jXWwRtCoIwQlGEiBauIiL62BRUIlS3REpMMswoP2pyHHPS7r05M96r/+kEFdSB3+Lwg8MxXK+/AQRv5HafhgGZAEwg+AX/+OsDgjkM/jvUAbwrpdaNge+lW6V9zC1N0MvlNoafALutIF9toWx1cF1pIPdgoVjvIFuqo9m00Ou8YuD14Lku2o4D27YJALTWKYM/l1K56XHER0d0YSpEO0WbZpLHtHv1RCtFnyKXgvbLNiVyKUoWTNor+xS/VXRkDkhpTZ7nke/7+nfw0PC0nw521nAzOUZyPYHNBx/z4Qhqj4846gC7FtDVDWw1wrjjTazWgdDFJ5ZrwBA/CYLg+6FSKmU0228x+cFzdrlwqvqSpSuSzR5UWCzTZuEMZ4vnnEWzFls4u2fRrGDVFmdSCNYTgrlSMM45E0KcSCnzjuNEvgAzS1wIg5CK3wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a51384268a000f2fe0800400769fb044/ba381/my-sns-icons.webp 200w,\n/static/a51384268a000f2fe0800400769fb044/f885a/my-sns-icons.webp 333w\"\n              sizes=\"(max-width: 333px) 100vw, 333px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a51384268a000f2fe0800400769fb044/772e8/my-sns-icons.png 200w,\n/static/a51384268a000f2fe0800400769fb044/24c7e/my-sns-icons.png 333w\"\n            sizes=\"(max-width: 333px) 100vw, 333px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a51384268a000f2fe0800400769fb044/24c7e/my-sns-icons.png\"\n            alt=\"自分のSNSリンク\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"3-ogpタグを設定\" style=\"position:relative;\"><a href=\"#3-ogp%E3%82%BF%E3%82%B0%E3%82%92%E8%A8%AD%E5%AE%9A\" aria-label=\"3 ogpタグを設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. OGPタグを設定</h2>\n<p>OGPとは、「Open Graph Protcol」の略でFacebookやTwitterなどのSNSでシェアした際に、\nWEBページのタイトルやイメージ画像、説明文などをわかりやすく伝えるためのHTML要素です。\nOGPをWebページで設定することでユーザーに対してWEBページの内容を詳しく伝えることができます。</p>\n<h3 id=\"ogpタグを定義\" style=\"position:relative;\"><a href=\"#ogp%E3%82%BF%E3%82%B0%E3%82%92%E5%AE%9A%E7%BE%A9\" aria-label=\"ogpタグを定義 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>OGPタグを定義</h3>\n<p>Reactアプリだと、<a href=\"https://github.com/nfl/react-helmet\">ReactHelmet</a>を使います。<br>\n今回はOgpタグを作りました。ただブログのトップと記事詳細で設定する値が違うので、そこはコンポーネントの引数で受け取れるようにしています。<br>\n※<code class=\"language-text\">blog-config.js</code>はブログタイトルなどの設定しているファイルです。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> Helmet <span class=\"token keyword\">from</span> <span class=\"token string\">'react-helmet'</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  blogTitle<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  blogUrl<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  blogDescription<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  blogImageUrl<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  facebookAppId<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  blogAuthorTwitterUserName<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../config/blog-config.js'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Ogp</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>isRoot<span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">,</span> description<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">const</span> type <span class=\"token operator\">=</span> isRoot <span class=\"token operator\">?</span> <span class=\"token string\">'website'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'article'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Helmet<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:title\"</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>title <span class=\"token operator\">||</span> blogTitle<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:description\"</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>description <span class=\"token operator\">||</span> blogDescription<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:url\"</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>blogUrl<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:type\"</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>type<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:site_name\"</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>blogTitle<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:image\"</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>blogImageUrl<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"fb:app_id\"</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>facebookAppId<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"twitter:card\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"summary\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"twitter:site\"</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">@</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>blogAuthorTwitterUserName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Helmet<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\nいろいろあるプロパティは下記の通り\n<br>\n<br>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ名</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">og:title</td>\n<td align=\"left\">ページのタイトル。SNS共有時は、headのtitleタグよりも優先して使われます。</td>\n</tr>\n<tr>\n<td align=\"left\">og:description</td>\n<td align=\"left\">ページの説明。</td>\n</tr>\n<tr>\n<td align=\"left\">og:url</td>\n<td align=\"left\">ページのURL。</td>\n</tr>\n<tr>\n<td align=\"left\">og:type</td>\n<td align=\"left\">ページの属性、だいたい<code class=\"language-text\">website</code>か<code class=\"language-text\">article</code>を指定します。詳細は<a href=\"http://ogp.me/#types\">ココ</a>参照</td>\n</tr>\n<tr>\n<td align=\"left\">og:site_name</td>\n<td align=\"left\">Webサイト名。</td>\n</tr>\n<tr>\n<td align=\"left\">og:image</td>\n<td align=\"left\">ページのイメージ画像</td>\n</tr>\n<tr>\n<td align=\"left\">fb:app_id</td>\n<td align=\"left\">FacebookのアプリID。FacebookでOGPを表示させる際に必須。アプリIDの取り方は<a href=\"https://design-plus1.com/tcd-w/2018/01/facebook_app_id.html\">FacebookのOGP設定に必要なfb:app IDの取得方法</a>参照。</td>\n</tr>\n<tr>\n<td align=\"left\">twitter:card</td>\n<td align=\"left\">OGPのレイアウトのタイプ。詳細は<a href=\"https://saruwakakun.com/html-css/reference/twitter-card\">【2018年版】Twitterカードとは？使い方と設定方法まとめ</a>参照。</td>\n</tr>\n<tr>\n<td align=\"left\">twitter:site</td>\n<td align=\"left\">Twitterのユーザ名。</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"ogpタグ呼び出し\" style=\"position:relative;\"><a href=\"#ogp%E3%82%BF%E3%82%B0%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97\" aria-label=\"ogpタグ呼び出し permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>OGPタグ呼び出し</h3>\n<p>こんどは作ったOgpタグを呼び出す側の実装です。\nGatsby製ブログではトップページとブログ議事ページの2カ所で呼び出します。</p>\n<h4 id=\"ブログトップページでの呼び出し\" style=\"position:relative;\"><a href=\"#%E3%83%96%E3%83%AD%E3%82%B0%E3%83%88%E3%83%83%E3%83%97%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%A7%E3%81%AE%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97\" aria-label=\"ブログトップページでの呼び出し permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ブログトップページでの呼び出し</h4>\n<p><strong>src/layouts/index.js</strong><br>\n全体のテンプレートなのでURLがブログトップページの時のみOGPタグを呼び出します。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Ogp</span></span> <span class=\"token attr-name\">isRoot</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>isRoot<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4 id=\"ブログ記事ページでの呼び出し\" style=\"position:relative;\"><a href=\"#%E3%83%96%E3%83%AD%E3%82%B0%E8%A8%98%E4%BA%8B%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%A7%E3%81%AE%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97\" aria-label=\"ブログ記事ページでの呼び出し permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ブログ記事ページでの呼び出し</h4>\n<div class=\"gatsby-code-title\">src/templates/blog-post.js</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Ogp</span> <span class=\"token attr-name\">isRoot</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{isRoot}</span> <span class=\"token punctuation\">/></span></span>\n  isRoot={false}\n  title={`${post.frontmatter.title} | ${siteTitle}`}\n<span class=\"gatsby-highlight-code-line\">  description={sumarrize(post.html)}/></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>4行目の<code class=\"language-text\">sumarrize</code>メソッドではブログ記事(HTML形式)から<a href=\"https://github.com/ericnorris/striptags\">striptags</a>というライブラリを使ってテキストを抽出し、冒頭120文字を1行にして返すようにしています。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sumarrize</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">html</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> postContent <span class=\"token operator\">=</span> <span class=\"token function\">striptags</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\r?\\n</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> postContent<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;=</span> <span class=\"token number\">120</span>\n    <span class=\"token operator\">?</span> postContent\n    <span class=\"token operator\">:</span> postContent<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'...'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n<p>※<a href=\"https://github.com/ericnorris/striptags\">striptags</a>は非常に便利なライブラリですが、1点だけ注意点があって、最新バージョンの3系(2018/9/16現在)はGatsbyビルド時にエラーになるため<strong>2系を使用してください</strong>。Gatsbyではビルド時に<a href=\"https://github.com/mishoo/UglifyJS2\">Uglifyjs</a>を使用しているためES6のコードをコンパイルできません。</p>\n<br>\n<p>これでTwitterなどでシェアするとイメージ画像とタイトル、記事概要を表示してくれるようになります。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 593px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/42d05ecc4e34468ed7e45e9125a2c432/0b5b1/tweet-sample.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBklEQVR42n2Ry27TUBRF/TN8A4IZIwQfgpAQk846KTMkPgCGFeIDEANUqUlbWvdB6zSJHcfOTfzIw76xE6d1bLduYl+fjVpEhyxp6WztwRmcI7Uuf0Yh972uwbhpMs7MPnecIR9NOPd5+GCSZJxPZ3xVFLwoS57frfjdasXXRcFLIe71irKM89W6Lh09fYK5qVaDiYvRyEEQBRgHE7gTB87EgTedYHkTYx4FSONrxIs5kjjGMopwm2a4h4jE/RRCaNLcCdEMU7E/CknhCZ3613QwDulkntHRIqPDIKYavyI5TOnYvabzYUJsCeotQfpCkHEFMmMSwzXQjYQqvTcAZRBVuX6By+MfcJV93Nk92EMPp4oGpaXDYCM0OwxnDQ3HShvnbQM910dTZ3C8EE29J+K8wC+/0qQcgDGMqmL7E/bevUD37WuUte/gYQBnMICp6+i0VQxYD65todNuodVowu73obdVMMOArqriNktxwoUmrQF0h5HINt9Q+vIZpa+e08XHTVqkKU09jy4bDeqzPgVBQL7nk2s75I3HNJ/NSNd06na6ZA3shxuecqE+LOwFaYWLOtiHDZxvbWBn+wtubnOsygr5uoCoCP/j31NOpkKT4jT7fWDOjnb1qfztzJI/77bkr7WWvMtiuW5lct3O5LqV/M2PJnLNSuR9+7E73LNSZYctt/8AcCc0/ZkUthIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/42d05ecc4e34468ed7e45e9125a2c432/ba381/tweet-sample.webp 200w,\n/static/42d05ecc4e34468ed7e45e9125a2c432/7f61c/tweet-sample.webp 400w,\n/static/42d05ecc4e34468ed7e45e9125a2c432/ee627/tweet-sample.webp 593w\"\n              sizes=\"(max-width: 593px) 100vw, 593px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/42d05ecc4e34468ed7e45e9125a2c432/772e8/tweet-sample.png 200w,\n/static/42d05ecc4e34468ed7e45e9125a2c432/e17e5/tweet-sample.png 400w,\n/static/42d05ecc4e34468ed7e45e9125a2c432/0b5b1/tweet-sample.png 593w\"\n            sizes=\"(max-width: 593px) 100vw, 593px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/42d05ecc4e34468ed7e45e9125a2c432/0b5b1/tweet-sample.png\"\n            alt=\"つぶやきサンプル\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>開発中に下記サイトで実際にどんな感じになるかを確認できます。</p>\n<ul>\n<li>Twitter → <a href=\"https://cards-dev.twitter.com/validator\">Card validator</a></li>\n<li>Facebook → <a href=\"https://developers.facebook.com/tools/debug/\">シェアデバッガー</a></li>\n</ul>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回はReactアプリでSNSシェアボタンや自分のSNSへのリンクを設置し、さらにOGPタグを設置して\nTwitterなどでのシェアをより効果的にする方法をメモに残しました。\nReactだと、かなり簡単に実現できるし、グっと今時のWebサイトっぽくなるので是非みなさんも試してみてください🍅</p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://github.com/nygardk/react-share\">react-share</a></li>\n<li><a href=\"https://github.com/FortAwesome/react-fontawesome\">react-fontawesome</a></li>\n<li><a href=\"https://github.com/nfl/react-helmet\">ReactHelmet</a></li>\n<li><a href=\"https://ferret-plus.com/610\">Facebook・TwitterのOGP設定方法まとめ｜ferret フェレット</a></li>\n<li><a href=\"https://akameco.github.io/blog/react-helmet/\">React Helmetを使ってOGP対応した | akameco Blog</a></li>\n<li><a href=\"https://design-plus1.com/tcd-w/2018/01/facebook_app_id.html\">FacebookのOGP設定に必要なfb:app IDの取得方法</a></li>\n<li><a href=\"https://cards-dev.twitter.com/validator\">Card validator</a>\n<ul>\n<li>Twitterシェア時にOGP領域プレビュー確認サイト</li>\n</ul>\n</li>\n<li><a href=\"https://developers.facebook.com/tools/debug/\">シェアデバッガー</a>\n<ul>\n<li>Facebookシェア時にOGP領域プレビュー確認サイト</li>\n</ul>\n</li>\n<li><a href=\"https://github.com/ericnorris/striptags\">striptags</a>\n<ul>\n<li>HTML文字列から単純テキストを抽出してくれるライブラリで</li>\n</ul>\n</li>\n<li><a href=\"https://github.com/gatsbyjs/gatsby/issues/3780\">GatsbyはES6未対応 | GitHub issues</a>\n<ul>\n<li>GatsbyはビルドでJSファイル最初化時にUglifyを使っており、uglifyがES6未対応なのでES6のコードをコンパイルしようとするとエラーになってしまいます。</li>\n</ul>\n</li>\n</ul>","excerpt":"なにこれ Gatsby製ブログ(Reactアプリ)でSNS対応した時のメモです。\n(1) SNSシェアボタンと**(2) 自分のSNSへのリンクを設置して、ブログの記事をSNSでシェアできるように、、、\nまた、(3) OGPタグを設定し**、SNS…","frontmatter":{"slug":"/2018/09/16/","title":"ReactでSNS対応（Gatsby製ブログでSNSシェアボタン、OGPタグ追加）","date":"2018-09-16T22:00:00.000Z","tags":["Gatsby","React","OGP","SNS","SRE"],"keywords":["React"],"thumbnail":"thumbnail/2018/react-sns.png","category":null}}],"tag":"React","tagCounts":[{"text":"Gatsby","size":26},{"text":"キーボード","size":11},{"text":"AutoHotkey","size":10},{"text":"作業効率化","size":10},{"text":"React","size":8},{"text":"Vue.js","size":8},{"text":"GraphQL","size":6},{"text":"AWS","size":5},{"text":"AppSync","size":5},{"text":"Vuetify","size":5},{"text":"GatsbyPlugin","size":4},{"text":"Netlify","size":3},{"text":"VueI18n","size":3},{"text":"WordCloud","size":3},{"text":"d3.js","size":3},{"text":"d3Cloud","size":3},{"text":"kuromoji.js","size":3},{"text":"mdx-deck","size":3},{"text":"データ可視化","size":3},{"text":"勉強会","size":3},{"text":"形態素解析","size":3},{"text":"Apollo Client","size":2},{"text":"Cognito","size":2},{"text":"CrossPlatform","size":2},{"text":"LT","size":2},{"text":"Mobile","size":2},{"text":"Node.js","size":2},{"text":"Nuxt.js","size":2},{"text":"ReactNative","size":2},{"text":"SNS","size":2},{"text":"SRE","size":2},{"text":"VeeValidate","size":2},{"text":"code-surfer","size":2},{"text":"gatsby-image","size":2},{"text":"markdown","size":2},{"text":"mdx","size":2},{"text":"スライド","size":2},{"text":"ブログ","size":2},{"text":"プレゼン","size":2},{"text":"読書感想","size":2},{"text":"Amplify","size":1},{"text":"Axios","size":1},{"text":"CSS","size":1},{"text":"CSSModules","size":1},{"text":"CircleCI","size":1},{"text":"Connpass","size":1},{"text":"Cytoscape.js","size":1},{"text":"DynamoDB","size":1},{"text":"Flutter","size":1},{"text":"Fromik","size":1},{"text":"Gatsby theme","size":1},{"text":"Git","size":1},{"text":"GitHub","size":1},{"text":"Github-Pages","size":1},{"text":"Graphpack","size":1},{"text":"Https化","size":1},{"text":"Hugo","size":1},{"text":"Iframely","size":1},{"text":"Ionic","size":1},{"text":"JJUG CCC","size":1},{"text":"JSON-LD","size":1},{"text":"Java","size":1},{"text":"JavaScript","size":1},{"text":"Kotlin","size":1},{"text":"NetlifyForms","size":1},{"text":"OGP","size":1},{"text":"PWA","size":1},{"text":"RSS","size":1},{"text":"SER","size":1},{"text":"Schema-org","size":1},{"text":"Vim","size":1},{"text":"Vimium","size":1},{"text":"Vuex","size":1},{"text":"Windows","size":1},{"text":"Zapier","size":1},{"text":"clip-path","size":1},{"text":"gatsby-image-sharp","size":1},{"text":"gatsby-plugin-feed","size":1},{"text":"gatsy-image","size":1},{"text":"golang","size":1},{"text":"oEmbed","size":1},{"text":"rehype","size":1},{"text":"remark","size":1},{"text":"serverless","size":1},{"text":"typescript","size":1},{"text":"unified","size":1},{"text":"イベントレポート","size":1},{"text":"カスタムドメイン","size":1},{"text":"デュアルキーボード","size":1},{"text":"パソコン","size":1},{"text":"ブックマーク","size":1},{"text":"ランチャー","size":1},{"text":"埋め込みコード","size":1},{"text":"肩こり","size":1}]}},"staticQueryHashes":["3868140423","4185443638","467257065"],"slicesMap":{}}