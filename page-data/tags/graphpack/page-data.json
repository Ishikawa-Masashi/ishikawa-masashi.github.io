{"componentChunkName":"component---src-templates-tags-template-tsx","path":"/tags/graphpack/","result":{"pageContext":{"nodes":[{"html":"<h2 id=\"なにこれ\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\" aria-label=\"なにこれ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なにこれ</h2>\n<p><strong>「とりあえずクライアント側と同じJavaScriptで手っ取り早くGraphQLサーバー立てたい！」</strong><br/></p>\n<p>このようなユースケースに<a href=\"https://github.com/glennreyes/graphpack\">Graphpack</a>はピッタリです。\n設定いらずのNode製GraphQLサーバーで <strong>「GraphQLのスキーマとリゾルバーを定義するだけでOK」</strong>、さらに **「<a href=\"https://github.com/prisma/graphql-playground\">GraphQL Playground IDE</a>が標準搭載」**なのでクライアント側を自前で実装せずとも動作確認できます。<br/>\n今回は、この<a href=\"https://github.com/glennreyes/graphpack\">Graphpack</a>の使い方について以下の5ステップでご紹介します。<br/>\n※ここで紹介するソースコードはGitHub(<a href=\"https://github.com/Takumon/nuxt-graphpack-sample\">Takumon/nuxt-graphpack-sample</a>)にもあるので参考にしてみてください。</p>\n<ul>\n<li><a href=\"#1-graphpack%E3%81%A8%E3%81%AF\">🔰 Graphpackとは</a></li>\n<li><a href=\"#2-graphpack%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\">💪 Graphpackを使ってみる</a></li>\n<li><a href=\"#3-graphpack%E3%81%A7query%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">💖 GraphpackでQueryを実装・動作確認する</a></li>\n<li><a href=\"#4-graphpack%E3%81%A7mutation%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">✨️ GraphpackでMutationを実装・動作確認する</a></li>\n<li><a href=\"#5-graphpack%E3%81%A7subscription%E3%82%92%E5%AE%9F%E8%A3%85%E3%83%BB%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">💎 GraphpackでSubscriptionを実装・動作確認する</a></li>\n</ul>\n<h2 id=\"1-graphpackとは\" style=\"position:relative;\"><a href=\"#1-graphpack%E3%81%A8%E3%81%AF\" aria-label=\"1 graphpackとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Graphpackとは</h2>\n<p>Node.js製のゼロコンフィグなミニマルGraphQLサーバーで<a href=\"https://github.com/webpack/webpack\">Webpack</a>、<a href=\"https://github.com/remy/nodemon\">Nodemon</a>、<a href=\"https://github.com/apollographql/apollo-server\">Apollo Server</a> をイイ感じにまとめたライブラリです。感触を掴むだけなら<a href=\"https://codesandbox.io/s/k3qrkl8qlv\">CodeSandboxのお試し環境</a>が用意されているので、そちらを触ってみるとよいでしょう。\n<a href=\"https://github.com/glennreyes/graphpack/README.md\">README</a>では以下8つの特徴をうたっています。</p>\n<ul>\n<li>📦 <strong>設定いらず</strong>（<strong>ZERO-CONFIG</strong>）！</li>\n<li>🚦 ライブリロード機能組み込み済！</li>\n<li>🚨 わかりやすいエラーメッセージ！</li>\n<li>🎮 <a href=\"https://github.com/prisma/graphql-playground\">GraphQL Playground IDE</a> 標準装備！</li>\n<li>⭐️ SDLでスキーマ定義可能（<a href=\"https://github.com/prisma/graphql-import\">GraphQL imports</a>）</li>\n<li>💖 TypeScriptをサポート</li>\n<li>🔥 爆速ビルド</li>\n<li>⚡️ ES module importsとdynamic importをサポート</li>\n</ul>\n<h2 id=\"2-graphpackを使ってみる\" style=\"position:relative;\"><a href=\"#2-graphpack%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"2 graphpackを使ってみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Graphpackを使ってみる</h2>\n<h3 id=\"実装してみる\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"実装してみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装してみる</h3>\n<ul>\n<li>プロジェクト雛形を作成し、<code class=\"language-text\">graphpack</code> を開発環境用ライブラリとしてインストールします。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">mkdir graphpack-sample\ncd graphpack-sample\nnpm init\nnpm i -D graphpack</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">src/schema.graphql</code>と<code class=\"language-text\">src/resolver.js</code>を作成します。</li>\n</ul>\n<div class=\"gatsby-code-title\">プロジェクト構成</div>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-txt line-numbers\"><code class=\"language-txt\">graphpack-sample\n└── src\n     ├── resolvers.js\n     └── schema.graphql</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">src/scheme.graphql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Query</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">hello</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<br/>\n<div class=\"gatsby-code-title\">src/resolvers.graphql</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">Query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">hello</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'world!'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> resolvers<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">package.json</code>に以下のスクリプトを追記します。</li>\n</ul>\n<div class=\"gatsby-code-title\">package.jsonの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\">  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"graphpack\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"graphpack build\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"動作確認してみる\" style=\"position:relative;\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"動作確認してみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認してみる</h3>\n<ul>\n<li>サーバーを<code class=\"language-text\">npm run dev</code>で起動して、ブラウザで <code class=\"language-text\">http://localhost:4000/</code> を開くとGraphQL Playground IDEが表示されます。</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c6b69dd64156395d0872ac6ae9fe94ec/061c7/hello-world.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACC0lEQVR42o2RvW/TQBTAPSOISAmx48/EsZ0P2+dzEtrETp0O7UAHaFkyMCAkNkbEwoBAQowVlCqke4QohYp+CZCaJfwdVSYgYkNiq+OH7lIFFVK1w0/v6e7dT+/dY54+fLL5ZffTj+2dvcO93f3+1tbH/vXFxX7RNPuWbZ8Jwri/tLR82Gw2f964ufyGWXm1/nV7/zN0NjaHnY330Hn7DlZfr8PLVpvGybTpPa1ptWFldS18sdaCx8+edxkBVXuy40M8Y4YxQYsuJOXosqhFcUmLYrxKuZTKRBe5NI0EcjYl67QmLukkP2I1ExLp4gEjolpPKwegYn9IooI8kkMG+yAUrgGXK4NkzYDieMAXp0EwZ0C0qqBVGqCWAsiWG6BX5sJ8dQEk0+sySQ33+HwZOMMdcoYLqVyJMspdiEl5uHX7Hty9/wCShWmQ8SxITh0E2wcRjRBsL5RwAJn5+ZGQy5WA1Z0hq2P4l6tZBCr2oFBboI+J7D+QHyqlOfAe3TkWGkSIJwoJSc0B3qpNlo2FDZC84HxCMr503J3s1CHtBpAujVDcgHROhXzBO5+QNdwT4yp4loqImPzpWGifFIasjqOJGG4kIj+SnPpkkH9EhALyDqgwlfu7ZcJZHZ62FNH2u0xCtXa4LPrFZtF33sADuVgZsFl7MCXnB1eUwpiEap9OxvrG6fg3qzkf/gDbxXpX8zEUEQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c6b69dd64156395d0872ac6ae9fe94ec/ba381/hello-world.webp 200w,\n/static/c6b69dd64156395d0872ac6ae9fe94ec/7f61c/hello-world.webp 400w,\n/static/c6b69dd64156395d0872ac6ae9fe94ec/d00b9/hello-world.webp 800w,\n/static/c6b69dd64156395d0872ac6ae9fe94ec/92f8c/hello-world.webp 1200w,\n/static/c6b69dd64156395d0872ac6ae9fe94ec/77293/hello-world.webp 1216w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c6b69dd64156395d0872ac6ae9fe94ec/772e8/hello-world.png 200w,\n/static/c6b69dd64156395d0872ac6ae9fe94ec/e17e5/hello-world.png 400w,\n/static/c6b69dd64156395d0872ac6ae9fe94ec/5a190/hello-world.png 800w,\n/static/c6b69dd64156395d0872ac6ae9fe94ec/c1b63/hello-world.png 1200w,\n/static/c6b69dd64156395d0872ac6ae9fe94ec/061c7/hello-world.png 1216w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c6b69dd64156395d0872ac6ae9fe94ec/5a190/hello-world.png\"\n            alt=\"hello-world\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>試しに以下のQueryを実行してみましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">query {\n  hello\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<br/>\n<ul>\n<li><code class=\"language-text\">world!</code>がレスポンスとして返ってきます。</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ac65efe5467c7820993a951be86a19f3/29007/hello-world-result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcRAAAXEQHKJvM/AAACdElEQVR42oXQz0/TYBzH8d39vbGtrNu6rr/Xrk/bbe3WbgiLiTBCyBIhIepRb2ri1ZtGTh4NiMjF4xQdwsGDiQdh/A2w3eDPoPuYbosMQ8LhlW+bpu88zzf07tWbL7vtnZPv7e2jdrvdbbVa3fn5RtdxnK7rulfyPK+7tLR0tLKyctJcbLZCm1ufD3/++o1vP/b87Z09bO/sYu3jp4H1za0LPowZfB95v77hr21s4vXb1YNQqjR/wBbqiLDq2e2k0L9BZfqRtDhwm+YGbiWy/ZsBmhtKcv1IRurfYcTBDDPSWYzXkOC1P6GUand4awpZ4vmcWUU6XwZLXGSIi4RSwqRURCJnI6vaECULgmRBUoogpgeduCCGB9Os+lZxGoxi74cmWLVD5RzEJMuPCgZioolIMEfP1xIiFh4/xcsnz5CXDOhWFTniQtYcyGqgDFF1fFu1kau4wyCrVyCTsi+pNhTNRtH0wKslCGoJrFyA5Uxjzr2HtO6BLsyALk6BNqdAG7UBitR8rVDDzIsH+6HraaXjFWp4PrvoP5yexaN6A6vNZTTv3sdcpY7legMNPo8FRgZj1JDUPaT0KlJkKE2qSJCqrxseFKcSnDDXoSQLcYH4UZ5gQjAQ5nTEeAPBe5wniEoWiOqA0z0kyXnsQlD3IPDmaIejYFwwEKDGZiAqmiA5+8qgJFuXB8edBx2wevBzDfSYJBntUK8Og9GsdkjJBcRFw48L5jAimv9MiiaiUgGmWoaadyHoHsT/8Lrnl4IrK6WD0AQjf6V4/ZTi88e0bPbYvN2Lc/lemJF7kYwyEM7kemlW6ymM3JMvk5aOVU47ncyqrb87YYL1Sw5ggwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ac65efe5467c7820993a951be86a19f3/ba381/hello-world-result.webp 200w,\n/static/ac65efe5467c7820993a951be86a19f3/7f61c/hello-world-result.webp 400w,\n/static/ac65efe5467c7820993a951be86a19f3/d00b9/hello-world-result.webp 800w,\n/static/ac65efe5467c7820993a951be86a19f3/92f8c/hello-world-result.webp 1200w,\n/static/ac65efe5467c7820993a951be86a19f3/fad48/hello-world-result.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ac65efe5467c7820993a951be86a19f3/772e8/hello-world-result.png 200w,\n/static/ac65efe5467c7820993a951be86a19f3/e17e5/hello-world-result.png 400w,\n/static/ac65efe5467c7820993a951be86a19f3/5a190/hello-world-result.png 800w,\n/static/ac65efe5467c7820993a951be86a19f3/c1b63/hello-world-result.png 1200w,\n/static/ac65efe5467c7820993a951be86a19f3/29007/hello-world-result.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ac65efe5467c7820993a951be86a19f3/5a190/hello-world-result.png\"\n            alt=\"hello-world-result\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>こんな感じで、とても簡単にGraphQLサーバーが立てられます。</p>\n<h2 id=\"3-graphpackでqueryを実装動作確認する\" style=\"position:relative;\"><a href=\"#3-graphpack%E3%81%A7query%E3%82%92%E5%AE%9F%E8%A3%85%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-label=\"3 graphpackでqueryを実装動作確認する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. GraphpackでQueryを実装・動作確認する</h2>\n<p>ユーザー情報（ID、名前、メール、年齢）を扱う処理を例に実装方法を説明します。</p>\n<h3 id=\"実装\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A3%85\" aria-label=\"実装 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<ul>\n<li>ユーザー情報のスキーマ定義します。</li>\n</ul>\n<div class=\"gatsby-code-title\">src/schema.graphql</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Query</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">users</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">User</span><span class=\"token operator\">!</span><span class=\"token punctuation\">]</span><span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">user</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">User</span><span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Int</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<ul>\n<li>仮のユーザー情報を用意しましょう。</li>\n</ul>\n<div class=\"gatsby-code-title\">src/db.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'gatsby taro'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">'gatsby.taro@gmail.com'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">32</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridsome taro'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridsom.taro@gmail.com'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">55</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<ul>\n<li>最後にリゾルバーを定義します。データは前手順で作成したものを使います。</li>\n</ul>\n<div class=\"gatsby-code-title\">src/resolvers.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> users <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./db'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">Query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 1件検索</span>\n    <span class=\"token function-variable function\">user</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 複数件検索（簡単のため全件検索としている）</span>\n    <span class=\"token function-variable function\">users</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">parent<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> users\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"動作確認\" style=\"position:relative;\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-label=\"動作確認 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<ul>\n<li>実装できたら<code class=\"language-text\">npm run dev</code>でサーバー起動して <code class=\"language-text\">http://localhost:4000/</code> を開いて</li>\n</ul>\n<p>以下のクエリを発行します。するとユーザー一覧が取得できます。</p>\n<div class=\"gatsby-code-title\">ユーザー一覧取得用Query</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token object\">users</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">id</span>\n    <span class=\"token property\">name</span>\n    <span class=\"token property\">email</span>\n    <span class=\"token property\">age</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/08bc6aa80aad5ea01b6fd4c9c7bb7bd0/7f15f/get-users.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADhklEQVR42n2RSW8bZRzGhyVts9ixHduzeRlvs49nxuPxMhPHjuumOMTNAQ5UHJBQpEqcgAPqBYEEPSH4AlSlTdtQblUDxKl8Q6KgqkKotY8tX6PVaz1oTFqlCHH46f+8h/en/0J9c/HSd8P9H5/cvnP70f7+ncnBwcFkZ2dnkuL5SSad/l/SqdRELBYn29vbj7a3z/3V6/cvUz/s3Ro9+ONP/HLvN/Lr7/dx7/4D/DS8i6vX97B789ZLXL/5/YzdY1y7sYfLV66Sa7s3cOmrrw+puPvWXcZsY54pPnstlplSiyvTuSg7nU9kXrBIZ6eLtDA9kczOmEtkpnOJ5zUzfT2efrbIFbCcLh1QvO6PxOZZcHqT5CptsEoNSckBq7izHCtYOMmKOMVJ4NMKslkNmlqDLFchihXoWg2GVieK3UJcrQ2pUEoaJeQaaLlGaNkFrQTZncEoNawUbNjdATbXt2AULWiSA01yX0KVXNIQq4jn7CG1wJZGGacDtfMGketdSPUu5CPUZg8Zo4EPPvkUX350EbTigquuI260sKL5/6D7iGg+Mc0m9He3htQSL43Spg9lfYNIjdMz4XECcUyswChYSGtNBPvmzDaYsg/G8MBqHhJykziOh7Uv3guEpVHWWoXa2SBKowvlSBJU9egdk6ooFytIqQ0kyx1wbh+suwa22QZrryKh+8RW6khXG8EO5VFcchEpWGQpZyKUN7FcMLGQMzGfK8+OEilYsEVn1iFdboEpt0HrPmjdA6P7SGgeseUa+JIzpBZ4acRLLnKyQ1YrLdTsVQhyFW+6bWx5pyFIDl4RTFgvhGtgzA4YywcdjK16iD8XytUh9SpbGr3fG+B8p08u9AZ4p9NHr9nDZ2cH+HzrbeSlCs4nMlgvWmDUBmizA97dBOu2wTY7YO0WEoZ/TMhLo4/PDPDhxjnSq6/jTKOLC91NFCQHFCsjnNVhpRXUizb4oEOjBdpYA635oFUPjPavDkMp6TCcNxHOGk/DWZ2EBJ2EBYNEBYPEcmUSEQxyIm+RsuiQjO4RWvcJrTUJrQXZI4zmkbjuPw2EKdn9eXaUaN7CsqAHnxHNlWcEeVkwZjUslGEVLfBKDXGljsQxkkodMaVObLEKTnQOqSW2cCUiqI8jgvowmtPGtGiPOcUZh1LSeIErjRe50vgUVxqn2PzYTApjg/4PGOFhhS88CWeVb/8GuITV68fTAWYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/08bc6aa80aad5ea01b6fd4c9c7bb7bd0/ba381/get-users.webp 200w,\n/static/08bc6aa80aad5ea01b6fd4c9c7bb7bd0/7f61c/get-users.webp 400w,\n/static/08bc6aa80aad5ea01b6fd4c9c7bb7bd0/d00b9/get-users.webp 800w,\n/static/08bc6aa80aad5ea01b6fd4c9c7bb7bd0/92f8c/get-users.webp 1200w,\n/static/08bc6aa80aad5ea01b6fd4c9c7bb7bd0/e0a0d/get-users.webp 1530w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/08bc6aa80aad5ea01b6fd4c9c7bb7bd0/772e8/get-users.png 200w,\n/static/08bc6aa80aad5ea01b6fd4c9c7bb7bd0/e17e5/get-users.png 400w,\n/static/08bc6aa80aad5ea01b6fd4c9c7bb7bd0/5a190/get-users.png 800w,\n/static/08bc6aa80aad5ea01b6fd4c9c7bb7bd0/c1b63/get-users.png 1200w,\n/static/08bc6aa80aad5ea01b6fd4c9c7bb7bd0/7f15f/get-users.png 1530w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/08bc6aa80aad5ea01b6fd4c9c7bb7bd0/5a190/get-users.png\"\n            alt=\"get-users\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>1件検索の場合は以下のようなクエリを発行しましょう。指定したIDのユーザー情報が取得できます。</li>\n</ul>\n<div class=\"gatsby-code-title\">ユーザー情報1件検索用Query</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">user</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">id</span>\n    <span class=\"token property\">name</span>\n    <span class=\"token property\">email</span>\n    <span class=\"token property\">age</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f15a15b2a309f2be842491be0bde97fc/29007/get-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcRAAAXEQHKJvM/AAACt0lEQVR42oWRS08TURiGu/QCaNEy0047Zdq5dNqZOXMrbafTVkNMQQMoXjAxJi504cooG2JiZONOY1WQnQsNK000AYyJS6Q/g3RF6k73zHnNDBAj0bh48i7Ol+e853yxxfmHH79+/tJfX1/f3tjY6K2trfUmJyd7uqb1TMPokf9gEtKbvXRp+/rc3PcL09MfYk+eLXfff1rHm3erwZu3q2Gis7yCztJrvFhe+SfheWdpJZp92nkVPH+5hIXHi99irNPeSptNnOTV3SEuT48lMvREKkdPcCIdYAU6wI7S40yWHhnh6VF2dB+BDqZFOsCJUQ6lxd1hQUV8tLAZ41SnKzpnIJB6kLcbEPQqBLMewRXLSBYcZPQqFOLBUOwIs+CganqoEC/KmuUFdbeFUXVsM3Y6V+omS1WkVCdgJRMjEsGIuEdSsTHIKZi5eQcLd+9DLthQnAZyRh2CVoOgeRB0D1mtFhQMD9WGtxlLhMKiA1bfEzKR9Hcm8jqyRg2e24RAfPC188iMtZCutJB2mkhbDaSIH+TLLUzduxwK9W6qWI6EjGjilEiQCmWiifACTrZwUrKgFlyIxEdmbAJ8+Sz4ShN8pQXeaYAjfiCaDbiWGz5Z73Kqi2FBD8qOj9nmOdwYP49b4xfw7vIcHl28hrZk4GpOA281kTEbyBj+HxwILdHc/0PFBiOSgJFtzLencLs9jSvNNh5MzKBVbiKVN+CpLnLERzpseYgDoaNYUcMtNhRK5m5CJDQtmzRbsCkjmTSlWJQVCY3LFtVKFSoYdZokPuUOkST+bu5AmBD1blJ1wSpWEDVVbCRkC4xsISFZ0XISigO3WIGue5CMOpRDSEY9IKQBu2B/iw3z8gaT134weW0nJZN+tuj0mXypH8/I/WFeiYjzSp/jlb6ckfvSX5F2FKH4M5krrv0CJJmBi682oCQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f15a15b2a309f2be842491be0bde97fc/ba381/get-user.webp 200w,\n/static/f15a15b2a309f2be842491be0bde97fc/7f61c/get-user.webp 400w,\n/static/f15a15b2a309f2be842491be0bde97fc/d00b9/get-user.webp 800w,\n/static/f15a15b2a309f2be842491be0bde97fc/92f8c/get-user.webp 1200w,\n/static/f15a15b2a309f2be842491be0bde97fc/fad48/get-user.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f15a15b2a309f2be842491be0bde97fc/772e8/get-user.png 200w,\n/static/f15a15b2a309f2be842491be0bde97fc/e17e5/get-user.png 400w,\n/static/f15a15b2a309f2be842491be0bde97fc/5a190/get-user.png 800w,\n/static/f15a15b2a309f2be842491be0bde97fc/c1b63/get-user.png 1200w,\n/static/f15a15b2a309f2be842491be0bde97fc/29007/get-user.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f15a15b2a309f2be842491be0bde97fc/5a190/get-user.png\"\n            alt=\"get-user\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"4-graphpackでmutationを実装動作確認する\" style=\"position:relative;\"><a href=\"#4-graphpack%E3%81%A7mutation%E3%82%92%E5%AE%9F%E8%A3%85%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-label=\"4 graphpackでmutationを実装動作確認する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. GraphpackでMutationを実装・動作確認する</h2>\n<p>ユーザー情報が取得できたので、次はユーザー情報の登録・更新・削除を実装します。</p>\n<h3 id=\"実装-1\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A3%85-1\" aria-label=\"実装 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<p>スキーマ定義にMutationを追記します。</p>\n<div class=\"gatsby-code-title\">src/schema.graphqlの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Mutation</span> <span class=\"token punctuation\">{</span>\n  // 登録\n  <span class=\"token attr-name\">createUser</span><span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Int</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">User</span><span class=\"token operator\">!</span>\n  \n  // 更新\n  <span class=\"token attr-name\">updateUser</span><span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Int</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">User</span><span class=\"token operator\">!</span>\n  \n  // 削除\n  <span class=\"token attr-name\">deleteUser</span><span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">User</span><span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span>\n</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>これはGraphQLとは関係ありませんが、ユーザー情報登録時のID採番用ロジックを<code class=\"language-text\">db.js</code>に追記します。\n初期状態でユーザー情報が2件なので、採番用IDは3から始まるようにします。</p>\n<div class=\"gatsby-code-title\">src/db.js</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'gatsby taro'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">'gatsby.taro@gmail.com'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">32</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridsome taro'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">'gridsome.taro@gmail.com'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">55</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// 採番用ID(3から始まるようにする)</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">let</span> idSequence <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// 採番処理</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateId</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">++</span>idSequence<span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>リゾルバーにMutationを追記します。</p>\n<div class=\"gatsby-code-title\">src/resolvers.jsの一部</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> users<span class=\"token punctuation\">,</span> generateId <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./db'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">Query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ・・・</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token literal-property property\">Mutation</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function-variable function\">createUser</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> newUser <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token function\">generateId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      users<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> newUser<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function-variable function\">updateUser</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      updatedUser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      updatedUser<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      updatedUser<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> updatedUser<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function-variable function\">deleteUser</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> userIndex <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User not found'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>deletedUser<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>userIndex<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> deletedUser<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span>  <span class=\"token comment\">// ・・・</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"動作確認-1\" style=\"position:relative;\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-1\" aria-label=\"動作確認 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>実装できたら<code class=\"language-text\">npm run dev</code>でサーバー起動して <code class=\"language-text\">http://localhost:4000/</code> を開きます。</p>\n<h4 id=\"登録の動作確認\" style=\"position:relative;\"><a href=\"#%E7%99%BB%E9%8C%B2%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-label=\"登録の動作確認 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>登録の動作確認</h4>\n<p>以下のようなMutationを発行すると、登録したユーザー情報が返ってきます。<br/>\n<small>※登録後にユーザー一覧を取得すると、<code class=\"language-text\">nuxt taro</code>が取得できます。</small></p>\n<div class=\"gatsby-code-title\">登録用Muatation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property-query property-mutation\">createUser</span><span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token description string\">\"<span class=\"token language-markdown\">nuxt taro</span>\"</span>\n    <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> <span class=\"token description string\">\"<span class=\"token language-markdown\">nuxt.taro@gmail.com</span>\"</span>\n    <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> <span class=\"token number\">43</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">id</span>\n    <span class=\"token property\">name</span>\n    <span class=\"token property\">email</span>\n    <span class=\"token property\">age</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9e0b952bb46f01e7986797d6da3d12f3/a8a6f/create-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADe0lEQVR42n3SXWsjVRzH8al9QGsTm26ek85kJpnMmYdMkmaSk5lMH9Ik3dTtVvchrQqCoKwPuCCCrBci7IX4AryRst0tXUVB8KJWdmPqFkUWfA9LyOWy72CXE34ybVnssnrxYf438+XwP4e7fu36d3f3fn24t7//YG//l/69w8P+R1ev9qVMpi8T0s8oyn+S5EzfyOf7Fy9dfnC503nYXl/f5bZ2dg/u3/8b3d8P2cHhn7j3x1/48aefsbV9C9s7u6fcfI5bO7fx7dYNdmP7Jr786usuZ1fk30TTwnS69GQ0KA5HfJHhC77wcCyQGI4F4sPxQGI4MZMcjs8khiOBZ8wc4wLxJxNhAS/FpbtcwnR66XITs6bLUoUFxDSKpGEjmXMQIWUE0gVM8Tp8vI5UOg9RzIGQEvJ5B5pWgWnaKJgOM0tLiGi0y/lSei9mupitLDO+UMOs6Twl5F1EiYVzb72HD979GEUpB0OrQCOnEVJhNqkgaZS73CSv9VIFF+XlNivW2piz2zCrLejVJlS7Abm8hNraBi6tbyKtlBCuriI0t4yg6eKMUUNQr8GvOaxYmsfCZ290uUlB74le0F1hKm0hR5swaQsabUChy9DsBvyZIgQhB6JShMtrSJTqiFcWjsSKLoK6w0qmA3NjtctNCXovVZyHWl9hWVqHRz75ekG12kBIoyBZC0StIpRfRNRwEdEdRIwaorqDM7rDCoSCl4pdzifoPb7oQllaYUcBu3mK7rQQ1iiUbAmqSr2fEdXt4+DRfBJUKUS13OWmUrnerFGFaNosoVUQ8vakWIgRC1Hl2IRcQkaxvOUf7S16Ens2KChWlxvhtd6VxVXc6bzJPlxcwdutdRCDgotlMZpQMcnr6ERF1L0no9KjS/jf4FhS670638Y7i2fZtdULeL95Hp+3X8MPFzfxzYUNmIUa9LiMijwHWaUI6TXETkIebw7+O8jxWveTs6/jSmvt8ebSKlt3muyL8x32aeMca1gLLJYpsFGxwGSlzGSVsumcy0JGjQVPePN0zn1sqlWkiHWHGxf0gzVax4bbYoW8g5xpY9laRCxTBBdT4BcM+KU8lKyFuawFiVQhE/pUllBIhDKqlMF7J/Tx5PsXk+TRWELpv8xrg1B2buATjcFkLD3wJ7ODqbg8mIzLg1fi8kCKSIP0c2SiUl+cJY/8gnb7HwOh3zPtG4DWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9e0b952bb46f01e7986797d6da3d12f3/ba381/create-user.webp 200w,\n/static/9e0b952bb46f01e7986797d6da3d12f3/7f61c/create-user.webp 400w,\n/static/9e0b952bb46f01e7986797d6da3d12f3/d00b9/create-user.webp 800w,\n/static/9e0b952bb46f01e7986797d6da3d12f3/92f8c/create-user.webp 1200w,\n/static/9e0b952bb46f01e7986797d6da3d12f3/dde0f/create-user.webp 1516w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9e0b952bb46f01e7986797d6da3d12f3/772e8/create-user.png 200w,\n/static/9e0b952bb46f01e7986797d6da3d12f3/e17e5/create-user.png 400w,\n/static/9e0b952bb46f01e7986797d6da3d12f3/5a190/create-user.png 800w,\n/static/9e0b952bb46f01e7986797d6da3d12f3/c1b63/create-user.png 1200w,\n/static/9e0b952bb46f01e7986797d6da3d12f3/a8a6f/create-user.png 1516w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9e0b952bb46f01e7986797d6da3d12f3/5a190/create-user.png\"\n            alt=\"create-user\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h4 id=\"更新の動作確認\" style=\"position:relative;\"><a href=\"#%E6%9B%B4%E6%96%B0%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-label=\"更新の動作確認 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更新の動作確認</h4>\n<p>今度は<code class=\"language-text\">nuxt taro</code>を更新してみましょう。\n以下のようなMutationを発行すると、更新されたユーザー情報が返ってきます。<br/>\n<small>※更新後にユーザー一覧を取得すると<code class=\"language-text\">nuxt taro</code>が<code class=\"language-text\">nuxt updatedtaro</code>になっていることを確認できます。</small></p>\n<div class=\"gatsby-code-title\">更新用Muatation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property-query property-mutation\">updateUser</span><span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n    <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token description string\">\"<span class=\"token language-markdown\">nuxt updatedtaro</span>\"</span>\n    <span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> <span class=\"token description string\">\"<span class=\"token language-markdown\">nuxt.updatedtaro@gmail.com</span>\"</span>\n    <span class=\"token attr-name\">age</span><span class=\"token punctuation\">:</span> <span class=\"token number\">44</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">id</span>\n    <span class=\"token property\">name</span>\n    <span class=\"token property\">email</span>\n    <span class=\"token property\">age</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/029a5d67ac6abed362779efe42ea5276/6bfbb/update-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABcRAAAXEQHKJvM/AAADcklEQVR42oWTS28bZRSGJ5EMVRoHHDuOY48dz8Wem+fimfHcPHFiOxe7abHaKISyA7GgILJBotuwQUJiXyC9goSE2EVpk7hVU8SCH9Fq1u1PaPVZL7ITQJGCWDzS2XyPzvvqfNTOVzs/H+49fLm3v/9ib38/enp8HH2+vR2xHBfxohjxgvCfcDwfVXQ9urax8Xxzc/NVp9d7QN26fe/x73/8iUdHT8jRk2P0nz7DL7/+hu9372L37v0z3D6HO/ce4NYPu+TH3TvY+ebbQ8p3S0esZiPB229iaXYwNjU3GI+nB7FE7oTp3OCtJD2IJenB2HTuXKhE9s3b6SIuZplHVFb1+6zdRF6tE6bawJzsgq74oNUAs2INCc7AZEFBvKCA4XSwjApRtKHrAWTZgab5MHSfKFYT6Yp/QMXnlX5WW0DBaZGCUQetBchrAQpaHfN6iIxgo7P1ET775AuYrIqK7EAWTxFqUEQHkuiQmuQir7oH1ERB7herIYxWlyjBClRvBRVvGaLXhuQvg7cX4XU38H7vOjixhlnvEtJmCyktRFILkarUEZcCUjVDNG9+eEBNzMv9ohHCD1eJ7q7BdjtwvA5Mdw2quwLJa2GS1VGcV1GWXKRr68jZTcw5DWT9RWSdBlLVkJhGHeZW90TIVBegNtZI2W2j7DZHCG5rhOi2kBRrEMs2BNnDjLaITGUBs0owIlMJkFQCoksuGN486TBv1CG218jwsewtQ/Lao8ij2F4b04INoWyNhKmhRPb/FSp/Cz2wkn1AxYtKv2CE4LwmKVoN0EYdw05LVgO82QBnLiBRMiGWrVHkYWeZU9lZoQtWtA8oipb7W14L+xsfkBvLl3Gt0UHVCEHNljGeFTFBy4ixBkrDLUXn/4XjtNRvu03cWH2PfNnpYXt9A0PxbreH73qbsGpL2EzlcYnVUJQ9pJUAc6eizOmcUgJi/LNhrnx4famLT5fXX18JV0jPb5Ob61fJ16tXyNVwhRSlGhFogdglkxRljyTUkMxU6iR1ynB+Rw1fq7I3PKuH1BgtPr7sLOHjpS5xrAYsPcCq1wIn2qAypdEPiXEG+LKFaskEIzjghdoZGKFGLMFGQbQOqam88NOFvPAylhNeTM5L0YxQjeKMEl3IcNFUrhRdzPIj3s2WIibNRNw5lNLF5/m8+GqSUe7/BTP+3xaSUHxNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/029a5d67ac6abed362779efe42ea5276/ba381/update-user.webp 200w,\n/static/029a5d67ac6abed362779efe42ea5276/7f61c/update-user.webp 400w,\n/static/029a5d67ac6abed362779efe42ea5276/d00b9/update-user.webp 800w,\n/static/029a5d67ac6abed362779efe42ea5276/92f8c/update-user.webp 1200w,\n/static/029a5d67ac6abed362779efe42ea5276/7a774/update-user.webp 1514w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/029a5d67ac6abed362779efe42ea5276/772e8/update-user.png 200w,\n/static/029a5d67ac6abed362779efe42ea5276/e17e5/update-user.png 400w,\n/static/029a5d67ac6abed362779efe42ea5276/5a190/update-user.png 800w,\n/static/029a5d67ac6abed362779efe42ea5276/c1b63/update-user.png 1200w,\n/static/029a5d67ac6abed362779efe42ea5276/6bfbb/update-user.png 1514w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/029a5d67ac6abed362779efe42ea5276/5a190/update-user.png\"\n            alt=\"update-user\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h4 id=\"削除の動作確認\" style=\"position:relative;\"><a href=\"#%E5%89%8A%E9%99%A4%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-label=\"削除の動作確認 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>削除の動作確認</h4>\n<p>最後に<code class=\"language-text\">nuxt updatedtaro</code>を削除してみましょう。\n以下のようなMutationを発行すると削除されたユーザー情報が返ってきます。<br/>\n<small>※削除後にユーザー一覧を取得すると<code class=\"language-text\">nuxt updatedtaro</code>がなくなっていることが確認できます。</small></p>\n<div class=\"gatsby-code-title\">削除用Mutation</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property-query property-mutation\">deleteUser</span><span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">id</span>\n    <span class=\"token property\">name</span>\n    <span class=\"token property\">email</span>\n    <span class=\"token property\">age</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0b63486b9b748b7706b4642b371875fa/29007/delete-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcRAAAXEQHKJvM/AAACsElEQVR42n3SS2sTURgG4NkJKtG2iUk6M7lMJplbZs7MNJPJZabpzUvqhVZpKSKKG0WouCuCILh0JdIqTcGurKC1WmLRH2CMP0JCVuKf8OSVSdBqURcP31m9vN/hYx7efbDzvrn3dbe5+2WvudfZ2dnpTE3NdGRZ7ei60dE0/b8Mg3Tm5i9+WVxY+HqqXt9mNhpP2+/ef8CL1036fHsXW6/eYnV9E6uNTaxt/Ntq41nfWmMTj9Ya9PGTdazcu99iio76SXVriCnO96Gk2jsSS/WOs5neMU7sHY2l+o5Ek73DgVhqIJ7qHeOzvRAn9kK8GLy/hwUVw0npI8MqhXbGGkeaVGjG8pDQy0ibVaRJFaOqg5g8Bt4oI2uUkZMLyMpjkFQHxPahmx4My4Np+9R2JsEpTosJp9V2PF9CnLj0RJbghLgvLtkIsRIuXruJlRt3QCSzH6TlK1BVd0BzIakudfQS9Gq5xUQErc0qBbCyTaNZC9Gs+YdIxoBg+/BKU0gaPrjKOXDuJFinNmCPI0Z8qhRrmLl9qcVEBb0dVQoI523ab3YgMJY1MSwS5KUxiMRHwp1F0plAolRDMlAcB2f7VDM95AvByoLWFo0SdKtER3MWAkMZAyMi+RUYkWyYmguReOCIBz6ge+CNAZZ4VCUeFNFqMYd4qX11+ixeLl2hy7PzWJqsQ88XQYwS4rngC0h/WmoRGaO6H/ibn4GqbLWYw7zUPlOdwbXps/T6yfNYrs9ha+EyVmbnwUo2hrMmzidymJZscMTHqOmDPSBu+lQ2fahSv6HyebF2GrdOX6C+O4HFiTNwrSpCGYJY0DAg2bA1F5oenE8FuQNEo0JtowpFtltMOCG9CWf0byOC1onnzC6vFboRQeuOpJRfhlJKl0spXYXPdeW/SeQ6mqB9iwrq6x9ZY4Q6Ctu+3gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/0b63486b9b748b7706b4642b371875fa/ba381/delete-user.webp 200w,\n/static/0b63486b9b748b7706b4642b371875fa/7f61c/delete-user.webp 400w,\n/static/0b63486b9b748b7706b4642b371875fa/d00b9/delete-user.webp 800w,\n/static/0b63486b9b748b7706b4642b371875fa/92f8c/delete-user.webp 1200w,\n/static/0b63486b9b748b7706b4642b371875fa/fad48/delete-user.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/0b63486b9b748b7706b4642b371875fa/772e8/delete-user.png 200w,\n/static/0b63486b9b748b7706b4642b371875fa/e17e5/delete-user.png 400w,\n/static/0b63486b9b748b7706b4642b371875fa/5a190/delete-user.png 800w,\n/static/0b63486b9b748b7706b4642b371875fa/c1b63/delete-user.png 1200w,\n/static/0b63486b9b748b7706b4642b371875fa/29007/delete-user.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/0b63486b9b748b7706b4642b371875fa/5a190/delete-user.png\"\n            alt=\"delete-user\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"5-graphpackでsubscriptionを実装動作確認する\" style=\"position:relative;\"><a href=\"#5-graphpack%E3%81%A7subscription%E3%82%92%E5%AE%9F%E8%A3%85%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-label=\"5 graphpackでsubscriptionを実装動作確認する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. GraphpackでSubscriptionを実装・動作確認する</h2>\n<h3 id=\"実装-2\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A3%85-2\" aria-label=\"実装 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実装</h3>\n<p>GraphpackではSubscriptionはデフォルトoffになっています。\nそのためココだけは設定ファイルを作成する必要があります。\nプロジェクトのルートフォルダ直下に<code class=\"language-text\">graphpack.config.js</code>を作成しましょう。</p>\n<div class=\"gatsby-code-title\">graphpack.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">server</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">subscriptions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Subscriptionのエンドポイントとして</span>\n      <span class=\"token comment\">// QueryとMutationと同じパスを設定します。</span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/graphql</span><span class=\"token template-punctuation string\">`</span></span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>スキーマ定義にSubscriptionを追記します。</p>\n<div class=\"gatsby-code-title\">src/schema.graphqlの一部</div>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Subscription</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token attr-name\">userCreated</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">User</span><span class=\"token operator\">!</span>\n    <span class=\"token attr-name\">userUpdated</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">User</span><span class=\"token operator\">!</span>\n    <span class=\"token attr-name\">userDeleted</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">User</span><span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>リゾルバーでSubscriptionを定義し、Mutationも修正します。\nMutationも修正するのは、登録・更新・削除完了後にSubscriptionを発行できるようにするためです。</p>\n<div class=\"gatsby-code-title\">src/resolvers.jsの一部</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// Subscriptionのやりとりには`apollo-server`のPubSubを使る</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// `graphpack`の場合、`apollo-server`は入っている</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PubSub <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'apollo-server'</span><span class=\"token punctuation\">;</span></span><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> users<span class=\"token punctuation\">,</span> generateId <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./db'</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> pubsub <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PubSub</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token constant\">EVENT</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token constant\">USER_CRAETED</span><span class=\"token operator\">:</span> <span class=\"token string\">'userCreated'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token constant\">USER_UPDATED</span><span class=\"token operator\">:</span> <span class=\"token string\">'userUpdated'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token constant\">USER_DELETED</span><span class=\"token operator\">:</span> <span class=\"token string\">'userDeleted'</span><span class=\"token punctuation\">,</span></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>    \n  <span class=\"token comment\">// ・・・</span>\n  <span class=\"token literal-property property\">Mutation</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">createUser</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> newUser <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token function\">generateId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      users<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \n<span class=\"gatsby-highlight-code-line\">      pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> newUser<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>      <span class=\"token keyword\">return</span> newUser<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">updateUser</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      updatedUser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n      updatedUser<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email<span class=\"token punctuation\">;</span>\n      updatedUser<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">      pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> updatedUser<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>      <span class=\"token keyword\">return</span> updatedUser<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">deleteUser</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">parent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> userIndex <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userIndex <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User not found'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>deletedUser<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>userIndex<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n<span class=\"gatsby-highlight-code-line\">      pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> deletedUser<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>      <span class=\"token keyword\">return</span> deletedUser<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token literal-property property\">Subscription</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function-variable function\">subscribe</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">asyncIterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_CRAETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function-variable function\">subscribe</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">asyncIterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_UPDATED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function-variable function\">subscribe</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> pubsub<span class=\"token punctuation\">.</span><span class=\"token function\">asyncIterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token constant\">EVENT</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_DELETED</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span>  <span class=\"token comment\">// ・・・</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h3 id=\"動作確認-2\" style=\"position:relative;\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-2\" aria-label=\"動作確認 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作確認</h3>\n<p>実装できたら<code class=\"language-text\">npm run dev</code>でサーバー起動して <code class=\"language-text\">http://localhost:4000/</code> を開きます。</p>\n<p><code class=\"language-text\">userCreated</code>の動作確認をしましょう。\n以下のようなSubscriptionを発行します。</p>\n<div class=\"gatsby-highlight\" data-language=\":title=登録用muatation\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-:title=登録用muatation line-numbers\"><code class=\"language-:title=登録用muatation\">subscription {\n  userCreated {\n    id\n    name\n    email\n    age    \n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p>すると実行結果（画面右半分）にローディングアイコンが表示され、監視状態となります。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/81fcc39b052782c0aa82ee43da5be877/29007/subscription-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAAC40lEQVR42oXSz2/TZhzHcZ+RNghtEyd24qSJHzuO7eexnTi/f7RhHaUwiR+TSkV7qIALpx122A4Vx2mAAKHSjbbHadK4oSG0w6RpZGJMtLv0NJz9I/D4gxxCV43BDi/5sfQ878dfycLaZ1/8eOfu+t7N27d27qyv765dvbqbyeV2j8Riu0cnJv5XtK/i+zvH5+f3ev2ZB8LDB4+Gz3b+xODJ7/y3J0/x8y+/YmNzGxubW/jmPTbubWLj3tbrfVvb/NvNbVy7fiMQWKn3nFXmQKqzL5Kay+M5g8uaxTM65RKxRqJ3SbN4ivxD1imXi2O6/SJtOFBKzl9Czm4MVbeLvNPiOdZE2qxBsevImDXEiYMEcRArUEzlbWRUhvSYatVA7DqIVUeRNbjpdTBtVgNhqkCHolFFwvB5dDihMsTHksTFoayFi50+vvr4BDTNg2fW4JSqYIa/jxoV7pRqqBadQBALbJi0fSSpz8Vx8A1RZTicp+hTH0t+GzHahszaSP2LxNo8yTrwF2YDIZGnw2SpDNFweCJPR5F4gSJRGIejS6YtFPXyKJahrf/Q5BnWgVepBUKSsGF0KKm7PKV5o1GzuoeU5kIiDqaIg2nC4Br+6GuiQDqKHFinaZOnnS4o8QKh6zaG53rHsXhsgZ+Zmccn7TlcmjuF061jOD8zj6X+AlY+OgmrVI1GG0Vku4lpr4us24FsHwjq5UBYbM0O769extefLvHPF85AM31Imou05kIpelCMMlYUDS3dg8jaUN41stMFi4LL9V7w08oqvlu88PL788vhlZNnwy9PnQ17Xiv8IGeFkyoLGxkt9I1KmPB6ocTaYeotrZcptwdLLz8XlKL3t+m2oNt1brAmCG1Ea2SLFSRUByJxMUFcNGkDvVofFbsB16yNfp83XLPKK3YTbc0LhJhC7h9R9KexrP44XjAHku4MPpTVwWG5MDiaVvdNyupAlAsDcf95UP6xpGh/SIr+wytmo6JMNNc0eQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/81fcc39b052782c0aa82ee43da5be877/ba381/subscription-1.webp 200w,\n/static/81fcc39b052782c0aa82ee43da5be877/7f61c/subscription-1.webp 400w,\n/static/81fcc39b052782c0aa82ee43da5be877/d00b9/subscription-1.webp 800w,\n/static/81fcc39b052782c0aa82ee43da5be877/92f8c/subscription-1.webp 1200w,\n/static/81fcc39b052782c0aa82ee43da5be877/fad48/subscription-1.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/81fcc39b052782c0aa82ee43da5be877/772e8/subscription-1.png 200w,\n/static/81fcc39b052782c0aa82ee43da5be877/e17e5/subscription-1.png 400w,\n/static/81fcc39b052782c0aa82ee43da5be877/5a190/subscription-1.png 800w,\n/static/81fcc39b052782c0aa82ee43da5be877/c1b63/subscription-1.png 1200w,\n/static/81fcc39b052782c0aa82ee43da5be877/29007/subscription-1.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/81fcc39b052782c0aa82ee43da5be877/5a190/subscription-1.png\"\n            alt=\"subscription-1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>この状態で別タブを開き...</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9ef85b404c04cdd44b88eaf1b69a0bc4/29007/subscription-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAACb0lEQVR42o3SzU/TYBzA8V69mL3A2rH1ZVu7ru3W52kZY6x7MzMixB0MJiTGxIMHvXo0RsNdDSgB5WUbeNQb0XhWliBG6oWTtP4j+PAzLVPGQOPhk74cvvn114d6fP/Bu8Xlpf355wt7i0tL9qO5OTueSNiBUMgOhsP2xXDYDvSEzhEIBu18obB3dWp6v36psUW93/rgft37Bt2dz2RnZxe6Hz9Bp92B5dU1aLfa8HpjEzY7G7DR7sDKegtera37Xq72eM/rLbKy1oInT585FNbqB3jsCojFxiESVHI7a5KFG7Nk5vI0uTfZJHcnr5EXszfJ/MwsMYxxwogqiadzhM3ohMsgwvr0Q17BIGjGdyqhl1zJrELSrJBMrghatgCKWQHZsIDN5IFJmxCTj0XlUaDTpv+ORyUQkAW8XoKkUSZSvgZ8dtyhhkXdZdRxYNQCicgmDEkYhkTkY9IGXEjk4E6tAQ+b1yGoFoHHFWBRGeK61adE4qgCMWPCoRgRu1G9AAwqEC9AS/gPRsIQSCGoGUVoWg2gcxZwqOwHBxBWr4B6q+lQdAq5UW0UGNUktIhPBX9HgykEQ9kJ4HrTnRfkcBWEas2hmDR2/d1ImAzG+qOsbp2KePGTaS3CGVUYUbwdpnTXW/K/gvRA0NtbcrQGglnz7/0JjSrEcsX/DRpnJjzNOglGUrrTC/6MiOjIQ0v4DBaVj3ij6l/Psn4eBycOqIiEf4woYxCVTTKi5CGmjPnnrJ939pL5OmjlKeC9z/R+Tj9UJrxZB063HCospN9GktoundK2Y7LeFVSzG+blboiVBsh/x0nbw4LyJZJQ3/wCnbyYl3Ui46MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9ef85b404c04cdd44b88eaf1b69a0bc4/ba381/subscription-2.webp 200w,\n/static/9ef85b404c04cdd44b88eaf1b69a0bc4/7f61c/subscription-2.webp 400w,\n/static/9ef85b404c04cdd44b88eaf1b69a0bc4/d00b9/subscription-2.webp 800w,\n/static/9ef85b404c04cdd44b88eaf1b69a0bc4/92f8c/subscription-2.webp 1200w,\n/static/9ef85b404c04cdd44b88eaf1b69a0bc4/fad48/subscription-2.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9ef85b404c04cdd44b88eaf1b69a0bc4/772e8/subscription-2.png 200w,\n/static/9ef85b404c04cdd44b88eaf1b69a0bc4/e17e5/subscription-2.png 400w,\n/static/9ef85b404c04cdd44b88eaf1b69a0bc4/5a190/subscription-2.png 800w,\n/static/9ef85b404c04cdd44b88eaf1b69a0bc4/c1b63/subscription-2.png 1200w,\n/static/9ef85b404c04cdd44b88eaf1b69a0bc4/29007/subscription-2.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9ef85b404c04cdd44b88eaf1b69a0bc4/5a190/subscription-2.png\"\n            alt=\"subscription-2\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>登録用のMutaitonを発行してみましょう。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17d5a510f467c6c8dad5798d3b834ea1/29007/subscription-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAABcRAAAXEQHKJvM/AAACTUlEQVR42n3Q20/TYBjH8d4KQqZ09LS26973He3b7j31bbdu7YYsQRAwxHAw4hJvvFSvvJUrNR5iTBDDQSHBcOsdI/53hhGNp/jkk+fue/NTvp0Nz8+Hw/Ph2dlwZWW5EUWc/e845xvr64PBYGvrnrJ/eHxwfLL36ejL6ene0cnHw6Pdg88f9g//trN3cOndzu7zV29evn6rVOqxipgJcTPjIOkbgbzmBuO6O667Y5ozprtXLhnuRAVctWoTFpi04fWqr3q+AkTukTaMu5Wo5ZGsxjqVMDUDaQbSCtNqkABfAj9GYULiIuJ5QxRUdnnSgzRXtCDVw3Qa0mlIyyMaYmVA7DB9tv1iud2PG1KQDg2bBKc/JNSXqcwUB0ufZ8BvwZmmOyNNxDXENMi0GbGwtJbwXJN9u7VgxT2Tdw1amKywRKH7naWnG0rFF7Yfa0gYiBv1UTmiQmrVKMOpJfvV9KbT7LrtWSfpOaJwaG43Op25nqIHQotifRRMj74+UkYM4ERELUvMOuKGTQub5RfohQrLBZKKgWMtiqcAUSFREStBOg5ICZApRO1AiqhlssIhncvmpwrNZZgqGuK1IOmmvZVifq2YfzK3eHxn82F/yUSM1RmPWhYtXJo7v7NpLnGqlABp8vbXu/ffbw4eLa5u3157fGuViZx4+IFdDxuZxrsWu9jpVwYrYpwqZUhdP15IunmcM5rFrFP2RalGVEidIMlwGjSy8F+aOFUMRDVIphCxsFRBNGn75Soue1it4mkvrHkYVoM/gGrgg8iD5Dspsaqo1F3dSQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/17d5a510f467c6c8dad5798d3b834ea1/ba381/subscription-3.webp 200w,\n/static/17d5a510f467c6c8dad5798d3b834ea1/7f61c/subscription-3.webp 400w,\n/static/17d5a510f467c6c8dad5798d3b834ea1/d00b9/subscription-3.webp 800w,\n/static/17d5a510f467c6c8dad5798d3b834ea1/92f8c/subscription-3.webp 1200w,\n/static/17d5a510f467c6c8dad5798d3b834ea1/fad48/subscription-3.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/17d5a510f467c6c8dad5798d3b834ea1/772e8/subscription-3.png 200w,\n/static/17d5a510f467c6c8dad5798d3b834ea1/e17e5/subscription-3.png 400w,\n/static/17d5a510f467c6c8dad5798d3b834ea1/5a190/subscription-3.png 800w,\n/static/17d5a510f467c6c8dad5798d3b834ea1/c1b63/subscription-3.png 1200w,\n/static/17d5a510f467c6c8dad5798d3b834ea1/29007/subscription-3.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/17d5a510f467c6c8dad5798d3b834ea1/5a190/subscription-3.png\"\n            alt=\"subscription-3\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>これで、元のタブに戻ると、登録された情報がレスポンスで返ってきていれば成功です。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8a7b4d00084c234099279e9c1346a510/29007/subscription-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAABcRAAAXEQHKJvM/AAACXUlEQVR42n3QS08TURgG4FkKYgwpzH2mM+3cTzvnnJkzZwqdKS01XCrRAoKtSNWNGxNjiGtNjFG8LLBRaUGb+BdcuKDw30xpNBIS3zx5d1++5GXOTk5Oh8Oz09PhcLi5sRFgTKP/hVLabrcePXzQ6ewyvf6gN/jxuX98NBh0e8fdw3738OjT1/5lB1965w4/HHRfvdl//fYd48FaNkgFC2qWw9thRgfXFWeSVSdZdYLLTrDqlTFOnRJzV0V9Ssxdk/LTWTujOUwOJ7o/ZwSpUijl0HwOlWVAJZdILpGdUHeJMRJagPphpYhTP6jAcAFHVQMmDO9SvljibMwacIwz0YyBNBv/2t3ZCuYDSEO/jEDJ9+gfkW8TSucYsRCJOBbsgLfwOSRYmDMRb6E2TeJiiSU3lNKKRKoirggwFVEqBSnvlBvPtxjOxTwIeQNxJhRMdP4WsibKmGjaJhBQKaxrdFmNK9n5qhpVVJyqMFGK5fnaAmMWYs0lvI11EAlOqDkB8Es6iEQDruQAAbEUVNWgpsBUgYmCklHDREZJaBLm2Wpzf337ZXP7/Wb7Y2v322broN15vHzLdcP7skkLsYBS1S+Pb/6SYUIAZVqLjTvp0l6j+XS1+fPuve/bOyRIMnk4a+FZj+JCLME0CxP1IgUmxKPMi7X1Tr3RWWw8Wbndqt/cW9vAfmk677MmMuwQgphDqYRGO/1LQGnoUSbvEtUJJSeU7YCzAtkORHu09qwBNTdaojUS10Fx7rLYowxv+rxRlB2sF6lg+BnNndG8MTYH8rpnaq5xUV5znXxBN/3fMeqxJLg9JKIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8a7b4d00084c234099279e9c1346a510/ba381/subscription-4.webp 200w,\n/static/8a7b4d00084c234099279e9c1346a510/7f61c/subscription-4.webp 400w,\n/static/8a7b4d00084c234099279e9c1346a510/d00b9/subscription-4.webp 800w,\n/static/8a7b4d00084c234099279e9c1346a510/92f8c/subscription-4.webp 1200w,\n/static/8a7b4d00084c234099279e9c1346a510/fad48/subscription-4.webp 1600w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8a7b4d00084c234099279e9c1346a510/772e8/subscription-4.png 200w,\n/static/8a7b4d00084c234099279e9c1346a510/e17e5/subscription-4.png 400w,\n/static/8a7b4d00084c234099279e9c1346a510/5a190/subscription-4.png 800w,\n/static/8a7b4d00084c234099279e9c1346a510/c1b63/subscription-4.png 1200w,\n/static/8a7b4d00084c234099279e9c1346a510/29007/subscription-4.png 1600w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8a7b4d00084c234099279e9c1346a510/5a190/subscription-4.png\"\n            alt=\"subscription-4\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br/>\n<p>以上でSubscriptionの動作確認は終了です。\n今回は紹介しませんが、<strong>userUpdated</strong>と<strong>userDeleted</strong>も同様の方法で動作確認できるのでやってみてください。</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回はNode製GraphQLサーバー「Graphpack」の使い方について紹介しました。\n上記で紹介した通り非常に簡単ですので、「とりあえずGraphQLサーバーを立ててみたい！」という方はGraphpackを検討してみてはいかがでしょうか🍅</p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://dev.to/leonardomso/a-beginners-guide-to-graphql-3kjj\">A Beginner’s Guide to GraphQL - DEV Community 👩‍💻👨‍💻</a>\n<ul>\n<li>GraphpackでQuery、Mutationの実装方法を紹介している記事です。</li>\n</ul>\n</li>\n<li><a href=\"https://steemit.com/utopian-io/@richardbmx/logo-design-for-graphpack-approved-and-used-in-the-project\">Logo design for Graphpack | Steemit</a>\n<ul>\n<li>Gpraphpackロゴ作成の舞台裏です。</li>\n</ul>\n</li>\n</ul>","excerpt":"なにこれ 「とりあえずクライアント側と同じJavaScriptで手っ取り早くGraphQLサーバー立てたい！」 このようなユースケースにGraphpackはピッタリです。\n設定いらずのNode製GraphQLサーバーで 「GraphQLのスキーマとリゾルバーを定義するだけでOK…","frontmatter":{"slug":"/graphpack-graphql-zero-config-server","title":"設定いらずのNode製GraphQLサーバー「Graphpack」の使い方 / Query, Mutation, Subscriptionを試す","date":"2019-01-23T19:50:00.000+09:00","tags":["GraphQL","Graphpack"],"keywords":["GraphQL"],"thumbnail":"thumbnail/2019/01/graphpack-graphql-zero-config-server.png","category":null}}],"tag":"Graphpack","tagCounts":[{"text":"Gatsby","size":26},{"text":"React","size":8},{"text":"Vue.js","size":8},{"text":"GraphQL","size":6},{"text":"AWS","size":5},{"text":"AppSync","size":5},{"text":"Vuetify","size":5},{"text":"GatsbyPlugin","size":4},{"text":"Netlify","size":3},{"text":"VueI18n","size":3},{"text":"WordCloud","size":3},{"text":"d3.js","size":3},{"text":"d3Cloud","size":3},{"text":"kuromoji.js","size":3},{"text":"mdx-deck","size":3},{"text":"キーボード","size":3},{"text":"データ可視化","size":3},{"text":"勉強会","size":3},{"text":"形態素解析","size":3},{"text":"Apollo Client","size":2},{"text":"AutoHotkey","size":2},{"text":"Cognito","size":2},{"text":"CrossPlatform","size":2},{"text":"LT","size":2},{"text":"Mobile","size":2},{"text":"Node.js","size":2},{"text":"Nuxt.js","size":2},{"text":"ReactNative","size":2},{"text":"SNS","size":2},{"text":"SRE","size":2},{"text":"VeeValidate","size":2},{"text":"code-surfer","size":2},{"text":"gatsby-image","size":2},{"text":"markdown","size":2},{"text":"mdx","size":2},{"text":"スライド","size":2},{"text":"ブログ","size":2},{"text":"プレゼン","size":2},{"text":"作業効率化","size":2},{"text":"読書感想","size":2},{"text":"Amplify","size":1},{"text":"Axios","size":1},{"text":"CSS","size":1},{"text":"CSSModules","size":1},{"text":"CircleCI","size":1},{"text":"Connpass","size":1},{"text":"Cytoscape.js","size":1},{"text":"DynamoDB","size":1},{"text":"Flutter","size":1},{"text":"Fromik","size":1},{"text":"Gatsby theme","size":1},{"text":"Git","size":1},{"text":"GitHub","size":1},{"text":"Github-Pages","size":1},{"text":"Graphpack","size":1},{"text":"Https化","size":1},{"text":"Hugo","size":1},{"text":"Iframely","size":1},{"text":"Ionic","size":1},{"text":"JJUG CCC","size":1},{"text":"JSON-LD","size":1},{"text":"Java","size":1},{"text":"JavaScript","size":1},{"text":"Kotlin","size":1},{"text":"NetlifyForms","size":1},{"text":"OGP","size":1},{"text":"PWA","size":1},{"text":"RPG","size":1},{"text":"RSS","size":1},{"text":"SER","size":1},{"text":"Schema-org","size":1},{"text":"Vim","size":1},{"text":"Vimium","size":1},{"text":"Vuex","size":1},{"text":"Windows","size":1},{"text":"Zapier","size":1},{"text":"clip-path","size":1},{"text":"gatsby-image-sharp","size":1},{"text":"gatsby-plugin-feed","size":1},{"text":"gatsy-image","size":1},{"text":"golang","size":1},{"text":"oEmbed","size":1},{"text":"rehype","size":1},{"text":"remark","size":1},{"text":"serverless","size":1},{"text":"typescript","size":1},{"text":"unified","size":1},{"text":"イベントレポート","size":1},{"text":"カスタムドメイン","size":1},{"text":"デュアルキーボード","size":1},{"text":"パソコン","size":1},{"text":"ランチャー","size":1},{"text":"リンク集","size":1},{"text":"埋め込みコード","size":1},{"text":"肩こり","size":1}]}},"staticQueryHashes":["3868140423","4185443638","467257065"],"slicesMap":{}}